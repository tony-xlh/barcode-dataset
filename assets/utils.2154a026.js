var Bo=Object.defineProperty;var go=(t,e,r)=>e in t?Bo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var zt=(t,e,r)=>(go(t,typeof e!="symbol"?e+"":e,r),r);import{c as B0,h as ii,g as vo}from"./index.db0cda80.js";import{c as Co}from"./QBtn.a31f1403.js";const po={dark:{type:Boolean,default:null}};function _o(t,e){return B0(()=>t.dark===null?e.dark.isActive:t.dark)}const Do={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Wr={xs:2,sm:4,md:8,lg:16,xl:24};var tu=Co({name:"QSeparator",props:{...po,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=vo(),r=_o(t,e.proxy.$q),n=B0(()=>t.vertical===!0?"vertical":"horizontal"),x=B0(()=>` q-separator--${n.value}`),i=B0(()=>t.inset!==!1?`${x.value}-${Do[t.inset]}`:""),o=B0(()=>`q-separator${x.value}${i.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(r.value===!0?" q-separator--dark":"")),s=B0(()=>{const u={};if(t.size!==void 0&&(u[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const B=t.spaced===!0?`${Wr.md}px`:t.spaced in Wr?`${Wr[t.spaced]}px`:t.spaced,C=t.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${C[0]}`]=u[`margin${C[1]}`]=B}return u});return()=>ii("hr",{class:o.value,style:s.value,"aria-orientation":n.value})}});const ru={name:String};function nu(t={}){return(e,r,n)=>{e[r](ii("input",{class:"hidden"+(n||""),...t.value}))}}function xu(t){return B0(()=>t.name||t.for)}var or=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ar(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oi={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,x,i){function o(B,C){if(!x[B]){if(!n[B]){var p=typeof ar=="function"&&ar;if(!C&&p)return p(B,!0);if(s)return s(B,!0);var m=new Error("Cannot find module '"+B+"'");throw m.code="MODULE_NOT_FOUND",m}var w=x[B]={exports:{}};n[B][0].call(w.exports,function(b){var R=n[B][1][b];return o(R||b)},w,w.exports,r,n,x,i)}return x[B].exports}for(var s=typeof ar=="function"&&ar,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(r,n,x){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,s;if(o){var u=0,B=new o(b),C=i.document.createTextNode("");B.observe(C,{characterData:!0}),s=function(){C.data=u=++u%2}}else if(!i.setImmediate&&typeof i.MessageChannel!="undefined"){var p=new i.MessageChannel;p.port1.onmessage=b,s=function(){p.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?s=function(){var L=i.document.createElement("script");L.onreadystatechange=function(){b(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},i.document.documentElement.appendChild(L)}:s=function(){setTimeout(b,0)};var m,w=[];function b(){m=!0;for(var L,X,k=w.length;k;){for(X=w,w=[],L=-1;++L<k;)X[L]();k=w.length}m=!1}n.exports=R;function R(L){w.push(L)===1&&!m&&s()}}).call(this,typeof or!="undefined"?or:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(r,n,x){var i=r(1);function o(){}var s={},u=["REJECTED"],B=["FULFILLED"],C=["PENDING"];n.exports=p;function p(Z){if(typeof Z!="function")throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,Z!==o&&R(this,Z)}p.prototype.catch=function(Z){return this.then(null,Z)},p.prototype.then=function(Z,ce){if(typeof Z!="function"&&this.state===B||typeof ce!="function"&&this.state===u)return this;var ue=new this.constructor(o);if(this.state!==C){var D=this.state===B?Z:ce;w(ue,D,this.outcome)}else this.queue.push(new m(ue,Z,ce));return ue};function m(Z,ce,ue){this.promise=Z,typeof ce=="function"&&(this.onFulfilled=ce,this.callFulfilled=this.otherCallFulfilled),typeof ue=="function"&&(this.onRejected=ue,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(Z){s.resolve(this.promise,Z)},m.prototype.otherCallFulfilled=function(Z){w(this.promise,this.onFulfilled,Z)},m.prototype.callRejected=function(Z){s.reject(this.promise,Z)},m.prototype.otherCallRejected=function(Z){w(this.promise,this.onRejected,Z)};function w(Z,ce,ue){i(function(){var D;try{D=ce(ue)}catch(Se){return s.reject(Z,Se)}D===Z?s.reject(Z,new TypeError("Cannot resolve promise with itself")):s.resolve(Z,D)})}s.resolve=function(Z,ce){var ue=L(b,ce);if(ue.status==="error")return s.reject(Z,ue.value);var D=ue.value;if(D)R(Z,D);else{Z.state=B,Z.outcome=ce;for(var Se=-1,Ie=Z.queue.length;++Se<Ie;)Z.queue[Se].callFulfilled(ce)}return Z},s.reject=function(Z,ce){Z.state=u,Z.outcome=ce;for(var ue=-1,D=Z.queue.length;++ue<D;)Z.queue[ue].callRejected(ce);return Z};function b(Z){var ce=Z&&Z.then;if(Z&&(typeof Z=="object"||typeof Z=="function")&&typeof ce=="function")return function(){ce.apply(Z,arguments)}}function R(Z,ce){var ue=!1;function D(h){ue||(ue=!0,s.reject(Z,h))}function Se(h){ue||(ue=!0,s.resolve(Z,h))}function Ie(){ce(Se,D)}var ke=L(Ie);ke.status==="error"&&D(ke.value)}function L(Z,ce){var ue={};try{ue.value=Z(ce),ue.status="success"}catch(D){ue.status="error",ue.value=D}return ue}p.resolve=X;function X(Z){return Z instanceof this?Z:s.resolve(new this(o),Z)}p.reject=k;function k(Z){var ce=new this(o);return s.reject(ce,Z)}p.all=J;function J(Z){var ce=this;if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ue=Z.length,D=!1;if(!ue)return this.resolve([]);for(var Se=new Array(ue),Ie=0,ke=-1,h=new this(o);++ke<ue;)c(Z[ke],ke);return h;function c(l,A){ce.resolve(l).then(a,function(E){D||(D=!0,s.reject(h,E))});function a(E){Se[A]=E,++Ie===ue&&!D&&(D=!0,s.resolve(h,Se))}}}p.race=re;function re(Z){var ce=this;if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ue=Z.length,D=!1;if(!ue)return this.resolve([]);for(var Se=-1,Ie=new this(o);++Se<ue;)ke(Z[Se]);return Ie;function ke(h){ce.resolve(h).then(function(c){D||(D=!0,s.resolve(Ie,c))},function(c){D||(D=!0,s.reject(Ie,c))})}}},{1:1}],3:[function(r,n,x){(function(i){typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof or!="undefined"?or:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(r,n,x){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};function o(O,H){if(!(O instanceof H))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var u=s();function B(){try{if(!u||!u.open)return!1;var O=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),H=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!O||H)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function C(O,H){O=O||[],H=H||{};try{return new Blob(O,H)}catch(K){if(K.name!=="TypeError")throw K;for(var M=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,$=new M,ee=0;ee<O.length;ee+=1)$.append(O[ee]);return $.getBlob(H.type)}}typeof Promise=="undefined"&&r(3);var p=Promise;function m(O,H){H&&O.then(function(M){H(null,M)},function(M){H(M)})}function w(O,H,M){typeof H=="function"&&O.then(H),typeof M=="function"&&O.catch(M)}function b(O){return typeof O!="string"&&(console.warn(O+" used as a key, but it is not a string."),O=String(O)),O}function R(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var L="local-forage-detect-blob-support",X=void 0,k={},J=Object.prototype.toString,re="readonly",Z="readwrite";function ce(O){for(var H=O.length,M=new ArrayBuffer(H),$=new Uint8Array(M),ee=0;ee<H;ee++)$[ee]=O.charCodeAt(ee);return M}function ue(O){return new p(function(H){var M=O.transaction(L,Z),$=C([""]);M.objectStore(L).put($,"key"),M.onabort=function(ee){ee.preventDefault(),ee.stopPropagation(),H(!1)},M.oncomplete=function(){var ee=navigator.userAgent.match(/Chrome\/(\d+)/),K=navigator.userAgent.match(/Edge\//);H(K||!ee||parseInt(ee[1],10)>=43)}}).catch(function(){return!1})}function D(O){return typeof X=="boolean"?p.resolve(X):ue(O).then(function(H){return X=H,X})}function Se(O){var H=k[O.name],M={};M.promise=new p(function($,ee){M.resolve=$,M.reject=ee}),H.deferredOperations.push(M),H.dbReady?H.dbReady=H.dbReady.then(function(){return M.promise}):H.dbReady=M.promise}function Ie(O){var H=k[O.name],M=H.deferredOperations.pop();if(M)return M.resolve(),M.promise}function ke(O,H){var M=k[O.name],$=M.deferredOperations.pop();if($)return $.reject(H),$.promise}function h(O,H){return new p(function(M,$){if(k[O.name]=k[O.name]||_(),O.db)if(H)Se(O),O.db.close();else return M(O.db);var ee=[O.name];H&&ee.push(O.version);var K=u.open.apply(u,ee);H&&(K.onupgradeneeded=function(he){var de=K.result;try{de.createObjectStore(O.storeName),he.oldVersion<=1&&de.createObjectStore(L)}catch(ge){if(ge.name==="ConstraintError")console.warn('The database "'+O.name+'" has been upgraded from version '+he.oldVersion+" to version "+he.newVersion+', but the storage "'+O.storeName+'" already exists.');else throw ge}}),K.onerror=function(he){he.preventDefault(),$(K.error)},K.onsuccess=function(){var he=K.result;he.onversionchange=function(de){de.target.close()},M(he),Ie(O)}})}function c(O){return h(O,!1)}function l(O){return h(O,!0)}function A(O,H){if(!O.db)return!0;var M=!O.db.objectStoreNames.contains(O.storeName),$=O.version<O.db.version,ee=O.version>O.db.version;if($&&(O.version!==H&&console.warn('The database "'+O.name+`" can't be downgraded from version `+O.db.version+" to version "+O.version+"."),O.version=O.db.version),ee||M){if(M){var K=O.db.version+1;K>O.version&&(O.version=K)}return!0}return!1}function a(O){return new p(function(H,M){var $=new FileReader;$.onerror=M,$.onloadend=function(ee){var K=btoa(ee.target.result||"");H({__local_forage_encoded_blob:!0,data:K,type:O.type})},$.readAsBinaryString(O)})}function E(O){var H=ce(atob(O.data));return C([H],{type:O.type})}function f(O){return O&&O.__local_forage_encoded_blob}function v(O){var H=this,M=H._initReady().then(function(){var $=k[H._dbInfo.name];if($&&$.dbReady)return $.dbReady});return w(M,O,O),M}function d(O){Se(O);for(var H=k[O.name],M=H.forages,$=0;$<M.length;$++){var ee=M[$];ee._dbInfo.db&&(ee._dbInfo.db.close(),ee._dbInfo.db=null)}return O.db=null,c(O).then(function(K){return O.db=K,A(O)?l(O):K}).then(function(K){O.db=H.db=K;for(var he=0;he<M.length;he++)M[he]._dbInfo.db=K}).catch(function(K){throw ke(O,K),K})}function g(O,H,M,$){$===void 0&&($=1);try{var ee=O.db.transaction(O.storeName,H);M(null,ee)}catch(K){if($>0&&(!O.db||K.name==="InvalidStateError"||K.name==="NotFoundError"))return p.resolve().then(function(){if(!O.db||K.name==="NotFoundError"&&!O.db.objectStoreNames.contains(O.storeName)&&O.version<=O.db.version)return O.db&&(O.version=O.db.version+1),l(O)}).then(function(){return d(O).then(function(){g(O,H,M,$-1)})}).catch(M);M(K)}}function _(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(O){var H=this,M={db:null};if(O)for(var $ in O)M[$]=O[$];var ee=k[M.name];ee||(ee=_(),k[M.name]=ee),ee.forages.push(H),H._initReady||(H._initReady=H.ready,H.ready=v);var K=[];function he(){return p.resolve()}for(var de=0;de<ee.forages.length;de++){var ge=ee.forages[de];ge!==H&&K.push(ge._initReady().catch(he))}var Ce=ee.forages.slice(0);return p.all(K).then(function(){return M.db=ee.db,c(M)}).then(function(me){return M.db=me,A(M,H._defaultConfig.version)?l(M):me}).then(function(me){M.db=ee.db=me,H._dbInfo=M;for(var Oe=0;Oe<Ce.length;Oe++){var je=Ce[Oe];je!==H&&(je._dbInfo.db=M.db,je._dbInfo.version=M.version)}})}function y(O,H){var M=this;O=b(O);var $=new p(function(ee,K){M.ready().then(function(){g(M._dbInfo,re,function(he,de){if(he)return K(he);try{var ge=de.objectStore(M._dbInfo.storeName),Ce=ge.get(O);Ce.onsuccess=function(){var me=Ce.result;me===void 0&&(me=null),f(me)&&(me=E(me)),ee(me)},Ce.onerror=function(){K(Ce.error)}}catch(me){K(me)}})}).catch(K)});return m($,H),$}function T(O,H){var M=this,$=new p(function(ee,K){M.ready().then(function(){g(M._dbInfo,re,function(he,de){if(he)return K(he);try{var ge=de.objectStore(M._dbInfo.storeName),Ce=ge.openCursor(),me=1;Ce.onsuccess=function(){var Oe=Ce.result;if(Oe){var je=Oe.value;f(je)&&(je=E(je));var Ye=O(je,Oe.key,me++);Ye!==void 0?ee(Ye):Oe.continue()}else ee()},Ce.onerror=function(){K(Ce.error)}}catch(Oe){K(Oe)}})}).catch(K)});return m($,H),$}function S(O,H,M){var $=this;O=b(O);var ee=new p(function(K,he){var de;$.ready().then(function(){return de=$._dbInfo,J.call(H)==="[object Blob]"?D(de.db).then(function(ge){return ge?H:a(H)}):H}).then(function(ge){g($._dbInfo,Z,function(Ce,me){if(Ce)return he(Ce);try{var Oe=me.objectStore($._dbInfo.storeName);ge===null&&(ge=void 0);var je=Oe.put(ge,O);me.oncomplete=function(){ge===void 0&&(ge=null),K(ge)},me.onabort=me.onerror=function(){var Ye=je.error?je.error:je.transaction.error;he(Ye)}}catch(Ye){he(Ye)}})}).catch(he)});return m(ee,M),ee}function I(O,H){var M=this;O=b(O);var $=new p(function(ee,K){M.ready().then(function(){g(M._dbInfo,Z,function(he,de){if(he)return K(he);try{var ge=de.objectStore(M._dbInfo.storeName),Ce=ge.delete(O);de.oncomplete=function(){ee()},de.onerror=function(){K(Ce.error)},de.onabort=function(){var me=Ce.error?Ce.error:Ce.transaction.error;K(me)}}catch(me){K(me)}})}).catch(K)});return m($,H),$}function N(O){var H=this,M=new p(function($,ee){H.ready().then(function(){g(H._dbInfo,Z,function(K,he){if(K)return ee(K);try{var de=he.objectStore(H._dbInfo.storeName),ge=de.clear();he.oncomplete=function(){$()},he.onabort=he.onerror=function(){var Ce=ge.error?ge.error:ge.transaction.error;ee(Ce)}}catch(Ce){ee(Ce)}})}).catch(ee)});return m(M,O),M}function W(O){var H=this,M=new p(function($,ee){H.ready().then(function(){g(H._dbInfo,re,function(K,he){if(K)return ee(K);try{var de=he.objectStore(H._dbInfo.storeName),ge=de.count();ge.onsuccess=function(){$(ge.result)},ge.onerror=function(){ee(ge.error)}}catch(Ce){ee(Ce)}})}).catch(ee)});return m(M,O),M}function z(O,H){var M=this,$=new p(function(ee,K){if(O<0){ee(null);return}M.ready().then(function(){g(M._dbInfo,re,function(he,de){if(he)return K(he);try{var ge=de.objectStore(M._dbInfo.storeName),Ce=!1,me=ge.openKeyCursor();me.onsuccess=function(){var Oe=me.result;if(!Oe){ee(null);return}O===0||Ce?ee(Oe.key):(Ce=!0,Oe.advance(O))},me.onerror=function(){K(me.error)}}catch(Oe){K(Oe)}})}).catch(K)});return m($,H),$}function se(O){var H=this,M=new p(function($,ee){H.ready().then(function(){g(H._dbInfo,re,function(K,he){if(K)return ee(K);try{var de=he.objectStore(H._dbInfo.storeName),ge=de.openKeyCursor(),Ce=[];ge.onsuccess=function(){var me=ge.result;if(!me){$(Ce);return}Ce.push(me.key),me.continue()},ge.onerror=function(){ee(ge.error)}}catch(me){ee(me)}})}).catch(ee)});return m(M,O),M}function xe(O,H){H=R.apply(this,arguments);var M=this.config();O=typeof O!="function"&&O||{},O.name||(O.name=O.name||M.name,O.storeName=O.storeName||M.storeName);var $=this,ee;if(!O.name)ee=p.reject("Invalid arguments");else{var K=O.name===M.name&&$._dbInfo.db,he=K?p.resolve($._dbInfo.db):c(O).then(function(de){var ge=k[O.name],Ce=ge.forages;ge.db=de;for(var me=0;me<Ce.length;me++)Ce[me]._dbInfo.db=de;return de});O.storeName?ee=he.then(function(de){if(!!de.objectStoreNames.contains(O.storeName)){var ge=de.version+1;Se(O);var Ce=k[O.name],me=Ce.forages;de.close();for(var Oe=0;Oe<me.length;Oe++){var je=me[Oe];je._dbInfo.db=null,je._dbInfo.version=ge}var Ye=new p(function(Ke,st){var it=u.open(O.name,ge);it.onerror=function(kt){var L0=it.result;L0.close(),st(kt)},it.onupgradeneeded=function(){var kt=it.result;kt.deleteObjectStore(O.storeName)},it.onsuccess=function(){var kt=it.result;kt.close(),Ke(kt)}});return Ye.then(function(Ke){Ce.db=Ke;for(var st=0;st<me.length;st++){var it=me[st];it._dbInfo.db=Ke,Ie(it._dbInfo)}}).catch(function(Ke){throw(ke(O,Ke)||p.resolve()).catch(function(){}),Ke})}}):ee=he.then(function(de){Se(O);var ge=k[O.name],Ce=ge.forages;de.close();for(var me=0;me<Ce.length;me++){var Oe=Ce[me];Oe._dbInfo.db=null}var je=new p(function(Ye,Ke){var st=u.deleteDatabase(O.name);st.onerror=function(){var it=st.result;it&&it.close(),Ke(st.error)},st.onblocked=function(){console.warn('dropInstance blocked for database "'+O.name+'" until all open connections are closed')},st.onsuccess=function(){var it=st.result;it&&it.close(),Ye(it)}});return je.then(function(Ye){ge.db=Ye;for(var Ke=0;Ke<Ce.length;Ke++){var st=Ce[Ke];Ie(st._dbInfo)}}).catch(function(Ye){throw(ke(O,Ye)||p.resolve()).catch(function(){}),Ye})})}return m(ee,H),ee}var te={_driver:"asyncStorage",_initStorage:F,_support:B(),iterate:T,getItem:y,setItem:S,removeItem:I,clear:N,length:W,key:z,keys:se,dropInstance:xe};function j(){return typeof openDatabase=="function"}var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q="~~local_forage_type~",oe=/^~~local_forage_type~([^~]+)~/,ae="__lfsc__:",G=ae.length,V="arbf",Q="blob",Ee="si08",ie="ui08",fe="uic8",De="si16",ve="si32",Be="ur16",_e="ui32",pe="fl32",ye="fl64",Te=G+V.length,we=Object.prototype.toString;function Le(O){var H=O.length*.75,M=O.length,$,ee=0,K,he,de,ge;O[O.length-1]==="="&&(H--,O[O.length-2]==="="&&H--);var Ce=new ArrayBuffer(H),me=new Uint8Array(Ce);for($=0;$<M;$+=4)K=U.indexOf(O[$]),he=U.indexOf(O[$+1]),de=U.indexOf(O[$+2]),ge=U.indexOf(O[$+3]),me[ee++]=K<<2|he>>4,me[ee++]=(he&15)<<4|de>>2,me[ee++]=(de&3)<<6|ge&63;return Ce}function Ve(O){var H=new Uint8Array(O),M="",$;for($=0;$<H.length;$+=3)M+=U[H[$]>>2],M+=U[(H[$]&3)<<4|H[$+1]>>4],M+=U[(H[$+1]&15)<<2|H[$+2]>>6],M+=U[H[$+2]&63];return H.length%3===2?M=M.substring(0,M.length-1)+"=":H.length%3===1&&(M=M.substring(0,M.length-2)+"=="),M}function Tt(O,H){var M="";if(O&&(M=we.call(O)),O&&(M==="[object ArrayBuffer]"||O.buffer&&we.call(O.buffer)==="[object ArrayBuffer]")){var $,ee=ae;O instanceof ArrayBuffer?($=O,ee+=V):($=O.buffer,M==="[object Int8Array]"?ee+=Ee:M==="[object Uint8Array]"?ee+=ie:M==="[object Uint8ClampedArray]"?ee+=fe:M==="[object Int16Array]"?ee+=De:M==="[object Uint16Array]"?ee+=Be:M==="[object Int32Array]"?ee+=ve:M==="[object Uint32Array]"?ee+=_e:M==="[object Float32Array]"?ee+=pe:M==="[object Float64Array]"?ee+=ye:H(new Error("Failed to get type for BinaryArray"))),H(ee+Ve($))}else if(M==="[object Blob]"){var K=new FileReader;K.onload=function(){var he=q+O.type+"~"+Ve(this.result);H(ae+Q+he)},K.readAsArrayBuffer(O)}else try{H(JSON.stringify(O))}catch(he){console.error("Couldn't convert value into a JSON string: ",O),H(null,he)}}function Vt(O){if(O.substring(0,G)!==ae)return JSON.parse(O);var H=O.substring(Te),M=O.substring(G,Te),$;if(M===Q&&oe.test(H)){var ee=H.match(oe);$=ee[1],H=H.substring(ee[0].length)}var K=Le(H);switch(M){case V:return K;case Q:return C([K],{type:$});case Ee:return new Int8Array(K);case ie:return new Uint8Array(K);case fe:return new Uint8ClampedArray(K);case De:return new Int16Array(K);case Be:return new Uint16Array(K);case ve:return new Int32Array(K);case _e:return new Uint32Array(K);case pe:return new Float32Array(K);case ye:return new Float64Array(K);default:throw new Error("Unkown type: "+M)}}var Yt={serialize:Tt,deserialize:Vt,stringToBuffer:Le,bufferToString:Ve};function qe(O,H,M,$){O.executeSql("CREATE TABLE IF NOT EXISTS "+H.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],M,$)}function bt(O){var H=this,M={db:null};if(O)for(var $ in O)M[$]=typeof O[$]!="string"?O[$].toString():O[$];var ee=new p(function(K,he){try{M.db=openDatabase(M.name,String(M.version),M.description,M.size)}catch(de){return he(de)}M.db.transaction(function(de){qe(de,M,function(){H._dbInfo=M,K()},function(ge,Ce){he(Ce)})},he)});return M.serializer=Yt,ee}function It(O,H,M,$,ee,K){O.executeSql(M,$,ee,function(he,de){de.code===de.SYNTAX_ERR?he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[H.storeName],function(ge,Ce){Ce.rows.length?K(ge,de):qe(ge,H,function(){ge.executeSql(M,$,ee,K)},K)},K):K(he,de)},K)}function x0(O,H){var M=this;O=b(O);var $=new p(function(ee,K){M.ready().then(function(){var he=M._dbInfo;he.db.transaction(function(de){It(de,he,"SELECT * FROM "+he.storeName+" WHERE key = ? LIMIT 1",[O],function(ge,Ce){var me=Ce.rows.length?Ce.rows.item(0).value:null;me&&(me=he.serializer.deserialize(me)),ee(me)},function(ge,Ce){K(Ce)})})}).catch(K)});return m($,H),$}function Jt(O,H){var M=this,$=new p(function(ee,K){M.ready().then(function(){var he=M._dbInfo;he.db.transaction(function(de){It(de,he,"SELECT * FROM "+he.storeName,[],function(ge,Ce){for(var me=Ce.rows,Oe=me.length,je=0;je<Oe;je++){var Ye=me.item(je),Ke=Ye.value;if(Ke&&(Ke=he.serializer.deserialize(Ke)),Ke=O(Ke,Ye.key,je+1),Ke!==void 0){ee(Ke);return}}ee()},function(ge,Ce){K(Ce)})})}).catch(K)});return m($,H),$}function $t(O,H,M,$){var ee=this;O=b(O);var K=new p(function(he,de){ee.ready().then(function(){H===void 0&&(H=null);var ge=H,Ce=ee._dbInfo;Ce.serializer.serialize(H,function(me,Oe){Oe?de(Oe):Ce.db.transaction(function(je){It(je,Ce,"INSERT OR REPLACE INTO "+Ce.storeName+" (key, value) VALUES (?, ?)",[O,me],function(){he(ge)},function(Ye,Ke){de(Ke)})},function(je){if(je.code===je.QUOTA_ERR){if($>0){he($t.apply(ee,[O,ge,M,$-1]));return}de(je)}})})}).catch(de)});return m(K,M),K}function xr(O,H,M){return $t.apply(this,[O,H,M,1])}function m0(O,H){var M=this;O=b(O);var $=new p(function(ee,K){M.ready().then(function(){var he=M._dbInfo;he.db.transaction(function(de){It(de,he,"DELETE FROM "+he.storeName+" WHERE key = ?",[O],function(){ee()},function(ge,Ce){K(Ce)})})}).catch(K)});return m($,H),$}function l0(O){var H=this,M=new p(function($,ee){H.ready().then(function(){var K=H._dbInfo;K.db.transaction(function(he){It(he,K,"DELETE FROM "+K.storeName,[],function(){$()},function(de,ge){ee(ge)})})}).catch(ee)});return m(M,O),M}function Ur(O){var H=this,M=new p(function($,ee){H.ready().then(function(){var K=H._dbInfo;K.db.transaction(function(he){It(he,K,"SELECT COUNT(key) as c FROM "+K.storeName,[],function(de,ge){var Ce=ge.rows.item(0).c;$(Ce)},function(de,ge){ee(ge)})})}).catch(ee)});return m(M,O),M}function M0(O,H){var M=this,$=new p(function(ee,K){M.ready().then(function(){var he=M._dbInfo;he.db.transaction(function(de){It(de,he,"SELECT key FROM "+he.storeName+" WHERE id = ? LIMIT 1",[O+1],function(ge,Ce){var me=Ce.rows.length?Ce.rows.item(0).key:null;ee(me)},function(ge,Ce){K(Ce)})})}).catch(K)});return m($,H),$}function u0(O){var H=this,M=new p(function($,ee){H.ready().then(function(){var K=H._dbInfo;K.db.transaction(function(he){It(he,K,"SELECT key FROM "+K.storeName,[],function(de,ge){for(var Ce=[],me=0;me<ge.rows.length;me++)Ce.push(ge.rows.item(me).key);$(Ce)},function(de,ge){ee(ge)})})}).catch(ee)});return m(M,O),M}function Hi(O){return new p(function(H,M){O.transaction(function($){$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ee,K){for(var he=[],de=0;de<K.rows.length;de++)he.push(K.rows.item(de).name);H({db:O,storeNames:he})},function(ee,K){M(K)})},function($){M($)})})}function Wi(O,H){H=R.apply(this,arguments);var M=this.config();O=typeof O!="function"&&O||{},O.name||(O.name=O.name||M.name,O.storeName=O.storeName||M.storeName);var $=this,ee;return O.name?ee=new p(function(K){var he;O.name===M.name?he=$._dbInfo.db:he=openDatabase(O.name,"","",0),O.storeName?K({db:he,storeNames:[O.storeName]}):K(Hi(he))}).then(function(K){return new p(function(he,de){K.db.transaction(function(ge){function Ce(Ye){return new p(function(Ke,st){ge.executeSql("DROP TABLE IF EXISTS "+Ye,[],function(){Ke()},function(it,kt){st(kt)})})}for(var me=[],Oe=0,je=K.storeNames.length;Oe<je;Oe++)me.push(Ce(K.storeNames[Oe]));p.all(me).then(function(){he()}).catch(function(Ye){de(Ye)})},function(ge){de(ge)})})}):ee=p.reject("Invalid arguments"),m(ee,H),ee}var Xi={_driver:"webSQLStorage",_initStorage:bt,_support:j(),iterate:Jt,getItem:x0,setItem:xr,removeItem:m0,clear:l0,length:Ur,key:M0,keys:u0,dropInstance:Wi};function Yi(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Nn(O,H){var M=O.name+"/";return O.storeName!==H.storeName&&(M+=O.storeName+"/"),M}function zi(){var O="_localforage_support_test";try{return localStorage.setItem(O,!0),localStorage.removeItem(O),!1}catch{return!0}}function Ki(){return!zi()||localStorage.length>0}function Zi(O){var H=this,M={};if(O)for(var $ in O)M[$]=O[$];return M.keyPrefix=Nn(O,H._defaultConfig),Ki()?(H._dbInfo=M,M.serializer=Yt,p.resolve()):p.reject()}function Ji(O){var H=this,M=H.ready().then(function(){for(var $=H._dbInfo.keyPrefix,ee=localStorage.length-1;ee>=0;ee--){var K=localStorage.key(ee);K.indexOf($)===0&&localStorage.removeItem(K)}});return m(M,O),M}function $i(O,H){var M=this;O=b(O);var $=M.ready().then(function(){var ee=M._dbInfo,K=localStorage.getItem(ee.keyPrefix+O);return K&&(K=ee.serializer.deserialize(K)),K});return m($,H),$}function qi(O,H){var M=this,$=M.ready().then(function(){for(var ee=M._dbInfo,K=ee.keyPrefix,he=K.length,de=localStorage.length,ge=1,Ce=0;Ce<de;Ce++){var me=localStorage.key(Ce);if(me.indexOf(K)===0){var Oe=localStorage.getItem(me);if(Oe&&(Oe=ee.serializer.deserialize(Oe)),Oe=O(Oe,me.substring(he),ge++),Oe!==void 0)return Oe}}});return m($,H),$}function Qi(O,H){var M=this,$=M.ready().then(function(){var ee=M._dbInfo,K;try{K=localStorage.key(O)}catch{K=null}return K&&(K=K.substring(ee.keyPrefix.length)),K});return m($,H),$}function eo(O){var H=this,M=H.ready().then(function(){for(var $=H._dbInfo,ee=localStorage.length,K=[],he=0;he<ee;he++){var de=localStorage.key(he);de.indexOf($.keyPrefix)===0&&K.push(de.substring($.keyPrefix.length))}return K});return m(M,O),M}function to(O){var H=this,M=H.keys().then(function($){return $.length});return m(M,O),M}function ro(O,H){var M=this;O=b(O);var $=M.ready().then(function(){var ee=M._dbInfo;localStorage.removeItem(ee.keyPrefix+O)});return m($,H),$}function no(O,H,M){var $=this;O=b(O);var ee=$.ready().then(function(){H===void 0&&(H=null);var K=H;return new p(function(he,de){var ge=$._dbInfo;ge.serializer.serialize(H,function(Ce,me){if(me)de(me);else try{localStorage.setItem(ge.keyPrefix+O,Ce),he(K)}catch(Oe){(Oe.name==="QuotaExceededError"||Oe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&de(Oe),de(Oe)}})})});return m(ee,M),ee}function xo(O,H){if(H=R.apply(this,arguments),O=typeof O!="function"&&O||{},!O.name){var M=this.config();O.name=O.name||M.name,O.storeName=O.storeName||M.storeName}var $=this,ee;return O.name?ee=new p(function(K){O.storeName?K(Nn(O,$._defaultConfig)):K(O.name+"/")}).then(function(K){for(var he=localStorage.length-1;he>=0;he--){var de=localStorage.key(he);de.indexOf(K)===0&&localStorage.removeItem(de)}}):ee=p.reject("Invalid arguments"),m(ee,H),ee}var io={_driver:"localStorageWrapper",_initStorage:Zi,_support:Yi(),iterate:qi,getItem:$i,setItem:no,removeItem:ro,clear:Ji,length:to,key:Qi,keys:eo,dropInstance:xo},oo=function(H,M){return H===M||typeof H=="number"&&typeof M=="number"&&isNaN(H)&&isNaN(M)},ao=function(H,M){for(var $=H.length,ee=0;ee<$;){if(oo(H[ee],M))return!0;ee++}return!1},Ln=Array.isArray||function(O){return Object.prototype.toString.call(O)==="[object Array]"},N0={},kn={},F0={INDEXEDDB:te,WEBSQL:Xi,LOCALSTORAGE:io},so=[F0.INDEXEDDB._driver,F0.WEBSQL._driver,F0.LOCALSTORAGE._driver],ir=["dropInstance"],jr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ir),Eo={description:"",driver:so.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function co(O,H){O[H]=function(){var M=arguments;return O.ready().then(function(){return O[H].apply(O,M)})}}function Vr(){for(var O=1;O<arguments.length;O++){var H=arguments[O];if(H)for(var M in H)H.hasOwnProperty(M)&&(Ln(H[M])?arguments[0][M]=H[M].slice():arguments[0][M]=H[M])}return arguments[0]}var lo=function(){function O(H){o(this,O);for(var M in F0)if(F0.hasOwnProperty(M)){var $=F0[M],ee=$._driver;this[M]=ee,N0[ee]||this.defineDriver($)}this._defaultConfig=Vr({},Eo),this._config=Vr({},this._defaultConfig,H),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return O.prototype.config=function(M){if((typeof M=="undefined"?"undefined":i(M))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $ in M){if($==="storeName"&&(M[$]=M[$].replace(/\W/g,"_")),$==="version"&&typeof M[$]!="number")return new Error("Database version must be a number.");this._config[$]=M[$]}return"driver"in M&&M.driver?this.setDriver(this._config.driver):!0}else return typeof M=="string"?this._config[M]:this._config},O.prototype.defineDriver=function(M,$,ee){var K=new p(function(he,de){try{var ge=M._driver,Ce=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!M._driver){de(Ce);return}for(var me=jr.concat("_initStorage"),Oe=0,je=me.length;Oe<je;Oe++){var Ye=me[Oe],Ke=!ao(ir,Ye);if((Ke||M[Ye])&&typeof M[Ye]!="function"){de(Ce);return}}var st=function(){for(var L0=function(fo){return function(){var Ao=new Error("Method "+fo+" is not implemented by the current driver"),Un=p.reject(Ao);return m(Un,arguments[arguments.length-1]),Un}},Gr=0,ho=ir.length;Gr<ho;Gr++){var Hr=ir[Gr];M[Hr]||(M[Hr]=L0(Hr))}};st();var it=function(L0){N0[ge]&&console.info("Redefining LocalForage driver: "+ge),N0[ge]=M,kn[ge]=L0,he()};"_support"in M?M._support&&typeof M._support=="function"?M._support().then(it,de):it(!!M._support):it(!0)}catch(kt){de(kt)}});return w(K,$,ee),K},O.prototype.driver=function(){return this._driver||null},O.prototype.getDriver=function(M,$,ee){var K=N0[M]?p.resolve(N0[M]):p.reject(new Error("Driver not found."));return w(K,$,ee),K},O.prototype.getSerializer=function(M){var $=p.resolve(Yt);return w($,M),$},O.prototype.ready=function(M){var $=this,ee=$._driverSet.then(function(){return $._ready===null&&($._ready=$._initDriver()),$._ready});return w(ee,M,M),ee},O.prototype.setDriver=function(M,$,ee){var K=this;Ln(M)||(M=[M]);var he=this._getSupportedDrivers(M);function de(){K._config.driver=K.driver()}function ge(Oe){return K._extend(Oe),de(),K._ready=K._initStorage(K._config),K._ready}function Ce(Oe){return function(){var je=0;function Ye(){for(;je<Oe.length;){var Ke=Oe[je];return je++,K._dbInfo=null,K._ready=null,K.getDriver(Ke).then(ge).catch(Ye)}de();var st=new Error("No available storage method found.");return K._driverSet=p.reject(st),K._driverSet}return Ye()}}var me=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=me.then(function(){var Oe=he[0];return K._dbInfo=null,K._ready=null,K.getDriver(Oe).then(function(je){K._driver=je._driver,de(),K._wrapLibraryMethodsWithReady(),K._initDriver=Ce(he)})}).catch(function(){de();var Oe=new Error("No available storage method found.");return K._driverSet=p.reject(Oe),K._driverSet}),w(this._driverSet,$,ee),this._driverSet},O.prototype.supports=function(M){return!!kn[M]},O.prototype._extend=function(M){Vr(this,M)},O.prototype._getSupportedDrivers=function(M){for(var $=[],ee=0,K=M.length;ee<K;ee++){var he=M[ee];this.supports(he)&&$.push(he)}return $},O.prototype._wrapLibraryMethodsWithReady=function(){for(var M=0,$=jr.length;M<$;M++)co(this,jr[M])},O.prototype.createInstance=function(M){return new O(M)},O}(),uo=new lo;n.exports=uo},{3:3}]},{},[4])(4)})})(oi);var s0=oi.exports;/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */function mo(t,e,r,n){t.prototype._pos=[0,0,0],t.prototype._orientation=[0,0,-1,0,1,0],t.prototype.stereo=function(i){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var s=o._howls.length-1;s>=0;s--)o._howls[s].stereo(i);return o},t.prototype.pos=function(i,o,s){var u=this;if(!u.ctx||!u.ctx.listener)return u;if(o=typeof o!="number"?u._pos[1]:o,s=typeof s!="number"?u._pos[2]:s,typeof i=="number")u._pos=[i,o,s],typeof u.ctx.listener.positionX!="undefined"?(u.ctx.listener.positionX.setTargetAtTime(u._pos[0],e.ctx.currentTime,.1),u.ctx.listener.positionY.setTargetAtTime(u._pos[1],e.ctx.currentTime,.1),u.ctx.listener.positionZ.setTargetAtTime(u._pos[2],e.ctx.currentTime,.1)):u.ctx.listener.setPosition(u._pos[0],u._pos[1],u._pos[2]);else return u._pos;return u},t.prototype.orientation=function(i,o,s,u,B,C){var p=this;if(!p.ctx||!p.ctx.listener)return p;var m=p._orientation;if(o=typeof o!="number"?m[1]:o,s=typeof s!="number"?m[2]:s,u=typeof u!="number"?m[3]:u,B=typeof B!="number"?m[4]:B,C=typeof C!="number"?m[5]:C,typeof i=="number")p._orientation=[i,o,s,u,B,C],typeof p.ctx.listener.forwardX!="undefined"?(p.ctx.listener.forwardX.setTargetAtTime(i,e.ctx.currentTime,.1),p.ctx.listener.forwardY.setTargetAtTime(o,e.ctx.currentTime,.1),p.ctx.listener.forwardZ.setTargetAtTime(s,e.ctx.currentTime,.1),p.ctx.listener.upX.setTargetAtTime(u,e.ctx.currentTime,.1),p.ctx.listener.upY.setTargetAtTime(B,e.ctx.currentTime,.1),p.ctx.listener.upZ.setTargetAtTime(C,e.ctx.currentTime,.1)):p.ctx.listener.setOrientation(i,o,s,u,B,C);else return m;return p},r.prototype.init=function(i){return function(o){var s=this;return s._orientation=o.orientation||[1,0,0],s._stereo=o.stereo||null,s._pos=o.pos||null,s._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle!="undefined"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle!="undefined"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain!="undefined"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel!="undefined"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance!="undefined"?o.maxDistance:1e4,panningModel:typeof o.panningModel!="undefined"?o.panningModel:"HRTF",refDistance:typeof o.refDistance!="undefined"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor!="undefined"?o.rolloffFactor:1},s._onstereo=o.onstereo?[{fn:o.onstereo}]:[],s._onpos=o.onpos?[{fn:o.onpos}]:[],s._onorientation=o.onorientation?[{fn:o.onorientation}]:[],i.call(this,o)}}(r.prototype.init),r.prototype.stereo=function(i,o){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(i,o)}}),s;var u=typeof e.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof o=="undefined")if(typeof i=="number")s._stereo=i,s._pos=[i,0,0];else return s._stereo;for(var B=s._getSoundIds(o),C=0;C<B.length;C++){var p=s._soundById(B[C]);if(p)if(typeof i=="number")p._stereo=i,p._pos=[i,0,0],p._node&&(p._pannerAttr.panningModel="equalpower",(!p._panner||!p._panner.pan)&&x(p,u),u==="spatial"?typeof p._panner.positionX!="undefined"?(p._panner.positionX.setValueAtTime(i,e.ctx.currentTime),p._panner.positionY.setValueAtTime(0,e.ctx.currentTime),p._panner.positionZ.setValueAtTime(0,e.ctx.currentTime)):p._panner.setPosition(i,0,0):p._panner.pan.setValueAtTime(i,e.ctx.currentTime)),s._emit("stereo",p._id);else return p._stereo}return s},r.prototype.pos=function(i,o,s,u){var B=this;if(!B._webAudio)return B;if(B._state!=="loaded")return B._queue.push({event:"pos",action:function(){B.pos(i,o,s,u)}}),B;if(o=typeof o!="number"?0:o,s=typeof s!="number"?-.5:s,typeof u=="undefined")if(typeof i=="number")B._pos=[i,o,s];else return B._pos;for(var C=B._getSoundIds(u),p=0;p<C.length;p++){var m=B._soundById(C[p]);if(m)if(typeof i=="number")m._pos=[i,o,s],m._node&&((!m._panner||m._panner.pan)&&x(m,"spatial"),typeof m._panner.positionX!="undefined"?(m._panner.positionX.setValueAtTime(i,e.ctx.currentTime),m._panner.positionY.setValueAtTime(o,e.ctx.currentTime),m._panner.positionZ.setValueAtTime(s,e.ctx.currentTime)):m._panner.setPosition(i,o,s)),B._emit("pos",m._id);else return m._pos}return B},r.prototype.orientation=function(i,o,s,u){var B=this;if(!B._webAudio)return B;if(B._state!=="loaded")return B._queue.push({event:"orientation",action:function(){B.orientation(i,o,s,u)}}),B;if(o=typeof o!="number"?B._orientation[1]:o,s=typeof s!="number"?B._orientation[2]:s,typeof u=="undefined")if(typeof i=="number")B._orientation=[i,o,s];else return B._orientation;for(var C=B._getSoundIds(u),p=0;p<C.length;p++){var m=B._soundById(C[p]);if(m)if(typeof i=="number")m._orientation=[i,o,s],m._node&&(m._panner||(m._pos||(m._pos=B._pos||[0,0,-.5]),x(m,"spatial")),typeof m._panner.orientationX!="undefined"?(m._panner.orientationX.setValueAtTime(i,e.ctx.currentTime),m._panner.orientationY.setValueAtTime(o,e.ctx.currentTime),m._panner.orientationZ.setValueAtTime(s,e.ctx.currentTime)):m._panner.setOrientation(i,o,s)),B._emit("orientation",m._id);else return m._orientation}return B},r.prototype.pannerAttr=function(){var i=this,o=arguments,s,u,B;if(!i._webAudio)return i;if(o.length===0)return i._pannerAttr;if(o.length===1)if(typeof o[0]=="object")s=o[0],typeof u=="undefined"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),i._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle!="undefined"?s.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle!="undefined"?s.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain!="undefined"?s.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel!="undefined"?s.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance!="undefined"?s.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof s.pannerAttr.refDistance!="undefined"?s.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor!="undefined"?s.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel!="undefined"?s.pannerAttr.panningModel:i._panningModel});else return B=i._soundById(parseInt(o[0],10)),B?B._pannerAttr:i._pannerAttr;else o.length===2&&(s=o[0],u=parseInt(o[1],10));for(var C=i._getSoundIds(u),p=0;p<C.length;p++)if(B=i._soundById(C[p]),B){var m=B._pannerAttr;m={coneInnerAngle:typeof s.coneInnerAngle!="undefined"?s.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle!="undefined"?s.coneOuterAngle:m.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain!="undefined"?s.coneOuterGain:m.coneOuterGain,distanceModel:typeof s.distanceModel!="undefined"?s.distanceModel:m.distanceModel,maxDistance:typeof s.maxDistance!="undefined"?s.maxDistance:m.maxDistance,refDistance:typeof s.refDistance!="undefined"?s.refDistance:m.refDistance,rolloffFactor:typeof s.rolloffFactor!="undefined"?s.rolloffFactor:m.rolloffFactor,panningModel:typeof s.panningModel!="undefined"?s.panningModel:m.panningModel};var w=B._panner;w||(B._pos||(B._pos=i._pos||[0,0,-.5]),x(B,"spatial"),w=B._panner),w.coneInnerAngle=m.coneInnerAngle,w.coneOuterAngle=m.coneOuterAngle,w.coneOuterGain=m.coneOuterGain,w.distanceModel=m.distanceModel,w.maxDistance=m.maxDistance,w.refDistance=m.refDistance,w.rolloffFactor=m.rolloffFactor,w.panningModel=m.panningModel}return i},n.prototype.init=function(i){return function(){var o=this,s=o._parent;o._orientation=s._orientation,o._stereo=s._stereo,o._pos=s._pos,o._pannerAttr=s._pannerAttr,i.call(this),o._stereo?s.stereo(o._stereo):o._pos&&s.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(n.prototype.init),n.prototype.reset=function(i){return function(){var o=this,s=o._parent;return o._orientation=s._orientation,o._stereo=s._stereo,o._pos=s._pos,o._pannerAttr=s._pannerAttr,o._stereo?s.stereo(o._stereo):o._pos?s.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,s._refreshBuffer(o)),i.call(this)}}(n.prototype.reset);var x=function(i,o){o=o||"spatial",o==="spatial"?(i._panner=e.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX!="undefined"?(i._panner.positionX.setValueAtTime(i._pos[0],e.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],e.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],e.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX!="undefined"?(i._panner.orientationX.setValueAtTime(i._orientation[0],e.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],e.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],e.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=e.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,e.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var Cn=function(){this.init()};Cn.prototype={init:function(){var t=this||Ae;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||Ae;if(t=parseFloat(t),e.ctx||Br(),typeof t!="undefined"&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,Ae.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var n=e._howls[r]._getSoundIds(),x=0;x<n.length;x++){var i=e._howls[r]._soundById(n[x]);i&&i._node&&(i._node.volume=i._volume*t)}return e}return e._volume},mute:function(t){var e=this||Ae;e.ctx||Br(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,Ae.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var n=e._howls[r]._getSoundIds(),x=0;x<n.length;x++){var i=e._howls[r]._soundById(n[x]);i&&i._node&&(i._node.muted=t?!0:i._muted)}return e},stop:function(){for(var t=this||Ae,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||Ae,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close!="undefined"&&(t.ctx.close(),t.ctx=null,Br()),t},codecs:function(t){return(this||Ae)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||Ae;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio!="undefined")try{var e=new Audio;typeof e.oncanplaythrough=="undefined"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||Ae,e=null;try{e=typeof Audio!="undefined"?new Audio:null}catch{return t}if(!e||typeof e.canPlayType!="function")return t;var r=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",x=n.match(/OPR\/([0-6].)/g),i=x&&parseInt(x[0].split("/")[1],10)<33,o=n.indexOf("Safari")!==-1&&n.indexOf("Chrome")===-1,s=n.match(/Version\/(.*?) /),u=o&&s&&parseInt(s[1],10)<15;return t._codecs={mp3:!!(!i&&(r||e.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!u&&e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!u&&e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||Ae;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(r){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch{t.noAudio=!0;break}for(var x=0;x<t._howls.length;x++)if(!t._howls[x]._webAudio)for(var i=t._howls[x]._getSoundIds(),o=0;o<i.length;o++){var s=t._howls[x]._soundById(i[o]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),typeof u.start=="undefined"?u.noteOn(0):u.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var B=0;B<t._howls.length;B++)t._howls[B]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||Ae;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=new Audio().play();return e&&typeof Promise!="undefined"&&(e instanceof Promise||typeof e.then=="function")&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||Ae;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend=="undefined"||!Ae.usingWebAudio)){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio){for(var r=0;r<t._howls[e]._sounds.length;r++)if(!t._howls[e]._sounds[r]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(!!t.autoSuspend){t._suspendTimer=null,t.state="suspending";var n=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(n,n)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume=="undefined"||!Ae.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var Ae=new Cn,pr=function(t){var e=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}e.init(t)};pr.prototype={init:function(t){var e=this;return Ae.ctx||Br(),e._autoplay=t.autoplay||!1,e._format=typeof t.format!="string"?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src=typeof t.src!="string"?t.src:[t.src],e._volume=t.volume!==void 0?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=Ae.usingWebAudio&&!e._html5,typeof Ae.ctx!="undefined"&&Ae.ctx&&Ae.autoUnlock&&Ae._unlockAudio(),Ae._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e._preload!=="none"&&e.load(),e},load:function(){var t=this,e=null;if(Ae.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var n,x;if(t._format&&t._format[r])n=t._format[r];else{if(x=t._src[r],typeof x!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=/^data:audio\/([^;,]+);/i.exec(x),n||(n=/\.([^.]+)$/.exec(x.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&Ae.codecs(n)){e=t._src[r];break}}if(!e){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=e,t._state="loading",window.location.protocol==="https:"&&e.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new _r(t),t._webAudio&&Fo(t),t},play:function(t,e){var r=this,n=null;if(typeof t=="number")n=t,t=null;else{if(typeof t=="string"&&r._state==="loaded"&&!r._sprite[t])return null;if(typeof t=="undefined"&&(t="__default",!r._playLock)){for(var x=0,i=0;i<r._sounds.length;i++)r._sounds[i]._paused&&!r._sounds[i]._ended&&(x++,n=r._sounds[i]._id);x===1?t=null:n=null}}var o=n?r._soundById(n):r._inactiveSound();if(!o)return null;if(n&&!t&&(t=o._sprite||"__default"),r._state!=="loaded"){o._sprite=t,o._ended=!1;var s=o._id;return r._queue.push({event:"play",action:function(){r.play(s)}}),s}if(n&&!o._paused)return e||r._loadQueue("play"),o._id;r._webAudio&&Ae._autoResume();var u=Math.max(0,o._seek>0?o._seek:r._sprite[t][0]/1e3),B=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-u),C=B*1e3/Math.abs(o._rate),p=r._sprite[t][0]/1e3,m=(r._sprite[t][0]+r._sprite[t][1])/1e3;o._sprite=t,o._ended=!1;var w=function(){o._paused=!1,o._seek=u,o._start=p,o._stop=m,o._loop=!!(o._loop||r._sprite[t][2])};if(u>=m){r._ended(o);return}var b=o._node;if(r._webAudio){var R=function(){r._playLock=!1,w(),r._refreshBuffer(o);var J=o._muted||r._muted?0:o._volume;b.gain.setValueAtTime(J,Ae.ctx.currentTime),o._playStart=Ae.ctx.currentTime,typeof b.bufferSource.start=="undefined"?o._loop?b.bufferSource.noteGrainOn(0,u,86400):b.bufferSource.noteGrainOn(0,u,B):o._loop?b.bufferSource.start(0,u,86400):b.bufferSource.start(0,u,B),C!==1/0&&(r._endTimers[o._id]=setTimeout(r._ended.bind(r,o),C)),e||setTimeout(function(){r._emit("play",o._id),r._loadQueue()},0)};Ae.state==="running"&&Ae.ctx.state!=="interrupted"?R():(r._playLock=!0,r.once("resume",R),r._clearTimer(o._id))}else{var L=function(){b.currentTime=u,b.muted=o._muted||r._muted||Ae._muted||b.muted,b.volume=o._volume*Ae.volume(),b.playbackRate=o._rate;try{var J=b.play();if(J&&typeof Promise!="undefined"&&(J instanceof Promise||typeof J.then=="function")?(r._playLock=!0,w(),J.then(function(){r._playLock=!1,b._unlocked=!0,e?r._loadQueue():r._emit("play",o._id)}).catch(function(){r._playLock=!1,r._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0})):e||(r._playLock=!1,w(),r._emit("play",o._id)),b.playbackRate=o._rate,b.paused){r._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||o._loop?r._endTimers[o._id]=setTimeout(r._ended.bind(r,o),C):(r._endTimers[o._id]=function(){r._ended(o),b.removeEventListener("ended",r._endTimers[o._id],!1)},b.addEventListener("ended",r._endTimers[o._id],!1))}catch(re){r._emit("playerror",o._id,re)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=r._src,b.load());var X=window&&window.ejecta||!b.readyState&&Ae._navigator.isCocoonJS;if(b.readyState>=3||X)L();else{r._playLock=!0,r._state="loading";var k=function(){r._state="loaded",L(),b.removeEventListener(Ae._canPlayEvent,k,!1)};b.addEventListener(Ae._canPlayEvent,k,!1),r._clearTimer(o._id)}}return o._id},pause:function(t){var e=this;if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var r=e._getSoundIds(t),n=0;n<r.length;n++){e._clearTimer(r[n]);var x=e._soundById(r[n]);if(x&&!x._paused&&(x._seek=e.seek(r[n]),x._rateSeek=0,x._paused=!0,e._stopFade(r[n]),x._node))if(e._webAudio){if(!x._node.bufferSource)continue;typeof x._node.bufferSource.stop=="undefined"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),e._cleanBuffer(x._node)}else(!isNaN(x._node.duration)||x._node.duration===1/0)&&x._node.pause();arguments[1]||e._emit("pause",x?x._id:null)}return e},stop:function(t,e){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var n=r._getSoundIds(t),x=0;x<n.length;x++){r._clearTimer(n[x]);var i=r._soundById(n[x]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,r._stopFade(n[x]),i._node&&(r._webAudio?i._node.bufferSource&&(typeof i._node.bufferSource.stop=="undefined"?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),r._cleanBuffer(i._node)):(!isNaN(i._node.duration)||i._node.duration===1/0)&&(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&r._clearSound(i._node))),e||r._emit("stop",i._id))}return r},mute:function(t,e){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(t,e)}}),r;if(typeof e=="undefined")if(typeof t=="boolean")r._muted=t;else return r._muted;for(var n=r._getSoundIds(e),x=0;x<n.length;x++){var i=r._soundById(n[x]);i&&(i._muted=t,i._interval&&r._stopFade(i._id),r._webAudio&&i._node?i._node.gain.setValueAtTime(t?0:i._volume,Ae.ctx.currentTime):i._node&&(i._node.muted=Ae._muted?!0:t),r._emit("mute",i._id))}return r},volume:function(){var t=this,e=arguments,r,n;if(e.length===0)return t._volume;if(e.length===1||e.length===2&&typeof e[1]=="undefined"){var x=t._getSoundIds(),i=x.indexOf(e[0]);i>=0?n=parseInt(e[0],10):r=parseFloat(e[0])}else e.length>=2&&(r=parseFloat(e[0]),n=parseInt(e[1],10));var o;if(typeof r!="undefined"&&r>=0&&r<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,e)}}),t;typeof n=="undefined"&&(t._volume=r),n=t._getSoundIds(n);for(var s=0;s<n.length;s++)o=t._soundById(n[s]),o&&(o._volume=r,e[2]||t._stopFade(n[s]),t._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(r,Ae.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=r*Ae.volume()),t._emit("volume",o._id))}else return o=n?t._soundById(n):t._sounds[0],o?o._volume:0;return t},fade:function(t,e,r,n){var x=this;if(x._state!=="loaded"||x._playLock)return x._queue.push({event:"fade",action:function(){x.fade(t,e,r,n)}}),x;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),r=parseFloat(r),x.volume(t,n);for(var i=x._getSoundIds(n),o=0;o<i.length;o++){var s=x._soundById(i[o]);if(s){if(n||x._stopFade(i[o]),x._webAudio&&!s._muted){var u=Ae.ctx.currentTime,B=u+r/1e3;s._volume=t,s._node.gain.setValueAtTime(t,u),s._node.gain.linearRampToValueAtTime(e,B)}x._startFadeInterval(s,t,e,r,i[o],typeof n=="undefined")}}return x},_startFadeInterval:function(t,e,r,n,x,i){var o=this,s=e,u=r-e,B=Math.abs(u/.01),C=Math.max(4,B>0?n/B:n),p=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var m=(Date.now()-p)/n;p=Date.now(),s+=u*m,s=Math.round(s*100)/100,u<0?s=Math.max(r,s):s=Math.min(r,s),o._webAudio?t._volume=s:o.volume(s,t._id,!0),i&&(o._volume=s),(r<e&&s<=r||r>e&&s>=r)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(r,t._id),o._emit("fade",t._id))},C)},_stopFade:function(t){var e=this,r=e._soundById(t);return r&&r._interval&&(e._webAudio&&r._node.gain.cancelScheduledValues(Ae.ctx.currentTime),clearInterval(r._interval),r._interval=null,e.volume(r._fadeTo,t),r._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t=this,e=arguments,r,n,x;if(e.length===0)return t._loop;if(e.length===1)if(typeof e[0]=="boolean")r=e[0],t._loop=r;else return x=t._soundById(parseInt(e[0],10)),x?x._loop:!1;else e.length===2&&(r=e[0],n=parseInt(e[1],10));for(var i=t._getSoundIds(n),o=0;o<i.length;o++)x=t._soundById(i[o]),x&&(x._loop=r,t._webAudio&&x._node&&x._node.bufferSource&&(x._node.bufferSource.loop=r,r&&(x._node.bufferSource.loopStart=x._start||0,x._node.bufferSource.loopEnd=x._stop,t.playing(i[o])&&(t.pause(i[o],!0),t.play(i[o],!0)))));return t},rate:function(){var t=this,e=arguments,r,n;if(e.length===0)n=t._sounds[0]._id;else if(e.length===1){var x=t._getSoundIds(),i=x.indexOf(e[0]);i>=0?n=parseInt(e[0],10):r=parseFloat(e[0])}else e.length===2&&(r=parseFloat(e[0]),n=parseInt(e[1],10));var o;if(typeof r=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,e)}}),t;typeof n=="undefined"&&(t._rate=r),n=t._getSoundIds(n);for(var s=0;s<n.length;s++)if(o=t._soundById(n[s]),o){t.playing(n[s])&&(o._rateSeek=t.seek(n[s]),o._playStart=t._webAudio?Ae.ctx.currentTime:o._playStart),o._rate=r,t._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.setValueAtTime(r,Ae.ctx.currentTime):o._node&&(o._node.playbackRate=r);var u=t.seek(n[s]),B=(t._sprite[o._sprite][0]+t._sprite[o._sprite][1])/1e3-u,C=B*1e3/Math.abs(o._rate);(t._endTimers[n[s]]||!o._paused)&&(t._clearTimer(n[s]),t._endTimers[n[s]]=setTimeout(t._ended.bind(t,o),C)),t._emit("rate",o._id)}}else return o=t._soundById(n),o?o._rate:t._rate;return t},seek:function(){var t=this,e=arguments,r,n;if(e.length===0)t._sounds.length&&(n=t._sounds[0]._id);else if(e.length===1){var x=t._getSoundIds(),i=x.indexOf(e[0]);i>=0?n=parseInt(e[0],10):t._sounds.length&&(n=t._sounds[0]._id,r=parseFloat(e[0]))}else e.length===2&&(r=parseFloat(e[0]),n=parseInt(e[1],10));if(typeof n=="undefined")return 0;if(typeof r=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,e)}}),t;var o=t._soundById(n);if(o)if(typeof r=="number"&&r>=0){var s=t.playing(n);s&&t.pause(n,!0),o._seek=r,o._ended=!1,t._clearTimer(n),!t._webAudio&&o._node&&!isNaN(o._node.duration)&&(o._node.currentTime=r);var u=function(){s&&t.play(n,!0),t._emit("seek",n)};if(s&&!t._webAudio){var B=function(){t._playLock?setTimeout(B,0):u()};setTimeout(B,0)}else u()}else if(t._webAudio){var C=t.playing(n)?Ae.ctx.currentTime-o._playStart:0,p=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(p+C*Math.abs(o._rate))}else return o._node.currentTime;return t},playing:function(t){var e=this;if(typeof t=="number"){var r=e._soundById(t);return r?!r._paused:!1}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,r=e._duration,n=e._soundById(t);return n&&(r=e._sprite[n._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,r=0;r<e.length;r++)e[r]._paused||t.stop(e[r]._id),t._webAudio||(t._clearSound(e[r]._node),e[r]._node.removeEventListener("error",e[r]._errorFn,!1),e[r]._node.removeEventListener(Ae._canPlayEvent,e[r]._loadFn,!1),e[r]._node.removeEventListener("ended",e[r]._endFn,!1),Ae._releaseHtml5Audio(e[r]._node)),delete e[r]._node,t._clearTimer(e[r]._id);var n=Ae._howls.indexOf(t);n>=0&&Ae._howls.splice(n,1);var x=!0;for(r=0;r<Ae._howls.length;r++)if(Ae._howls[r]._src===t._src||t._src.indexOf(Ae._howls[r]._src)>=0){x=!1;break}return C0&&x&&delete C0[t._src],Ae.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,r,n){var x=this,i=x["_on"+t];return typeof e=="function"&&i.push(n?{id:r,fn:e,once:n}:{id:r,fn:e}),x},off:function(t,e,r){var n=this,x=n["_on"+t],i=0;if(typeof e=="number"&&(r=e,e=null),e||r)for(i=0;i<x.length;i++){var o=r===x[i].id;if(e===x[i].fn&&o||!e&&o){x.splice(i,1);break}}else if(t)n["_on"+t]=[];else{var s=Object.keys(n);for(i=0;i<s.length;i++)s[i].indexOf("_on")===0&&Array.isArray(n[s[i]])&&(n[s[i]]=[])}return n},once:function(t,e,r){var n=this;return n.on(t,e,r,1),n},_emit:function(t,e,r){for(var n=this,x=n["_on"+t],i=x.length-1;i>=0;i--)(!x[i].id||x[i].id===e||t==="load")&&(setTimeout(function(o){o.call(this,e,r)}.bind(n,x[i].fn),0),x[i].once&&n.off(t,x[i].fn,x[i].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var r=e._queue[0];r.event===t&&(e._queue.shift(),e._loadQueue()),t||r.action()}return e},_ended:function(t){var e=this,r=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!!(t._loop||e._sprite[r][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=Ae.ctx.currentTime;var x=(t._stop-t._start)*1e3/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),x)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),Ae._autoSuspend()),!e._webAudio&&!n&&e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if(typeof e._endTimers[t]!="function")clearTimeout(e._endTimers[t]);else{var r=e._soundById(t);r&&r._node&&r._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,r=0;r<e._sounds.length;r++)if(t===e._sounds[r]._id)return e._sounds[r];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new _r(t)},_drain:function(){var t=this,e=t._pool,r=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&r++;for(n=t._sounds.length-1;n>=0;n--){if(r<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),r--)}}},_getSoundIds:function(t){var e=this;if(typeof t=="undefined"){for(var r=[],n=0;n<e._sounds.length;n++)r.push(e._sounds[n]._id);return r}else return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=Ae.ctx.createBufferSource(),t._node.bufferSource.buffer=C0[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,Ae.ctx.currentTime),e},_cleanBuffer:function(t){var e=this,r=Ae._navigator&&Ae._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return e;if(Ae._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),r))try{t.bufferSource.buffer=Ae._scratchBuffer}catch{}return t.bufferSource=null,e},_clearSound:function(t){var e=/MSIE |Trident\//.test(Ae._navigator&&Ae._navigator.userAgent);e||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var _r=function(t){this._parent=t,this.init()};_r.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++Ae._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,r=Ae._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=typeof Ae.ctx.createGain=="undefined"?Ae.ctx.createGainNode():Ae.ctx.createGain(),t._node.gain.setValueAtTime(r,Ae.ctx.currentTime),t._node.paused=!0,t._node.connect(Ae.masterGain)):Ae.noAudio||(t._node=Ae._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(Ae._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=e._preload===!0?"auto":e._preload,t._node.volume=r*Ae.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++Ae._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(t._node.duration*10)/10,Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(Ae._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(t._node.duration*10)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=e._duration*1e3),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var C0={},Fo=function(t){var e=t._src;if(C0[e]){t._duration=C0[e].duration,ai(t);return}if(/^data:[^;]+;base64,/.test(e)){for(var r=atob(e.split(",")[1]),n=new Uint8Array(r.length),x=0;x<r.length;++x)n[x]=r.charCodeAt(x);jn(n.buffer,t)}else{var i=new XMLHttpRequest;i.open(t._xhr.method,e,!0),i.withCredentials=t._xhr.withCredentials,i.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(o){i.setRequestHeader(o,t._xhr.headers[o])}),i.onload=function(){var o=(i.status+"")[0];if(o!=="0"&&o!=="2"&&o!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".");return}jn(i.response,t)},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete C0[e],t.load())},yo(i)}},yo=function(t){try{t.send()}catch{t.onerror()}},jn=function(t,e){var r=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(x){x&&e._sounds.length>0?(C0[e._src]=x,ai(e,x)):r()};typeof Promise!="undefined"&&Ae.ctx.decodeAudioData.length===1?Ae.ctx.decodeAudioData(t).then(n).catch(r):Ae.ctx.decodeAudioData(t,n,r)},ai=function(t,e){e&&!t._duration&&(t._duration=e.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},Br=function(){if(!!Ae.usingWebAudio){try{typeof AudioContext!="undefined"?Ae.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?Ae.ctx=new webkitAudioContext:Ae.usingWebAudio=!1}catch{Ae.usingWebAudio=!1}Ae.ctx||(Ae.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(Ae._navigator&&Ae._navigator.platform),e=Ae._navigator&&Ae._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=e?parseInt(e[1],10):null;if(t&&r&&r<9){var n=/safari/.test(Ae._navigator&&Ae._navigator.userAgent.toLowerCase());Ae._navigator&&!n&&(Ae.usingWebAudio=!1)}Ae.usingWebAudio&&(Ae.masterGain=typeof Ae.ctx.createGain=="undefined"?Ae.ctx.createGainNode():Ae.ctx.createGain(),Ae.masterGain.gain.setValueAtTime(Ae._muted?0:Ae._volume,Ae.ctx.currentTime),Ae.masterGain.connect(Ae.ctx.destination)),Ae._setup()}};mo(Cn,Ae,pr,_r);/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Barcode Reader JS Edition
 * @website http://www.dynamsoft.com
 * @copyright Copyright 2023, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 9.6.20 (js 20230410)
 * @fileoverview Dynamsoft JavaScript Library for Barcode Reader
 * More info on DBR JS: https://www.dynamsoft.com/barcode-reader/sdk-javascript/
 */const _0=typeof self=="undefined";let k0,e0,sr,Dr,mt;if(typeof navigator!="undefined"&&(k0=navigator,e0=k0.userAgent,sr=k0.platform,Dr=k0.mediaDevices),!_0){const t={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:k0.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:sr,search:"Win"},Mac:{str:sr},Linux:{str:sr}};let r="unknownBrowser",n=0,x="unknownOS";for(let i in t){const o=t[i]||{};let s=o.str||e0,u=o.search||i,B=o.verStr||e0,C=o.verSearch||i;if(C instanceof Array||(C=[C]),s.indexOf(u)!=-1){r=i;for(let p of C){let m=B.indexOf(p);if(m!=-1){n=parseFloat(B.substring(m+p.length+1));break}}break}}for(let i in e){const o=e[i]||{};let s=o.str||e0,u=o.search||i;if(s.indexOf(u)!=-1){x=i;break}}x=="Linux"&&e0.indexOf("Windows NT")!=-1&&(x="HarmonyOS"),mt={browser:r,version:n,OS:x}}_0&&(mt={browser:"ssr",version:0,OS:"ssr"});const wo=typeof WebAssembly!="undefined"&&e0&&!(/Safari/.test(e0)&&!/Chrome/.test(e0)&&/\(.+\s11_2_([2-6]).*\)/.test(e0)),So=typeof Worker!="undefined",si=!(!Dr||!Dr.getUserMedia),To=async()=>{let t=!1;if(si)try{(await Dr.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),t=!0}catch{}return t};mt.browser==="Chrome"&&mt.version>66||mt.browser==="Safari"&&mt.version>13||mt.browser==="OPR"&&mt.version>43||mt.browser==="Edge"&&mt.version;const bo=(()=>{if(!_0&&document.currentScript){let t=document.currentScript.src,e=t.indexOf("?");if(e!=-1)t=t.substring(0,e);else{let r=t.indexOf("#");r!=-1&&(t=t.substring(0,r))}return t.substring(0,t.lastIndexOf("/")+1)}return"./"})(),U0=" is not allowed to change after `createInstance` or `loadWasm` is called.",Io=!_0&&document.currentScript&&(document.currentScript.getAttribute("data-license")||document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||document.currentScript.getAttribute("data-organizationID"))||"",Oo=!_0&&document.currentScript&&document.currentScript.getAttribute("data-sessionPassword")||"",Vn=t=>{if(t==null)t=[];else{t=t instanceof Array?[...t]:[t];for(let e=0;e<t.length;++e){if(!_0){let r=document.createElement("a");r.href=t[e],t[e]=r.href}t[e].endsWith("/")||(t[e]+="/")}}return t};var Et,mr,tn,d0,Fr;(function(t){t[t.IPF_Binary=0]="IPF_Binary",t[t.IPF_BinaryInverted=1]="IPF_BinaryInverted",t[t.IPF_GrayScaled=2]="IPF_GrayScaled",t[t.IPF_NV21=3]="IPF_NV21",t[t.IPF_RGB_565=4]="IPF_RGB_565",t[t.IPF_RGB_555=5]="IPF_RGB_555",t[t.IPF_RGB_888=6]="IPF_RGB_888",t[t.IPF_ARGB_8888=7]="IPF_ARGB_8888",t[t.IPF_RGB_161616=8]="IPF_RGB_161616",t[t.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",t[t.IPF_ABGR_8888=10]="IPF_ABGR_8888",t[t.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",t[t.IPF_BGR_888=12]="IPF_BGR_888"})(Et||(Et={})),function(t){t[t.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",t[t.DBR_SUCCESS=0]="DBR_SUCCESS",t[t.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",t[t.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",t[t.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",t[t.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",t[t.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",t[t.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",t[t.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",t[t.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",t[t.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",t[t.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",t[t.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",t[t.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",t[t.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",t[t.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",t[t.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",t[t.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",t[t.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",t[t.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",t[t.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",t[t.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",t[t.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",t[t.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",t[t.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",t[t.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",t[t.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",t[t.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",t[t.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",t[t.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",t[t.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",t[t.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",t[t.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",t[t.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",t[t.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",t[t.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",t[t.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",t[t.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",t[t.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",t[t.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",t[t.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",t[t.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",t[t.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",t[t.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",t[t.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",t[t.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",t[t.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",t[t.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",t[t.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",t[t.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",t[t.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",t[t.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",t[t.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",t[t.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",t[t.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",t[t.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",t[t.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",t[t.DBR_PANORAMA_LICENSE_INVALID=-10060]="DBR_PANORAMA_LICENSE_INVALID",t[t.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",t[t.DBR_PHARMACODE_LICENSE_INVALID=-10062]="DBR_PHARMACODE_LICENSE_INVALID",t[t.DBR_IMAGE_ORIENTATION_INVALID=-10063]="DBR_IMAGE_ORIENTATION_INVALID",t[t.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",t[t.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",t[t.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",t[t.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(mr||(mr={})),function(t){t[t.IMRDT_IMAGE=1]="IMRDT_IMAGE",t[t.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",t[t.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",t[t.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",t[t.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",t[t.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(tn||(tn={})),function(t){t[t.BF_ALL=-29360129]="BF_ALL",t[t.BF_ONED=3147775]="BF_ONED",t[t.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",t[t.BF_CODE_39=1]="BF_CODE_39",t[t.BF_CODE_128=2]="BF_CODE_128",t[t.BF_CODE_93=4]="BF_CODE_93",t[t.BF_CODABAR=8]="BF_CODABAR",t[t.BF_ITF=16]="BF_ITF",t[t.BF_EAN_13=32]="BF_EAN_13",t[t.BF_EAN_8=64]="BF_EAN_8",t[t.BF_UPC_A=128]="BF_UPC_A",t[t.BF_UPC_E=256]="BF_UPC_E",t[t.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",t[t.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",t[t.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",t[t.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",t[t.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",t[t.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",t[t.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",t[t.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",t[t.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",t[t.BF_PATCHCODE=262144]="BF_PATCHCODE",t[t.BF_PDF417=33554432]="BF_PDF417",t[t.BF_QR_CODE=67108864]="BF_QR_CODE",t[t.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",t[t.BF_AZTEC=268435456]="BF_AZTEC",t[t.BF_MAXICODE=536870912]="BF_MAXICODE",t[t.BF_MICRO_QR=1073741824]="BF_MICRO_QR",t[t.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",t[t.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",t[t.BF_MSI_CODE=1048576]="BF_MSI_CODE",t[t.BF_CODE_11=2097152]="BF_CODE_11",t[t.BF_NULL=0]="BF_NULL"}(d0||(d0={})),function(t){t[t.IRT_NO_RESULT=0]="IRT_NO_RESULT",t[t.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",t[t.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",t[t.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",t[t.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",t[t.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",t[t.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",t[t.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",t[t.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",t[t.IRT_CONTOUR=256]="IRT_CONTOUR",t[t.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",t[t.IRT_FORM=1024]="IRT_FORM",t[t.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",t[t.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",t[t.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(Fr||(Fr={}));const Gn=t=>t&&typeof t=="object"&&typeof t.then=="function";class Ei extends Promise{constructor(e){let r,n;super((x,i)=>{r=x,n=i}),this._s="pending",this.resolve=x=>{this.isPending&&(Gn(x)?this.task=x:(this._s="fulfilled",r(x)))},this.reject=x=>{this.isPending&&(this._s="rejected",n(x))},this.task=e}get status(){return this._s}get isPending(){return this._s==="pending"}get isFulfilled(){return this._s==="fulfilled"}get isRejected(){return this._s==="rejected"}get task(){return this._task}set task(e){let r;this._task=e,Gn(e)?r=e:typeof e=="function"&&(r=new Promise(e)),r&&(async()=>{try{const n=await r;e===this._task&&this.resolve(n)}catch(n){e===this._task&&this.reject(n)}})()}get isEmpty(){return this._task==null}}const Xr=["iPhone","iPad","Android","HarmonyOS"].includes(mt.OS)?2048:4096;class Y{constructor(){this._instanceID=void 0,this._ifSaveOriginalImageInACanvas=!1,this.oriCanvas=null,this.oriCanvasData=null,this.canvas=null,this.bFilterRegionInJs=!1,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this.decodeRecords={},this.bDestroyed=!1,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0,this.intervalTime=0,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._arrPolygons=[],this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._soundSource="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.captureAndDecodeInParallel=!0,this.autoSuggestTip=!1,this.suggestTipFrameArray=[],this.suggestTipFrameLimit=[5,3],this.noIntermediateResultsCount=0,this.noIntermediateResultsTipLimit=100,this.tinyBarcodeTipModuleSizeLimit=3,this.hugeBarcodeTipLimit=.9,this.autoZoomInFrameArray=[],this.autoZoomInFrameLimit=[5,3],this.autoZoomInStepRate=1/3,this.autoZoomInMaxStep=1.5,this.autoZoomInMaxTimes=5,this.autoZoomInMinStep=Math.pow(10,1/this.autoZoomInMaxTimes),this.autoZoomInIdealModuleSize=6,this.autoZoomOutFrameCount=0,this.autoZoomOutFrameLimit=3,this.autoZoomOutStepRate=1/3,this.autoZoomOutMinValue=1,this.autoZoomOutMinStep=2,this.autoZoomOutStepRate_2=.05,this.autoZoomOutMinValue_2=2,this.frameArrayInIdealZoom=[],this.frameLimitInIdealZoom=[5,3],this.enableZoomOutInIdealZoom=!1,this.nextActionInIdealZoom="focus",this.autoFocusFrameArray=[],this.autoFocusFrameLimit=[5,3],this.autoZoomIdealArea=[0,.05],this.autoZoomTargetBorder=.9,this.autoZoomDetectionArea=.5,this.autoZoom=!1,this.autoFocus=!1,this._resultHighlightingDuration=-1,this._dce=null,this._imgSource=null,this._maxCvsSideLength=Xr,this._promiseStartScan=null,this.beepSound=new pr({src:[this._soundSource],onplayerror:(e,r)=>{console.warn(`Sound '${e}' playback failure: ${r}`)}})}static get version(){return this._version}static get license(){return this._license}static set license(e){((r,n)=>{const x=r;if(!x._pLoad.isEmpty)throw new Error("`license`"+U0);x._license=n})(Y,e)}static get productKeys(){return this._license}static set productKeys(e){Y.license=e}static get handshakeCode(){return this._license}static set handshakeCode(e){Y.license=e}static get organizationID(){return this._license}static set organizationID(e){Y.license=e}static set sessionPassword(e){((r,n)=>{const x=r;if(!x._pLoad.isEmpty)throw new Error("`sessionPassword`"+U0);x._sessionPassword=n})(Y,e)}static get sessionPassword(){return this._sessionPassword}static async detectEnvironment(){return await(async()=>({wasm:wo,worker:So,getUserMedia:si,camera:await To(),browser:mt.browser,version:mt.version,OS:mt.OS}))()}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if(!this._pLoad.isEmpty)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");Y._engineResourcePath=(r=>{if(r==null&&(r="./"),!_0){let n=document.createElement("a");n.href=r,r=n.href}return r.endsWith("/")||(r+="/"),r})(e)}static get licenseServer(){return this._licenseServer}static set licenseServer(e){((r,n)=>{const x=r;if(!x._pLoad.isEmpty)throw new Error("`licenseServer`"+U0);x._licenseServer=Vn(n)})(Y,e)}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){((r,n)=>{const x=r;if(!x._pLoad.isEmpty)throw new Error("`deviceFriendlyName`"+U0);x._deviceFriendlyName=n||""})(Y,e)}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(e){if(!this._pLoad.isEmpty)throw new Error("`_bUseFullFeature` is not allowed to change after `createInstance` or `loadWasm` is called.");Y.__bUseFullFeature=e}static isImageSource(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"getImage"in e}static isDSImage(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"data"in e&&"width"in e&&"height"in e&&"pixelFormat"in e}static isDCEFrame(e){return!(!e||typeof e!="object"||Array.isArray(e))&&"data"in e&&"region"in e&&"sx"in e&&"sy"in e&&"width"in e&&"height"in e&&("colorMode"in e||"pixelFormat"in e)&&"timeSpent"in e&&"timeStamp"in e&&"isCropped"in e&&"toCanvas"in e&&"_sWidth"in e&&"_sHeight"in e&&"_bUseWebGL"in e}get ifSaveOriginalImageInACanvas(){return this._ifSaveOriginalImageInACanvas}set ifSaveOriginalImageInACanvas(e){this._ifSaveOriginalImageInACanvas=e}getOriginalImageInACanvas(){return!this.oriCanvas&&this.oriCanvasData?this.oriCanvasData.toCanvas():this.oriCanvas}set region(e){this._region=e,this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}static isWasmLoaded(){return this._pLoad.isFulfilled}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static get defaultUIElementURL(){var e;return(e=Y._defaultUIElementURL)===null||e===void 0?void 0:e.replace("@engineResourcePath/",Y.engineResourcePath)}static set defaultUIElementURL(e){Y._defaultUIElementURL=e}static _fireHTTPSWarnning(){Y.onWarning&&location&&location.protocol!=="https:"&&setTimeout(()=>{Y.onWarning&&Y.onWarning({id:2,message:"Not connected via SSL (HTTPS), the SDK may not work correctly."})},0)}get soundSource(){return this._soundSource}set soundSource(e){this._soundSource=e,this.beepSound=new pr({src:[this._soundSource],onplayerror:(r,n)=>{console.warn(`Sound '${r}' playback failure: ${n}`)}})}get whenToPlaySoundforSuccessfulRead(){return this.bPlaySoundOnSuccessfulRead===!0?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(e){this.bPlaySoundOnSuccessfulRead=e!=="never"&&e}get whenToVibrateforSuccessfulRead(){return this.bVibrateOnSuccessfulRead===!0?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(e){this.bVibrateOnSuccessfulRead=e!=="never"&&e}set dce(e){this._dce=e}get dce(){return!this._dce||this._dce.isDisposed||this._dce.disposed?null:this._dce}set maxCvsSideLength(e){this._maxCvsSideLength=e,this._dceControler&&this._dceControler.setDisiredValue(this,"maxCvsSideLength",e)}get maxCvsSideLength(){return this._maxCvsSideLength}async _registerDCEControler(){if(!this.dce)return;Y._onLog&&Y._onLog("_registerDCEControler()");const e=this.dce;this._dceControler=e._createControler();const r=this._dceControler;r.register(this),r.setDisiredValue(this,"refreshInterval",200),r.setDisiredValue(this,"maxCvsSideLength",this._maxCvsSideLength),this._styleIdBeforeVerification=this.dce.createDrawingStyle({fillStyle:"rgba(248,252,0,0.2)",strokeStyle:"transparent",paintMode:"strokeAndFill"});try{}catch(i){i.name==="ReferenceError"&&window&&(window.ResizeObserver=void 0)}const n=e.getUIElement(),x=this.dce.constructor;if(x._defaultUIElementURL==="@engineResourcePath/dce.ui.html")try{n?n===r._innerSetUI&&(await e.setUIElement(`${x.engineResourcePath}dce.ui.html`),r._innerSetUI=e.getUIElement()):(await e.setUIElement(`${x.engineResourcePath}dbr.ui.html`),r._innerSetUI=e.getUIElement())}catch{await e.setUIElement(x.defaultUIElementURL)}else n||await e.setUIElement(x.defaultUIElementURL);this.callbackCameraChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackResolutionChange=()=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this.callbackCameraClose=()=>{this.stopScanning(!0),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._bPauseScan=!1},this.callbackSingleFrameAcquired=async i=>{this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null);let o=await this._decode_DCEFrame(i,{bCopyData:!1}),s=null;if(o&&o.length){const{sx:u,sy:B,width:C,height:p,_sWidth:m,_sHeight:w}=i;s=o.map(b=>({localizationResult:JSON.parse(JSON.stringify(b.localizationResult))})),Y.recalculateResultLocation(s,u,B,m,w,C,p)}if(this._drawResults(s,o),await this.clearMapDecodeRecord(),this.onImageRead&&this.dce.isOpen()&&!this._bPauseScan){let u=this._cloneDecodeResults(o);this.onImageRead(u)}if(this.onUniqueRead&&this.dce.isOpen()&&!this._bPauseScan)for(let u of o)this.onUniqueRead(u.barcodeText,this._cloneDecodeResults(u))},e.on("cameraChange",this.callbackCameraChange),e.on("resolutionChange",this.callbackResolutionChange),e.on("cameraClose",this.callbackCameraClose),e.on("singleFrameAcquired",this.callbackSingleFrameAcquired)}_logoutDCEControler(){this.dce&&this._dceControler&&(Y._onLog&&Y._onLog("_logoutDCEControler()"),this._dceControler.logout(this),this.dce.off("cameraChange",this.callbackCameraChange),this.dce.off("resolutionChange",this.callbackResolutionChange),this.dce.off("cameraClose",this.callbackCameraClose),this.dce.off("singleFrameAcquired",this.callbackSingleFrameAcquired),this._dceControler=null,this.dce=null)}async setImageSource(e,r){if(e==null)return this._imgSource=null,this._logoutDCEControler(),void(this._drawingItemNamespace=null);if(e&&e.isCameraEnhancer)this.dce=e,await this._registerDCEControler(),this._imgSource=null;else{if(!Y.isImageSource(e))throw new Error("Invalid value.");this._logoutDCEControler(),this._imgSource=e}r&&r.resultsHighlightBaseShapes&&(this._drawingItemNamespace=r.resultsHighlightBaseShapes)}static async loadWasm(){if(this._pLoad.isEmpty){let{lt:e,l:r,ls:n,sp:x,rmk:i}=(o=>{const s=o;if(s._pLoad.isEmpty){let u,B,C=s._license||"",p=JSON.parse(JSON.stringify(s._licenseServer)),m=s._sessionPassword,w=0;if(C.startsWith("t")||C.startsWith("f"))w=0;else if(C.length===0||C.startsWith("P")||C.startsWith("L")||C.startsWith("Y")||C.startsWith("A"))w=1;else{w=2;const b=C.indexOf(":");if(b!=-1&&(C=C.substring(b+1)),C.startsWith("DLS2")){let R;try{let L=C.substring(4);L=atob(L),R=JSON.parse(L)}catch{throw new Error("Format Error: The license string you specified is invalid, please check to make sure it is correct.")}if(C=R.handshakeCode?R.handshakeCode:R.organizationID?R.organizationID:"",typeof C=="number"&&(C=JSON.stringify(C)),p.length===0){let L=[];R.mainServerURL&&(L[0]=R.mainServerURL),R.standbyServerURL&&(L[1]=R.standbyServerURL),p=Vn(L)}!m&&R.sessionPassword&&(m=R.sessionPassword),u=R.remark}(C==="200001"||C.startsWith("200001-"))&&(p&&p.length||(C="")),C||(w=1)}if(w&&(globalThis.crypto||(B="Please upgrade your browser to support online key."),globalThis.crypto.subtle||(B="Require https to use online key in this browser.")),B){if(w!==1)throw new Error(B);w=0,console.warn(B),s._lastErrorCode=-1,s._lastErrorString=B}return w===1&&(C="",console.warn("Applying for a public trial license ...")),{lt:w,l:C,ls:p,sp:m,rmk:u}}throw new Error("Can't preprocess license again"+U0)})(Y);this._pLoad.task=async(o,s)=>{let u=Y.engineResourcePath+Y._workerName;Y.engineResourcePath.startsWith(location.origin)||(u=await fetch(u).then(B=>B.blob()).then(B=>URL.createObjectURL(B))),Y._dbrWorker=new Worker(u),Y._dbrWorker.onerror=B=>{let C=new Error(B.message);s(C)},Y._dbrWorker.onmessage=async B=>{let C=B.data?B.data:B;switch(C.type){case"log":Y._onLog&&Y._onLog(C.message);break;case"load":{C.message&&(C.message=C.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let p,m=!1;e===1&&(m=!0,C.message||(C.message="Using a temporary license. [Register for a 30-day trial license >>>](https://www.dynamsoft.com/customer/license/trialLicense?product=dbr&deploymenttype=browser)")),C.success?(Y._dbrWorker.onerror=null,Y._version=C.version+"(JS "+Y._jsVersion+"."+Y._jsEditVersion+")",Y._onLog&&Y._onLog("load dbr worker success"),C.message&&console.warn(C.message)):(p=new Error(C.message),p.stack=C.stack+`
`+p.stack,p.ltsErrorCode=C.ltsErrorCode,m||C.ltsErrorCode==111&&C.message.toLowerCase().indexOf("trial license")!=-1&&(m=!0)),m&&Y.showDialog(C.success?"warn":"error",C.message),C.success?o():s(p);break}case"task":{let p=C.id,m=C.body;try{Y._taskCallbackMap.get(p)(m),Y._taskCallbackMap.delete(p)}catch(w){throw Y._taskCallbackMap.delete(p),w}break}default:Y._onLog&&Y._onLog(B)}},Y._dbrWorker.postMessage({type:"loadWasm",engineResourcePath:Y.engineResourcePath,bUseFullFeature:Y._bUseFullFeature,bd:Y._bWasmDebug,v:Y._jsVersion,brtk:!!e,bptk:e===1,l:r,dm:location.origin.startsWith("http")?location.origin:"https://localhost",os:mt,cv:Y.authCacheVersion,fn:Y.deviceFriendlyName,ls:n,sp:x,rmk:i})}}await this._pLoad}static async showDialog(e,r){await(async(n,x,i)=>{if(!n._bNeverShowDialog)try{let o=await fetch(n.engineResourcePath+"dls.license.dialog.html");if(!o.ok)throw Error("Get license dialog fail. Network Error: "+o.statusText);let s=await o.text();if(!s.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let u=document.createElement("div");u.innerHTML=s;let B=[];for(let k=0;k<u.childElementCount;++k){let J=u.children[k];J instanceof HTMLStyleElement&&(B.push(J),document.head.append(J))}let C=u.childElementCount==1?u.children[0]:u;C.remove();let p,m,w,b,R,L=[C],X=C.children;for(let k of X)L.push(k);for(let k=0;k<L.length;++k)for(let J of L[k].children)L.push(J);for(let k of L)if(!p&&k.classList.contains("dls-license-mask"))p=k,k.addEventListener("click",J=>{if(k==J.target){C.remove();for(let re of B)re.remove()}});else if(!m&&k.classList.contains("dls-license-icon-close"))m=k,k.addEventListener("click",()=>{C.remove();for(let J of B)J.remove()});else if(!w&&k.classList.contains("dls-license-icon-error"))w=k,x!="error"&&k.remove();else if(!b&&k.classList.contains("dls-license-icon-warn"))b=k,x!="warn"&&k.remove();else if(!R&&k.classList.contains("dls-license-msg-content")){R=k;let J=i;for(;J;){let re=J.indexOf("["),Z=J.indexOf("]",re),ce=J.indexOf("(",Z),ue=J.indexOf(")",ce);if(re==-1||Z==-1||ce==-1||ue==-1){k.appendChild(new Text(J));break}re>0&&k.appendChild(new Text(J.substring(0,re)));let D=document.createElement("a"),Se=J.substring(re+1,Z);D.innerText=Se;let Ie=J.substring(ce+1,ue);D.setAttribute("href",Ie),D.setAttribute("target","_blank"),k.appendChild(D),J=J.substring(ue+1)}}document.body.appendChild(C)}catch(o){n._onLog&&n._onLog(o.message||o)}})(this,e,r)}static async createInstanceInWorker(e=!1){return await Y.loadWasm(),await new Promise((r,n)=>{let x=Y._nextTaskID++;Y._taskCallbackMap.set(x,i=>{if(i.success)return r(i.instanceID);{let o=new Error(i.message);return o.stack=i.stack+`
`+o.stack,n(o)}}),Y._dbrWorker.postMessage({type:"createInstance",id:x,bScanner:e})})}static async createInstance(){const e=new Y;return e._instanceID=await Y.createInstanceInWorker(),Y._fireHTTPSWarnning(),e}async clearMapDecodeRecord(){return await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success)return e();{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:n,instanceID:this._instanceID})})}async decode(e){Y._onLog&&Y._onLog("decode(source: any)"),Y._onLog&&(this._timeStartDecode=Date.now());{let r={};return!this.region||this.region instanceof Array||(r.region=JSON.parse(JSON.stringify(this.region))),e instanceof Blob?await this._decode_Blob(e,r):e instanceof ArrayBuffer?await this._decode_ArrayBuffer(e,r):e instanceof Uint8Array||e instanceof Uint8ClampedArray?await this._decode_Uint8Array(e,r):e instanceof HTMLImageElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?await this._decode_Image(e,r):e instanceof HTMLCanvasElement?await this._decode_Canvas(e,r):e instanceof HTMLVideoElement?await this._decode_Video(e,r):typeof e=="string"?e.substring(0,11)=="data:image/"?await this._decode_Base64(e,r):await this._decode_Url(e,r):Y.isDCEFrame(e)?(r.bCopyData=!0,await this._decode_DCEFrame(e,r)):Y.isDSImage(e)?(r.bCopyData=!0,await this._decode_DSImage(e,r)):await Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}async decodeBase64String(e){let r={};return!this.region||this.region instanceof Array||(r.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(e,r)}async decodeUrl(e){let r={};return!this.region||this.region instanceof Array||(r.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(e,r)}async _decodeBuffer_Uint8Array(e,r,n,x,i,o,s){return await new Promise((u,B)=>{let C=Y._nextTaskID++;Y._taskCallbackMap.set(C,p=>{if(p.success){let m,w=Y._onLog?Date.now():0;Y._onLog&&Y._onLog("worker return result: "+w),this._lastInnerDecodeDuration=p.duration;try{m=this._handleRetJsonString(p.decodeReturn)}catch(b){return B(b)}if(Y._onLog){let b=Date.now();Y._onLog("DBR getting message from worker timestamp: "+w),Y._onLog("From DBR staring decoding to entering worker costs: "+(this._timeEnterInnerDBR-this._timeStartDecode)),Y._onLog("From DBR entering worker to returning message from worker costs: "+(w-this._timeEnterInnerDBR)),Y._onLog("Handling results from DBR worker costs: "+(b-w)),Y._onLog("Total decoding image costs: "+(b-this._timeStartDecode))}return u(m)}{let m=new Error(p.message);return m.stack=p.stack+`
`+m.stack,B(m)}}),this._timeEnterInnerDBR=Date.now(),Y._onLog&&Y._onLog("Sending buffer to worker timestamp:"+this._timeEnterInnerDBR),Y._dbrWorker.postMessage({type:"decodeBuffer",id:C,instanceID:this._instanceID,body:{buffer:e,width:r,height:n,stride:x,format:i,orientation:o,config:s}},[e.buffer]),Y._onLog&&s&&s.timeStamp&&Y._onLog("Delay of decoding image: "+(this._timeEnterInnerDBR-s.timeStamp))})}async _decodeBuffer_Blob(e,r,n,x,i,o,s){Y._onLog&&Y._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)");const u=e.arrayBuffer?await e.arrayBuffer():await new Promise((B,C)=>{let p=new FileReader;p.readAsArrayBuffer(e),p.onload=()=>{B(p.result)},p.onerror=()=>{C(p.error)}});return await this._decodeBuffer_Uint8Array(new Uint8Array(u),r,n,x,i,o,s)}async decodeBuffer(e,r,n,x,i,o,s){let u;return Y._onLog&&Y._onLog("decodeBuffer(buffer,width,height,stride,format)"),Y._onLog&&(this._timeStartDecode=Date.now()),e instanceof Uint8Array||e instanceof Uint8ClampedArray?u=await this._decodeBuffer_Uint8Array(e,r,n,x,i,o,s):e instanceof ArrayBuffer?u=await this._decodeBuffer_Uint8Array(new Uint8Array(e),r,n,x,i,o,s):e instanceof Blob&&(u=await this._decodeBuffer_Blob(e,r,n,x,i,o,s)),u}async _decodeFileInMemory_Uint8Array(e){return await new Promise((r,n)=>{let x=Y._nextTaskID++;Y._taskCallbackMap.set(x,i=>{if(i.success){let o;this._lastInnerDecodeDuration=i.duration;try{o=this._handleRetJsonString(i.decodeReturn)}catch(s){return n(s)}return r(o)}{let o=new Error(i.message);return o.stack=i.stack+`
`+o.stack,n(o)}}),Y._dbrWorker.postMessage({type:"decodeFileInMemory",id:x,instanceID:this._instanceID,body:{bytes:e}})})}async getRuntimeSettings(){return await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success){let i=JSON.parse(x.results);return this.userDefinedRegion!=null&&(i.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),e(i)}{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"getRuntimeSettings",id:n,instanceID:this._instanceID})})}async updateRuntimeSettings(e){let r;if(typeof e=="string")if(e=="speed"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),r=await this.getRuntimeSettings(),r.barcodeFormatIds=n.barcodeFormatIds,r.barcodeFormatIds_2=n.barcodeFormatIds_2,r.region=n.region,r.deblurLevel=3,r.expectedBarcodesCount=0,r.localizationModes=[2,0,0,0,0,0,0,0]}else if(e=="balance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),r=await this.getRuntimeSettings(),r.barcodeFormatIds=n.barcodeFormatIds,r.barcodeFormatIds_2=n.barcodeFormatIds_2,r.region=n.region,r.deblurLevel=5,r.expectedBarcodesCount=512,r.localizationModes=[2,16,0,0,0,0,0,0]}else if(e=="coverage"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),r=await this.getRuntimeSettings(),r.barcodeFormatIds=n.barcodeFormatIds,r.barcodeFormatIds_2=n.barcodeFormatIds_2,r.region=n.region}else if(e=="dense"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,r=await this.getRuntimeSettings(),r.barcodeFormatIds=n.barcodeFormatIds,r.barcodeFormatIds_2=n.barcodeFormatIds_2,r.region=n.region,r.deblurLevel=9,r.expectedBarcodesCount=0,r.localizationModes=[2,8,0,0,0,0,0,0]}else if(e=="distance"){let n=await this.getRuntimeSettings();await this.resetRuntimeSettings(),this.maxCvsSideLength=4096,r=await this.getRuntimeSettings(),r.barcodeFormatIds=n.barcodeFormatIds,r.barcodeFormatIds_2=n.barcodeFormatIds_2,r.region=n.region,r.deblurLevel=3,r.expectedBarcodesCount=0,r.localizationModes=[2,8,0,0,0,0,0,0]}else r=JSON.parse(e);else{if(typeof e!="object")throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(r=JSON.parse(JSON.stringify(e)),r.region instanceof Array){let n=r.region;[n.regionLeft,n.regionTop,n.regionLeft,n.regionBottom,n.regionMeasuredByPercentage].some(x=>x!==void 0)&&(r.region={regionLeft:n.regionLeft||0,regionTop:n.regionTop||0,regionRight:n.regionRight||0,regionBottom:n.regionBottom||0,regionMeasuredByPercentage:n.regionMeasuredByPercentage||0})}}if(!Y._bUseFullFeature){if((r.barcodeFormatIds&~(d0.BF_ONED|d0.BF_QR_CODE|d0.BF_PDF417|d0.BF_DATAMATRIX))!=0||r.barcodeFormatIds_2!=0)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(r.intermediateResultTypes!=0)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let n=r.region;if(n instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(n)),(n.regionLeft||n.regionTop||n.regionRight||n.regionBottom||n.regionMeasuredByPercentage)&&(n.regionLeft||n.regionTop||n.regionRight!=100||n.regionBottom!=100||!n.regionMeasuredByPercentage)?this.region=n:this.region=null,r.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return(this.autoZoom||this.autoFocus)&&(r.intermediateResultTypes|=Fr.IRT_TYPED_BARCODE_ZONE),await new Promise((n,x)=>{let i=Y._nextTaskID++;Y._taskCallbackMap.set(i,o=>{if(o.success){try{this._handleRetJsonString(o.updateReturn)}catch(s){x(s)}return n()}{let s=new Error(o.message);return s.stack=o.stack+`
`+s.stack,x(s)}}),Y._dbrWorker.postMessage({type:"updateRuntimeSettings",id:i,instanceID:this._instanceID,body:{settings:JSON.stringify(r)}})})}async resetRuntimeSettings(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=Xr,await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success)return e();{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"resetRuntimeSettings",id:n,instanceID:this._instanceID})})}async _resetRuntimeSettingsToCppDefault(){return this.userDefinedRegion=null,this.region=null,this.maxCvsSideLength=Xr,await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success)return e();{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"resetRuntimeSettingsToCppDefault",id:n,instanceID:this._instanceID})})}async outputRuntimeSettingsToString(){if(!Y._bUseFullFeature)throw Error("outputRuntimeSettingsToString() is not supported in the compact version. Please try the full-featured version.");return await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success)return e(x.results);{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"outputRuntimeSettingsToString",id:n,instanceID:this._instanceID})})}async initRuntimeSettingsWithString(e){if(!Y._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if(typeof e=="string")e=e;else{if(typeof e!="object")throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");e=JSON.stringify(e)}return await new Promise((r,n)=>{let x=Y._nextTaskID++;Y._taskCallbackMap.set(x,i=>{if(i.success){try{this._handleRetJsonString(i.initReturn)}catch(o){n(o)}return r()}{let o=new Error(i.message);return o.stack=i.stack+`
`+o.stack,n(o)}}),Y._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:x,instanceID:this._instanceID,body:{settings:e}})})}async _decode_Blob(e,r){Y._onLog&&Y._onLog("_decode_Blob(blob: Blob)");let n=null,x=null;if(typeof createImageBitmap!="undefined")try{n=await createImageBitmap(e)}catch{}n||(x=await function(o){return new Promise((s,u)=>{let B=URL.createObjectURL(o),C=new Image;C.dbrObjUrl=B,C.src=B,C.onload=()=>{s(C)},C.onerror=p=>{u(new Error("Can't convert blob to image : "+(p instanceof Event?p.type:p)))}})}(e));let i=await this._decode_Image(n||x,r);return n&&n.close(),i}async _decode_ArrayBuffer(e,r){return await this._decode_Blob(new Blob([e]),r)}async _decode_Uint8Array(e,r){return await this._decode_Blob(new Blob([e]),r)}async _decode_Image(e,r){Y._onLog&&Y._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),r=r||{};let n,x,i=e instanceof HTMLImageElement?e.naturalWidth:e.width,o=e instanceof HTMLImageElement?e.naturalHeight:e.height,s=Math.max(i,o);if(s>this._maxCvsSideLength){let C=this._maxCvsSideLength/s;n=Math.round(i*C),x=Math.round(o*C)}else n=i,x=o;this.canvas||(this.canvas=document.createElement("canvas"));const u=this.canvas;u.width===n&&u.height===x||(u.width=n,u.height=x),u.ctx2d||(u.ctx2d=u.getContext("2d",{willReadFrequently:!0})),u.ctx2d.drawImage(e,0,0,i,o,0,0,n,x),e.dbrObjUrl&&URL.revokeObjectURL(e.dbrObjUrl);let B=await this._decode_Canvas(u,r);if(this.ifSaveOriginalImageInACanvas){const C=document.createElement("canvas");C.width=e.width,C.height=e.height,C.getContext("2d").drawImage(e,0,0),this.oriCanvas=C,this.oriCanvasData=null}return Y.recalculateResultLocation(B,0,0,i,o,n,x),B}async _decode_Canvas(e,r){if(Y._onLog&&Y._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),e.crossOrigin&&e.crossOrigin!="anonymous")throw"cors";if(e.width===0||e.height===0)throw Error("The width or height of the 'canvas' is 0.");this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=e,this.oriCanvasData=null);let n=(e.ctx2d||e.getContext("2d",{willReadFrequently:!0})).getImageData(0,0,e.width,e.height).data;return await this._decodeBuffer_Uint8Array(n,e.width,e.height,4*e.width,Et.IPF_ABGR_8888,0,r)}async _decode_Video(e,r){if(Y._onLog&&Y._onLog("_decode_Video(video)"),!(e instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&e.crossOrigin!="anonymous")throw"cors";r=r||{};let n,x,i=e.videoWidth,o=e.videoHeight,s=Math.max(i,o);if(s>this._maxCvsSideLength){let C=this._maxCvsSideLength/s;n=Math.round(i*C),x=Math.round(o*C)}else n=i,x=o;this.canvas||(this.canvas=document.createElement("canvas"));const u=this.canvas;u.width===n&&u.height===x||(u.width=n,u.height=x),u.ctx2d||(u.ctx2d=u.getContext("2d",{willReadFrequently:!0})),u.ctx2d.drawImage(e,0,0,i,o,0,0,n,x);let B=await this._decode_Canvas(u,r);if(this.ifSaveOriginalImageInACanvas){const C=document.createElement("canvas");C.width=e.videoWidth,C.height=e.videoHeight,C.getContext("2d").drawImage(e,0,0),this.oriCanvas=C,this.oriCanvasData=null}return Y.recalculateResultLocation(B,0,0,i,o,n,x),B}async _decode_DCEFrame(e,r){if(Y._onLog&&Y._onLog("_decode_DCEFrame(dceFrame)"),!Y.isDCEFrame(e))return[];let n=[];this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,colorMode:e.colorMode,pixelFormat:e.pixelFormat,data:new Uint8Array(e.data),toCanvas:e.toCanvas});const{width:x,height:i,colorMode:o,pixelFormat:s,stride:u,timeStamp:B}=e;let C;C=r&&r.bCopyData?new Uint8Array(e.data):e.data;let p=null;if(r?(p=JSON.parse(JSON.stringify(r)),p.timeStamp=B):p={timeStamp:B},s&&u)if(s==="grey")n=await this._decodeBuffer_Uint8Array(C,x,i,u,Et.IPF_GrayScaled,0,p);else if(s==="rgba")n=await this._decodeBuffer_Uint8Array(C,x,i,u,Et.IPF_ABGR_8888,0,p);else{if(s!=="bgra")throw new Error(`Pixel format '${s}' is not supported to decode.`);n=await this._decodeBuffer_Uint8Array(C,x,i,u,Et.IPF_ARGB_8888,0,p)}else if(o==="grey")n=await this._decodeBuffer_Uint8Array(C,x,i,x,Et.IPF_GrayScaled,0,p);else if(o==="rgba")n=await this._decodeBuffer_Uint8Array(C,x,i,4*x,Et.IPF_ABGR_8888,0,p);else{if(o!=="bgra")throw new Error(`Color mode '${o}' is not supported to decode.`);n=await this._decodeBuffer_Uint8Array(C,x,i,4*x,Et.IPF_ARGB_8888,0,p)}return n}async _decode_DSImage(e,r){if(Y._onLog&&Y._onLog("_decode_DSImage(dsImage)"),!Y.isDSImage(e))return null;this.ifSaveOriginalImageInACanvas&&(this.oriCanvas=null,this.oriCanvasData={width:e.width,height:e.height,pixelFormat:e.pixelFormat.toLowerCase(),data:new Uint8Array(e.data),toCanvas:function(){const B=document.createElement("canvas");let C;switch(B.width=this.width,B.height=this.height,this.pixelFormat){case"grey":C=new Uint8ClampedArray(this.width*this.height*4);for(let m=0;m<C.length;m+=4)C[m]=this.data[m/4],C[m+1]=this.data[m/4],C[m+2]=this.data[m/4],C[m+3]=255;break;case"rgb":C=new Uint8ClampedArray(this.width*this.height*4);for(let m=0;m<C.length;m+=4)C[m]=this.data[m],C[m+1]=this.data[m+1],C[m+2]=this.data[m+2],C[m+3]=255;break;case"bgr":C=new Uint8ClampedArray(this.width*this.height*4);for(let m=0;m<C.length;m+=4)C[m]=this.data[m],C[m+1]=this.data[m+1],C[m+2]=this.data[m+2],C[m+3]=255;break;case"rgba":case"bgra":C=new Uint8ClampedArray(this.data);break;default:throw new Error("The content of 2D Canvas is currently limited to the sRGB color space.")}const p=new ImageData(C,this.width,this.height);return B.getContext("2d").putImageData(p,0,0),B}});const{width:n,height:x}=e;let i,o,s,u=e.pixelFormat.toLowerCase();switch(i=r&&r.bCopyData?new Uint8Array(e.data):e.data,u){case"grey":s=Et.IPF_GrayScaled,o=n;break;case"rgb":s=Et.IPF_BGR_888,o=3*n;break;case"bgr":s=Et.IPF_RGB_888,o=3*n;break;case"rgba":s=Et.IPF_ABGR_8888,o=4*n;break;case"bgra":s=Et.IPF_ARGB_8888,o=4*n;break;default:throw new Error("The pixel format is not supported to decode.")}return await this._decodeBuffer_Uint8Array(i,n,x,o,s,0,r)}async _decode_Base64(e,r){if(Y._onLog&&Y._onLog("_decode_Base64(base64Str)"),typeof e!="string")return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");e.substring(0,11)=="data:image/"&&(e=e.substring(e.indexOf(",")+1));{let n=atob(e),x=n.length,i=new Uint8Array(x);for(;x--;)i[x]=n.charCodeAt(x);return await this._decode_Blob(new Blob([i]),r)}}async _decode_Url(e,r){if(Y._onLog&&Y._onLog("_decode_Url(url)"),typeof e!="string")throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'string'.");e=e;{let n=await new Promise((x,i)=>{let o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.send(),o.onloadend=async()=>{x(o.response)},o.onerror=()=>{i(new Error("Network Error: "+o.statusText))}});return await this._decode_Blob(n,r)}}async _decode_FilePath(e,r){throw Y._onLog&&Y._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")}static recalculateResultLocation(e,r,n,x,i,o,s){if(e.length>0)for(let u of e){let B=u.localizationResult;B.resultCoordinateType==2&&(B.x1*=.01*o,B.x2*=.01*o,B.x3*=.01*o,B.x4*=.01*o,B.y1*=.01*s,B.y2*=.01*s,B.y3*=.01*s,B.y4*=.01*s);let C=o/x,p=s/i;B.x1=B.x1/C+r,B.x2=B.x2/C+r,B.x3=B.x3/C+r,B.x4=B.x4/C+r,B.y1=B.y1/p+n,B.y2=B.y2/p+n,B.y3=B.y3/p+n,B.y4=B.y4/p+n,B.resultCoordinateType==2&&(B.x1*=100/x,B.x2*=100/x,B.x3*=100/x,B.x4*=100/x,B.y1*=100/i,B.y2*=100/i,B.y3*=100/i,B.y4*=100/i),B.x1=Math.round(B.x1),B.x2=Math.round(B.x2),B.x3=Math.round(B.x3),B.x4=Math.round(B.x4),B.y1=Math.round(B.y1),B.y2=Math.round(B.y2),B.y3=Math.round(B.y3),B.y4=Math.round(B.y4)}}static BarcodeReaderException(e,r){let n,x=mr.DBR_UNKNOWN;return typeof e=="number"?(x=e,n=new Error(r)):n=new Error(e),n.code=x,n}_handleRetJsonString(e){let r=mr;if(e.textResults){for(let n=0;n<e.textResults.length;n++){let x=e.textResults[n];try{let i=x.barcodeText,o="";for(let s=0;s<i.length;s++)o+=String.fromCharCode(i[s]);try{x.barcodeText=decodeURIComponent(escape(o))}catch{x.barcodeText=o}}catch{x.barcodeText=""}if(x.exception!=null){Y._setWarnnedEx.has(x.exception)||(Y._setWarnnedEx.add(x.exception),console.warn(x.exception));let i={};x.exception.split(";").forEach(o=>{let s=o.indexOf(":");i[o.substring(0,s)]=o.substring(s+1)}),x.exception=i}}return e.decodeRecords?this.decodeRecords=e.decodeRecords:this.decodeRecords={},this._lastErrorCode=e.exception,this._lastErrorString=e.description,e.exception&&!Y._setWarnnedEx.has(e.description)&&(Y._setWarnnedEx.add(e.description),console.warn(e.description)),e.textResults}if(e.exception==r.DBR_SUCCESS)return e.data;throw Y.BarcodeReaderException(e.exception,e.description)}async setModeArgument(e,r,n,x){return await new Promise((i,o)=>{let s=Y._nextTaskID++;Y._taskCallbackMap.set(s,u=>{if(u.success){try{this._handleRetJsonString(u.setReturn)}catch(B){return o(B)}return i()}{let B=new Error(u.message);return B.stack=u.stack+`
`+B.stack,o(B)}}),Y._dbrWorker.postMessage({type:"setModeArgument",id:s,instanceID:this._instanceID,body:{modeName:e,index:r,argumentName:n,argumentValue:x}})})}async getModeArgument(e,r,n){return await new Promise((x,i)=>{let o=Y._nextTaskID++;Y._taskCallbackMap.set(o,s=>{if(s.success){let u;try{u=this._handleRetJsonString(s.getReturn)}catch(B){return i(B)}return x(u)}{let u=new Error(s.message);return u.stack=s.stack+`
`+u.stack,i(u)}}),Y._dbrWorker.postMessage({type:"getModeArgument",id:o,instanceID:this._instanceID,body:{modeName:e,index:r,argumentName:n}})})}async getIntermediateResults(){return await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success)return e(x.results);{let i=new Error(x.message);return i.stack=x.stack+`
`+i.stack,r(i)}}),Y._dbrWorker.postMessage({type:"getIntermediateResults",id:n,instanceID:this._instanceID})})}async getIntermediateCanvas(){let e=await this.getIntermediateResults(),r=[];for(let n of e)if(n.dataType==tn.IMRDT_IMAGE)for(let x of n.results){const i=x.bytes;let o;switch(Y._onLog&&Y._onLog(" "+i.length+" "+i.byteLength+" "+x.width+" "+x.height+" "+x.stride+" "+x.format),x.format){case Et.IPF_ABGR_8888:o=new Uint8ClampedArray(i);break;case Et.IPF_RGB_888:{const B=i.length/3;o=new Uint8ClampedArray(4*B);for(let C=0;C<B;++C)o[4*C]=i[3*C+2],o[4*C+1]=i[3*C+1],o[4*C+2]=i[3*C],o[4*C+3]=255;break}case Et.IPF_GrayScaled:{const B=i.length;o=new Uint8ClampedArray(4*B);for(let C=0;C<B;C++)o[4*C]=o[4*C+1]=o[4*C+2]=i[C],o[4*C+3]=255;break}case Et.IPF_Binary:case Et.IPF_BinaryInverted:{const B=i.length,C=x.width,p=x.height,m=x.stride;o=new Uint8ClampedArray(C*p*4);for(let w=0;w<B;w++){let b=i[w],R=w%m*8,L=Math.floor(w/m);for(let X=0;X<8;X++){let k=R+X,J=4*(L*C+k);if(k>=C)break;o[J]=o[J+1]=o[J+2]=(128&b)/128*255,o[J+3]=255,b<<=1}}break}default:console.warn("unknow intermediate image",x)}if(!o)continue;let s=new ImageData(o,x.width,x.height),u=document.createElement("canvas");u.width=x.width,u.height=x.height,u.getContext("2d").putImageData(s,0,0),r.push(u)}return r}async getScanSettings(){return await new Promise((e,r)=>{let n=Y._nextTaskID++;Y._taskCallbackMap.set(n,x=>{if(x.success){let i=x.results;return i.intervalTime=this.intervalTime,i.whenToPlaySoundforSuccessfulRead=this.whenToPlaySoundforSuccessfulRead,i.soundOnSuccessfullRead=this.soundSource,i.whenToVibrateforSuccessfulRead=this.whenToVibrateforSuccessfulRead,i.vibrateDuration=this.vibrateDuration,i.captureAndDecodeInParallel=this.captureAndDecodeInParallel,i.autoZoom=this.autoZoom,i.autoFocus=this.autoFocus,i.autoSuggestTip=this.autoSuggestTip,e(i)}{let i=new Error(x.message);return i.stack+=`
`+x.stack,r(i)}}),Y._dbrWorker.postMessage({type:"getScanSettings",id:n,instanceID:this._instanceID})})}async updateScanSettings(e){if(!e)return;const r=JSON.parse(JSON.stringify(e));if(r.autoZoom||r.autoFocus||r.autoSuggestTip){if(!Y._bUseFullFeature)throw new Error("'autoZoom', 'autoFocus' and 'autoSuggestTip' are not supported in the compact version. Please try the full-featured version.");const n=await this.getRuntimeSettings();n.intermediateResultTypes|=Fr.IRT_TYPED_BARCODE_ZONE,await this.updateRuntimeSettings(n)}return r.hasOwnProperty("intervalTime")&&(this.intervalTime=Math.max(r.intervalTime,0),delete r.intervalTime),r.hasOwnProperty("whenToPlaySoundforSuccessfulRead")&&(this.whenToPlaySoundforSuccessfulRead=r.whenToPlaySoundforSuccessfulRead,delete r.whenToPlaySoundforSuccessfulRead),r.hasOwnProperty("soundOnSuccessfullRead")&&(this.soundSource=r.soundOnSuccessfullRead,delete r.soundOnSuccessfullRead),r.hasOwnProperty("whenToVibrateforSuccessfulRead")&&(this.whenToVibrateforSuccessfulRead=r.whenToVibrateforSuccessfulRead,delete r.whenToVibrateforSuccessfulRead),r.hasOwnProperty("vibrateDuration")&&(this.vibrateDuration=r.vibrateDuration,delete r.vibrateDuration),r.hasOwnProperty("captureAndDecodeInParallel")&&(this.captureAndDecodeInParallel=r.captureAndDecodeInParallel,delete r.captureAndDecodeInParallel),r.hasOwnProperty("autoZoom")&&(this.autoZoom&&this.autoZoom!=r.autoZoom&&this.dce&&this.dce.setZoom({factor:1}).catch(()=>{}),this.autoZoom=r.autoZoom,delete r.autoZoom),r.hasOwnProperty("autoFocus")&&(this.autoFocus=r.autoFocus,this.dce&&this.dce.setFocus({mode:"continuous"}).catch(()=>{}),delete r.autoFocus),r.hasOwnProperty("autoSuggestTip")&&(this.autoSuggestTip=r.autoSuggestTip,delete r.autoFocus),await new Promise((n,x)=>{let i=Y._nextTaskID++;Y._taskCallbackMap.set(i,o=>{if(o.success)return n();{let s=new Error(o.message);return s.stack+=`
`+o.stack,x(s)}}),Y._dbrWorker.postMessage({type:"updateScanSettings",id:i,instanceID:this._instanceID,body:{settings:r}})})}_cloneDecodeResults(e){if(e instanceof Array){let r=[];for(let n of e)r.push(this._cloneDecodeResults(n));return r}{let r=e;return JSON.parse(JSON.stringify(r,(x,i)=>x=="oriVideoCanvas"||x=="searchRegionCanvas"?void 0:i))}}async _loopReadVideo(){if(this.bDestroyed)return this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),void this._drawResults(null);if(this.dce&&!this.dce.isOpen())return this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),void await this.clearMapDecodeRecord();if(!this.dce&&!this._imgSource||this._bPauseScan)return Y._onLog&&Y._onLog("Scan is paused, or imageSource is not set. Ask in 1s."),await this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause));Y._onLog&&Y._onLog("======= once read ======="),Y._onLog&&(this._timeStartDecode=Date.now());let e=null,r=null;if(this.dce)e=this._getVideoFrame();else if(this._imgSource&&(r=await this._imgSource.getImage(),!Y.isDSImage(r)))throw new Error("Invalid DSImage.");if(!e&&!r)return Y._onLog&&Y._onLog("Get invalid frame."),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0));(async()=>{let n=[];if(e){n=await this._decode_DCEFrame(e,{bScanner:!0,bCopyData:!1});let x=null;if(n&&n.length){const{sx:i,sy:o,width:s,height:u,_sWidth:B,_sHeight:C}=e;x=n.map(p=>({resultState:p.resultState,localizationResult:JSON.parse(JSON.stringify(p.localizationResult))})),Y.recalculateResultLocation(x,i,o,B,C,s,u)}this._resultHighlightingDuration==0?this._drawResults(null):this._drawResults(x,n),this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._resultHighlightingDuration>0&&(this._clearResultsCanvasTimeoutId=setTimeout(()=>{this.bDestroyed||this._drawResults(null)},this._resultHighlightingDuration))}else r&&(n=await this._decode_DSImage(r,{bScanner:!0,bCopyData:!1}));return n})().then(n=>{if(Y._onLog&&Y._onLog(n),this.dce&&this.captureAndDecodeInParallel){let x=this.array_decodeFrameTimeCost,i=this.array_getFrameTimeCost;const o=()=>{let s=0;if(i&&i.length){let u=Math.min(...x),B=Math.max(...i);u&&B&&(s=u-B)}else s=0;return s>0?s:0};(()=>{for(;x.length>=5;)x.shift();x.push(this._lastInnerDecodeDuration)})(),this._intervalGetVideoFrame=o()+this.intervalTime}if((this.dce&&this.dce.isOpen()||this._imgSource)&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&n.length){let x=!1;this.bPlaySoundOnSuccessfulRead===!0||this.bPlaySoundOnSuccessfulRead==="frame"?x=n.some(i=>i.resultState>=0):this.bPlaySoundOnSuccessfulRead==="unique"&&(x=n.some(i=>i.resultState==0)),x&&this.beepSound&&(this.beepSound.stop(),this.beepSound.play())}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&n.length){let x=!1;if(this.bVibrateOnSuccessfulRead===!0||this.bVibrateOnSuccessfulRead==="frame"?x=n.some(i=>i.resultState>=0):this.bVibrateOnSuccessfulRead==="unique"&&(x=n.some(i=>i.resultState==0)),x)try{navigator.vibrate(this.vibrateDuration)}catch(i){console.warn("Vibration not allowed. User interaction required: "+(i.message||i))}}if(this.onImageRead){n=n.filter(i=>i.resultState>=0);const x=this._cloneDecodeResults(n);this.onImageRead(x)}if(this.onUniqueRead){n=n.filter(i=>i.resultState==0);const x=this._cloneDecodeResults(n);for(let i of x)this.onUniqueRead(i.barcodeText,i)}}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this.intervalTime):this._loopReadVideo()}).catch(n=>{this.dce&&this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),Y._onLog&&Y._onLog(n.message||n),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()},Math.max(this.intervalTime,1e3)),n.message=="platform error"||console.warn(n.message)})}_getVideoFrame(){if(!this.dce)return null;let e;if(this.captureAndDecodeInParallel){if(Y._onLog&&Y._onLog("Get frame in parallel."),this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",this._intervalGetVideoFrame),!this.dce.numberOfFramesInBuffer)return this._dceControler&&this._dceControler.setDisiredValue(this,"loopInterval",0),null;e=this.dce.getFrameFromBuffer(),(n=>{if(!n)return;let x=n.timeSpent,i=this.array_getFrameTimeCost;for(;i.length>=5;)i.shift();i.push(x)})(e)}else Y._onLog&&Y._onLog("Get frame in serial."),this._dceControler&&this._dceControler.setDisiredAction(this,"stopFetchingLoop"),e=this.dce.getFrame();return e}_drawResults(e,r){if(!this.dce||this.dce.disposed||this._bPauseScan||!this._drawingItemNamespace||!this._drawingItemNamespace.DT_Polygon)return;if(!this._dbrDrawingLayer){if(!this.dce.isOpen()||!(this.dce.singleFrameMode||this.dce.video&&this.dce._videoTrack))return;this._dbrDrawingLayer=this.dce.getDrawingLayer(3)}const n=this._dbrDrawingLayer;e||(e=[]);let x=this._arrPolygons;for(let i=0;i<e.length;i++){let o,s=e[i].localizationResult;x[i]?(o=x[i],n.hasDrawingItem(o)||n.addDrawingItem(o),o.set("vertices",[{x:s.x1,y:s.y1},{x:s.x2,y:s.y2},{x:s.x3,y:s.y3},{x:s.x4,y:s.y4}]),(o.set||o.setAttribute).call(o,"vertices",[{x:s.x1,y:s.y1},{x:s.x2,y:s.y2},{x:s.x3,y:s.y3},{x:s.x4,y:s.y4}])):(o=new this._drawingItemNamespace.DT_Polygon([{x:s.x1,y:s.y1},{x:s.x2,y:s.y2},{x:s.x3,y:s.y3},{x:s.x4,y:s.y4}]),n.addDrawingItem(o),x[i]=o),e[i].resultState===-1?(o.styleId=this._styleIdBeforeVerification,o._mapStyle.set("default",this.dce.getDrawingStyle(this._styleIdBeforeVerification)),o._mapStyle.set("selected",this.dce.getDrawingStyle(this._styleIdBeforeVerification))):(o.styleId=null,o._mapStyle.set("default",this.dce.getDrawingStyle(3)),o._mapStyle.set("selected",this.dce.getDrawingStyle(7))),r&&r[i]?o.addNote({name:"Barcode_Result",content:r[i]},!0):o.addNote({name:"Barcode_Result",content:e[i]},!0)}for(let i=e.length;i<x.length;i++)x[i].deleteNote("Barcode_Result"),n.removeDrawingItem(x[i]);n.renderAll()}async startScanning(e){if(!this.dce&&!this._imgSource)throw new Error("'imageSource' is not set. call 'setImageSource()' before 'startScanning()'.");if(this._promiseStartScan&&this._promiseStartScan.isPending)return this._promiseStartScan;this._promiseStartScan=new Ei;let r=null;if(this.dce){if(this.dce.isOpen())if(e&&this.dce.appendAndShowUI(),this.dce.playCallbackInfo)r=JSON.parse(JSON.stringify(this.dce.playCallbackInfo));else{const n=this.dce.getSelectedCamera();r={width:this.dce.video.videoWidth,height:this.dce.video.videoHeight,deviceId:n&&n.deviceId}}else if(r=await this.dce.open(e),!this._promiseStartScan)return null;this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"close"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}return this._bPauseScan=!1,this.dce&&this.dce.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this.dce&&(this.dce.startFetchingLoop(),this._dceControler&&this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"})),this._loopReadVideo()},0)),this._promiseStartScan.resolve(r),r}stopScanning(e){this.dce&&(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),this._drawResults(null),this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"close",[e]))),this._bPauseScan=!0,this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0,this._promiseStartScan=null}pauseScanning(e){if(this._clearResultsCanvasTimeoutId&&clearTimeout(this._clearResultsCanvasTimeoutId),e&&e.keepResultsHighlighted||this._drawResults(null),this._bPauseScan=!0,this.dce){if(this.dce.singleFrameMode)throw new Error("'pauseScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this._dceControler&&(this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!1),this.dce.ifShowScanRegionLaser||this.dce.hideScanRegionLaser(),this._dceControler.setDisiredAction(this,"stopFetchingLoop"))}}resumeScanning(){if(this._bPauseScan=!1,this.dce){if(this.dce.singleFrameMode)throw new Error("'resumeScanning()' is unavailable when property 'singleFrameMode' of the 'CameraEnhancer' instance is true.");this.dce.startFetchingLoop(),this._dceControler&&(this._dceControler.clearUserDisiredAction({user:this,actionName:"stopFetchingLoop"}),this._dceControler.setDisiredValue(this,"ifShowScanRegionLaser",!0),this.dce.ifShowScanRegionLaser&&this.dce.showScanRegionLaser())}}destroyContext(){if(Y._onLog&&Y._onLog("destroyContext()"),this.bDestroyed)return;this.bDestroyed=!0,(this.dce||this._promiseStartScan)&&this.stopScanning(),this.setImageSource(null);let e=Y._nextTaskID++;Y._taskCallbackMap.set(e,r=>{if(!r.success){let n=new Error(r.message);throw n.stack=r.stack+`
`+n.stack,n}}),Y._dbrWorker.postMessage({type:"destroyContext",id:e,instanceID:this._instanceID})}}Y._jsVersion="9.6.20",Y._jsEditVersion="20230410",Y._version=`loading...(JS ${Y._jsVersion}.${Y._jsEditVersion})`,Y._license=Io,Y._sessionPassword=Oo,Y.browserInfo=mt,Y._workerName=`dbr-${Y._jsVersion}.browser.worker.js`,Y._engineResourcePath=bo,Y._licenseServer=[],Y._deviceFriendlyName="",Y._isShowRelDecodeTimeInResults=!1,Y._bWasmDebug=!1,Y._bNeverShowDialog=!1,Y.__bUseFullFeature=!0,Y._nextTaskID=0,Y._taskCallbackMap=new Map,Y._pLoad=new Ei,Y._lastErrorCode=0,Y._lastErrorString="",Y._setWarnnedEx=new Set,Y._defaultUIElementURL="@engineResourcePath/dbr.ui.html";var Ro={653:(t,e,r)=>{var n,x,i,o,s,u,B,C,p,m,w,b,R,L,X,k,J,re,Z,ce,ue,D=D||{version:"5.2.1"};if(e.fabric=D,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?D.document=document:D.document=document.implementation.createHTMLDocument(""),D.window=window;else{var Se=new(r(192)).JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;D.document=Se.document,D.jsdomImplForWrapper=r(898).implForWrapper,D.nodeCanvas=r(245).Canvas,D.window=Se,DOMParser=D.window.DOMParser}function Ie(h,c){var l=h.canvas,A=c.targetCanvas,a=A.getContext("2d");a.translate(0,A.height),a.scale(1,-1);var E=l.height-A.height;a.drawImage(l,0,E,A.width,A.height,0,0,A.width,A.height)}function ke(h,c){var l=c.targetCanvas.getContext("2d"),A=c.destinationWidth,a=c.destinationHeight,E=A*a*4,f=new Uint8Array(this.imageBuffer,0,E),v=new Uint8ClampedArray(this.imageBuffer,0,E);h.readPixels(0,0,A,a,h.RGBA,h.UNSIGNED_BYTE,f);var d=new ImageData(v,A,a);l.putImageData(d,0,0)}D.isTouchSupported="ontouchstart"in D.window||"ontouchstart"in D.document||D.window&&D.window.navigator&&D.window.navigator.maxTouchPoints>0,D.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",D.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],D.DPI=96,D.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",D.commaWsp="(?:\\s+,?\\s*|,\\s*)",D.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,D.reNonWord=/[ \n\.,;!\?\-]/,D.fontPaths={},D.iMatrix=[1,0,0,1,0,0],D.svgNS="http://www.w3.org/2000/svg",D.perfLimitSizeTotal=2097152,D.maxCacheSideLimit=4096,D.minCacheSideLimit=256,D.charWidthsCache={},D.textureSize=2048,D.disableStyleCopyPaste=!1,D.enableGLFiltering=!0,D.devicePixelRatio=D.window.devicePixelRatio||D.window.webkitDevicePixelRatio||D.window.mozDevicePixelRatio||1,D.browserShadowBlurConstant=1,D.arcToSegmentsCache={},D.boundsOfCurveCache={},D.cachesBoundsOfCurve=!0,D.forceGLPutImageData=!1,D.initFilterBackend=function(){return D.enableGLFiltering&&D.isWebglSupported&&D.isWebglSupported(D.textureSize)?(console.log("max texture size: "+D.maxTextureSize),new D.WebglFilterBackend({tileSize:D.textureSize})):D.Canvas2dFilterBackend?new D.Canvas2dFilterBackend:void 0},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=D),function(){function h(l,A){if(this.__eventListeners[l]){var a=this.__eventListeners[l];A?a[a.indexOf(A)]=!1:D.util.array.fill(a,!1)}}function c(l,A){var a=function(){A.apply(this,arguments),this.off(l,a)}.bind(this);this.on(l,a)}D.Observable={fire:function(l,A){if(!this.__eventListeners)return this;var a=this.__eventListeners[l];if(!a)return this;for(var E=0,f=a.length;E<f;E++)a[E]&&a[E].call(this,A||{});return this.__eventListeners[l]=a.filter(function(v){return v!==!1}),this},on:function(l,A){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var a in l)this.on(a,l[a]);else this.__eventListeners[l]||(this.__eventListeners[l]=[]),this.__eventListeners[l].push(A);return this},once:function(l,A){if(arguments.length===1)for(var a in l)c.call(this,a,l[a]);else c.call(this,l,A);return this},off:function(l,A){if(!this.__eventListeners)return this;if(arguments.length===0)for(l in this.__eventListeners)h.call(this,l);else if(arguments.length===1&&typeof arguments[0]=="object")for(var a in l)h.call(this,a,l[a]);else h.call(this,l,A);return this}}}(),D.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,c=arguments.length;h<c;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,c,l){var A=this._objects;return l?A[c]=h:A.splice(c,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,c=this._objects,l=!1,A=0,a=arguments.length;A<a;A++)(h=c.indexOf(arguments[A]))!==-1&&(l=!0,c.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[A]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(h,c){for(var l=this.getObjects(),A=0,a=l.length;A<a;A++)h.call(c,l[A],A,l);return this},getObjects:function(h){return h===void 0?this._objects.concat():this._objects.filter(function(c){return c.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,c){return this._objects.indexOf(h)>-1||!!c&&this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,c){return h+(c.complexity?c.complexity():0)},0)}},D.CommonMethods={_setOptions:function(h){for(var c in h)this.set(c,h[c])},_initGradient:function(h,c){!h||!h.colorStops||h instanceof D.Gradient||this.set(c,new D.Gradient(h))},_initPattern:function(h,c,l){!h||!h.source||h instanceof D.Pattern?l&&l():this.set(c,new D.Pattern(h,l))},_setObject:function(h){for(var c in h)this._set(c,h[c])},set:function(h,c){return typeof h=="object"?this._setObject(h):this._set(h,c),this},_set:function(h,c){this[h]=c},toggle:function(h){var c=this.get(h);return typeof c=="boolean"&&this.set(h,!c),this},get:function(h){return this[h]}},n=e,x=Math.sqrt,i=Math.atan2,o=Math.pow,s=Math.PI/180,u=Math.PI/2,D.util={cos:function(h){if(h===0)return 1;switch(h<0&&(h=-h),h/u){case 1:case 3:return 0;case 2:return-1}return Math.cos(h)},sin:function(h){if(h===0)return 0;var c=1;switch(h<0&&(c=-1),h/u){case 1:return c;case 2:return 0;case 3:return-c}return Math.sin(h)},removeFromArray:function(h,c){var l=h.indexOf(c);return l!==-1&&h.splice(l,1),h},getRandomInt:function(h,c){return Math.floor(Math.random()*(c-h+1))+h},degreesToRadians:function(h){return h*s},radiansToDegrees:function(h){return h/s},rotatePoint:function(h,c,l){var A=new D.Point(h.x-c.x,h.y-c.y),a=D.util.rotateVector(A,l);return new D.Point(a.x,a.y).addEquals(c)},rotateVector:function(h,c){var l=D.util.sin(c),A=D.util.cos(c);return{x:h.x*A-h.y*l,y:h.x*l+h.y*A}},createVector:function(h,c){return new D.Point(c.x-h.x,c.y-h.y)},calcAngleBetweenVectors:function(h,c){return Math.acos((h.x*c.x+h.y*c.y)/(Math.hypot(h.x,h.y)*Math.hypot(c.x,c.y)))},getHatVector:function(h){return new D.Point(h.x,h.y).multiply(1/Math.hypot(h.x,h.y))},getBisector:function(h,c,l){var A=D.util.createVector(h,c),a=D.util.createVector(h,l),E=D.util.calcAngleBetweenVectors(A,a),f=E*(D.util.calcAngleBetweenVectors(D.util.rotateVector(A,E),a)===0?1:-1)/2;return{vector:D.util.getHatVector(D.util.rotateVector(A,f)),angle:E}},projectStrokeOnPoints:function(h,c,l){var A=[],a=c.strokeWidth/2,E=c.strokeUniform?new D.Point(1/c.scaleX,1/c.scaleY):new D.Point(1,1),f=function(v){var d=a/Math.hypot(v.x,v.y);return new D.Point(v.x*d*E.x,v.y*d*E.y)};return h.length<=1||h.forEach(function(v,d){var g,_,F=new D.Point(v.x,v.y);d===0?(_=h[d+1],g=l?f(D.util.createVector(_,F)).addEquals(F):h[h.length-1]):d===h.length-1?(g=h[d-1],_=l?f(D.util.createVector(g,F)).addEquals(F):h[0]):(g=h[d-1],_=h[d+1]);var y,T,S=D.util.getBisector(F,g,_),I=S.vector,N=S.angle;if(c.strokeLineJoin==="miter"&&(y=-a/Math.sin(N/2),T=new D.Point(I.x*y*E.x,I.y*y*E.y),Math.hypot(T.x,T.y)/a<=c.strokeMiterLimit))return A.push(F.add(T)),void A.push(F.subtract(T));y=-a*Math.SQRT2,T=new D.Point(I.x*y*E.x,I.y*y*E.y),A.push(F.add(T)),A.push(F.subtract(T))}),A},transformPoint:function(h,c,l){return l?new D.Point(c[0]*h.x+c[2]*h.y,c[1]*h.x+c[3]*h.y):new D.Point(c[0]*h.x+c[2]*h.y+c[4],c[1]*h.x+c[3]*h.y+c[5])},makeBoundingBoxFromPoints:function(h,c){if(c)for(var l=0;l<h.length;l++)h[l]=D.util.transformPoint(h[l],c);var A=[h[0].x,h[1].x,h[2].x,h[3].x],a=D.util.array.min(A),E=D.util.array.max(A)-a,f=[h[0].y,h[1].y,h[2].y,h[3].y],v=D.util.array.min(f);return{left:a,top:v,width:E,height:D.util.array.max(f)-v}},invertTransform:function(h){var c=1/(h[0]*h[3]-h[1]*h[2]),l=[c*h[3],-c*h[1],-c*h[2],c*h[0]],A=D.util.transformPoint({x:h[4],y:h[5]},l,!0);return l[4]=-A.x,l[5]=-A.y,l},toFixed:function(h,c){return parseFloat(Number(h).toFixed(c))},parseUnit:function(h,c){var l=/\D{0,2}$/.exec(h),A=parseFloat(h);switch(c||(c=D.Text.DEFAULT_SVG_FONT_SIZE),l[0]){case"mm":return A*D.DPI/25.4;case"cm":return A*D.DPI/2.54;case"in":return A*D.DPI;case"pt":return A*D.DPI/72;case"pc":return A*D.DPI/72*12;case"em":return A*c;default:return A}},falseFunction:function(){return!1},getKlass:function(h,c){return h=D.util.string.camelize(h.charAt(0).toUpperCase()+h.slice(1)),D.util.resolveNamespace(c)[h]},getSvgAttributes:function(h){var c=["instantiated_by_use","style","id","class"];switch(h){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"])}return c},resolveNamespace:function(h){if(!h)return D;var c,l=h.split("."),A=l.length,a=n||D.window;for(c=0;c<A;++c)a=a[l[c]];return a},loadImage:function(h,c,l,A){if(h){var a=D.util.createImage(),E=function(){c&&c.call(l,a,!1),a=a.onload=a.onerror=null};a.onload=E,a.onerror=function(){D.log("Error loading "+a.src),c&&c.call(l,null,!0),a=a.onload=a.onerror=null},h.indexOf("data")!==0&&A!=null&&(a.crossOrigin=A),h.substring(0,14)==="data:image/svg"&&(a.onload=null,D.util.loadImageInDom(a,E)),a.src=h}else c&&c.call(l,h)},loadImageInDom:function(h,c){var l=D.document.createElement("div");l.style.width=l.style.height="1px",l.style.left=l.style.top="-100%",l.style.position="absolute",l.appendChild(h),D.document.querySelector("body").appendChild(l),h.onload=function(){c(),l.parentNode.removeChild(l),l=null}},enlivenObjects:function(h,c,l,A){var a=[],E=0,f=(h=h||[]).length;function v(){++E===f&&c&&c(a.filter(function(d){return d}))}f?h.forEach(function(d,g){d&&d.type?D.util.getKlass(d.type,l).fromObject(d,function(_,F){F||(a[g]=_),A&&A(d,_,F),v()}):v()}):c&&c(a)},enlivenObjectEnlivables:function(h,c,l){var A=D.Object.ENLIVEN_PROPS.filter(function(a){return!!h[a]});D.util.enlivenObjects(A.map(function(a){return h[a]}),function(a){var E={};A.forEach(function(f,v){E[f]=a[v],c&&(c[f]=a[v])}),l&&l(E)})},enlivenPatterns:function(h,c){function l(){++a===E&&c&&c(A)}var A=[],a=0,E=(h=h||[]).length;E?h.forEach(function(f,v){f&&f.source?new D.Pattern(f,function(d){A[v]=d,l()}):(A[v]=f,l())}):c&&c(A)},groupSVGElements:function(h,c,l){var A;return h&&h.length===1?h[0]:(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),A=new D.Group(h,c),l!==void 0&&(A.sourcePath=l),A)},populateWithProperties:function(h,c,l){if(l&&Array.isArray(l))for(var A=0,a=l.length;A<a;A++)l[A]in h&&(c[l[A]]=h[l[A]])},createCanvasElement:function(){return D.document.createElement("canvas")},copyCanvasElement:function(h){var c=D.util.createCanvasElement();return c.width=h.width,c.height=h.height,c.getContext("2d").drawImage(h,0,0),c},toDataURL:function(h,c,l){return h.toDataURL("image/"+c,l)},createImage:function(){return D.document.createElement("img")},multiplyTransformMatrices:function(h,c,l){return[h[0]*c[0]+h[2]*c[1],h[1]*c[0]+h[3]*c[1],h[0]*c[2]+h[2]*c[3],h[1]*c[2]+h[3]*c[3],l?0:h[0]*c[4]+h[2]*c[5]+h[4],l?0:h[1]*c[4]+h[3]*c[5]+h[5]]},qrDecompose:function(h){var c=i(h[1],h[0]),l=o(h[0],2)+o(h[1],2),A=x(l),a=(h[0]*h[3]-h[2]*h[1])/A,E=i(h[0]*h[2]+h[1]*h[3],l);return{angle:c/s,scaleX:A,scaleY:a,skewX:E/s,skewY:0,translateX:h[4],translateY:h[5]}},calcRotateMatrix:function(h){if(!h.angle)return D.iMatrix.concat();var c=D.util.degreesToRadians(h.angle),l=D.util.cos(c),A=D.util.sin(c);return[l,A,-A,l,0,0]},calcDimensionsMatrix:function(h){var c=h.scaleX===void 0?1:h.scaleX,l=h.scaleY===void 0?1:h.scaleY,A=[h.flipX?-c:c,0,0,h.flipY?-l:l,0,0],a=D.util.multiplyTransformMatrices,E=D.util.degreesToRadians;return h.skewX&&(A=a(A,[1,0,Math.tan(E(h.skewX)),1],!0)),h.skewY&&(A=a(A,[1,Math.tan(E(h.skewY)),0,1],!0)),A},composeMatrix:function(h){var c=[1,0,0,1,h.translateX||0,h.translateY||0],l=D.util.multiplyTransformMatrices;return h.angle&&(c=l(c,D.util.calcRotateMatrix(h))),(h.scaleX!==1||h.scaleY!==1||h.skewX||h.skewY||h.flipX||h.flipY)&&(c=l(c,D.util.calcDimensionsMatrix(h))),c},resetObjectTransform:function(h){h.scaleX=1,h.scaleY=1,h.skewX=0,h.skewY=0,h.flipX=!1,h.flipY=!1,h.rotate(0)},saveObjectTransform:function(h){return{scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,angle:h.angle,left:h.left,flipX:h.flipX,flipY:h.flipY,top:h.top}},isTransparent:function(h,c,l,A){A>0&&(c>A?c-=A:c=0,l>A?l-=A:l=0);var a,E=!0,f=h.getImageData(c,l,2*A||1,2*A||1),v=f.data.length;for(a=3;a<v&&(E=f.data[a]<=0)!=0;a+=4);return f=null,E},parsePreserveAspectRatioAttribute:function(h){var c,l="meet",A=h.split(" ");return A&&A.length&&((l=A.pop())!=="meet"&&l!=="slice"?(c=l,l="meet"):A.length&&(c=A.pop())),{meetOrSlice:l,alignX:c!=="none"?c.slice(1,4):"none",alignY:c!=="none"?c.slice(5,8):"none"}},clearFabricFontCache:function(h){(h=(h||"").toLowerCase())?D.charWidthsCache[h]&&delete D.charWidthsCache[h]:D.charWidthsCache={}},limitDimsByArea:function(h,c){var l=Math.sqrt(c*h),A=Math.floor(c/l);return{x:Math.floor(l),y:A}},capValue:function(h,c,l){return Math.max(h,Math.min(c,l))},findScaleToFit:function(h,c){return Math.min(c.width/h.width,c.height/h.height)},findScaleToCover:function(h,c){return Math.max(c.width/h.width,c.height/h.height)},matrixToSVG:function(h){return"matrix("+h.map(function(c){return D.util.toFixed(c,D.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(h,c){var l=D.util.invertTransform(c),A=D.util.multiplyTransformMatrices(l,h.calcOwnMatrix());D.util.applyTransformToObject(h,A)},addTransformToObject:function(h,c){D.util.applyTransformToObject(h,D.util.multiplyTransformMatrices(c,h.calcOwnMatrix()))},applyTransformToObject:function(h,c){var l=D.util.qrDecompose(c),A=new D.Point(l.translateX,l.translateY);h.flipX=!1,h.flipY=!1,h.set("scaleX",l.scaleX),h.set("scaleY",l.scaleY),h.skewX=l.skewX,h.skewY=l.skewY,h.angle=l.angle,h.setPositionByOrigin(A,"center","center")},sizeAfterTransform:function(h,c,l){var A=h/2,a=c/2,E=[{x:-A,y:-a},{x:A,y:-a},{x:-A,y:a},{x:A,y:a}],f=D.util.calcDimensionsMatrix(l),v=D.util.makeBoundingBoxFromPoints(E,f);return{x:v.width,y:v.height}},mergeClipPaths:function(h,c){var l=h,A=c;l.inverted&&!A.inverted&&(l=c,A=h),D.util.applyTransformToObject(A,D.util.multiplyTransformMatrices(D.util.invertTransform(l.calcTransformMatrix()),A.calcTransformMatrix()));var a=l.inverted&&A.inverted;return a&&(l.inverted=A.inverted=!1),new D.Group([l],{clipPath:A,inverted:a})}},function(){var h=Array.prototype.join,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function A(T,S,I,N,W,z,se,xe,te,j,U){var q=D.util.cos(T),oe=D.util.sin(T),ae=D.util.cos(S),G=D.util.sin(S),V=I*W*ae-N*z*G+se,Q=N*W*ae+I*z*G+xe;return["C",j+te*(-I*W*oe-N*z*q),U+te*(-N*W*oe+I*z*q),V+te*(I*W*G+N*z*ae),Q+te*(N*W*G-I*z*ae),V,Q]}function a(T,S,I,N){var W=Math.atan2(S,T),z=Math.atan2(N,I);return z>=W?z-W:2*Math.PI-(W-z)}function E(T,S,I){for(var N=I[1],W=I[2],z=I[3],se=I[4],xe=I[5],te=function(q,oe,ae,G,V,Q,Ee){var ie=Math.PI,fe=Ee*ie/180,De=D.util.sin(fe),ve=D.util.cos(fe),Be=0,_e=0,pe=-ve*q*.5-De*oe*.5,ye=-ve*oe*.5+De*q*.5,Te=(ae=Math.abs(ae))*ae,we=(G=Math.abs(G))*G,Le=ye*ye,Ve=pe*pe,Tt=Te*we-Te*Le-we*Ve,Vt=0;if(Tt<0){var Yt=Math.sqrt(1-Tt/(Te*we));ae*=Yt,G*=Yt}else Vt=(V===Q?-1:1)*Math.sqrt(Tt/(Te*Le+we*Ve));var qe=Vt*ae*ye/G,bt=-Vt*G*pe/ae,It=ve*qe-De*bt+.5*q,x0=De*qe+ve*bt+.5*oe,Jt=a(1,0,(pe-qe)/ae,(ye-bt)/G),$t=a((pe-qe)/ae,(ye-bt)/G,(-pe-qe)/ae,(-ye-bt)/G);Q===0&&$t>0?$t-=2*ie:Q===1&&$t<0&&($t+=2*ie);for(var xr=Math.ceil(Math.abs($t/ie*2)),m0=[],l0=$t/xr,Ur=8/3*Math.sin(l0/4)*Math.sin(l0/4)/Math.sin(l0/2),M0=Jt+l0,u0=0;u0<xr;u0++)m0[u0]=A(Jt,M0,ve,De,ae,G,It,x0,Ur,Be,_e),Be=m0[u0][5],_e=m0[u0][6],Jt=M0,M0+=l0;return m0}(I[6]-T,I[7]-S,N,W,se,xe,z),j=0,U=te.length;j<U;j++)te[j][1]+=T,te[j][2]+=S,te[j][3]+=T,te[j][4]+=S,te[j][5]+=T,te[j][6]+=S;return te}function f(T,S,I,N){return Math.sqrt((I-T)*(I-T)+(N-S)*(N-S))}function v(T,S,I,N,W,z,se,xe){return function(te){var j,U=(j=te)*j*j,q=function(G){return 3*G*G*(1-G)}(te),oe=function(G){return 3*G*(1-G)*(1-G)}(te),ae=function(G){return(1-G)*(1-G)*(1-G)}(te);return{x:se*U+W*q+I*oe+T*ae,y:xe*U+z*q+N*oe+S*ae}}}function d(T,S,I,N,W,z,se,xe){return function(te){var j=1-te,U=3*j*j*(I-T)+6*j*te*(W-I)+3*te*te*(se-W),q=3*j*j*(N-S)+6*j*te*(z-N)+3*te*te*(xe-z);return Math.atan2(q,U)}}function g(T,S,I,N,W,z){return function(se){var xe,te=(xe=se)*xe,j=function(q){return 2*q*(1-q)}(se),U=function(q){return(1-q)*(1-q)}(se);return{x:W*te+I*j+T*U,y:z*te+N*j+S*U}}}function _(T,S,I,N,W,z){return function(se){var xe=1-se,te=2*xe*(I-T)+2*se*(W-I),j=2*xe*(N-S)+2*se*(z-N);return Math.atan2(j,te)}}function F(T,S,I){var N,W,z={x:S,y:I},se=0;for(W=1;W<=100;W+=1)N=T(W/100),se+=f(z.x,z.y,N.x,N.y),z=N;return se}function y(T){for(var S,I,N,W,z=0,se=T.length,xe=0,te=0,j=0,U=0,q=[],oe=0;oe<se;oe++){switch(N={x:xe,y:te,command:(S=T[oe])[0]},S[0]){case"M":N.length=0,j=xe=S[1],U=te=S[2];break;case"L":N.length=f(xe,te,S[1],S[2]),xe=S[1],te=S[2];break;case"C":I=v(xe,te,S[1],S[2],S[3],S[4],S[5],S[6]),W=d(xe,te,S[1],S[2],S[3],S[4],S[5],S[6]),N.iterator=I,N.angleFinder=W,N.length=F(I,xe,te),xe=S[5],te=S[6];break;case"Q":I=g(xe,te,S[1],S[2],S[3],S[4]),W=_(xe,te,S[1],S[2],S[3],S[4]),N.iterator=I,N.angleFinder=W,N.length=F(I,xe,te),xe=S[3],te=S[4];break;case"Z":case"z":N.destX=j,N.destY=U,N.length=f(xe,te,j,U),xe=j,te=U}z+=N.length,q.push(N)}return q.push({length:z,x:xe,y:te}),q}D.util.joinPath=function(T){return T.map(function(S){return S.join(" ")}).join(" ")},D.util.parsePath=function(T){var S,I,N,W,z,se=[],xe=[],te=D.rePathCommand,j="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",U="("+j+")"+D.commaWsp,q="([01])"+D.commaWsp+"?",oe=new RegExp(U+"?"+U+"?"+U+q+q+U+"?("+j+")","g");if(!T||!T.match)return se;for(var ae,G=0,V=(z=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;G<V;G++){W=(S=z[G]).slice(1).trim(),xe.length=0;var Q=S.charAt(0);if(ae=[Q],Q.toLowerCase()==="a")for(var Ee;Ee=oe.exec(W);)for(var ie=1;ie<Ee.length;ie++)xe.push(Ee[ie]);else for(;N=te.exec(W);)xe.push(N[0]);ie=0;for(var fe=xe.length;ie<fe;ie++)I=parseFloat(xe[ie]),isNaN(I)||ae.push(I);var De=c[Q.toLowerCase()],ve=l[Q]||Q;if(ae.length-1>De)for(var Be=1,_e=ae.length;Be<_e;Be+=De)se.push([Q].concat(ae.slice(Be,Be+De))),Q=ve;else se.push(ae)}return se},D.util.makePathSimpler=function(T){var S,I,N,W,z,se,xe=0,te=0,j=T.length,U=0,q=0,oe=[];for(I=0;I<j;++I){switch(N=!1,(S=T[I].slice(0))[0]){case"l":S[0]="L",S[1]+=xe,S[2]+=te;case"L":xe=S[1],te=S[2];break;case"h":S[1]+=xe;case"H":S[0]="L",S[2]=te,xe=S[1];break;case"v":S[1]+=te;case"V":S[0]="L",te=S[1],S[1]=xe,S[2]=te;break;case"m":S[0]="M",S[1]+=xe,S[2]+=te;case"M":xe=S[1],te=S[2],U=S[1],q=S[2];break;case"c":S[0]="C",S[1]+=xe,S[2]+=te,S[3]+=xe,S[4]+=te,S[5]+=xe,S[6]+=te;case"C":z=S[3],se=S[4],xe=S[5],te=S[6];break;case"s":S[0]="S",S[1]+=xe,S[2]+=te,S[3]+=xe,S[4]+=te;case"S":W==="C"?(z=2*xe-z,se=2*te-se):(z=xe,se=te),xe=S[3],te=S[4],S[0]="C",S[5]=S[3],S[6]=S[4],S[3]=S[1],S[4]=S[2],S[1]=z,S[2]=se,z=S[3],se=S[4];break;case"q":S[0]="Q",S[1]+=xe,S[2]+=te,S[3]+=xe,S[4]+=te;case"Q":z=S[1],se=S[2],xe=S[3],te=S[4];break;case"t":S[0]="T",S[1]+=xe,S[2]+=te;case"T":W==="Q"?(z=2*xe-z,se=2*te-se):(z=xe,se=te),S[0]="Q",xe=S[1],te=S[2],S[1]=z,S[2]=se,S[3]=xe,S[4]=te;break;case"a":S[0]="A",S[6]+=xe,S[7]+=te;case"A":N=!0,oe=oe.concat(E(xe,te,S)),xe=S[6],te=S[7];break;case"z":case"Z":xe=U,te=q}N||oe.push(S),W=S[0]}return oe},D.util.getSmoothPathFromPoints=function(T,S){var I,N=[],W=new D.Point(T[0].x,T[0].y),z=new D.Point(T[1].x,T[1].y),se=T.length,xe=1,te=0,j=se>2;for(S=S||0,j&&(xe=T[2].x<z.x?-1:T[2].x===z.x?0:1,te=T[2].y<z.y?-1:T[2].y===z.y?0:1),N.push(["M",W.x-xe*S,W.y-te*S]),I=1;I<se;I++){if(!W.eq(z)){var U=W.midPointFrom(z);N.push(["Q",W.x,W.y,U.x,U.y])}W=T[I],I+1<T.length&&(z=T[I+1])}return j&&(xe=W.x>T[I-2].x?1:W.x===T[I-2].x?0:-1,te=W.y>T[I-2].y?1:W.y===T[I-2].y?0:-1),N.push(["L",W.x+xe*S,W.y+te*S]),N},D.util.getPathSegmentsInfo=y,D.util.getBoundsOfCurve=function(T,S,I,N,W,z,se,xe){var te;if(D.cachesBoundsOfCurve&&(te=h.call(arguments),D.boundsOfCurveCache[te]))return D.boundsOfCurveCache[te];var j,U,q,oe,ae,G,V,Q,Ee=Math.sqrt,ie=Math.min,fe=Math.max,De=Math.abs,ve=[],Be=[[],[]];U=6*T-12*I+6*W,j=-3*T+9*I-9*W+3*se,q=3*I-3*T;for(var _e=0;_e<2;++_e)if(_e>0&&(U=6*S-12*N+6*z,j=-3*S+9*N-9*z+3*xe,q=3*N-3*S),De(j)<1e-12){if(De(U)<1e-12)continue;0<(oe=-q/U)&&oe<1&&ve.push(oe)}else(V=U*U-4*q*j)<0||(0<(ae=(-U+(Q=Ee(V)))/(2*j))&&ae<1&&ve.push(ae),0<(G=(-U-Q)/(2*j))&&G<1&&ve.push(G));for(var pe,ye,Te,we=ve.length,Le=we;we--;)pe=(Te=1-(oe=ve[we]))*Te*Te*T+3*Te*Te*oe*I+3*Te*oe*oe*W+oe*oe*oe*se,Be[0][we]=pe,ye=Te*Te*Te*S+3*Te*Te*oe*N+3*Te*oe*oe*z+oe*oe*oe*xe,Be[1][we]=ye;Be[0][Le]=T,Be[1][Le]=S,Be[0][Le+1]=se,Be[1][Le+1]=xe;var Ve=[{x:ie.apply(null,Be[0]),y:ie.apply(null,Be[1])},{x:fe.apply(null,Be[0]),y:fe.apply(null,Be[1])}];return D.cachesBoundsOfCurve&&(D.boundsOfCurveCache[te]=Ve),Ve},D.util.getPointOnPath=function(T,S,I){I||(I=y(T));for(var N=0;S-I[N].length>0&&N<I.length-2;)S-=I[N].length,N++;var W,z=I[N],se=S/z.length,xe=z.command,te=T[N];switch(xe){case"M":return{x:z.x,y:z.y,angle:0};case"Z":case"z":return(W=new D.Point(z.x,z.y).lerp(new D.Point(z.destX,z.destY),se)).angle=Math.atan2(z.destY-z.y,z.destX-z.x),W;case"L":return(W=new D.Point(z.x,z.y).lerp(new D.Point(te[1],te[2]),se)).angle=Math.atan2(te[2]-z.y,te[1]-z.x),W;case"C":case"Q":return function(j,U){for(var q,oe,ae,G=0,V=0,Q=j.iterator,Ee={x:j.x,y:j.y},ie=.01,fe=j.angleFinder;V<U&&ie>1e-4;)q=Q(G),ae=G,(oe=f(Ee.x,Ee.y,q.x,q.y))+V>U?(G-=ie,ie/=2):(Ee=q,G+=ie,V+=oe);return q.angle=fe(ae),q}(z,S)}},D.util.transformPath=function(T,S,I){return I&&(S=D.util.multiplyTransformMatrices(S,[1,0,0,1,-I.x,-I.y])),T.map(function(N){for(var W=N.slice(0),z={},se=1;se<N.length-1;se+=2)z.x=N[se],z.y=N[se+1],z=D.util.transformPoint(z,S),W[se]=z.x,W[se+1]=z.y;return W})}}(),function(){var h=Array.prototype.slice;function c(l,A,a){if(l&&l.length!==0){var E=l.length-1,f=A?l[E][A]:l[E];if(A)for(;E--;)a(l[E][A],f)&&(f=l[E][A]);else for(;E--;)a(l[E],f)&&(f=l[E]);return f}}D.util.array={fill:function(l,A){for(var a=l.length;a--;)l[a]=A;return l},invoke:function(l,A){for(var a=h.call(arguments,2),E=[],f=0,v=l.length;f<v;f++)E[f]=a.length?l[f][A].apply(l[f],a):l[f][A].call(l[f]);return E},min:function(l,A){return c(l,A,function(a,E){return a<E})},max:function(l,A){return c(l,A,function(a,E){return a>=E})}}}(),function(){function h(c,l,A){if(A)if(!D.isLikelyNode&&l instanceof Element)c=l;else if(l instanceof Array){c=[];for(var a=0,E=l.length;a<E;a++)c[a]=h({},l[a],A)}else if(l&&typeof l=="object")for(var f in l)f==="canvas"||f==="group"?c[f]=null:l.hasOwnProperty(f)&&(c[f]=h({},l[f],A));else c=l;else for(var f in l)c[f]=l[f];return c}D.util.object={extend:h,clone:function(c,l){return h({},c,l)}},D.util.object.extend(D.util,D.Observable)}(),function(){function h(c,l){var A=c.charCodeAt(l);if(isNaN(A))return"";if(A<55296||A>57343)return c.charAt(l);if(55296<=A&&A<=56319){if(c.length<=l+1)throw"High surrogate without following low surrogate";var a=c.charCodeAt(l+1);if(56320>a||a>57343)throw"High surrogate without following low surrogate";return c.charAt(l)+c.charAt(l+1)}if(l===0)throw"Low surrogate without preceding high surrogate";var E=c.charCodeAt(l-1);if(55296>E||E>56319)throw"Low surrogate without preceding high surrogate";return!1}D.util.string={camelize:function(c){return c.replace(/-+(.)?/g,function(l,A){return A?A.toUpperCase():""})},capitalize:function(c,l){return c.charAt(0).toUpperCase()+(l?c.slice(1):c.slice(1).toLowerCase())},escapeXml:function(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(c){var l,A=0,a=[];for(A=0;A<c.length;A++)(l=h(c,A))!==!1&&a.push(l);return a}}}(),function(){var h=Array.prototype.slice,c=function(){},l=function(){for(var f in{toString:1})if(f==="toString")return!1;return!0}(),A=function(f,v,d){for(var g in v)g in f.prototype&&typeof f.prototype[g]=="function"&&(v[g]+"").indexOf("callSuper")>-1?f.prototype[g]=function(_){return function(){var F=this.constructor.superclass;this.constructor.superclass=d;var y=v[_].apply(this,arguments);if(this.constructor.superclass=F,_!=="initialize")return y}}(g):f.prototype[g]=v[g],l&&(v.toString!==Object.prototype.toString&&(f.prototype.toString=v.toString),v.valueOf!==Object.prototype.valueOf&&(f.prototype.valueOf=v.valueOf))};function a(){}function E(f){for(var v=null,d=this;d.constructor.superclass;){var g=d.constructor.superclass.prototype[f];if(d[f]!==g){v=g;break}d=d.constructor.superclass.prototype}return v?arguments.length>1?v.apply(this,h.call(arguments,1)):v.call(this):console.log("tried to callSuper "+f+", method not found in prototype chain",this)}D.util.createClass=function(){var f=null,v=h.call(arguments,0);function d(){this.initialize.apply(this,arguments)}typeof v[0]=="function"&&(f=v.shift()),d.superclass=f,d.subclasses=[],f&&(a.prototype=f.prototype,d.prototype=new a,f.subclasses.push(d));for(var g=0,_=v.length;g<_;g++)A(d,v[g],f);return d.prototype.initialize||(d.prototype.initialize=c),d.prototype.constructor=d,d.prototype.callSuper=E,d}}(),B=!!D.document.createElement("div").attachEvent,C=["touchstart","touchmove","touchend"],D.util.addListener=function(h,c,l,A){h&&h.addEventListener(c,l,!B&&A)},D.util.removeListener=function(h,c,l,A){h&&h.removeEventListener(c,l,!B&&A)},D.util.getPointer=function(h){var c=h.target,l=D.util.getScrollLeftTop(c),A=function(a){var E=a.changedTouches;return E&&E[0]?E[0]:a}(h);return{x:A.clientX+l.left,y:A.clientY+l.top}},D.util.isTouchEvent=function(h){return C.indexOf(h.type)>-1||h.pointerType==="touch"},m=typeof(p=D.document.createElement("div")).style.opacity=="string",w=typeof p.style.filter=="string",b=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,R=function(h){return h},m?R=function(h,c){return h.style.opacity=c,h}:w&&(R=function(h,c){var l=h.style;return h.currentStyle&&!h.currentStyle.hasLayout&&(l.zoom=1),b.test(l.filter)?(c=c>=.9999?"":"alpha(opacity="+100*c+")",l.filter=l.filter.replace(b,c)):l.filter+=" alpha(opacity="+100*c+")",h}),D.util.setStyle=function(h,c){var l=h.style;if(!l)return h;if(typeof c=="string")return h.style.cssText+=";"+c,c.indexOf("opacity")>-1?R(h,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):h;for(var A in c)A==="opacity"?R(h,c[A]):l[A==="float"||A==="cssFloat"?l.styleFloat===void 0?"cssFloat":"styleFloat":A]=c[A];return h},function(){var h,c,l,A,a=Array.prototype.slice,E=function(d){return a.call(d,0)};try{h=E(D.document.childNodes)instanceof Array}catch{}function f(d,g){var _=D.document.createElement(d);for(var F in g)F==="class"?_.className=g[F]:F==="for"?_.htmlFor=g[F]:_.setAttribute(F,g[F]);return _}function v(d){for(var g=0,_=0,F=D.document.documentElement,y=D.document.body||{scrollLeft:0,scrollTop:0};d&&(d.parentNode||d.host)&&((d=d.parentNode||d.host)===D.document?(g=y.scrollLeft||F.scrollLeft||0,_=y.scrollTop||F.scrollTop||0):(g+=d.scrollLeft||0,_+=d.scrollTop||0),d.nodeType!==1||d.style.position!=="fixed"););return{left:g,top:_}}h||(E=function(d){for(var g=new Array(d.length),_=d.length;_--;)g[_]=d[_];return g}),c=D.document.defaultView&&D.document.defaultView.getComputedStyle?function(d,g){var _=D.document.defaultView.getComputedStyle(d,null);return _?_[g]:void 0}:function(d,g){var _=d.style[g];return!_&&d.currentStyle&&(_=d.currentStyle[g]),_},l=D.document.documentElement.style,A="userSelect"in l?"userSelect":"MozUserSelect"in l?"MozUserSelect":"WebkitUserSelect"in l?"WebkitUserSelect":"KhtmlUserSelect"in l?"KhtmlUserSelect":"",D.util.makeElementUnselectable=function(d){return d.onselectstart!==void 0&&(d.onselectstart=D.util.falseFunction),A?d.style[A]="none":typeof d.unselectable=="string"&&(d.unselectable="on"),d},D.util.makeElementSelectable=function(d){return d.onselectstart!==void 0&&(d.onselectstart=null),A?d.style[A]="":typeof d.unselectable=="string"&&(d.unselectable=""),d},D.util.setImageSmoothing=function(d,g){d.imageSmoothingEnabled=d.imageSmoothingEnabled||d.webkitImageSmoothingEnabled||d.mozImageSmoothingEnabled||d.msImageSmoothingEnabled||d.oImageSmoothingEnabled,d.imageSmoothingEnabled=g},D.util.getById=function(d){return typeof d=="string"?D.document.getElementById(d):d},D.util.toArray=E,D.util.addClass=function(d,g){d&&(" "+d.className+" ").indexOf(" "+g+" ")===-1&&(d.className+=(d.className?" ":"")+g)},D.util.makeElement=f,D.util.wrapElement=function(d,g,_){return typeof g=="string"&&(g=f(g,_)),d.parentNode&&d.parentNode.replaceChild(g,d),g.appendChild(d),g},D.util.getScrollLeftTop=v,D.util.getElementOffset=function(d){var g,_,F=d&&d.ownerDocument,y={left:0,top:0},T={left:0,top:0},S={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!F)return T;for(var I in S)T[S[I]]+=parseInt(c(d,I),10)||0;return g=F.documentElement,d.getBoundingClientRect!==void 0&&(y=d.getBoundingClientRect()),_=v(d),{left:y.left+_.left-(g.clientLeft||0)+T.left,top:y.top+_.top-(g.clientTop||0)+T.top}},D.util.getNodeCanvas=function(d){var g=D.jsdomImplForWrapper(d);return g._canvas||g._image},D.util.cleanUpJsdomNode=function(d){if(D.isLikelyNode){var g=D.jsdomImplForWrapper(d);g&&(g._image=null,g._canvas=null,g._currentSrc=null,g._attributes=null,g._classList=null)}}}(),function(){function h(){}D.util.request=function(c,l){l||(l={});var A=l.method?l.method.toUpperCase():"GET",a=l.onComplete||function(){},E=new D.window.XMLHttpRequest,f=l.body||l.parameters;return E.onreadystatechange=function(){E.readyState===4&&(a(E),E.onreadystatechange=h)},A==="GET"&&(f=null,typeof l.parameters=="string"&&(c=function(v,d){return v+(/\?/.test(v)?"&":"?")+d}(c,l.parameters))),E.open(A,c,!0),A!=="POST"&&A!=="PUT"||E.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),E.send(f),E}}(),D.log=console.log,D.warn=console.warn,function(){var h=D.util.object.extend,c=D.util.object.clone,l=[];function A(){return!1}function a(d,g,_,F){return-_*Math.cos(d/F*(Math.PI/2))+_+g}D.util.object.extend(l,{cancelAll:function(){var d=this.splice(0);return d.forEach(function(g){g.cancel()}),d},cancelByCanvas:function(d){if(!d)return[];var g=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===d});return g.forEach(function(_){_.cancel()}),g},cancelByTarget:function(d){var g=this.findAnimationsByTarget(d);return g.forEach(function(_){_.cancel()}),g},findAnimationIndex:function(d){return this.indexOf(this.findAnimation(d))},findAnimation:function(d){return this.find(function(g){return g.cancel===d})},findAnimationsByTarget:function(d){return d?this.filter(function(g){return g.target===d}):[]}});var E=D.window.requestAnimationFrame||D.window.webkitRequestAnimationFrame||D.window.mozRequestAnimationFrame||D.window.oRequestAnimationFrame||D.window.msRequestAnimationFrame||function(d){return D.window.setTimeout(d,1e3/60)},f=D.window.cancelAnimationFrame||D.window.clearTimeout;function v(){return E.apply(D.window,arguments)}D.util.animate=function(d){d||(d={});var g,_=!1,F=function(){var y=D.runningAnimations.indexOf(g);return y>-1&&D.runningAnimations.splice(y,1)[0]};return g=h(c(d),{cancel:function(){return _=!0,F()},currentValue:"startValue"in d?d.startValue:0,completionRate:0,durationRate:0}),D.runningAnimations.push(g),v(function(y){var T,S=y||+new Date,I=d.duration||500,N=S+I,W=d.onChange||A,z=d.abort||A,se=d.onComplete||A,xe=d.easing||a,te="startValue"in d&&d.startValue.length>0,j="startValue"in d?d.startValue:0,U="endValue"in d?d.endValue:100,q=d.byValue||(te?j.map(function(oe,ae){return U[ae]-j[ae]}):U-j);d.onStart&&d.onStart(),function oe(ae){var G=(T=ae||+new Date)>N?I:T-S,V=G/I,Q=te?j.map(function(ie,fe){return xe(G,j[fe],q[fe],I)}):xe(G,j,q,I),Ee=Math.abs(te?(Q[0]-j[0])/q[0]:(Q-j)/q);if(g.currentValue=te?Q.slice():Q,g.completionRate=Ee,g.durationRate=V,!_){if(!z(Q,Ee,V))return T>N?(g.currentValue=te?U.slice():U,g.completionRate=1,g.durationRate=1,W(te?U.slice():U,1,1),se(U,1,1),void F()):(W(Q,Ee,V),void v(oe));F()}}(S)}),g.cancel},D.util.requestAnimFrame=v,D.util.cancelAnimFrame=function(){return f.apply(D.window,arguments)},D.runningAnimations=l}(),function(){function h(c,l,A){var a="rgba("+parseInt(c[0]+A*(l[0]-c[0]),10)+","+parseInt(c[1]+A*(l[1]-c[1]),10)+","+parseInt(c[2]+A*(l[2]-c[2]),10);return(a+=","+(c&&l?parseFloat(c[3]+A*(l[3]-c[3])):1))+")"}D.util.animateColor=function(c,l,A,a){var E=new D.Color(c).getSource(),f=new D.Color(l).getSource(),v=a.onComplete,d=a.onChange;return a=a||{},D.util.animate(D.util.object.extend(a,{duration:A||500,startValue:E,endValue:f,byValue:f,easing:function(g,_,F,y){return h(_,F,a.colorEasing?a.colorEasing(g,y):1-Math.cos(g/y*(Math.PI/2)))},onComplete:function(g,_,F){if(v)return v(h(f,f,0),_,F)},onChange:function(g,_,F){if(d){if(Array.isArray(g))return d(h(g,g,0),_,F);d(g,_,F)}}}))}}(),function(){function h(a,E,f,v){return a<Math.abs(E)?(a=E,v=f/4):v=E===0&&a===0?f/(2*Math.PI)*Math.asin(1):f/(2*Math.PI)*Math.asin(E/a),{a,c:E,p:f,s:v}}function c(a,E,f){return a.a*Math.pow(2,10*(E-=1))*Math.sin((E*f-a.s)*(2*Math.PI)/a.p)}function l(a,E,f,v){return f-A(v-a,0,f,v)+E}function A(a,E,f,v){return(a/=v)<1/2.75?f*(7.5625*a*a)+E:a<2/2.75?f*(7.5625*(a-=1.5/2.75)*a+.75)+E:a<2.5/2.75?f*(7.5625*(a-=2.25/2.75)*a+.9375)+E:f*(7.5625*(a-=2.625/2.75)*a+.984375)+E}D.util.ease={easeInQuad:function(a,E,f,v){return f*(a/=v)*a+E},easeOutQuad:function(a,E,f,v){return-f*(a/=v)*(a-2)+E},easeInOutQuad:function(a,E,f,v){return(a/=v/2)<1?f/2*a*a+E:-f/2*(--a*(a-2)-1)+E},easeInCubic:function(a,E,f,v){return f*(a/=v)*a*a+E},easeOutCubic:function(a,E,f,v){return f*((a=a/v-1)*a*a+1)+E},easeInOutCubic:function(a,E,f,v){return(a/=v/2)<1?f/2*a*a*a+E:f/2*((a-=2)*a*a+2)+E},easeInQuart:function(a,E,f,v){return f*(a/=v)*a*a*a+E},easeOutQuart:function(a,E,f,v){return-f*((a=a/v-1)*a*a*a-1)+E},easeInOutQuart:function(a,E,f,v){return(a/=v/2)<1?f/2*a*a*a*a+E:-f/2*((a-=2)*a*a*a-2)+E},easeInQuint:function(a,E,f,v){return f*(a/=v)*a*a*a*a+E},easeOutQuint:function(a,E,f,v){return f*((a=a/v-1)*a*a*a*a+1)+E},easeInOutQuint:function(a,E,f,v){return(a/=v/2)<1?f/2*a*a*a*a*a+E:f/2*((a-=2)*a*a*a*a+2)+E},easeInSine:function(a,E,f,v){return-f*Math.cos(a/v*(Math.PI/2))+f+E},easeOutSine:function(a,E,f,v){return f*Math.sin(a/v*(Math.PI/2))+E},easeInOutSine:function(a,E,f,v){return-f/2*(Math.cos(Math.PI*a/v)-1)+E},easeInExpo:function(a,E,f,v){return a===0?E:f*Math.pow(2,10*(a/v-1))+E},easeOutExpo:function(a,E,f,v){return a===v?E+f:f*(1-Math.pow(2,-10*a/v))+E},easeInOutExpo:function(a,E,f,v){return a===0?E:a===v?E+f:(a/=v/2)<1?f/2*Math.pow(2,10*(a-1))+E:f/2*(2-Math.pow(2,-10*--a))+E},easeInCirc:function(a,E,f,v){return-f*(Math.sqrt(1-(a/=v)*a)-1)+E},easeOutCirc:function(a,E,f,v){return f*Math.sqrt(1-(a=a/v-1)*a)+E},easeInOutCirc:function(a,E,f,v){return(a/=v/2)<1?-f/2*(Math.sqrt(1-a*a)-1)+E:f/2*(Math.sqrt(1-(a-=2)*a)+1)+E},easeInElastic:function(a,E,f,v){var d=0;return a===0?E:(a/=v)==1?E+f:(d||(d=.3*v),-c(h(f,f,d,1.70158),a,v)+E)},easeOutElastic:function(a,E,f,v){var d=0;if(a===0)return E;if((a/=v)==1)return E+f;d||(d=.3*v);var g=h(f,f,d,1.70158);return g.a*Math.pow(2,-10*a)*Math.sin((a*v-g.s)*(2*Math.PI)/g.p)+g.c+E},easeInOutElastic:function(a,E,f,v){var d=0;if(a===0)return E;if((a/=v/2)==2)return E+f;d||(d=v*(.3*1.5));var g=h(f,f,d,1.70158);return a<1?-.5*c(g,a,v)+E:g.a*Math.pow(2,-10*(a-=1))*Math.sin((a*v-g.s)*(2*Math.PI)/g.p)*.5+g.c+E},easeInBack:function(a,E,f,v,d){return d===void 0&&(d=1.70158),f*(a/=v)*a*((d+1)*a-d)+E},easeOutBack:function(a,E,f,v,d){return d===void 0&&(d=1.70158),f*((a=a/v-1)*a*((d+1)*a+d)+1)+E},easeInOutBack:function(a,E,f,v,d){return d===void 0&&(d=1.70158),(a/=v/2)<1?f/2*(a*a*((1+(d*=1.525))*a-d))+E:f/2*((a-=2)*a*((1+(d*=1.525))*a+d)+2)+E},easeInBounce:l,easeOutBounce:A,easeInOutBounce:function(a,E,f,v){return a<v/2?.5*l(2*a,0,f,v)+E:.5*A(2*a-v,0,f,v)+.5*f+E}}}(),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.util.object.clone,a=c.util.toFixed,E=c.util.parseUnit,f=c.util.multiplyTransformMatrices,v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},d={stroke:"strokeOpacity",fill:"fillOpacity"},g="font-size",_="clip-path";function F(j){return j in v?v[j]:j}function y(j,U,q,oe){var ae,G=Array.isArray(U);if(j!=="fill"&&j!=="stroke"||U!=="none"){if(j==="strokeUniform")return U==="non-scaling-stroke";if(j==="strokeDashArray")U=U==="none"?null:U.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(j==="transformMatrix")U=q&&q.transformMatrix?f(q.transformMatrix,c.parseTransformAttribute(U)):c.parseTransformAttribute(U);else if(j==="visible")U=U!=="none"&&U!=="hidden",q&&q.visible===!1&&(U=!1);else if(j==="opacity")U=parseFloat(U),q&&q.opacity!==void 0&&(U*=q.opacity);else if(j==="textAnchor")U=U==="start"?"left":U==="end"?"right":"center";else if(j==="charSpacing")ae=E(U,oe)/oe*1e3;else if(j==="paintFirst"){var V=U.indexOf("fill"),Q=U.indexOf("stroke");U="fill",(V>-1&&Q>-1&&Q<V||V===-1&&Q>-1)&&(U="stroke")}else{if(j==="href"||j==="xlink:href"||j==="font")return U;if(j==="imageSmoothing")return U==="optimizeQuality";ae=G?U.map(E):E(U,oe)}}else U="";return!G&&isNaN(ae)?U:ae}function T(j){return new RegExp("^("+j.join("|")+")\\b","i")}function S(j,U){var q,oe,ae,G,V=[];for(ae=0,G=U.length;ae<G;ae++)q=U[ae],oe=j.getElementsByTagName(q),V=V.concat(Array.prototype.slice.call(oe));return V}function I(j,U){var q,oe=!0;return(q=N(j,U.pop()))&&U.length&&(oe=function(ae,G){for(var V,Q=!0;ae.parentNode&&ae.parentNode.nodeType===1&&G.length;)Q&&(V=G.pop()),Q=N(ae=ae.parentNode,V);return G.length===0}(j,U)),q&&oe&&U.length===0}function N(j,U){var q,oe,ae=j.nodeName,G=j.getAttribute("class"),V=j.getAttribute("id");if(q=new RegExp("^"+ae,"i"),U=U.replace(q,""),V&&U.length&&(q=new RegExp("#"+V+"(?![a-zA-Z\\-]+)","i"),U=U.replace(q,"")),G&&U.length)for(oe=(G=G.split(" ")).length;oe--;)q=new RegExp("\\."+G[oe]+"(?![a-zA-Z\\-]+)","i"),U=U.replace(q,"");return U.length===0}function W(j,U){var q;if(j.getElementById&&(q=j.getElementById(U)),q)return q;var oe,ae,G,V=j.getElementsByTagName("*");for(ae=0,G=V.length;ae<G;ae++)if(U===(oe=V[ae]).getAttribute("id"))return oe}c.svgValidTagNamesRegEx=T(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),c.svgViewBoxElementsRegEx=T(["symbol","image","marker","pattern","view","svg"]),c.svgInvalidAncestorsRegEx=T(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),c.svgValidParentsRegEx=T(["symbol","g","a","svg","clipPath","defs"]),c.cssRules={},c.gradientDefs={},c.clipPaths={},c.parseTransformAttribute=function(){function j(Q,Ee,ie){Q[ie]=Math.tan(c.util.degreesToRadians(Ee[0]))}var U=c.iMatrix,q=c.reNum,oe=c.commaWsp,ae="(?:(?:(matrix)\\s*\\(\\s*("+q+")"+oe+"("+q+")"+oe+"("+q+")"+oe+"("+q+")"+oe+"("+q+")"+oe+"("+q+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+q+")(?:"+oe+"("+q+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+q+")(?:"+oe+"("+q+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+q+")(?:"+oe+"("+q+")"+oe+"("+q+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+q+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+q+")\\s*\\)))",G=new RegExp("^\\s*(?:(?:"+ae+"(?:"+oe+"*"+ae+")*)?)\\s*$"),V=new RegExp(ae,"g");return function(Q){var Ee=U.concat(),ie=[];if(!Q||Q&&!G.test(Q))return Ee;Q.replace(V,function(De){var ve=new RegExp(ae).exec(De).filter(function(pe){return!!pe}),Be=ve[1],_e=ve.slice(2).map(parseFloat);switch(Be){case"translate":(function(pe,ye){pe[4]=ye[0],ye.length===2&&(pe[5]=ye[1])})(Ee,_e);break;case"rotate":_e[0]=c.util.degreesToRadians(_e[0]),function(pe,ye){var Te=c.util.cos(ye[0]),we=c.util.sin(ye[0]),Le=0,Ve=0;ye.length===3&&(Le=ye[1],Ve=ye[2]),pe[0]=Te,pe[1]=we,pe[2]=-we,pe[3]=Te,pe[4]=Le-(Te*Le-we*Ve),pe[5]=Ve-(we*Le+Te*Ve)}(Ee,_e);break;case"scale":(function(pe,ye){var Te=ye[0],we=ye.length===2?ye[1]:ye[0];pe[0]=Te,pe[3]=we})(Ee,_e);break;case"skewX":j(Ee,_e,2);break;case"skewY":j(Ee,_e,1);break;case"matrix":Ee=_e}ie.push(Ee.concat()),Ee=U.concat()});for(var fe=ie[0];ie.length>1;)ie.shift(),fe=c.util.multiplyTransformMatrices(fe,ie[0]);return fe}}();var z=new RegExp("^\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*$");function se(j){if(!c.svgViewBoxElementsRegEx.test(j.nodeName))return{};var U,q,oe,ae,G,V,Q=j.getAttribute("viewBox"),Ee=1,ie=1,fe=j.getAttribute("width"),De=j.getAttribute("height"),ve=j.getAttribute("x")||0,Be=j.getAttribute("y")||0,_e=j.getAttribute("preserveAspectRatio")||"",pe=!Q||!(Q=Q.match(z)),ye=!fe||!De||fe==="100%"||De==="100%",Te=pe&&ye,we={},Le="",Ve=0,Tt=0;if(we.width=0,we.height=0,we.toBeParsed=Te,pe&&(ve||Be)&&j.parentNode&&j.parentNode.nodeName!=="#document"&&(Le=" translate("+E(ve)+" "+E(Be)+") ",G=(j.getAttribute("transform")||"")+Le,j.setAttribute("transform",G),j.removeAttribute("x"),j.removeAttribute("y")),Te)return we;if(pe)return we.width=E(fe),we.height=E(De),we;if(U=-parseFloat(Q[1]),q=-parseFloat(Q[2]),oe=parseFloat(Q[3]),ae=parseFloat(Q[4]),we.minX=U,we.minY=q,we.viewBoxWidth=oe,we.viewBoxHeight=ae,ye?(we.width=oe,we.height=ae):(we.width=E(fe),we.height=E(De),Ee=we.width/oe,ie=we.height/ae),(_e=c.util.parsePreserveAspectRatioAttribute(_e)).alignX!=="none"&&(_e.meetOrSlice==="meet"&&(ie=Ee=Ee>ie?ie:Ee),_e.meetOrSlice==="slice"&&(ie=Ee=Ee>ie?Ee:ie),Ve=we.width-oe*Ee,Tt=we.height-ae*Ee,_e.alignX==="Mid"&&(Ve/=2),_e.alignY==="Mid"&&(Tt/=2),_e.alignX==="Min"&&(Ve=0),_e.alignY==="Min"&&(Tt=0)),Ee===1&&ie===1&&U===0&&q===0&&ve===0&&Be===0)return we;if((ve||Be)&&j.parentNode.nodeName!=="#document"&&(Le=" translate("+E(ve)+" "+E(Be)+") "),G=Le+" matrix("+Ee+" 0 0 "+ie+" "+(U*Ee+Ve)+" "+(q*ie+Tt)+") ",j.nodeName==="svg"){for(V=j.ownerDocument.createElementNS(c.svgNS,"g");j.firstChild;)V.appendChild(j.firstChild);j.appendChild(V)}else(V=j).removeAttribute("x"),V.removeAttribute("y"),G=V.getAttribute("transform")+G;return V.setAttribute("transform",G),we}function xe(j,U){var q="xlink:href",oe=W(j,U.getAttribute(q).slice(1));if(oe&&oe.getAttribute(q)&&xe(j,oe),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(G){oe&&!U.hasAttribute(G)&&oe.hasAttribute(G)&&U.setAttribute(G,oe.getAttribute(G))}),!U.children.length)for(var ae=oe.cloneNode(!0);ae.firstChild;)U.appendChild(ae.firstChild);U.removeAttribute(q)}c.parseSVGDocument=function(j,U,q,oe){if(j){(function(ve){for(var Be=S(ve,["use","svg:use"]),_e=0;Be.length&&_e<Be.length;){var pe=Be[_e],ye=pe.getAttribute("xlink:href")||pe.getAttribute("href");if(ye===null)return;var Te,we,Le,Ve,Tt=ye.slice(1),Vt=pe.getAttribute("x")||0,Yt=pe.getAttribute("y")||0,qe=W(ve,Tt).cloneNode(!0),bt=(qe.getAttribute("transform")||"")+" translate("+Vt+", "+Yt+")",It=Be.length,x0=c.svgNS;if(se(qe),/^svg$/i.test(qe.nodeName)){var Jt=qe.ownerDocument.createElementNS(x0,"g");for(we=0,Ve=(Le=qe.attributes).length;we<Ve;we++)Te=Le.item(we),Jt.setAttributeNS(x0,Te.nodeName,Te.nodeValue);for(;qe.firstChild;)Jt.appendChild(qe.firstChild);qe=Jt}for(we=0,Ve=(Le=pe.attributes).length;we<Ve;we++)(Te=Le.item(we)).nodeName!=="x"&&Te.nodeName!=="y"&&Te.nodeName!=="xlink:href"&&Te.nodeName!=="href"&&(Te.nodeName==="transform"?bt=Te.nodeValue+" "+bt:qe.setAttribute(Te.nodeName,Te.nodeValue));qe.setAttribute("transform",bt),qe.setAttribute("instantiated_by_use","1"),qe.removeAttribute("id"),pe.parentNode.replaceChild(qe,pe),Be.length===It&&_e++}})(j);var ae,G,V=c.Object.__uid++,Q=se(j),Ee=c.util.toArray(j.getElementsByTagName("*"));if(Q.crossOrigin=oe&&oe.crossOrigin,Q.svgUid=V,Ee.length===0&&c.isLikelyNode){var ie=[];for(ae=0,G=(Ee=j.selectNodes('//*[name(.)!="svg"]')).length;ae<G;ae++)ie[ae]=Ee[ae];Ee=ie}var fe=Ee.filter(function(ve){return se(ve),c.svgValidTagNamesRegEx.test(ve.nodeName.replace("svg:",""))&&!function(Be,_e){for(;Be&&(Be=Be.parentNode);)if(Be.nodeName&&_e.test(Be.nodeName.replace("svg:",""))&&!Be.getAttribute("instantiated_by_use"))return!0;return!1}(ve,c.svgInvalidAncestorsRegEx)});if(!fe||fe&&!fe.length)U&&U([],{});else{var De={};Ee.filter(function(ve){return ve.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ve){var Be=ve.getAttribute("id");De[Be]=c.util.toArray(ve.getElementsByTagName("*")).filter(function(_e){return c.svgValidTagNamesRegEx.test(_e.nodeName.replace("svg:",""))})}),c.gradientDefs[V]=c.getGradientDefs(j),c.cssRules[V]=c.getCSSRules(j),c.clipPaths[V]=De,c.parseElements(fe,function(ve,Be){U&&(U(ve,Q,Be,Ee),delete c.gradientDefs[V],delete c.cssRules[V],delete c.clipPaths[V])},A(Q),q,oe)}}};var te=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+c.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+c.reNum+"))?\\s+(.*)");l(c,{parseFontDeclaration:function(j,U){var q=j.match(te);if(q){var oe=q[1],ae=q[3],G=q[4],V=q[5],Q=q[6];oe&&(U.fontStyle=oe),ae&&(U.fontWeight=isNaN(parseFloat(ae))?ae:parseFloat(ae)),G&&(U.fontSize=E(G)),Q&&(U.fontFamily=Q),V&&(U.lineHeight=V==="normal"?1:V)}},getGradientDefs:function(j){var U,q=S(j,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),oe=0,ae={};for(oe=q.length;oe--;)(U=q[oe]).getAttribute("xlink:href")&&xe(j,U),ae[U.getAttribute("id")]=U;return ae},parseAttributes:function(j,U,q){if(j){var oe,ae,G,V={};q===void 0&&(q=j.getAttribute("svgUid")),j.parentNode&&c.svgValidParentsRegEx.test(j.parentNode.nodeName)&&(V=c.parseAttributes(j.parentNode,U,q));var Q=U.reduce(function(_e,pe){return(oe=j.getAttribute(pe))&&(_e[pe]=oe),_e},{}),Ee=l(function(_e,pe){var ye={};for(var Te in c.cssRules[pe])if(I(_e,Te.split(" ")))for(var we in c.cssRules[pe][Te])ye[we]=c.cssRules[pe][Te][we];return ye}(j,q),c.parseStyleAttribute(j));Q=l(Q,Ee),Ee[_]&&j.setAttribute(_,Ee[_]),ae=G=V.fontSize||c.Text.DEFAULT_SVG_FONT_SIZE,Q[g]&&(Q[g]=ae=E(Q[g],G));var ie,fe,De={};for(var ve in Q)fe=y(ie=F(ve),Q[ve],V,ae),De[ie]=fe;De&&De.font&&c.parseFontDeclaration(De.font,De);var Be=l(V,De);return c.svgValidParentsRegEx.test(j.nodeName)?Be:function(_e){for(var pe in d)if(_e[d[pe]]!==void 0&&_e[pe]!==""){if(_e[pe]===void 0){if(!c.Object.prototype[pe])continue;_e[pe]=c.Object.prototype[pe]}if(_e[pe].indexOf("url(")!==0){var ye=new c.Color(_e[pe]);_e[pe]=ye.setAlpha(a(ye.getAlpha()*_e[d[pe]],2)).toRgba()}}return _e}(Be)}},parseElements:function(j,U,q,oe,ae){new c.ElementsParser(j,U,q,oe,ae).parse()},parseStyleAttribute:function(j){var U={},q=j.getAttribute("style");return q&&(typeof q=="string"?function(oe,ae){var G,V;oe.replace(/;\s*$/,"").split(";").forEach(function(Q){var Ee=Q.split(":");G=Ee[0].trim().toLowerCase(),V=Ee[1].trim(),ae[G]=V})}(q,U):function(oe,ae){var G,V;for(var Q in oe)oe[Q]!==void 0&&(G=Q.toLowerCase(),V=oe[Q],ae[G]=V)}(q,U)),U},parsePointsAttribute:function(j){if(!j)return null;var U,q,oe=[];for(U=0,q=(j=(j=j.replace(/,/g," ").trim()).split(/\s+/)).length;U<q;U+=2)oe.push({x:parseFloat(j[U]),y:parseFloat(j[U+1])});return oe},getCSSRules:function(j){var U,q,oe=j.getElementsByTagName("style"),ae={};for(U=0,q=oe.length;U<q;U++){var G=oe[U].textContent;(G=G.replace(/\/\*[\s\S]*?\*\//g,"")).trim()!==""&&G.split("}").filter(function(V){return V.trim()}).forEach(function(V){var Q=V.split("{"),Ee={},ie=Q[1].trim().split(";").filter(function(Be){return Be.trim()});for(U=0,q=ie.length;U<q;U++){var fe=ie[U].split(":"),De=fe[0].trim(),ve=fe[1].trim();Ee[De]=ve}(V=Q[0].trim()).split(",").forEach(function(Be){(Be=Be.replace(/^svg/i,"").trim())!==""&&(ae[Be]?c.util.object.extend(ae[Be],Ee):ae[Be]=c.util.object.clone(Ee))})})}return ae},loadSVGFromURL:function(j,U,q,oe){j=j.replace(/^\n\s*/,"").trim(),new c.util.request(j,{method:"get",onComplete:function(ae){var G=ae.responseXML;if(!G||!G.documentElement)return U&&U(null),!1;c.parseSVGDocument(G.documentElement,function(V,Q,Ee,ie){U&&U(V,Q,Ee,ie)},q,oe)}})},loadSVGFromString:function(j,U,q,oe){var ae=new c.window.DOMParser().parseFromString(j.trim(),"text/xml");c.parseSVGDocument(ae.documentElement,function(G,V,Q,Ee){U(G,V,Q,Ee)},q,oe)}})}(e),D.ElementsParser=function(h,c,l,A,a,E){this.elements=h,this.callback=c,this.options=l,this.reviver=A,this.svgUid=l&&l.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=E},(L=D.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},L.createObjects=function(){var h=this;this.elements.forEach(function(c,l){c.setAttribute("svgUid",h.svgUid),h.createObject(c,l)})},L.findTag=function(h){return D[D.util.string.capitalize(h.tagName.replace("svg:",""))]},L.createObject=function(h,c){var l=this.findTag(h);if(l&&l.fromElement)try{l.fromElement(h,this.createCallback(c,h),this.options)}catch(A){D.log(A)}else this.checkIfDone()},L.createCallback=function(h,c){var l=this;return function(A){var a;l.resolveGradient(A,c,"fill"),l.resolveGradient(A,c,"stroke"),A instanceof D.Image&&A._originalElement&&(a=A.parsePreserveAspectRatioAttribute(c)),A._removeTransformMatrix(a),l.resolveClipPath(A,c),l.reviver&&l.reviver(c,A),l.instances[h]=A,l.checkIfDone()}},L.extractPropertyDefinition=function(h,c,l){var A=h[c],a=this.regexUrl;if(a.test(A)){a.lastIndex=0;var E=a.exec(A)[1];return a.lastIndex=0,D[l][this.svgUid][E]}},L.resolveGradient=function(h,c,l){var A=this.extractPropertyDefinition(h,l,"gradientDefs");if(A){var a=c.getAttribute(l+"-opacity"),E=D.Gradient.fromElement(A,h,a,this.options);h.set(l,E)}},L.createClipPathCallback=function(h,c){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,c.push(l)}},L.resolveClipPath=function(h,c){var l,A,a,E,f=this.extractPropertyDefinition(h,"clipPath","clipPaths");if(f){a=[],A=D.util.invertTransform(h.calcTransformMatrix());for(var v=f[0].parentNode,d=c;d.parentNode&&d.getAttribute("clip-path")!==h.clipPath;)d=d.parentNode;d.parentNode.appendChild(v);for(var g=0;g<f.length;g++)l=f[g],this.findTag(l).fromElement(l,this.createClipPathCallback(h,a),this.options);f=a.length===1?a[0]:new D.Group(a),E=D.util.multiplyTransformMatrices(A,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,d);var _=D.util.qrDecompose(E);f.flipX=!1,f.flipY=!1,f.set("scaleX",_.scaleX),f.set("scaleY",_.scaleY),f.angle=_.angle,f.skewX=_.skewX,f.skewY=0,f.setPositionByOrigin({x:_.translateX,y:_.translateY},"center","center"),h.clipPath=f}else delete h.clipPath},L.checkIfDone=function(){--this.numElements==0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))},function(h){var c=h.fabric||(h.fabric={});function l(A,a){this.x=A,this.y=a}c.Point?c.warn("fabric.Point is already defined"):(c.Point=l,l.prototype={type:"point",constructor:l,add:function(A){return new l(this.x+A.x,this.y+A.y)},addEquals:function(A){return this.x+=A.x,this.y+=A.y,this},scalarAdd:function(A){return new l(this.x+A,this.y+A)},scalarAddEquals:function(A){return this.x+=A,this.y+=A,this},subtract:function(A){return new l(this.x-A.x,this.y-A.y)},subtractEquals:function(A){return this.x-=A.x,this.y-=A.y,this},scalarSubtract:function(A){return new l(this.x-A,this.y-A)},scalarSubtractEquals:function(A){return this.x-=A,this.y-=A,this},multiply:function(A){return new l(this.x*A,this.y*A)},multiplyEquals:function(A){return this.x*=A,this.y*=A,this},divide:function(A){return new l(this.x/A,this.y/A)},divideEquals:function(A){return this.x/=A,this.y/=A,this},eq:function(A){return this.x===A.x&&this.y===A.y},lt:function(A){return this.x<A.x&&this.y<A.y},lte:function(A){return this.x<=A.x&&this.y<=A.y},gt:function(A){return this.x>A.x&&this.y>A.y},gte:function(A){return this.x>=A.x&&this.y>=A.y},lerp:function(A,a){return a===void 0&&(a=.5),a=Math.max(Math.min(1,a),0),new l(this.x+(A.x-this.x)*a,this.y+(A.y-this.y)*a)},distanceFrom:function(A){var a=this.x-A.x,E=this.y-A.y;return Math.sqrt(a*a+E*E)},midPointFrom:function(A){return this.lerp(A)},min:function(A){return new l(Math.min(this.x,A.x),Math.min(this.y,A.y))},max:function(A){return new l(Math.max(this.x,A.x),Math.max(this.y,A.y))},toString:function(){return this.x+","+this.y},setXY:function(A,a){return this.x=A,this.y=a,this},setX:function(A){return this.x=A,this},setY:function(A){return this.y=A,this},setFromPoint:function(A){return this.x=A.x,this.y=A.y,this},swap:function(A){var a=this.x,E=this.y;this.x=A.x,this.y=A.y,A.x=a,A.y=E},clone:function(){return new l(this.x,this.y)}})}(e),function(h){var c=h.fabric||(h.fabric={});function l(A){this.status=A,this.points=[]}c.Intersection?c.warn("fabric.Intersection is already defined"):(c.Intersection=l,c.Intersection.prototype={constructor:l,appendPoint:function(A){return this.points.push(A),this},appendPoints:function(A){return this.points=this.points.concat(A),this}},c.Intersection.intersectLineLine=function(A,a,E,f){var v,d=(f.x-E.x)*(A.y-E.y)-(f.y-E.y)*(A.x-E.x),g=(a.x-A.x)*(A.y-E.y)-(a.y-A.y)*(A.x-E.x),_=(f.y-E.y)*(a.x-A.x)-(f.x-E.x)*(a.y-A.y);if(_!==0){var F=d/_,y=g/_;0<=F&&F<=1&&0<=y&&y<=1?(v=new l("Intersection")).appendPoint(new c.Point(A.x+F*(a.x-A.x),A.y+F*(a.y-A.y))):v=new l}else v=new l(d===0||g===0?"Coincident":"Parallel");return v},c.Intersection.intersectLinePolygon=function(A,a,E){var f,v,d,g,_=new l,F=E.length;for(g=0;g<F;g++)f=E[g],v=E[(g+1)%F],d=l.intersectLineLine(A,a,f,v),_.appendPoints(d.points);return _.points.length>0&&(_.status="Intersection"),_},c.Intersection.intersectPolygonPolygon=function(A,a){var E,f=new l,v=A.length;for(E=0;E<v;E++){var d=A[E],g=A[(E+1)%v],_=l.intersectLinePolygon(d,g,a);f.appendPoints(_.points)}return f.points.length>0&&(f.status="Intersection"),f},c.Intersection.intersectPolygonRectangle=function(A,a,E){var f=a.min(E),v=a.max(E),d=new c.Point(v.x,f.y),g=new c.Point(f.x,v.y),_=l.intersectLinePolygon(f,d,A),F=l.intersectLinePolygon(d,v,A),y=l.intersectLinePolygon(v,g,A),T=l.intersectLinePolygon(g,f,A),S=new l;return S.appendPoints(_.points),S.appendPoints(F.points),S.appendPoints(y.points),S.appendPoints(T.points),S.points.length>0&&(S.status="Intersection"),S})}(e),function(h){var c=h.fabric||(h.fabric={});function l(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}function A(a,E,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?a+6*(E-a)*f:f<.5?E:f<2/3?a+(E-a)*(2/3-f)*6:a}c.Color?c.warn("fabric.Color is already defined."):(c.Color=l,c.Color.prototype={_tryParsingColor:function(a){var E;a in l.colorNameMap&&(a=l.colorNameMap[a]),a==="transparent"&&(E=[255,255,255,0]),E||(E=l.sourceFromHex(a)),E||(E=l.sourceFromRgb(a)),E||(E=l.sourceFromHsl(a)),E||(E=[0,0,0,1]),E&&this.setSource(E)},_rgbToHsl:function(a,E,f){a/=255,E/=255,f/=255;var v,d,g,_=c.util.array.max([a,E,f]),F=c.util.array.min([a,E,f]);if(g=(_+F)/2,_===F)v=d=0;else{var y=_-F;switch(d=g>.5?y/(2-_-F):y/(_+F),_){case a:v=(E-f)/y+(E<f?6:0);break;case E:v=(f-a)/y+2;break;case f:v=(a-E)/y+4}v/=6}return[Math.round(360*v),Math.round(100*d),Math.round(100*g)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),E=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+E[0]+","+E[1]+"%,"+E[2]+"%)"},toHsla:function(){var a=this.getSource(),E=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+E[0]+","+E[1]+"%,"+E[2]+"%,"+a[3]+")"},toHex:function(){var a,E,f,v=this.getSource();return a=(a=v[0].toString(16)).length===1?"0"+a:a,E=(E=v[1].toString(16)).length===1?"0"+E:E,f=(f=v[2].toString(16)).length===1?"0"+f:f,a.toUpperCase()+E.toUpperCase()+f.toUpperCase()},toHexa:function(){var a,E=this.getSource();return a=(a=(a=Math.round(255*E[3])).toString(16)).length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var E=this.getSource();return E[3]=a,this.setSource(E),this},toGrayscale:function(){var a=this.getSource(),E=parseInt((.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),10),f=a[3];return this.setSource([E,E,E,f]),this},toBlackWhite:function(a){var E=this.getSource(),f=(.3*E[0]+.59*E[1]+.11*E[2]).toFixed(0),v=E[3];return a=a||127,f=Number(f)<Number(a)?0:255,this.setSource([f,f,f,v]),this},overlayWith:function(a){a instanceof l||(a=new l(a));var E,f=[],v=this.getAlpha(),d=this.getSource(),g=a.getSource();for(E=0;E<3;E++)f.push(Math.round(.5*d[E]+.5*g[E]));return f[3]=v,this.setSource(f),this}},c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,c.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,c.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},c.Color.fromRgb=function(a){return l.fromSource(l.sourceFromRgb(a))},c.Color.sourceFromRgb=function(a){var E=a.match(l.reRGBa);if(E){var f=parseInt(E[1],10)/(/%$/.test(E[1])?100:1)*(/%$/.test(E[1])?255:1),v=parseInt(E[2],10)/(/%$/.test(E[2])?100:1)*(/%$/.test(E[2])?255:1),d=parseInt(E[3],10)/(/%$/.test(E[3])?100:1)*(/%$/.test(E[3])?255:1);return[parseInt(f,10),parseInt(v,10),parseInt(d,10),E[4]?parseFloat(E[4]):1]}},c.Color.fromRgba=l.fromRgb,c.Color.fromHsl=function(a){return l.fromSource(l.sourceFromHsl(a))},c.Color.sourceFromHsl=function(a){var E=a.match(l.reHSLa);if(E){var f,v,d,g=(parseFloat(E[1])%360+360)%360/360,_=parseFloat(E[2])/(/%$/.test(E[2])?100:1),F=parseFloat(E[3])/(/%$/.test(E[3])?100:1);if(_===0)f=v=d=F;else{var y=F<=.5?F*(_+1):F+_-F*_,T=2*F-y;f=A(T,y,g+1/3),v=A(T,y,g),d=A(T,y,g-1/3)}return[Math.round(255*f),Math.round(255*v),Math.round(255*d),E[4]?parseFloat(E[4]):1]}},c.Color.fromHsla=l.fromHsl,c.Color.fromHex=function(a){return l.fromSource(l.sourceFromHex(a))},c.Color.sourceFromHex=function(a){if(a.match(l.reHex)){var E=a.slice(a.indexOf("#")+1),f=E.length===3||E.length===4,v=E.length===8||E.length===4,d=f?E.charAt(0)+E.charAt(0):E.substring(0,2),g=f?E.charAt(1)+E.charAt(1):E.substring(2,4),_=f?E.charAt(2)+E.charAt(2):E.substring(4,6),F=v?f?E.charAt(3)+E.charAt(3):E.substring(6,8):"FF";return[parseInt(d,16),parseInt(g,16),parseInt(_,16),parseFloat((parseInt(F,16)/255).toFixed(2))]}},c.Color.fromSource=function(a){var E=new l;return E.setSource(a),E})}(e),function(h){var c=h.fabric||(h.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],A=["ns","nesw","ew","nwse"],a={},E="left",f="top",v="right",d="bottom",g="center",_={top:d,bottom:f,left:v,right:E,center:g},F=c.util.radiansToDegrees,y=Math.sign||function(G){return(G>0)-(G<0)||+G};function T(G,V){var Q=G.angle+F(Math.atan2(V.y,V.x))+360;return Math.round(Q%360/45)}function S(G,V){var Q=V.transform.target,Ee=Q.canvas,ie=c.util.object.clone(V);ie.target=Q,Ee&&Ee.fire("object:"+G,ie),Q.fire(G,V)}function I(G,V){var Q=V.canvas,Ee=G[Q.uniScaleKey];return Q.uniformScaling&&!Ee||!Q.uniformScaling&&Ee}function N(G){return G.originX===g&&G.originY===g}function W(G,V,Q){var Ee=G.lockScalingX,ie=G.lockScalingY;return!((!Ee||!ie)&&(V||!Ee&&!ie||!Q)&&(!Ee||V!=="x")&&(!ie||V!=="y"))}function z(G,V,Q,Ee){return{e:G,transform:V,pointer:{x:Q,y:Ee}}}function se(G){return function(V,Q,Ee,ie){var fe=Q.target,De=fe.getCenterPoint(),ve=fe.translateToOriginPoint(De,Q.originX,Q.originY),Be=G(V,Q,Ee,ie);return fe.setPositionByOrigin(ve,Q.originX,Q.originY),Be}}function xe(G,V){return function(Q,Ee,ie,fe){var De=V(Q,Ee,ie,fe);return De&&S(G,z(Q,Ee,ie,fe)),De}}function te(G,V,Q,Ee,ie){var fe=G.target,De=fe.controls[G.corner],ve=fe.canvas.getZoom(),Be=fe.padding/ve,_e=fe.toLocalPoint(new c.Point(Ee,ie),V,Q);return _e.x>=Be&&(_e.x-=Be),_e.x<=-Be&&(_e.x+=Be),_e.y>=Be&&(_e.y-=Be),_e.y<=Be&&(_e.y+=Be),_e.x-=De.offsetX,_e.y-=De.offsetY,_e}function j(G){return G.flipX!==G.flipY}function U(G,V,Q,Ee,ie){if(G[V]!==0){var fe=ie/G._getTransformedDimensions()[Ee]*G[Q];G.set(Q,fe)}}function q(G,V,Q,Ee){var ie,fe=V.target,De=fe._getTransformedDimensions(0,fe.skewY),ve=te(V,V.originX,V.originY,Q,Ee),Be=Math.abs(2*ve.x)-De.x,_e=fe.skewX;Be<2?ie=0:(ie=F(Math.atan2(Be/fe.scaleX,De.y/fe.scaleY)),V.originX===E&&V.originY===d&&(ie=-ie),V.originX===v&&V.originY===f&&(ie=-ie),j(fe)&&(ie=-ie));var pe=_e!==ie;if(pe){var ye=fe._getTransformedDimensions().y;fe.set("skewX",ie),U(fe,"skewY","scaleY","y",ye)}return pe}function oe(G,V,Q,Ee){var ie,fe=V.target,De=fe._getTransformedDimensions(fe.skewX,0),ve=te(V,V.originX,V.originY,Q,Ee),Be=Math.abs(2*ve.y)-De.y,_e=fe.skewY;Be<2?ie=0:(ie=F(Math.atan2(Be/fe.scaleY,De.x/fe.scaleX)),V.originX===E&&V.originY===d&&(ie=-ie),V.originX===v&&V.originY===f&&(ie=-ie),j(fe)&&(ie=-ie));var pe=_e!==ie;if(pe){var ye=fe._getTransformedDimensions().x;fe.set("skewY",ie),U(fe,"skewX","scaleX","x",ye)}return pe}function ae(G,V,Q,Ee,ie){ie=ie||{};var fe,De,ve,Be,_e,pe,ye=V.target,Te=ye.lockScalingX,we=ye.lockScalingY,Le=ie.by,Ve=I(G,ye),Tt=W(ye,Le,Ve),Vt=V.gestureScale;if(Tt)return!1;if(Vt)De=V.scaleX*Vt,ve=V.scaleY*Vt;else{if(fe=te(V,V.originX,V.originY,Q,Ee),_e=Le!=="y"?y(fe.x):1,pe=Le!=="x"?y(fe.y):1,V.signX||(V.signX=_e),V.signY||(V.signY=pe),ye.lockScalingFlip&&(V.signX!==_e||V.signY!==pe))return!1;if(Be=ye._getTransformedDimensions(),Ve&&!Le){var Yt=Math.abs(fe.x)+Math.abs(fe.y),qe=V.original,bt=Yt/(Math.abs(Be.x*qe.scaleX/ye.scaleX)+Math.abs(Be.y*qe.scaleY/ye.scaleY));De=qe.scaleX*bt,ve=qe.scaleY*bt}else De=Math.abs(fe.x*ye.scaleX/Be.x),ve=Math.abs(fe.y*ye.scaleY/Be.y);N(V)&&(De*=2,ve*=2),V.signX!==_e&&Le!=="y"&&(V.originX=_[V.originX],De*=-1,V.signX=_e),V.signY!==pe&&Le!=="x"&&(V.originY=_[V.originY],ve*=-1,V.signY=pe)}var It=ye.scaleX,x0=ye.scaleY;return Le?(Le==="x"&&ye.set("scaleX",De),Le==="y"&&ye.set("scaleY",ve)):(!Te&&ye.set("scaleX",De),!we&&ye.set("scaleY",ve)),It!==ye.scaleX||x0!==ye.scaleY}a.scaleCursorStyleHandler=function(G,V,Q){var Ee=I(G,Q),ie="";if(V.x!==0&&V.y===0?ie="x":V.x===0&&V.y!==0&&(ie="y"),W(Q,ie,Ee))return"not-allowed";var fe=T(Q,V);return l[fe]+"-resize"},a.skewCursorStyleHandler=function(G,V,Q){var Ee="not-allowed";if(V.x!==0&&Q.lockSkewingY||V.y!==0&&Q.lockSkewingX)return Ee;var ie=T(Q,V)%4;return A[ie]+"-resize"},a.scaleSkewCursorStyleHandler=function(G,V,Q){return G[Q.canvas.altActionKey]?a.skewCursorStyleHandler(G,V,Q):a.scaleCursorStyleHandler(G,V,Q)},a.rotationWithSnapping=xe("rotating",se(function(G,V,Q,Ee){var ie=V,fe=ie.target,De=fe.translateToOriginPoint(fe.getCenterPoint(),ie.originX,ie.originY);if(fe.lockRotation)return!1;var ve,Be=Math.atan2(ie.ey-De.y,ie.ex-De.x),_e=Math.atan2(Ee-De.y,Q-De.x),pe=F(_e-Be+ie.theta);if(fe.snapAngle>0){var ye=fe.snapAngle,Te=fe.snapThreshold||ye,we=Math.ceil(pe/ye)*ye,Le=Math.floor(pe/ye)*ye;Math.abs(pe-Le)<Te?pe=Le:Math.abs(pe-we)<Te&&(pe=we)}return pe<0&&(pe=360+pe),pe%=360,ve=fe.angle!==pe,fe.angle=pe,ve})),a.scalingEqually=xe("scaling",se(function(G,V,Q,Ee){return ae(G,V,Q,Ee)})),a.scalingX=xe("scaling",se(function(G,V,Q,Ee){return ae(G,V,Q,Ee,{by:"x"})})),a.scalingY=xe("scaling",se(function(G,V,Q,Ee){return ae(G,V,Q,Ee,{by:"y"})})),a.scalingYOrSkewingX=function(G,V,Q,Ee){return G[V.target.canvas.altActionKey]?a.skewHandlerX(G,V,Q,Ee):a.scalingY(G,V,Q,Ee)},a.scalingXOrSkewingY=function(G,V,Q,Ee){return G[V.target.canvas.altActionKey]?a.skewHandlerY(G,V,Q,Ee):a.scalingX(G,V,Q,Ee)},a.changeWidth=xe("resizing",se(function(G,V,Q,Ee){var ie=V.target,fe=te(V,V.originX,V.originY,Q,Ee),De=ie.strokeWidth/(ie.strokeUniform?ie.scaleX:1),ve=N(V)?2:1,Be=ie.width,_e=Math.abs(fe.x*ve/ie.scaleX)-De;return ie.set("width",Math.max(_e,0)),Be!==_e})),a.skewHandlerX=function(G,V,Q,Ee){var ie,fe=V.target,De=fe.skewX,ve=V.originY;return!fe.lockSkewingX&&(De===0?ie=te(V,g,g,Q,Ee).x>0?E:v:(De>0&&(ie=ve===f?E:v),De<0&&(ie=ve===f?v:E),j(fe)&&(ie=ie===E?v:E)),V.originX=ie,xe("skewing",se(q))(G,V,Q,Ee))},a.skewHandlerY=function(G,V,Q,Ee){var ie,fe=V.target,De=fe.skewY,ve=V.originX;return!fe.lockSkewingY&&(De===0?ie=te(V,g,g,Q,Ee).y>0?f:d:(De>0&&(ie=ve===E?f:d),De<0&&(ie=ve===E?d:f),j(fe)&&(ie=ie===f?d:f)),V.originY=ie,xe("skewing",se(oe))(G,V,Q,Ee))},a.dragHandler=function(G,V,Q,Ee){var ie=V.target,fe=Q-V.offsetX,De=Ee-V.offsetY,ve=!ie.get("lockMovementX")&&ie.left!==fe,Be=!ie.get("lockMovementY")&&ie.top!==De;return ve&&ie.set("left",fe),Be&&ie.set("top",De),(ve||Be)&&S("moving",z(G,V,Q,Ee)),ve||Be},a.scaleOrSkewActionName=function(G,V,Q){var Ee=G[Q.canvas.altActionKey];return V.x===0?Ee?"skewX":"scaleY":V.y===0?Ee?"skewY":"scaleX":void 0},a.rotationStyleHandler=function(G,V,Q){return Q.lockRotation?"not-allowed":V.cursorStyle},a.fireEvent=S,a.wrapWithFixedAnchor=se,a.wrapWithFireEvent=xe,a.getLocalPoint=te,c.controlsUtils=a}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.degreesToRadians,A=c.controlsUtils;A.renderCircleControl=function(a,E,f,v,d){v=v||{};var g,_=this.sizeX||v.cornerSize||d.cornerSize,F=this.sizeY||v.cornerSize||d.cornerSize,y=v.transparentCorners!==void 0?v.transparentCorners:d.transparentCorners,T=y?"stroke":"fill",S=!y&&(v.cornerStrokeColor||d.cornerStrokeColor),I=E,N=f;a.save(),a.fillStyle=v.cornerColor||d.cornerColor,a.strokeStyle=v.cornerStrokeColor||d.cornerStrokeColor,_>F?(g=_,a.scale(1,F/_),N=f*_/F):F>_?(g=F,a.scale(_/F,1),I=E*F/_):g=_,a.lineWidth=1,a.beginPath(),a.arc(I,N,g/2,0,2*Math.PI,!1),a[T](),S&&a.stroke(),a.restore()},A.renderSquareControl=function(a,E,f,v,d){v=v||{};var g=this.sizeX||v.cornerSize||d.cornerSize,_=this.sizeY||v.cornerSize||d.cornerSize,F=v.transparentCorners!==void 0?v.transparentCorners:d.transparentCorners,y=F?"stroke":"fill",T=!F&&(v.cornerStrokeColor||d.cornerStrokeColor),S=g/2,I=_/2;a.save(),a.fillStyle=v.cornerColor||d.cornerColor,a.strokeStyle=v.cornerStrokeColor||d.cornerStrokeColor,a.lineWidth=1,a.translate(E,f),a.rotate(l(d.angle)),a[y+"Rect"](-S,-I,g,_),T&&a.strokeRect(-S,-I,g,_),a.restore()}}(e),function(h){var c=h.fabric||(h.fabric={});c.Control=function(l){for(var A in l)this[A]=l[A]},c.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(l,A){return A.cursorStyle},getActionName:function(l,A){return A.actionName},getVisibility:function(l,A){var a=l._controlsVisibility;return a&&a[A]!==void 0?a[A]:this.visible},setVisibility:function(l){this.visible=l},positionHandler:function(l,A){return c.util.transformPoint({x:this.x*l.x+this.offsetX,y:this.y*l.y+this.offsetY},A)},calcCornerCoords:function(l,A,a,E,f){var v,d,g,_,F=f?this.touchSizeX:this.sizeX,y=f?this.touchSizeY:this.sizeY;if(F&&y&&F!==y){var T=Math.atan2(y,F),S=Math.sqrt(F*F+y*y)/2,I=T-c.util.degreesToRadians(l),N=Math.PI/2-T-c.util.degreesToRadians(l);v=S*c.util.cos(I),d=S*c.util.sin(I),g=S*c.util.cos(N),_=S*c.util.sin(N)}else S=.7071067812*(F&&y?F:A),I=c.util.degreesToRadians(45-l),v=g=S*c.util.cos(I),d=_=S*c.util.sin(I);return{tl:{x:a-_,y:E-g},tr:{x:a+v,y:E-d},bl:{x:a-v,y:E+d},br:{x:a+_,y:E+g}}},render:function(l,A,a,E,f){((E=E||{}).cornerStyle||f.cornerStyle)==="circle"?c.controlsUtils.renderCircleControl.call(this,l,A,a,E,f):c.controlsUtils.renderSquareControl.call(this,l,A,a,E,f)}}}(e),function(){function h(l,A){var a,E,f,v,d=l.getAttribute("style"),g=l.getAttribute("offset")||0;if(g=(g=parseFloat(g)/(/%$/.test(g)?100:1))<0?0:g>1?1:g,d){var _=d.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),v=_.length;v--;){var F=_[v].split(/\s*:\s*/),y=F[0].trim(),T=F[1].trim();y==="stop-color"?a=T:y==="stop-opacity"&&(f=T)}}return a||(a=l.getAttribute("stop-color")||"rgb(0,0,0)"),f||(f=l.getAttribute("stop-opacity")),E=(a=new D.Color(a)).getAlpha(),f=isNaN(parseFloat(f))?1:parseFloat(f),f*=E*A,{offset:g,color:a.toRgb(),opacity:f}}var c=D.util.object.clone;D.Gradient=D.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var A,a=this;Object.keys(l).forEach(function(E){a[E]=l[E]}),this.id?this.id+="_"+D.Object.__uid++:this.id=D.Object.__uid++,A={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(A.r1=l.coords.r1||0,A.r2=l.coords.r2||0),this.coords=A,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var A in l){var a=new D.Color(l[A]);this.colorStops.push({offset:parseFloat(A),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(l){var A={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return D.util.populateWithProperties(this,A,l),A},toSVG:function(l,A){var a,E,f,v,d=c(this.coords,!0),g=(A=A||{},c(this.colorStops,!0)),_=d.r1>d.r2,F=this.gradientTransform?this.gradientTransform.concat():D.iMatrix.concat(),y=-this.offsetX,T=-this.offsetY,S=!!A.additionalTransform,I=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(g.sort(function(se,xe){return se.offset-xe.offset}),I==="objectBoundingBox"?(y/=l.width,T/=l.height):(y+=l.width/2,T+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(y-=l.pathOffset.x,T-=l.pathOffset.y),F[4]-=y,F[5]-=T,v='id="SVGID_'+this.id+'" gradientUnits="'+I+'"',v+=' gradientTransform="'+(S?A.additionalTransform+" ":"")+D.util.matrixToSVG(F)+'" ',this.type==="linear"?f=["<linearGradient ",v,' x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`">
`]:this.type==="radial"&&(f=["<radialGradient ",v,' cx="',_?d.x1:d.x2,'" cy="',_?d.y1:d.y2,'" r="',_?d.r1:d.r2,'" fx="',_?d.x2:d.x1,'" fy="',_?d.y2:d.y1,`">
`]),this.type==="radial"){if(_)for((g=g.concat()).reverse(),a=0,E=g.length;a<E;a++)g[a].offset=1-g[a].offset;var N=Math.min(d.r1,d.r2);if(N>0){var W=N/Math.max(d.r1,d.r2);for(a=0,E=g.length;a<E;a++)g[a].offset+=W*(1-g[a].offset)}}for(a=0,E=g.length;a<E;a++){var z=g[a];f.push("<stop ",'offset="',100*z.offset+"%",'" style="stop-color:',z.color,z.opacity!==void 0?";stop-opacity: "+z.opacity:";",`"/>
`)}return f.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),f.join("")},toLive:function(l){var A,a,E,f=D.util.object.clone(this.coords);if(this.type){for(this.type==="linear"?A=l.createLinearGradient(f.x1,f.y1,f.x2,f.y2):this.type==="radial"&&(A=l.createRadialGradient(f.x1,f.y1,f.r1,f.x2,f.y2,f.r2)),a=0,E=this.colorStops.length;a<E;a++){var v=this.colorStops[a].color,d=this.colorStops[a].opacity,g=this.colorStops[a].offset;d!==void 0&&(v=new D.Color(v).setAlpha(d).toRgba()),A.addColorStop(g,v)}return A}}}),D.util.object.extend(D.Gradient,{fromElement:function(l,A,a,E){var f=parseFloat(a)/(/%$/.test(a)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var v,d,g,_,F=l.getElementsByTagName("stop"),y=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",T=l.getAttribute("gradientTransform")||"",S=[],I=0,N=0;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(v="linear",d=function(W){return{x1:W.getAttribute("x1")||0,y1:W.getAttribute("y1")||0,x2:W.getAttribute("x2")||"100%",y2:W.getAttribute("y2")||0}}(l)):(v="radial",d=function(W){return{x1:W.getAttribute("fx")||W.getAttribute("cx")||"50%",y1:W.getAttribute("fy")||W.getAttribute("cy")||"50%",r1:0,x2:W.getAttribute("cx")||"50%",y2:W.getAttribute("cy")||"50%",r2:W.getAttribute("r")||"50%"}}(l)),g=F.length;g--;)S.push(h(F[g],f));return _=D.parseTransformAttribute(T),function(W,z,se,xe){var te,j;Object.keys(z).forEach(function(U){(te=z[U])==="Infinity"?j=1:te==="-Infinity"?j=0:(j=parseFloat(z[U],10),typeof te=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(te)&&(j*=.01,xe==="pixels"&&(U!=="x1"&&U!=="x2"&&U!=="r2"||(j*=se.viewBoxWidth||se.width),U!=="y1"&&U!=="y2"||(j*=se.viewBoxHeight||se.height)))),z[U]=j})}(0,d,E,y),y==="pixels"&&(I=-A.left,N=-A.top),new D.Gradient({id:l.getAttribute("id"),type:v,coords:d,colorStops:S,gradientUnits:y,gradientTransform:_,offsetX:I,offsetY:N})}})}(),X=D.util.toFixed,D.Pattern=D.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,c){if(h||(h={}),this.id=D.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string")c&&c(this);else{var l=this;this.source=D.util.createImage(),D.util.loadImage(h.source,function(A,a){l.source=A,c&&c(l,a)},null,this.crossOrigin)}},toObject:function(h){var c,l,A=D.Object.NUM_FRACTION_DIGITS;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),l={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:X(this.offsetX,A),offsetY:X(this.offsetY,A),patternTransform:this.patternTransform?this.patternTransform.concat():null},D.util.populateWithProperties(this,l,h),l},toSVG:function(h){var c=typeof this.source=="function"?this.source():this.source,l=c.width/h.width,A=c.height/h.height,a=this.offsetX/h.width,E=this.offsetY/h.height,f="";return this.repeat!=="repeat-x"&&this.repeat!=="no-repeat"||(A=1,E&&(A+=Math.abs(E))),this.repeat!=="repeat-y"&&this.repeat!=="no-repeat"||(l=1,a&&(l+=Math.abs(a))),c.src?f=c.src:c.toDataURL&&(f=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+E+'" width="'+l+'" height="'+A+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+f+`"></image>
</pattern>
`},setOptions:function(h){for(var c in h)this[c]=h[c]},toLive:function(h){var c=this.source;return!c||c.src!==void 0&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":h.createPattern(c,this.repeat)}}),function(h){var c=h.fabric||(h.fabric={}),l=c.util.toFixed;c.Shadow?c.warn("fabric.Shadow is already defined."):(c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(A){for(var a in typeof A=="string"&&(A=this._parseShadow(A)),A)this[a]=A[a];this.id=c.Object.__uid++},_parseShadow:function(A){var a=A.trim(),E=c.Shadow.reOffsetsAndBlur.exec(a)||[];return{color:(a.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(E[1],10)||0,offsetY:parseFloat(E[2],10)||0,blur:parseFloat(E[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(A){var a=40,E=40,f=c.Object.NUM_FRACTION_DIGITS,v=c.util.rotateVector({x:this.offsetX,y:this.offsetY},c.util.degreesToRadians(-A.angle)),d=new c.Color(this.color);return A.width&&A.height&&(a=100*l((Math.abs(v.x)+this.blur)/A.width,f)+20,E=100*l((Math.abs(v.y)+this.blur)/A.height,f)+20),A.flipX&&(v.x*=-1),A.flipY&&(v.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+E+'%" height="'+(100+2*E)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,f)+`"></feGaussianBlur>
	<feOffset dx="`+l(v.x,f)+'" dy="'+l(v.y,f)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+d.toRgb()+'" flood-opacity="'+d.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var A={},a=c.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(E){this[E]!==a[E]&&(A[E]=this[E])},this),A}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){if(D.StaticCanvas)D.warn("fabric.StaticCanvas is already defined.");else{var h=D.util.object.extend,c=D.util.getElementOffset,l=D.util.removeFromArray,A=D.util.toFixed,a=D.util.transformPoint,E=D.util.invertTransform,f=D.util.getNodeCanvas,v=D.util.createCanvasElement,d=new Error("Could not initialize `canvas` element");D.StaticCanvas=D.util.createClass(D.CommonMethods,{initialize:function(g,_){_||(_={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,_)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:D.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,_){var F=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(_),this.interactive||this._initRetinaScaling(),_.overlayImage&&this.setOverlayImage(_.overlayImage,F),_.backgroundImage&&this.setBackgroundImage(_.backgroundImage,F),_.backgroundColor&&this.setBackgroundColor(_.backgroundColor,F),_.overlayColor&&this.setOverlayColor(_.overlayColor,F),this.calcOffset()},_isRetinaScaling:function(){return D.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,D.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=D.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,_,F){_.setAttribute("width",this.width*g),_.setAttribute("height",this.height*g),F.scale(g,g)},calcOffset:function(){return this._offset=c(this.lowerCanvasEl),this},setOverlayImage:function(g,_,F){return this.__setBgOverlayImage("overlayImage",g,_,F)},setBackgroundImage:function(g,_,F){return this.__setBgOverlayImage("backgroundImage",g,_,F)},setOverlayColor:function(g,_){return this.__setBgOverlayColor("overlayColor",g,_)},setBackgroundColor:function(g,_){return this.__setBgOverlayColor("backgroundColor",g,_)},__setBgOverlayImage:function(g,_,F,y){return typeof _=="string"?D.util.loadImage(_,function(T,S){if(T){var I=new D.Image(T,y);this[g]=I,I.canvas=this}F&&F(T,S)},this,y&&y.crossOrigin):(y&&_.setOptions(y),this[g]=_,_&&(_.canvas=this),F&&F(_,!1)),this},__setBgOverlayColor:function(g,_,F){return this[g]=_,this._initGradient(_,g),this._initPattern(_,g,F),this},_createCanvasElement:function(){var g=v();if(!g||(g.style||(g.style={}),g.getContext===void 0))throw d;return g},_initOptions:function(g){var _=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(_.width,10)||0,this.height=this.height||parseInt(_.height,10)||0,this.lowerCanvasEl.style&&(_.width=this.width,_.height=this.height,_.style.width=this.width+"px",_.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=D.util.getById(g)||this._createCanvasElement(),D.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,_){return this.setDimensions({width:g},_)},setHeight:function(g,_){return this.setDimensions({height:g},_)},setDimensions:function(g,_){var F;for(var y in _=_||{},g)F=g[y],_.cssOnly||(this._setBackstoreDimension(y,g[y]),F+="px",this.hasLostContext=!0),_.backstoreOnly||this._setCssDimension(y,F);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),_.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,_){return this.lowerCanvasEl[g]=_,this.upperCanvasEl&&(this.upperCanvasEl[g]=_),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=_),this[g]=_,this},_setCssDimension:function(g,_){return this.lowerCanvasEl.style[g]=_,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=_),this.wrapperEl&&(this.wrapperEl.style[g]=_),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var _,F,y,T=this._activeObject,S=this.backgroundImage,I=this.overlayImage;for(this.viewportTransform=g,F=0,y=this._objects.length;F<y;F++)(_=this._objects[F]).group||_.setCoords(!0);return T&&T.setCoords(),S&&S.setCoords(!0),I&&I.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,_){var F=g,y=this.viewportTransform.slice(0);g=a(g,E(this.viewportTransform)),y[0]=_,y[3]=_;var T=a(g,y);return y[4]+=F.x-T.x,y[5]+=F.y-T.y,this.setViewportTransform(y)},setZoom:function(g){return this.zoomToPoint(new D.Point(0,0),g),this},absolutePan:function(g){var _=this.viewportTransform.slice(0);return _[4]=-g.x,_[5]=-g.y,this.setViewportTransform(_)},relativePan:function(g){return this.absolutePan(new D.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=D.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},_=this.width,F=this.height,y=E(this.viewportTransform);return g.tl=a({x:0,y:0},y),g.br=a({x:_,y:F},y),g.tr=new D.Point(g.br.x,g.tl.y),g.bl=new D.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(D.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,_){var F=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),D.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(F[0],F[1],F[2],F[3],F[4],F[5]),this._renderObjects(g,_),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var _=this.viewportTransform,F=this.clipPath;g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.globalCompositeOperation="destination-in",F.transform(g),g.scale(1/F.zoomX,1/F.zoomY),g.drawImage(F._cacheCanvas,-F.cacheTranslationX,-F.cacheTranslationY),g.restore()},_renderObjects:function(g,_){var F,y;for(F=0,y=_.length;F<y;++F)_[F]&&_[F].render(g)},_renderBackgroundOrOverlay:function(g,_){var F=this[_+"Color"],y=this[_+"Image"],T=this.viewportTransform,S=this[_+"Vpt"];if(F||y){if(F){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=F.toLive?F.toLive(g,this):F,S&&g.transform(T[0],T[1],T[2],T[3],T[4],T[5]),g.transform(1,0,0,1,F.offsetX||0,F.offsetY||0);var I=F.gradientTransform||F.patternTransform;I&&g.transform(I[0],I[1],I[2],I[3],I[4],I[5]),g.fill(),g.restore()}y&&(g.save(),S&&g.transform(T[0],T[1],T[2],T[3],T[4],T[5]),y.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new D.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new D.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new D.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var _=this.getCenterPoint();return this._centerObject(g,_)},viewportCenterObject:function(g){var _=this.getVpCenter();return this._centerObject(g,_)},viewportCenterObjectH:function(g){var _=this.getVpCenter();return this._centerObject(g,new D.Point(_.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var _=this.getVpCenter();return this._centerObject(g,new D.Point(g.getCenterPoint().x,_.y))},getVpCenter:function(){var g=this.getCenterPoint(),_=E(this.viewportTransform);return a(g,_)},_centerObject:function(g,_){return g.setPositionByOrigin(_,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,_){var F=this.clipPath,y={version:D.version,objects:this._toObjects(g,_)};return F&&!F.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,g,_)),h(y,this.__serializeBgOverlay(g,_)),D.util.populateWithProperties(this,y,_),y},_toObjects:function(g,_){return this._objects.filter(function(F){return!F.excludeFromExport}).map(function(F){return this._toObject(F,g,_)},this)},_toObject:function(g,_,F){var y;this.includeDefaultValues||(y=g.includeDefaultValues,g.includeDefaultValues=!1);var T=g[_](F);return this.includeDefaultValues||(g.includeDefaultValues=y),T},__serializeBgOverlay:function(g,_){var F={},y=this.backgroundImage,T=this.overlayImage,S=this.backgroundColor,I=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(F.background=S.toObject(_)):S&&(F.background=S),I&&I.toObject?I.excludeFromExport||(F.overlay=I.toObject(_)):I&&(F.overlay=I),y&&!y.excludeFromExport&&(F.backgroundImage=this._toObject(y,g,_)),T&&!T.excludeFromExport&&(F.overlayImage=this._toObject(T,g,_)),F},svgViewportTransformation:!0,toSVG:function(g,_){g||(g={}),g.reviver=_;var F=[];return this._setSVGPreamble(F,g),this._setSVGHeader(F,g),this.clipPath&&F.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(F,"background"),this._setSVGBgOverlayImage(F,"backgroundImage",_),this._setSVGObjects(F,_),this.clipPath&&F.push(`</g>
`),this._setSVGBgOverlayColor(F,"overlay"),this._setSVGBgOverlayImage(F,"overlayImage",_),F.push("</svg>"),F.join("")},_setSVGPreamble:function(g,_){_.suppressPreamble||g.push('<?xml version="1.0" encoding="',_.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,_){var F,y=_.width||this.width,T=_.height||this.height,S='viewBox="0 0 '+this.width+" "+this.height+'" ',I=D.Object.NUM_FRACTION_DIGITS;_.viewBox?S='viewBox="'+_.viewBox.x+" "+_.viewBox.y+" "+_.viewBox.width+" "+_.viewBox.height+'" ':this.svgViewportTransformation&&(F=this.viewportTransform,S='viewBox="'+A(-F[4]/F[0],I)+" "+A(-F[5]/F[3],I)+" "+A(this.width/F[0],I)+" "+A(this.height/F[3],I)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',T,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",D.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(_),`</defs>
`)},createSVGClipPathMarkup:function(g){var _=this.clipPath;return _?(_.clipPathId="CLIPPATH_"+D.Object.__uid++,'<clipPath id="'+_.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this;return["background","overlay"].map(function(_){var F=g[_+"Color"];if(F&&F.toLive){var y=g[_+"Vpt"],T=g.viewportTransform,S={width:g.width/(y?T[0]:1),height:g.height/(y?T[3]:1)};return F.toSVG(S,{additionalTransform:y?D.util.matrixToSVG(T):""})}}).join("")},createSVGFontFacesMarkup:function(){var g,_,F,y,T,S,I,N,W="",z={},se=D.fontPaths,xe=[];for(this._objects.forEach(function j(U){xe.push(U),U._objects&&U._objects.forEach(j)}),I=0,N=xe.length;I<N;I++)if(_=(g=xe[I]).fontFamily,g.type.indexOf("text")!==-1&&!z[_]&&se[_]&&(z[_]=!0,g.styles))for(T in F=g.styles)for(S in y=F[T])!z[_=y[S].fontFamily]&&se[_]&&(z[_]=!0);for(var te in z)W+=[`		@font-face {
`,"			font-family: '",te,`';
`,"			src: url('",se[te],`');
`,`		}
`].join("");return W&&(W=['	<style type="text/css">',`<![CDATA[
`,W,"]]>",`</style>
`].join("")),W},_setSVGObjects:function(g,_){var F,y,T,S=this._objects;for(y=0,T=S.length;y<T;y++)(F=S[y]).excludeFromExport||this._setSVGObject(g,F,_)},_setSVGObject:function(g,_,F){g.push(_.toSVG(F))},_setSVGBgOverlayImage:function(g,_,F){this[_]&&!this[_].excludeFromExport&&this[_].toSVG&&g.push(this[_].toSVG(F))},_setSVGBgOverlayColor:function(g,_){var F=this[_+"Color"],y=this.viewportTransform,T=this.width,S=this.height;if(F)if(F.toLive){var I=F.repeat,N=D.util.invertTransform(y),W=this[_+"Vpt"]?D.util.matrixToSVG(N):"";g.push('<rect transform="'+W+" translate(",T/2,",",S/2,')"',' x="',F.offsetX-T/2,'" y="',F.offsetY-S/2,'" ','width="',I==="repeat-y"||I==="no-repeat"?F.source.width:T,'" height="',I==="repeat-x"||I==="no-repeat"?F.source.height:S,'" fill="url(#SVGID_'+F.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',F,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var _,F,y,T=this._activeObject;if(g===T&&g.type==="activeSelection")for(_=(y=T._objects).length;_--;)F=y[_],l(this._objects,F),this._objects.unshift(F);else l(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var _,F,y,T=this._activeObject;if(g===T&&g.type==="activeSelection")for(y=T._objects,_=0;_<y.length;_++)F=y[_],l(this._objects,F),this._objects.push(F);else l(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,_){if(!g)return this;var F,y,T,S,I,N=this._activeObject,W=0;if(g===N&&g.type==="activeSelection")for(I=N._objects,F=0;F<I.length;F++)y=I[F],(T=this._objects.indexOf(y))>0+W&&(S=T-1,l(this._objects,y),this._objects.splice(S,0,y)),W++;else(T=this._objects.indexOf(g))!==0&&(S=this._findNewLowerIndex(g,T,_),l(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,_,F){var y,T;if(F){for(y=_,T=_-1;T>=0;--T)if(g.intersectsWithObject(this._objects[T])||g.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(g)){y=T;break}}else y=_-1;return y},bringForward:function(g,_){if(!g)return this;var F,y,T,S,I,N=this._activeObject,W=0;if(g===N&&g.type==="activeSelection")for(F=(I=N._objects).length;F--;)y=I[F],(T=this._objects.indexOf(y))<this._objects.length-1-W&&(S=T+1,l(this._objects,y),this._objects.splice(S,0,y)),W++;else(T=this._objects.indexOf(g))!==this._objects.length-1&&(S=this._findNewUpperIndex(g,T,_),l(this._objects,g),this._objects.splice(S,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,_,F){var y,T,S;if(F){for(y=_,T=_+1,S=this._objects.length;T<S;++T)if(g.intersectsWithObject(this._objects[T])||g.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(g)){y=T;break}}else y=_+1;return y},moveTo:function(g,_){return l(this._objects,g),this._objects.splice(_,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(D.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),D.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),D.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(D.StaticCanvas.prototype,D.Observable),h(D.StaticCanvas.prototype,D.Collection),h(D.StaticCanvas.prototype,D.DataURLExporter),h(D.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var _=v();if(!_||!_.getContext)return null;var F=_.getContext("2d");return F&&g==="setLineDash"?F.setLineDash!==void 0:null}}),D.StaticCanvas.prototype.toJSON=D.StaticCanvas.prototype.toObject,D.isLikelyNode&&(D.StaticCanvas.prototype.createPNGStream=function(){var g=f(this.lowerCanvasEl);return g&&g.createPNGStream()},D.StaticCanvas.prototype.createJPEGStream=function(g){var _=f(this.lowerCanvasEl);return _&&_.createJPEGStream(g)})}}(),D.BaseBrush=D.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var c=this.canvas.viewportTransform;h.save(),h.transform(c[0],c[1],c[2],c[3],c[4],c[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,c=this.shadow,l=h.contextTop,A=h.getZoom();h&&h._isRetinaScaling()&&(A*=D.devicePixelRatio),l.shadowColor=c.color,l.shadowBlur=c.blur*A,l.shadowOffsetX=c.offsetX*A,l.shadowOffsetY=c.offsetY*A}},needsFullRender:function(){return new D.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),D.PencilBrush=D.util.createClass(D.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,c,l){var A=c.midPointFrom(l);return h.quadraticCurveTo(c.x,c.y,A.x,A.y),A},onMouseDown:function(h,c){this.canvas._isMainEvent(c.e)&&(this.drawStraightLine=c.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,c){if(this.canvas._isMainEvent(c.e)&&(this.drawStraightLine=c.e[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,A=l.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,l[A-2],l[A-1],!0),a.stroke(),a.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var c=new D.Point(h.x,h.y);this._reset(),this._addPoint(c),this.canvas.contextTop.moveTo(c.x,c.y)},_addPoint:function(h){return!(this._points.length>1&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var c=new D.Point(h.x,h.y);return this._addPoint(c)},_render:function(h){var c,l,A=this._points[0],a=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&A.x===a.x&&A.y===a.y){var E=this.width/1e3;A=new D.Point(A.x,A.y),a=new D.Point(a.x,a.y),A.x-=E,a.x+=E}for(h.moveTo(A.x,A.y),c=1,l=this._points.length;c<l;c++)this._drawSegment(h,A,a),A=this._points[c],a=this._points[c+1];h.lineTo(A.x,A.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var c=this.width/1e3;return D.util.getSmoothPathFromPoints(h,c)},_isEmptySVGPath:function(h){return D.util.joinPath(h)==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var c=new D.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,c.shadow=new D.Shadow(this.shadow)),c},decimatePoints:function(h,c){if(h.length<=2)return h;var l,A=this.canvas.getZoom(),a=Math.pow(c/A,2),E=h.length-1,f=h[0],v=[f];for(l=1;l<E-1;l++)Math.pow(f.x-h[l].x,2)+Math.pow(f.y-h[l].y,2)>=a&&(f=h[l],v.push(f));return v.push(h[E]),v},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var c=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}}}),D.CircleBrush=D.util.createClass(D.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var c=this.addPoint(h),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,c),l.restore()},dot:function(h,c){h.fillStyle=c.fill,h.beginPath(),h.arc(c.x,c.y,c.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,c,l=this.canvas.contextTop,A=this.points;for(this._saveAndTransform(l),h=0,c=A.length;h<c;h++)this.dot(l,A[h]);l.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,c,l=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var A=[];for(h=0,c=this.points.length;h<c;h++){var a=this.points[h],E=new D.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(E.shadow=new D.Shadow(this.shadow)),A.push(E)}var f=new D.Group(A);f.canvas=this.canvas,this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},addPoint:function(h){var c=new D.Point(h.x,h.y),l=D.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,A=new D.Color(this.color).setAlpha(D.util.getRandomInt(0,100)/100).toRgba();return c.radius=l,c.fill=A,this.points.push(c),c}}),D.SprayBrush=D.util.createClass(D.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],l=0,A=this.sprayChunks.length;l<A;l++)for(var a=this.sprayChunks[l],E=0,f=a.length;E<f;E++){var v=new D.Rect({width:a[E].width,height:a[E].width,left:a[E].x+1,top:a[E].y+1,originX:"center",originY:"center",fill:this.color});c.push(v)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));var d=new D.Group(c);this.shadow&&d.set("shadow",new D.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var c,l,A,a={};for(l=0,A=h.length;l<A;l++)a[c=h[l].left+""+h[l].top]||(a[c]=h[l]);var E=[];for(c in a)E.push(a[c]);return E},render:function(h){var c,l,A=this.canvas.contextTop;for(A.fillStyle=this.color,this._saveAndTransform(A),c=0,l=h.length;c<l;c++){var a=h[c];a.opacity!==void 0&&(A.globalAlpha=a.opacity),A.fillRect(a.x,a.y,a.width,a.width)}A.restore()},_render:function(){var h,c,l=this.canvas.contextTop;for(l.fillStyle=this.color,this._saveAndTransform(l),h=0,c=this.sprayChunks.length;h<c;h++)this.render(this.sprayChunks[h]);l.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var c,l,A,a,E=this.width/2;for(a=0;a<this.density;a++){c=D.util.getRandomInt(h.x-E,h.x+E),l=D.util.getRandomInt(h.y-E,h.y+E),A=this.dotWidthVariance?D.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var f=new D.Point(c,l);f.width=A,this.randomOpacity&&(f.opacity=D.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(f)}this.sprayChunks.push(this.sprayChunkPoints)}}),D.PatternBrush=D.util.createClass(D.PencilBrush,{getPatternSrc:function(){var h=D.util.createCanvasElement(),c=h.getContext("2d");return h.width=h.height=25,c.fillStyle=this.color,c.beginPath(),c.arc(10,10,10,0,2*Math.PI,!1),c.closePath(),c.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var c=this.callSuper("createPath",h),l=c._getLeftTopCoords().scalarAdd(c.strokeWidth/2);return c.stroke=new D.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),c}}),function(){var h=D.util.getPointer,c=D.util.degreesToRadians,l=D.util.isTouchEvent;for(var A in D.Canvas=D.util.createClass(D.StaticCanvas,{initialize:function(a,E){E||(E={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,E),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=D.PencilBrush&&new D.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a,E,f,v=this.getActiveObjects();if(v.length>0&&!this.preserveObjectStacking){E=[],f=[];for(var d=0,g=this._objects.length;d<g;d++)a=this._objects[d],v.indexOf(a)===-1?E.push(a):f.push(a);v.length>1&&(this._activeObject._objects=f),E.push.apply(E,f)}else E=this._objects;return E},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,E){var f=a.calcTransformMatrix(),v=D.util.invertTransform(f),d=this.restorePointerVpt(E);return D.util.transformPoint(d,v)},isTargetTransparent:function(a,E,f){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var v=this._normalizePointer(a,{x:E,y:f}),d=Math.max(a.cacheTranslationX+v.x*a.zoomX,0),g=Math.max(a.cacheTranslationY+v.y*a.zoomY,0);return D.util.isTransparent(a._cacheContext,Math.round(d),Math.round(g),this.targetFindTolerance)}var _=this.contextCache,F=a.selectionBackgroundColor,y=this.viewportTransform;return a.selectionBackgroundColor="",this.clearContext(_),_.save(),_.transform(y[0],y[1],y[2],y[3],y[4],y[5]),a.render(_),_.restore(),a.selectionBackgroundColor=F,D.util.isTransparent(_,E,f,this.targetFindTolerance)},_isSelectionKeyPressed:function(a){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(E){return a[E]===!0}):a[this.selectionKey]},_shouldClearSelection:function(a,E){var f=this.getActiveObjects(),v=this._activeObject;return!E||E&&v&&f.length>1&&f.indexOf(E)===-1&&v!==E&&!this._isSelectionKeyPressed(a)||E&&!E.evented||E&&!E.selectable&&v&&v!==E},_shouldCenterTransform:function(a,E,f){var v;if(a)return E==="scale"||E==="scaleX"||E==="scaleY"||E==="resizing"?v=this.centeredScaling||a.centeredScaling:E==="rotate"&&(v=this.centeredRotation||a.centeredRotation),v?!f:f},_getOriginFromCorner:function(a,E){var f={x:a.originX,y:a.originY};return E==="ml"||E==="tl"||E==="bl"?f.x="right":E!=="mr"&&E!=="tr"&&E!=="br"||(f.x="left"),E==="tl"||E==="mt"||E==="tr"?f.y="bottom":E!=="bl"&&E!=="mb"&&E!=="br"||(f.y="top"),f},_getActionFromCorner:function(a,E,f,v){if(!E||!a)return"drag";var d=v.controls[E];return d.getActionName(f,d,v)},_setupCurrentTransform:function(a,E,f){if(E){var v=this.getPointer(a),d=E.__corner,g=E.controls[d],_=f&&d?g.getActionHandler(a,E,g):D.controlsUtils.dragHandler,F=this._getActionFromCorner(f,d,a,E),y=this._getOriginFromCorner(E,d),T=a[this.centeredKey],S={target:E,action:F,actionHandler:_,corner:d,scaleX:E.scaleX,scaleY:E.scaleY,skewX:E.skewX,skewY:E.skewY,offsetX:v.x-E.left,offsetY:v.y-E.top,originX:y.x,originY:y.y,ex:v.x,ey:v.y,lastX:v.x,lastY:v.y,theta:c(E.angle),width:E.width*E.scaleX,shiftKey:a.shiftKey,altKey:T,original:D.util.saveObjectTransform(E)};this._shouldCenterTransform(E,F,T)&&(S.originX="center",S.originY="center"),S.original.originX=y.x,S.original.originY=y.y,this._currentTransform=S,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var E=this._groupSelector,f=new D.Point(E.ex,E.ey),v=D.util.transformPoint(f,this.viewportTransform),d=new D.Point(E.ex+E.left,E.ey+E.top),g=D.util.transformPoint(d,this.viewportTransform),_=Math.min(v.x,g.x),F=Math.min(v.y,g.y),y=Math.max(v.x,g.x),T=Math.max(v.y,g.y),S=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(_,F,y-_,T-F)),this.selectionLineWidth&&this.selectionBorderColor&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,_+=S,F+=S,y-=S,T-=S,D.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(_,F,y-_,T-F))},findTarget:function(a,E){if(!this.skipTargetFind){var f,v,d=this.getPointer(a,!0),g=this._activeObject,_=this.getActiveObjects(),F=l(a),y=_.length>1&&!E||_.length===1;if(this.targets=[],y&&g._findTargetCorner(d,F)||_.length>1&&!E&&g===this._searchPossibleTargets([g],d))return g;if(_.length===1&&g===this._searchPossibleTargets([g],d)){if(!this.preserveObjectStacking)return g;f=g,v=this.targets,this.targets=[]}var T=this._searchPossibleTargets(this._objects,d);return a[this.altSelectionKey]&&T&&f&&T!==f&&(T=f,this.targets=v),T}},_checkTarget:function(a,E,f){if(E&&E.visible&&E.evented&&E.containsPoint(a)&&(!this.perPixelTargetFind&&!E.perPixelTargetFind||E.isEditing||!this.isTargetTransparent(E,f.x,f.y)))return!0},_searchPossibleTargets:function(a,E){for(var f,v,d=a.length;d--;){var g=a[d],_=g.group?this._normalizePointer(g.group,E):E;if(this._checkTarget(_,g,E)){(f=a[d]).subTargetCheck&&f instanceof D.Group&&(v=this._searchPossibleTargets(f._objects,E))&&this.targets.push(v);break}}return f},restorePointerVpt:function(a){return D.util.transformPoint(a,D.util.invertTransform(this.viewportTransform))},getPointer:function(a,E){if(this._absolutePointer&&!E)return this._absolutePointer;if(this._pointer&&E)return this._pointer;var f,v=h(a),d=this.upperCanvasEl,g=d.getBoundingClientRect(),_=g.width||0,F=g.height||0;_&&F||("top"in g&&"bottom"in g&&(F=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(_=Math.abs(g.right-g.left))),this.calcOffset(),v.x=v.x-this._offset.left,v.y=v.y-this._offset.top,E||(v=this.restorePointerVpt(v));var y=this.getRetinaScaling();return y!==1&&(v.x/=y,v.y/=y),f=_===0||F===0?{width:1,height:1}:{width:d.width/_,height:d.height/F},{x:v.x*f.width,y:v.y*f.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),E=this.lowerCanvasEl,f=this.upperCanvasEl;f?f.className="":(f=this._createCanvasElement(),this.upperCanvasEl=f),D.util.addClass(f,"upper-canvas "+a),this.wrapperEl.appendChild(f),this._copyCanvasStyle(E,f),this._applyCanvasStyle(f),this.contextTop=f.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=D.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),D.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),D.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var E=this.width||a.width,f=this.height||a.height;D.util.setStyle(a,{position:"absolute",width:E+"px",height:f+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=E,a.height=f,D.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,E){E.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,E){var f=!1,v=this.getActiveObjects(),d=[],g=[];a.forEach(function(_){v.indexOf(_)===-1&&(f=!0,_.fire("deselected",{e:E,target:_}),g.push(_))}),v.forEach(function(_){a.indexOf(_)===-1&&(f=!0,_.fire("selected",{e:E,target:_}),d.push(_))}),a.length>0&&v.length>0?f&&this.fire("selection:updated",{e:E,selected:d,deselected:g}):v.length>0?this.fire("selection:created",{e:E,selected:d}):a.length>0&&this.fire("selection:cleared",{e:E,deselected:g})},setActiveObject:function(a,E){var f=this.getActiveObjects();return this._setActiveObject(a,E),this._fireSelectionEvents(f,E),this},_setActiveObject:function(a,E){return this._activeObject!==a&&!!this._discardActiveObject(E,a)&&!a.onSelect({e:E})&&(this._activeObject=a,!0)},_discardActiveObject:function(a,E){var f=this._activeObject;if(f){if(f.onDeselect({e:a,object:E}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var E=this.getActiveObjects(),f=this.getActiveObject();return E.length&&this.fire("before:selection:cleared",{target:f,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(E,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(E){D.util.cleanUpJsdomNode(this[E]),this[E]=void 0}.bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,D.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var E=this._activeObject;E&&E._renderControls(a)},_toObject:function(a,E,f){var v=this._realizeGroupTransformOnObject(a),d=this.callSuper("_toObject",a,E,f);return this._unwindGroupTransformOnObject(a,v),d},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var E={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(f){E[f]=a[f]}),D.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),E}return null},_unwindGroupTransformOnObject:function(a,E){E&&a.set(E)},_setSVGObject:function(a,E,f){var v=this._realizeGroupTransformOnObject(E);this.callSuper("_setSVGObject",a,E,f),this._unwindGroupTransformOnObject(E,v)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),D.StaticCanvas.prototype.setViewportTransform.call(this,a)}}),D.StaticCanvas)A!=="prototype"&&(D.Canvas[A]=D.StaticCanvas[A])}(),function(){var h=D.util.addListener,c=D.util.removeListener,l={passive:!1};function A(a,E){return a.button&&a.button===E-1}D.util.object.extend(D.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,E){var f=this.upperCanvasEl,v=this._getEventPrefix();a(D.window,"resize",this._onResize),a(f,v+"down",this._onMouseDown),a(f,v+"move",this._onMouseMove,l),a(f,v+"out",this._onMouseOut),a(f,v+"enter",this._onMouseEnter),a(f,"wheel",this._onMouseWheel),a(f,"contextmenu",this._onContextMenu),a(f,"dblclick",this._onDoubleClick),a(f,"dragover",this._onDragOver),a(f,"dragenter",this._onDragEnter),a(f,"dragleave",this._onDragLeave),a(f,"drop",this._onDrop),this.enablePointerEvents||a(f,"touchstart",this._onTouchStart,l),typeof eventjs!="undefined"&&E in eventjs&&(eventjs[E](f,"gesture",this._onGesture),eventjs[E](f,"drag",this._onDrag),eventjs[E](f,"orientation",this._onOrientationChange),eventjs[E](f,"shake",this._onShake),eventjs[E](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var a=this._getEventPrefix();c(D.document,a+"up",this._onMouseUp),c(D.document,"touchend",this._onTouchEnd,l),c(D.document,a+"move",this._onMouseMove,l),c(D.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(a,E){this.__onTransformGesture&&this.__onTransformGesture(a,E)},_onDrag:function(a,E){this.__onDrag&&this.__onDrag(a,E)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var E=this._hoveredTarget;this.fire("mouse:out",{target:E,e:a}),this._hoveredTarget=null,E&&E.fire("mouseout",{e:a});var f=this;this._hoveredTargets.forEach(function(v){f.fire("mouse:out",{target:E,e:a}),v&&E.fire("mouseout",{e:a})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(v){v.isEditing&&v.hiddenTextarea.focus()})},_onMouseEnter:function(a){this._currentTransform||this.findTarget(a)||(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,E){this.__onOrientationChange&&this.__onOrientationChange(a,E)},_onShake:function(a,E){this.__onShake&&this.__onShake(a,E)},_onLongPress:function(a,E){this.__onLongPress&&this.__onLongPress(a,E)},_onDragOver:function(a){a.preventDefault();var E=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(E,a)},_onDrop:function(a){return this._simpleEventHandler("drop:before",a),this._simpleEventHandler("drop",a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var E=a.changedTouches;return E?E[0]&&E[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0||a.isPrimary!==!1&&(a.type==="touchend"&&a.touches.length===0||!a.changedTouches||a.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var E=this.upperCanvasEl,f=this._getEventPrefix();h(D.document,"touchend",this._onTouchEnd,l),h(D.document,"touchmove",this._onMouseMove,l),c(E,f+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var E=this.upperCanvasEl,f=this._getEventPrefix();c(E,f+"move",this._onMouseMove,l),h(D.document,f+"up",this._onMouseUp),h(D.document,f+"move",this._onMouseMove,l)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var E=this._getEventPrefix();c(D.document,"touchend",this._onTouchEnd,l),c(D.document,"touchmove",this._onMouseMove,l);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(f.upperCanvasEl,E+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var E=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(a)&&(c(D.document,f+"up",this._onMouseUp),c(D.document,f+"move",this._onMouseMove,l),h(E,f+"move",this._onMouseMove,l))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var E=this._activeObject;return!!(!!E!=!!a||E&&a&&E!==a)||(E&&E.isEditing,!1)},__onMouseUp:function(a){var E,f=this._currentTransform,v=this._groupSelector,d=!1,g=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(a),E=this._target,this._handleEvent(a,"up:before"),A(a,3))this.fireRightClick&&this._handleEvent(a,"up",3,g);else{if(A(a,2))return this.fireMiddleClick&&this._handleEvent(a,"up",2,g),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(a);else if(this._isMainEvent(a)){if(f&&(this._finalizeCurrentTransform(a),d=f.actionPerformed),!g){var _=E===this._activeObject;this._maybeGroupObjects(a),d||(d=this._shouldRender(E)||!_&&E===this._activeObject)}var F,y;if(E){if(F=E._findTargetCorner(this.getPointer(a,!0),D.util.isTouchEvent(a)),E.selectable&&E!==this._activeObject&&E.activeOn==="up")this.setActiveObject(E,a),d=!0;else{var T=E.controls[F],S=T&&T.getMouseUpHandler(a,E,T);S&&S(a,f,(y=this.getPointer(a)).x,y.y)}E.isMoving=!1}if(f&&(f.target!==E||f.corner!==F)){var I=f.target&&f.target.controls[f.corner],N=I&&I.getMouseUpHandler(a,E,T);y=y||this.getPointer(a),N&&N(a,f,y.x,y.y)}this._setCursorFromEvent(a,E),this._handleEvent(a,"up",1,g),this._groupSelector=null,this._currentTransform=null,E&&(E.__corner=0),d?this.requestRenderAll():g||this.renderTop()}}},_simpleEventHandler:function(a,E){var f=this.findTarget(E),v=this.targets,d={e:E,target:f,subTargets:v};if(this.fire(a,d),f&&f.fire(a,d),!v)return f;for(var g=0;g<v.length;g++)v[g].fire(a,d);return f},_handleEvent:function(a,E,f,v){var d=this._target,g=this.targets||[],_={e:a,target:d,subTargets:g,button:f||1,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};E==="up"&&(_.currentTarget=this.findTarget(a),_.currentSubTargets=this.targets),this.fire("mouse:"+E,_),d&&d.fire("mouse"+E,_);for(var F=0;F<g.length;F++)g[F].fire("mouse"+E,_)},_finalizeCurrentTransform:function(a){var E=this._currentTransform,f=E.target,v={e:a,target:f,transform:E,action:E.action};f._scaling&&(f._scaling=!1),f.setCoords(),(E.actionPerformed||this.stateful&&f.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var E=this.getPointer(a);this.freeDrawingBrush.onMouseDown(E,{e:a,pointer:E}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var E=this.getPointer(a);this.freeDrawingBrush.onMouseMove(E,{e:a,pointer:E})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var E=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:E}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var E=this._target;if(A(a,3))this.fireRightClick&&this._handleEvent(a,"down",3);else if(A(a,2))this.fireMiddleClick&&this._handleEvent(a,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(a);else if(this._isMainEvent(a)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var v=this._shouldRender(E),d=this._shouldGroup(a,E);if(this._shouldClearSelection(a,E)?this.discardActiveObject(a):d&&(this._handleGrouping(a,E),E=this._activeObject),!this.selection||E&&(E.selectable||E.isEditing||E===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),E){var g=E===this._activeObject;E.selectable&&E.activeOn==="down"&&this.setActiveObject(E,a);var _=E._findTargetCorner(this.getPointer(a,!0),D.util.isTouchEvent(a));if(E.__corner=_,E===this._activeObject&&(_||!d)){this._setupCurrentTransform(a,E,g);var F=E.controls[_],y=(f=this.getPointer(a),F&&F.getMouseDownHandler(a,E,F));y&&y(a,this._currentTransform,f.x,f.y)}}this._handleEvent(a,"down"),(v||d)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var E=this._currentTransform;this.stateful&&E.target.saveState(),this.fire("before:transform",{e:a,transform:E})},__onMouseMove:function(a){var E,f;if(this._handleEvent(a,"move:before"),this._cacheTransformEventData(a),this.isDrawingMode)this._onMouseMoveInDrawingMode(a);else if(this._isMainEvent(a)){var v=this._groupSelector;v?(f=this._absolutePointer,v.left=f.x-v.ex,v.top=f.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(E=this.findTarget(a)||null,this._setCursorFromEvent(a,E),this._fireOverOutEvents(E,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,E){var f=this._hoveredTarget,v=this._hoveredTargets,d=this.targets,g=Math.max(v.length,d.length);this.fireSyntheticInOutEvents(a,E,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<g;_++)this.fireSyntheticInOutEvents(d[_],E,{oldTarget:v[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,E){var f=this._draggedoverTarget,v=this._hoveredTargets,d=this.targets,g=Math.max(v.length,d.length);this.fireSyntheticInOutEvents(a,E,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<g;_++)this.fireSyntheticInOutEvents(d[_],E,{oldTarget:v[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,E,f){var v,d,g,_=f.oldTarget,F=_!==a,y=f.canvasEvtIn,T=f.canvasEvtOut;F&&(v={e:E,target:a,previousTarget:_},d={e:E,target:_,nextTarget:a}),g=a&&F,_&&F&&(T&&this.fire(T,d),_.fire(f.evtOut,d)),g&&(y&&this.fire(y,v),a.fire(f.evtIn,v))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var E=this.getPointer(a),f=this._currentTransform;f.reset=!1,f.shiftKey=a.shiftKey,f.altKey=a[this.centeredKey],this._performTransformAction(a,f,E),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,E,f){var v=f.x,d=f.y,g=E.action,_=!1,F=E.actionHandler;F&&(_=F(a,E,v,d)),g==="drag"&&_&&(E.target.isMoving=!0,this.setCursor(E.target.moveCursor||this.moveCursor)),E.actionPerformed=E.actionPerformed||_},_fire:D.controlsUtils.fireEvent,_setCursorFromEvent:function(a,E){if(!E)return this.setCursor(this.defaultCursor),!1;var f=E.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,d=(!v||!v.contains(E))&&E._findTargetCorner(this.getPointer(a,!0));d?this.setCursor(this.getCornerCursor(d,E,a)):(E.subTargetCheck&&this.targets.concat().reverse().map(function(g){f=g.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(a,E,f){var v=E.controls[a];return v.cursorStyleHandler(f,v,E)}})}(),k=Math.min,J=Math.max,D.util.object.extend(D.Canvas.prototype,{_shouldGroup:function(h,c){var l=this._activeObject;return l&&this._isSelectionKeyPressed(h)&&c&&c.selectable&&this.selection&&(l!==c||l.type==="activeSelection")&&!c.onSelect({e:h})},_handleGrouping:function(h,c){var l=this._activeObject;l.__corner||(c!==l||(c=this.findTarget(h,!0))&&c.selectable)&&(l&&l.type==="activeSelection"?this._updateActiveSelection(c,h):this._createActiveSelection(c,h))},_updateActiveSelection:function(h,c){var l=this._activeObject,A=l._objects.slice(0);l.contains(h)?(l.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),c)):(l.addWithUpdate(h),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(A,c)},_createActiveSelection:function(h,c){var l=this.getActiveObjects(),A=this._createGroup(h);this._hoveredTarget=A,this._setActiveObject(A,c),this._fireSelectionEvents(l,c)},_createGroup:function(h){var c=this._objects,l=c.indexOf(this._activeObject)<c.indexOf(h)?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new D.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(h){var c,l=this._collectObjects(h);l.length===1?this.setActiveObject(l[0],h):l.length>1&&(c=new D.ActiveSelection(l.reverse(),{canvas:this}),this.setActiveObject(c,h))},_collectObjects:function(h){for(var c,l=[],A=this._groupSelector.ex,a=this._groupSelector.ey,E=A+this._groupSelector.left,f=a+this._groupSelector.top,v=new D.Point(k(A,E),k(a,f)),d=new D.Point(J(A,E),J(a,f)),g=!this.selectionFullyContained,_=A===E&&a===f,F=this._objects.length;F--&&!((c=this._objects[F])&&c.selectable&&c.visible&&(g&&c.intersectsWithRect(v,d,!0)||c.isContainedWithinRect(v,d,!0)||g&&c.containsPoint(v,null,!0)||g&&c.containsPoint(d,null,!0))&&(l.push(c),_)););return l.length>1&&(l=l.filter(function(y){return!y.onSelect({e:h})})),l},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}}),D.util.object.extend(D.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var c=h.format||"png",l=h.quality||1,A=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(A,h);return D.util.toDataURL(a,c,l)},toCanvasElement:function(h,c){h=h||1;var l=((c=c||{}).width||this.width)*h,A=(c.height||this.height)*h,a=this.getZoom(),E=this.width,f=this.height,v=a*h,d=this.viewportTransform,g=(d[4]-(c.left||0))*h,_=(d[5]-(c.top||0))*h,F=this.interactive,y=[v,0,0,v,g,_],T=this.enableRetinaScaling,S=D.util.createCanvasElement(),I=this.contextTop;return S.width=l,S.height=A,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=l,this.height=A,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=d,this.width=E,this.height=f,this.calcViewportBoundaries(),this.interactive=F,this.enableRetinaScaling=T,this.contextTop=I,S}}),D.util.object.extend(D.StaticCanvas.prototype,{loadFromJSON:function(h,c,l){if(h){var A=typeof h=="string"?JSON.parse(h):D.util.object.clone(h),a=this,E=A.clipPath,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete A.clipPath,this._enlivenObjects(A.objects,function(v){a.clear(),a._setBgOverlay(A,function(){E?a._enlivenObjects([E],function(d){a.clipPath=d[0],a.__setupCanvas.call(a,A,v,f,c)}):a.__setupCanvas.call(a,A,v,f,c)})},l),this}},__setupCanvas:function(h,c,l,A){var a=this;c.forEach(function(E,f){a.insertAt(E,f)}),this.renderOnAddRemove=l,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),A&&A()},_setBgOverlay:function(h,c){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var A=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&c&&c()};this.__setBgOverlay("backgroundImage",h.backgroundImage,l,A),this.__setBgOverlay("overlayImage",h.overlayImage,l,A),this.__setBgOverlay("backgroundColor",h.background,l,A),this.__setBgOverlay("overlayColor",h.overlay,l,A)}else c&&c()},__setBgOverlay:function(h,c,l,A){var a=this;if(!c)return l[h]=!0,void(A&&A());h==="backgroundImage"||h==="overlayImage"?D.util.enlivenObjects([c],function(E){a[h]=E[0],l[h]=!0,A&&A()}):this["set"+D.util.string.capitalize(h,!0)](c,function(){l[h]=!0,A&&A()})},_enlivenObjects:function(h,c,l){h&&h.length!==0?D.util.enlivenObjects(h,function(A){c&&c(A)},null,l):c&&c([])},_toDataURL:function(h,c){this.clone(function(l){c(l.toDataURL(h))})},_toDataURLWithMultiplier:function(h,c,l){this.clone(function(A){l(A.toDataURLWithMultiplier(h,c))})},clone:function(h,c){var l=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(A){A.loadFromJSON(l,function(){h&&h(A)})})},cloneWithoutData:function(h){var c=D.util.createCanvasElement();c.width=this.width,c.height=this.height;var l=new D.Canvas(c);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),h&&h(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):h&&h(l)}}),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.util.object.clone,a=c.util.toFixed,E=c.util.string.capitalize,f=c.util.degreesToRadians,v=!c.isLikelyNode;c.Object||(c.Object=c.util.createClass(c.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:v,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(d){d&&this.setOptions(d)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=c.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(d){var g=c.perfLimitSizeTotal,_=d.width,F=d.height,y=c.maxCacheSideLimit,T=c.minCacheSideLimit;if(_<=y&&F<=y&&_*F<=g)return _<T&&(d.width=T),F<T&&(d.height=T),d;var S=_/F,I=c.util.limitDimsByArea(S,g),N=c.util.capValue,W=N(T,I.x,y),z=N(T,I.y,y);return _>W&&(d.zoomX/=_/W,d.width=W,d.capped=!0),F>z&&(d.zoomY/=F/z,d.height=z,d.capped=!0),d},_getCacheCanvasDimensions:function(){var d=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),_=g.x*d.scaleX/this.scaleX,F=g.y*d.scaleY/this.scaleY;return{width:_+2,height:F+2,zoomX:d.scaleX,zoomY:d.scaleY,x:_,y:F}},_updateCacheCanvas:function(){var d=this.canvas;if(this.noScaleCache&&d&&d._currentTransform){var g=d._currentTransform.target,_=d._currentTransform.action;if(this===g&&_.slice&&_.slice(0,5)==="scale")return!1}var F,y,T=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),I=c.minCacheSideLimit,N=S.width,W=S.height,z=S.zoomX,se=S.zoomY,xe=N!==this.cacheWidth||W!==this.cacheHeight,te=this.zoomX!==z||this.zoomY!==se,j=xe||te,U=0,q=0,oe=!1;if(xe){var ae=this._cacheCanvas.width,G=this._cacheCanvas.height,V=N>ae||W>G;oe=V||(N<.9*ae||W<.9*G)&&ae>I&&G>I,V&&!S.capped&&(N>I||W>I)&&(U=.1*N,q=.1*W)}return this instanceof c.Text&&this.path&&(j=!0,oe=!0,U+=this.getHeightOfLine(0)*this.zoomX,q+=this.getHeightOfLine(0)*this.zoomY),!!j&&(oe?(T.width=Math.ceil(N+U),T.height=Math.ceil(W+q)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,T.width,T.height)),F=S.x/2,y=S.y/2,this.cacheTranslationX=Math.round(T.width/2-F)+F,this.cacheTranslationY=Math.round(T.height/2-y)+y,this.cacheWidth=N,this.cacheHeight=W,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(z,se),this.zoomX=z,this.zoomY=se,!0)},setOptions:function(d){this._setOptions(d),this._initGradient(d.fill,"fill"),this._initGradient(d.stroke,"stroke"),this._initPattern(d.fill,"fill"),this._initPattern(d.stroke,"stroke")},transform:function(d){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&d===this.canvas.contextTop,_=this.calcTransformMatrix(!g);d.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(d){var g=c.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:c.version,originX:this.originX,originY:this.originY,left:a(this.left,g),top:a(this.top,g),width:a(this.width,g),height:a(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,g),scaleX:a(this.scaleX,g),scaleY:a(this.scaleY,g),angle:a(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,g),skewY:a(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(d),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),c.util.populateWithProperties(this,_,d),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(d){return this.toObject(d)},_removeDefaultValues:function(d){var g=c.util.getKlass(d.type).prototype;return g.stateProperties.forEach(function(_){_!=="left"&&_!=="top"&&(d[_]===g[_]&&delete d[_],Array.isArray(d[_])&&Array.isArray(g[_])&&d[_].length===0&&g[_].length===0&&delete d[_])}),d},toString:function(){return"#<fabric."+E(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var d=c.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(d.scaleX),scaleY:Math.abs(d.scaleY)}},getTotalObjectScaling:function(){var d=this.getObjectScaling(),g=d.scaleX,_=d.scaleY;if(this.canvas){var F=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();g*=F*y,_*=F*y}return{scaleX:g,scaleY:_}},getObjectOpacity:function(){var d=this.opacity;return this.group&&(d*=this.group.getObjectOpacity()),d},_set:function(d,g){var _=d==="scaleX"||d==="scaleY",F=this[d]!==g,y=!1;return _&&(g=this._constrainScale(g)),d==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):d==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):d!=="shadow"||!g||g instanceof c.Shadow?d==="dirty"&&this.group&&this.group.set("dirty",g):g=new c.Shadow(g),this[d]=g,F&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(d)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(d)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:c.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(d){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(d.save(),this._setupCompositeOperation(d),this.drawSelectionBackground(d),this.transform(d),this._setOpacity(d),this._setShadow(d,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(d)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(d),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),d.restore())},renderCache:function(d){d=d||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,d.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!(this.paintFirst!=="stroke"||!this.hasFill()||!this.hasStroke()||typeof this.shadow!="object")||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(d,g){if(d.save(),g.inverted?d.globalCompositeOperation="destination-out":d.globalCompositeOperation="destination-in",g.absolutePositioned){var _=c.util.invertTransform(this.calcTransformMatrix());d.transform(_[0],_[1],_[2],_[3],_[4],_[5])}g.transform(d),d.scale(1/g.zoomX,1/g.zoomY),d.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),d.restore()},drawObject:function(d,g){var _=this.fill,F=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(d)):this._renderBackground(d),this._render(d),this._drawClipPath(d,this.clipPath),this.fill=_,this.stroke=F},_drawClipPath:function(d,g){g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(d,g))},drawCacheOnCanvas:function(d){d.scale(1/this.zoomX,1/this.zoomY),d.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(d){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!d&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!d){var g=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-_/2,g,_)}return!0}return!1},_renderBackground:function(d){if(this.backgroundColor){var g=this._getNonTransformedDimensions();d.fillStyle=this.backgroundColor,d.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(d)}},_setOpacity:function(d){this.group&&!this.group._transformDone?d.globalAlpha=this.getObjectOpacity():d.globalAlpha*=this.opacity},_setStrokeStyles:function(d,g){var _=g.stroke;_&&(d.lineWidth=g.strokeWidth,d.lineCap=g.strokeLineCap,d.lineDashOffset=g.strokeDashOffset,d.lineJoin=g.strokeLineJoin,d.miterLimit=g.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(d,_):(d.strokeStyle=_.toLive(d,this),this._applyPatternGradientTransform(d,_)):d.strokeStyle=g.stroke)},_setFillStyles:function(d,g){var _=g.fill;_&&(_.toLive?(d.fillStyle=_.toLive(d,this),this._applyPatternGradientTransform(d,g.fill)):d.fillStyle=_)},_setClippingProperties:function(d){d.globalAlpha=1,d.strokeStyle="transparent",d.fillStyle="#000000"},_setLineDash:function(d,g){g&&g.length!==0&&(1&g.length&&g.push.apply(g,g),d.setLineDash(g))},_renderControls:function(d,g){var _,F,y,T=this.getViewportTransform(),S=this.calcTransformMatrix();F=(g=g||{}).hasBorders!==void 0?g.hasBorders:this.hasBorders,y=g.hasControls!==void 0?g.hasControls:this.hasControls,S=c.util.multiplyTransformMatrices(T,S),_=c.util.qrDecompose(S),d.save(),d.translate(_.translateX,_.translateY),d.lineWidth=1*this.borderScaleFactor,this.group||(d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),d.rotate(f(this.group?_.angle:this.angle)),g.forActiveSelection||this.group?F&&this.drawBordersInGroup(d,_,g):F&&this.drawBorders(d,g),y&&this.drawControls(d,g),d.restore()},_setShadow:function(d){if(this.shadow){var g,_=this.shadow,F=this.canvas,y=F&&F.viewportTransform[0]||1,T=F&&F.viewportTransform[3]||1;g=_.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),F&&F._isRetinaScaling()&&(y*=c.devicePixelRatio,T*=c.devicePixelRatio),d.shadowColor=_.color,d.shadowBlur=_.blur*c.browserShadowBlurConstant*(y+T)*(g.scaleX+g.scaleY)/4,d.shadowOffsetX=_.offsetX*y*g.scaleX,d.shadowOffsetY=_.offsetY*T*g.scaleY}},_removeShadow:function(d){this.shadow&&(d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0)},_applyPatternGradientTransform:function(d,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var _=g.gradientTransform||g.patternTransform,F=-this.width/2+g.offsetX||0,y=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?d.transform(this.width,0,0,this.height,F,y):d.transform(1,0,0,1,F,y),_&&d.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:F,offsetY:y}},_renderPaintInOrder:function(d){this.paintFirst==="stroke"?(this._renderStroke(d),this._renderFill(d)):(this._renderFill(d),this._renderStroke(d))},_render:function(){},_renderFill:function(d){this.fill&&(d.save(),this._setFillStyles(d,this),this.fillRule==="evenodd"?d.fill("evenodd"):d.fill(),d.restore())},_renderStroke:function(d){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();d.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&d.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(d,this.strokeDashArray),this._setStrokeStyles(d,this),d.stroke(),d.restore()}},_applyPatternForTransformedGradient:function(d,g){var _,F=this._limitCacheSize(this._getCacheCanvasDimensions()),y=c.util.createCanvasElement(),T=this.canvas.getRetinaScaling(),S=F.x/this.scaleX/T,I=F.y/this.scaleY/T;y.width=S,y.height=I,(_=y.getContext("2d")).beginPath(),_.moveTo(0,0),_.lineTo(S,0),_.lineTo(S,I),_.lineTo(0,I),_.closePath(),_.translate(S/2,I/2),_.scale(F.zoomX/this.scaleX/T,F.zoomY/this.scaleY/T),this._applyPatternGradientTransform(_,g),_.fillStyle=g.toLive(d),_.fill(),d.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),d.scale(T*this.scaleX/F.zoomX,T*this.scaleY/F.zoomY),d.strokeStyle=_.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var d=c.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",d.scaleX),this.set("scaleY",d.scaleY),this.angle=d.angle,this.skewX=d.skewX,this.skewY=0}},_removeTransformMatrix:function(d){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=c.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,d&&(this.scaleX*=d.scaleX,this.scaleY*=d.scaleY,this.cropX=d.cropX,this.cropY=d.cropY,g.x+=d.offsetLeft,g.y+=d.offsetTop,this.width=d.width,this.height=d.height),this.setPositionByOrigin(g,"center","center")},clone:function(d,g){var _=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(_,d):c.Object._fromObject("Object",_,d)},cloneAsImage:function(d,g){var _=this.toCanvasElement(g);return d&&d(new c.Image(_)),this},toCanvasElement:function(d){d||(d={});var g=c.util,_=g.saveObjectTransform(this),F=this.group,y=this.shadow,T=Math.abs,S=(d.multiplier||1)*(d.enableRetinaScaling?c.devicePixelRatio:1);delete this.group,d.withoutTransform&&g.resetObjectTransform(this),d.withoutShadow&&(this.shadow=null);var I,N,W,z,se=c.util.createCanvasElement(),xe=this.getBoundingRect(!0,!0),te=this.shadow,j={x:0,y:0};te&&(N=te.blur,I=te.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),j.x=2*Math.round(T(te.offsetX)+N)*T(I.scaleX),j.y=2*Math.round(T(te.offsetY)+N)*T(I.scaleY)),W=xe.width+j.x,z=xe.height+j.y,se.width=Math.ceil(W),se.height=Math.ceil(z);var U=new c.StaticCanvas(se,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});d.format==="jpeg"&&(U.backgroundColor="#fff"),this.setPositionByOrigin(new c.Point(U.width/2,U.height/2),"center","center");var q=this.canvas;U.add(this);var oe=U.toCanvasElement(S||1,d);return this.shadow=y,this.set("canvas",q),F&&(this.group=F),this.set(_).setCoords(),U._objects=[],U.dispose(),U=null,oe},toDataURL:function(d){return d||(d={}),c.util.toDataURL(this.toCanvasElement(d),d.format||"png",d.quality||1)},isType:function(d){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===d},complexity:function(){return 1},toJSON:function(d){return this.toObject(d)},rotate:function(d){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",d),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(d,g){g=g||this.canvas.getPointer(d);var _=new c.Point(g.x,g.y),F=this._getLeftTopCoords();return this.angle&&(_=c.util.rotatePoint(_,F,f(-this.angle))),{x:_.x-F.x,y:_.y-F.y}},_setupCompositeOperation:function(d){this.globalCompositeOperation&&(d.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){c.runningAnimations&&c.runningAnimations.cancelByTarget(this)}}),c.util.createAccessors&&c.util.createAccessors(c.Object),l(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object.ENLIVEN_PROPS=["clipPath"],c.Object._fromObject=function(d,g,_,F){var y=c[d];g=A(g,!0),c.util.enlivenPatterns([g.fill,g.stroke],function(T){T[0]!==void 0&&(g.fill=T[0]),T[1]!==void 0&&(g.stroke=T[1]),c.util.enlivenObjectEnlivables(g,g,function(){var S=F?new y(g[F],g):new y(g);_&&_(S)})})},c.Object.__uid=0)}(e),re=D.util.degreesToRadians,Z={left:-.5,center:0,right:.5},ce={top:-.5,center:0,bottom:.5},D.util.object.extend(D.Object.prototype,{translateToGivenOrigin:function(h,c,l,A,a){var E,f,v,d=h.x,g=h.y;return typeof c=="string"?c=Z[c]:c-=.5,typeof A=="string"?A=Z[A]:A-=.5,typeof l=="string"?l=ce[l]:l-=.5,typeof a=="string"?a=ce[a]:a-=.5,f=a-l,((E=A-c)||f)&&(v=this._getTransformedDimensions(),d=h.x+E*v.x,g=h.y+f*v.y),new D.Point(d,g)},translateToCenterPoint:function(h,c,l){var A=this.translateToGivenOrigin(h,c,l,"center","center");return this.angle?D.util.rotatePoint(A,h,re(this.angle)):A},translateToOriginPoint:function(h,c,l){var A=this.translateToGivenOrigin(h,"center","center",c,l);return this.angle?D.util.rotatePoint(A,h,re(this.angle)):A},getCenterPoint:function(){var h=new D.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,c){var l=this.getCenterPoint();return this.translateToOriginPoint(l,h,c)},toLocalPoint:function(h,c,l){var A,a,E=this.getCenterPoint();return A=c!==void 0&&l!==void 0?this.translateToGivenOrigin(E,"center","center",c,l):new D.Point(this.left,this.top),a=new D.Point(h.x,h.y),this.angle&&(a=D.util.rotatePoint(a,E,-re(this.angle))),a.subtractEquals(A)},setPositionByOrigin:function(h,c,l){var A=this.translateToCenterPoint(h,c,l),a=this.translateToOriginPoint(A,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(h){var c,l,A=re(this.angle),a=this.getScaledWidth(),E=D.util.cos(A)*a,f=D.util.sin(A)*a;c=typeof this.originX=="string"?Z[this.originX]:this.originX-.5,l=typeof h=="string"?Z[h]:h-.5,this.left+=E*(l-c),this.top+=f*(l-c),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var h=D.util,c=h.degreesToRadians,l=h.multiplyTransformMatrices,A=h.transformPoint;h.object.extend(D.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,E){return E?a?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,E){return f=this._getCoords(a,E),[new D.Point(f.tl.x,f.tl.y),new D.Point(f.tr.x,f.tr.y),new D.Point(f.br.x,f.br.y),new D.Point(f.bl.x,f.bl.y)];var f},intersectsWithRect:function(a,E,f,v){var d=this.getCoords(f,v);return D.Intersection.intersectPolygonRectangle(d,a,E).status==="Intersection"},intersectsWithObject:function(a,E,f){return D.Intersection.intersectPolygonPolygon(this.getCoords(E,f),a.getCoords(E,f)).status==="Intersection"||a.isContainedWithinObject(this,E,f)||this.isContainedWithinObject(a,E,f)},isContainedWithinObject:function(a,E,f){for(var v=this.getCoords(E,f),d=E?a.aCoords:a.lineCoords,g=0,_=a._getImageLines(d);g<4;g++)if(!a.containsPoint(v[g],_))return!1;return!0},isContainedWithinRect:function(a,E,f,v){var d=this.getBoundingRect(f,v);return d.left>=a.x&&d.left+d.width<=E.x&&d.top>=a.y&&d.top+d.height<=E.y},containsPoint:function(a,E,f,v){var d=this._getCoords(f,v),g=(E=E||this._getImageLines(d),this._findCrossPoints(a,E));return g!==0&&g%2==1},isOnScreen:function(a){if(!this.canvas)return!1;var E=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br;return!!this.getCoords(!0,a).some(function(v){return v.x<=f.x&&v.x>=E.x&&v.y<=f.y&&v.y>=E.y})||!!this.intersectsWithRect(E,f,!0,a)||this._containsCenterOfCanvas(E,f,a)},_containsCenterOfCanvas:function(a,E,f){var v={x:(a.x+E.x)/2,y:(a.y+E.y)/2};return!!this.containsPoint(v,null,!0,f)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var E=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br;return!!this.intersectsWithRect(E,f,!0,a)||this.getCoords(!0,a).every(function(v){return(v.x>=f.x||v.x<=E.x)&&(v.y>=f.y||v.y<=E.y)})&&this._containsCenterOfCanvas(E,f,a)},_getImageLines:function(a){return{topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}}},_findCrossPoints:function(a,E){var f,v,d,g=0;for(var _ in E)if(!((d=E[_]).o.y<a.y&&d.d.y<a.y||d.o.y>=a.y&&d.d.y>=a.y||(d.o.x===d.d.x&&d.o.x>=a.x?v=d.o.x:(f=(d.d.y-d.o.y)/(d.d.x-d.o.x),v=-(a.y-0*a.x-(d.o.y-f*d.o.x))/(0-f)),v>=a.x&&(g+=1),g!==2)))break;return g},getBoundingRect:function(a,E){var f=this.getCoords(a,E);return h.makeBoundingBoxFromPoints(f)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,E){var f=this.getBoundingRect(E).width/this.getScaledWidth();return this.scale(a/this.width/f)},scaleToHeight:function(a,E){var f=this.getBoundingRect(E).height/this.getScaledHeight();return this.scale(a/this.height/f)},calcLineCoords:function(){var a=this.getViewportTransform(),E=this.padding,f=c(this.angle),v=h.cos(f)*E,d=h.sin(f)*E,g=v+d,_=v-d,F=this.calcACoords(),y={tl:A(F.tl,a),tr:A(F.tr,a),bl:A(F.bl,a),br:A(F.br,a)};return E&&(y.tl.x-=_,y.tl.y-=g,y.tr.x+=g,y.tr.y-=_,y.bl.x-=g,y.bl.y+=_,y.br.x+=_,y.br.y+=g),y},calcOCoords:function(){var a=this._calcRotateMatrix(),E=this._calcTranslateMatrix(),f=this.getViewportTransform(),v=l(f,E),d=l(v,a),g=(d=l(d,[1/f[0],0,0,1/f[3],0,0]),this._calculateCurrentDimensions()),_={};return this.forEachControl(function(F,y,T){_[y]=F.positionHandler(g,d,T)}),_},calcACoords:function(){var a=this._calcRotateMatrix(),E=this._calcTranslateMatrix(),f=l(E,a),v=this._getTransformedDimensions(),d=v.x/2,g=v.y/2;return{tl:A({x:-d,y:-g},f),tr:A({x:d,y:-g},f),bl:A({x:-d,y:g},f),br:A({x:d,y:g},f)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var E="_",f="";return!a&&this.group&&(f=this.group.transformMatrixKey(a)+E),f+this.top+E+this.left+E+this.scaleX+E+this.scaleY+E+this.skewX+E+this.skewY+E+this.angle+E+this.originX+E+this.originY+E+this.width+E+this.height+E+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var E=this.calcOwnMatrix();if(a||!this.group)return E;var f=this.transformMatrixKey(a),v=this.matrixCache||(this.matrixCache={});return v.key===f?v.value:(this.group&&(E=l(this.group.calcTransformMatrix(!1),E)),v.key=f,v.value=E,E)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),E=this.ownMatrixCache||(this.ownMatrixCache={});if(E.key===a)return E.value;var f=this._calcTranslateMatrix(),v={angle:this.angle,translateX:f[4],translateY:f[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return E.key=a,E.value=h.composeMatrix(v),E.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth;return{x:this.width+a,y:this.height+a}},_getTransformedDimensions:function(a,E){a===void 0&&(a=this.skewX),E===void 0&&(E=this.skewY);var f,v,d,g=a===0&&E===0;if(this.strokeUniform?(v=this.width,d=this.height):(v=(f=this._getNonTransformedDimensions()).x,d=f.y),g)return this._finalizeDimensions(v*this.scaleX,d*this.scaleY);var _=h.sizeAfterTransform(v,d,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:E});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(a,E){return this.strokeUniform?{x:a+this.strokeWidth,y:E+this.strokeWidth}:{x:a,y:E}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),E=this._getTransformedDimensions();return A(E,a,!0).scalarAdd(2*this.padding)}})}(),D.util.object.extend(D.Object.prototype,{sendToBack:function(){return this.group?D.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?D.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?D.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?D.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?D.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(l,A){if(A){if(A.toLive)return l+": url(#SVGID_"+A.id+"); ";var a=new D.Color(A),E=l+": "+a.toRgb()+"; ",f=a.getAlpha();return f!==1&&(E+=l+"-opacity: "+f.toString()+"; "),E}return l+": none; "}var c=D.util.toFixed;D.util.object.extend(D.Object.prototype,{getSvgStyles:function(l){var A=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",E=this.strokeDashArray?this.strokeDashArray.join(" "):"none",f=this.strokeDashOffset?this.strokeDashOffset:"0",v=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",_=this.opacity!==void 0?this.opacity:"1",F=this.visible?"":" visibility: hidden;",y=l?"":this.getSvgFilter(),T=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",a,"; ","stroke-dasharray: ",E,"; ","stroke-linecap: ",v,"; ","stroke-dashoffset: ",f,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",g,"; ",T,"fill-rule: ",A,"; ","opacity: ",_,";",y,F].join("")},getSvgSpanStyles:function(l,A){var a="; ",E=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+a:"",f=l.strokeWidth?"stroke-width: "+l.strokeWidth+a:"",v=l.fontSize?"font-size: "+l.fontSize+"px"+a:"",d=l.fontStyle?"font-style: "+l.fontStyle+a:"",g=l.fontWeight?"font-weight: "+l.fontWeight+a:"",_=l.fill?h("fill",l.fill):"",F=l.stroke?h("stroke",l.stroke):"",y=this.getSvgTextDecoration(l);return y&&(y="text-decoration: "+y+a),[F,f,E,v,d,g,y,_,l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"",A?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(A){return l[A.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,A){var a=l?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+D.util.matrixToSVG(a)+(A||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var A=D.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,A),'" y="',c(-this.height/2,A),'" width="',c(this.width,A),'" height="',c(this.height,A),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,A){var a=(A=A||{}).reviver,E=A.additionalTransform||"",f=[this.getSvgTransform(!0,E),this.getSvgCommons()].join(""),v=l.indexOf("COMMON_PARTS");return l[v]=f,a?a(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,A){var a,E,f=(A=A||{}).noStyle,v=A.reviver,d=f?"":'style="'+this.getSvgStyles()+'" ',g=A.withShadow?'style="'+this.getSvgFilter()+'" ':"",_=this.clipPath,F=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=_&&_.absolutePositioned,T=this.stroke,S=this.fill,I=this.shadow,N=[],W=l.indexOf("COMMON_PARTS"),z=A.additionalTransform;return _&&(_.clipPathId="CLIPPATH_"+D.Object.__uid++,E='<clipPath id="'+_.clipPathId+`" >
`+_.toClipPathSVG(v)+`</clipPath>
`),y&&N.push("<g ",g,this.getSvgCommons(),` >
`),N.push("<g ",this.getSvgTransform(!1),y?"":g+this.getSvgCommons(),` >
`),a=[d,F,f?"":this.addPaintOrder()," ",z?'transform="'+z+'" ':""].join(""),l[W]=a,S&&S.toLive&&N.push(S.toSVG(this)),T&&T.toLive&&N.push(T.toSVG(this)),I&&N.push(I.toSVG(this)),_&&N.push(E),N.push(l.join("")),N.push(`</g>
`),y&&N.push(`</g>
`),v?v(N.join("")):N.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=D.util.object.extend,c="stateProperties";function l(a,E,f){var v={};f.forEach(function(d){v[d]=a[d]}),h(a[E],v,!0)}function A(a,E,f){if(a===E)return!0;if(Array.isArray(a)){if(!Array.isArray(E)||a.length!==E.length)return!1;for(var v=0,d=a.length;v<d;v++)if(!A(a[v],E[v]))return!1;return!0}if(a&&typeof a=="object"){var g,_=Object.keys(a);if(!E||typeof E!="object"||!f&&_.length!==Object.keys(E).length)return!1;for(v=0,d=_.length;v<d;v++)if((g=_[v])!=="canvas"&&g!=="group"&&!A(a[g],E[g]))return!1;return!0}}D.util.object.extend(D.Object.prototype,{hasStateChanged:function(a){var E="_"+(a=a||c);return Object.keys(this[E]).length<this[a].length||!A(this[E],this,!0)},saveState:function(a){var E=a&&a.propertySet||c,f="_"+E;return this[f]?(l(this,f,this[E]),a&&a.stateProperties&&l(this,f,a.stateProperties),this):this.setupState(a)},setupState:function(a){var E=(a=a||{}).propertySet||c;return a.propertySet=E,this["_"+E]={},this.saveState(a),this}})}(),function(){var h=D.util.degreesToRadians;D.util.object.extend(D.Object.prototype,{_findTargetCorner:function(c,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var A,a,E,f=c.x,v=c.y,d=Object.keys(this.oCoords),g=d.length-1;for(this.__corner=0;g>=0;g--)if(E=d[g],this.isControlVisible(E)&&(a=this._getImageLines(l?this.oCoords[E].touchCorner:this.oCoords[E].corner),(A=this._findCrossPoints({x:f,y:v},a))!==0&&A%2==1))return this.__corner=E,E;return!1},forEachControl:function(c){for(var l in this.controls)c(this.controls[l],l,this)},_setCornerCoords:function(){var c=this.oCoords;for(var l in c){var A=this.controls[l];c[l].corner=A.calcCornerCoords(this.angle,this.cornerSize,c[l].x,c[l].y,!1),c[l].touchCorner=A.calcCornerCoords(this.angle,this.touchCornerSize,c[l].x,c[l].y,!0)}},drawSelectionBackground:function(c){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;c.save();var l=this.getCenterPoint(),A=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return c.translate(l.x,l.y),c.scale(1/a[0],1/a[3]),c.rotate(h(this.angle)),c.fillStyle=this.selectionBackgroundColor,c.fillRect(-A.x/2,-A.y/2,A.x,A.y),c.restore(),this},drawBorders:function(c,l){l=l||{};var A=this._calculateCurrentDimensions(),a=this.borderScaleFactor,E=A.x+a,f=A.y+a,v=l.hasControls!==void 0?l.hasControls:this.hasControls,d=!1;return c.save(),c.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(c,l.borderDashArray||this.borderDashArray),c.strokeRect(-E/2,-f/2,E,f),v&&(c.beginPath(),this.forEachControl(function(g,_,F){g.withConnection&&g.getVisibility(F,_)&&(d=!0,c.moveTo(g.x*E,g.y*f),c.lineTo(g.x*E+g.offsetX,g.y*f+g.offsetY))}),d&&c.stroke()),c.restore(),this},drawBordersInGroup:function(c,l,A){A=A||{};var a=D.util.sizeAfterTransform(this.width,this.height,l),E=this.strokeWidth,f=this.strokeUniform,v=this.borderScaleFactor,d=a.x+E*(f?this.canvas.getZoom():l.scaleX)+v,g=a.y+E*(f?this.canvas.getZoom():l.scaleY)+v;return c.save(),this._setLineDash(c,A.borderDashArray||this.borderDashArray),c.strokeStyle=A.borderColor||this.borderColor,c.strokeRect(-d/2,-g/2,d,g),c.restore(),this},drawControls:function(c,l){l=l||{},c.save();var A,a,E=this.canvas.getRetinaScaling();return c.setTransform(E,0,0,E,0,0),c.strokeStyle=c.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(c.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(c,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(A=this.group.calcTransformMatrix()),this.forEachControl(function(f,v,d){a=d.oCoords[v],f.getVisibility(d,v)&&(A&&(a=D.util.transformPoint(a,A)),f.render(c,a.x,a.y,l,d))}),c.restore(),this},isControlVisible:function(c){return this.controls[c]&&this.controls[c].getVisibility(this,c)},setControlVisible:function(c,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[c]=l,this},setControlsVisibility:function(c){for(var l in c||(c={}),c)this.setControlVisible(l,c[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),D.util.object.extend(D.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,c){var l=function(){},A=(c=c||{}).onComplete||l,a=c.onChange||l,E=this;return D.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(f){h.set("left",f),E.requestRenderAll(),a()},onComplete:function(){h.setCoords(),A()}})},fxCenterObjectV:function(h,c){var l=function(){},A=(c=c||{}).onComplete||l,a=c.onChange||l,E=this;return D.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(f){h.set("top",f),E.requestRenderAll(),a()},onComplete:function(){h.setCoords(),A()}})},fxRemove:function(h,c){var l=function(){},A=(c=c||{}).onComplete||l,a=c.onChange||l,E=this;return D.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(f){h.set("opacity",f),E.requestRenderAll(),a()},onComplete:function(){E.remove(h),A()}})}}),D.util.object.extend(D.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h,c,l=[],A=[];for(h in arguments[0])l.push(h);for(var a=0,E=l.length;a<E;a++)h=l[a],c=a!==E-1,A.push(this._animate(h,arguments[0][h],arguments[1],c));return A}return this._animate.apply(this,arguments)},_animate:function(h,c,l,A){var a,E=this;c=c.toString(),l=l?D.util.object.clone(l):{},~h.indexOf(".")&&(a=h.split("."));var f=E.colorProperties.indexOf(h)>-1||a&&E.colorProperties.indexOf(a[1])>-1,v=a?this.get(a[0])[a[1]]:this.get(h);"from"in l||(l.from=v),f||(c=~c.indexOf("=")?v+parseFloat(c.replace("=","")):parseFloat(c));var d={target:this,startValue:l.from,endValue:c,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(g,_,F){return l.abort.call(E,g,_,F)},onChange:function(g,_,F){a?E[a[0]][a[1]]=g:E.set(h,g),A||l.onChange&&l.onChange(g,_,F)},onComplete:function(g,_,F){A||(E.setCoords(),l.onComplete&&l.onComplete(g,_,F))}};return f?D.util.animateColor(d.startValue,d.endValue,d.duration,d):D.util.animate(d)}}),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};function E(f,v){var d=f.origin,g=f.axis1,_=f.axis2,F=f.dimension,y=v.nearest,T=v.center,S=v.farthest;return function(){switch(this.get(d)){case y:return Math.min(this.get(g),this.get(_));case T:return Math.min(this.get(g),this.get(_))+.5*this.get(F);case S:return Math.max(this.get(g),this.get(_))}}}c.Line?c.warn("fabric.Line is already defined"):(c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:c.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(f,v){f||(f=[0,0,0,0]),this.callSuper("initialize",v),this.set("x1",f[0]),this.set("y1",f[1]),this.set("x2",f[2]),this.set("y2",f[3]),this._setWidthHeight(v)},_setWidthHeight:function(f){f||(f={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in f?f.left:this._getLeftToOriginX(),this.top="top"in f?f.top:this._getTopToOriginY()},_set:function(f,v){return this.callSuper("_set",f,v),a[f]!==void 0&&this._setWidthHeight(),this},_getLeftToOriginX:E({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:E({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(f){f.beginPath();var v=this.calcLinePoints();f.moveTo(v.x1,v.y1),f.lineTo(v.x2,v.y2),f.lineWidth=this.strokeWidth;var d=f.strokeStyle;f.strokeStyle=this.stroke||f.fillStyle,this.stroke&&this._renderStroke(f),f.strokeStyle=d},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(f){return l(this.callSuper("toObject",f),this.calcLinePoints())},_getNonTransformedDimensions:function(){var f=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(f.y-=this.strokeWidth),this.height===0&&(f.x-=this.strokeWidth)),f},calcLinePoints:function(){var f=this.x1<=this.x2?-1:1,v=this.y1<=this.y2?-1:1,d=f*this.width*.5,g=v*this.height*.5;return{x1:d,x2:f*this.width*-.5,y1:g,y2:v*this.height*-.5}},_toSVG:function(){var f=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',f.x1,'" y1="',f.y1,'" x2="',f.x2,'" y2="',f.y2,`" />
`]}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),c.Line.fromElement=function(f,v,d){d=d||{};var g=c.parseAttributes(f,c.Line.ATTRIBUTE_NAMES),_=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];v(new c.Line(_,l(g,d)))},c.Line.fromObject=function(f,v){var d=A(f,!0);d.points=[f.x1,f.y1,f.x2,f.y2],c.Object._fromObject("Line",d,function(g){delete g.points,v&&v(g)},"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.degreesToRadians;c.Circle?c.warn("fabric.Circle is already defined."):(c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:c.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(A,a){return this.callSuper("_set",A,a),A==="radius"&&this.setRadius(a),this},toObject:function(A){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(A))},_toSVG:function(){var A,a=(this.endAngle-this.startAngle)%360;if(a===0)A=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,`" />
`];else{var E=l(this.startAngle),f=l(this.endAngle),v=this.radius;A=['<path d="M '+c.util.cos(E)*v+" "+c.util.sin(E)*v," A "+v+" "+v," 0 ",+(a>180?"1":"0")+" 1"," "+c.util.cos(f)*v+" "+c.util.sin(f)*v,'" ',"COMMON_PARTS",` />
`]}return A},_render:function(A){A.beginPath(),A.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(A)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(A){return this.radius=A,this.set("width",2*A).set("height",2*A)}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),c.Circle.fromElement=function(A,a){var E,f=c.parseAttributes(A,c.Circle.ATTRIBUTE_NAMES);if(!("radius"in(E=f)&&E.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");f.left=(f.left||0)-f.radius,f.top=(f.top||0)-f.radius,a(new c.Circle(f))},c.Circle.fromObject=function(A,a){c.Object._fromObject("Circle",A,a)})}(e),function(h){var c=h.fabric||(h.fabric={});c.Triangle?c.warn("fabric.Triangle is already defined"):(c.Triangle=c.util.createClass(c.Object,{type:"triangle",width:100,height:100,_render:function(l){var A=this.width/2,a=this.height/2;l.beginPath(),l.moveTo(-A,a),l.lineTo(0,-a),l.lineTo(A,a),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,A=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-l+" "+A,"0 "+-A,l+" "+A].join(","),'" />']}}),c.Triangle.fromObject=function(l,A){return c.Object._fromObject("Triangle",l,A)})}(e),function(h){var c=h.fabric||(h.fabric={}),l=2*Math.PI;c.Ellipse?c.warn("fabric.Ellipse is already defined."):(c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(A){this.callSuper("initialize",A),this.set("rx",A&&A.rx||0),this.set("ry",A&&A.ry||0)},_set:function(A,a){switch(this.callSuper("_set",A,a),A){case"rx":this.rx=a,this.set("width",2*a);break;case"ry":this.ry=a,this.set("height",2*a)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(A){return this.callSuper("toObject",["rx","ry"].concat(A))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(A){A.beginPath(),A.save(),A.transform(1,0,0,this.ry/this.rx,0,0),A.arc(0,0,this.rx,0,l,!1),A.restore(),this._renderPaintInOrder(A)}}),c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),c.Ellipse.fromElement=function(A,a){var E=c.parseAttributes(A,c.Ellipse.ATTRIBUTE_NAMES);E.left=(E.left||0)-E.rx,E.top=(E.top||0)-E.ry,a(new c.Ellipse(E))},c.Ellipse.fromObject=function(A,a){c.Object._fromObject("Ellipse",A,a)})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend;c.Rect?c.warn("fabric.Rect is already defined"):(c.Rect=c.util.createClass(c.Object,{stateProperties:c.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(A){this.callSuper("initialize",A),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(A){var a=this.rx?Math.min(this.rx,this.width/2):0,E=this.ry?Math.min(this.ry,this.height/2):0,f=this.width,v=this.height,d=-this.width/2,g=-this.height/2,_=a!==0||E!==0,F=.4477152502;A.beginPath(),A.moveTo(d+a,g),A.lineTo(d+f-a,g),_&&A.bezierCurveTo(d+f-F*a,g,d+f,g+F*E,d+f,g+E),A.lineTo(d+f,g+v-E),_&&A.bezierCurveTo(d+f,g+v-F*E,d+f-F*a,g+v,d+f-a,g+v),A.lineTo(d+a,g+v),_&&A.bezierCurveTo(d+F*a,g+v,d,g+v-F*E,d,g+v-E),A.lineTo(d,g+E),_&&A.bezierCurveTo(d,g+F*E,d+F*a,g,d+a,g),A.closePath(),this._renderPaintInOrder(A)},toObject:function(A){return this.callSuper("toObject",["rx","ry"].concat(A))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=function(A,a,E){if(!A)return a(null);E=E||{};var f=c.parseAttributes(A,c.Rect.ATTRIBUTE_NAMES);f.left=f.left||0,f.top=f.top||0,f.height=f.height||0,f.width=f.width||0;var v=new c.Rect(l(E?c.util.object.clone(E):{},f));v.visible=v.visible&&v.width>0&&v.height>0,a(v)},c.Rect.fromObject=function(A,a){return c.Object._fromObject("Rect",A,a)})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.util.array.min,a=c.util.array.max,E=c.util.toFixed,f=c.util.projectStrokeOnPoints;c.Polyline?c.warn("fabric.Polyline is already defined"):(c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:c.Object.prototype.cacheProperties.concat("points"),initialize:function(v,d){d=d||{},this.points=v||[],this.callSuper("initialize",d),this._setPositionDimensions(d)},_projectStrokeOnPoints:function(){return f(this.points,this,!0)},_setPositionDimensions:function(v){var d,g=this._calcDimensions(v),_=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-_,this.height=g.height-_,v.fromSVG||(d=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+_/2,y:g.top-this.strokeWidth/2+_/2},"left","top",this.originX,this.originY)),v.left===void 0&&(this.left=v.fromSVG?g.left:d.x),v.top===void 0&&(this.top=v.fromSVG?g.top:d.y),this.pathOffset={x:g.left+this.width/2+_/2,y:g.top+this.height/2+_/2}},_calcDimensions:function(){var v=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,d=A(v,"x")||0,g=A(v,"y")||0;return{left:d,top:g,width:(a(v,"x")||0)-d,height:(a(v,"y")||0)-g}},toObject:function(v){return l(this.callSuper("toObject",v),{points:this.points.concat()})},_toSVG:function(){for(var v=[],d=this.pathOffset.x,g=this.pathOffset.y,_=c.Object.NUM_FRACTION_DIGITS,F=0,y=this.points.length;F<y;F++)v.push(E(this.points[F].x-d,_),",",E(this.points[F].y-g,_)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',v.join(""),`" />
`]},commonRender:function(v){var d,g=this.points.length,_=this.pathOffset.x,F=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;v.beginPath(),v.moveTo(this.points[0].x-_,this.points[0].y-F);for(var y=0;y<g;y++)d=this.points[y],v.lineTo(d.x-_,d.y-F);return!0},_render:function(v){this.commonRender(v)&&this._renderPaintInOrder(v)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElementGenerator=function(v){return function(d,g,_){if(!d)return g(null);_||(_={});var F=c.parsePointsAttribute(d.getAttribute("points")),y=c.parseAttributes(d,c[v].ATTRIBUTE_NAMES);y.fromSVG=!0,g(new c[v](F,l(y,_)))}},c.Polyline.fromElement=c.Polyline.fromElementGenerator("Polyline"),c.Polyline.fromObject=function(v,d){return c.Object._fromObject("Polyline",v,d,"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.projectStrokeOnPoints;c.Polygon?c.warn("fabric.Polygon is already defined"):(c.Polygon=c.util.createClass(c.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(A){this.commonRender(A)&&(A.closePath(),this._renderPaintInOrder(A))}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=c.Polyline.fromElementGenerator("Polygon"),c.Polygon.fromObject=function(A,a){c.Object._fromObject("Polygon",A,a,"points")})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.array.min,A=c.util.array.max,a=c.util.object.extend,E=c.util.object.clone,f=c.util.toFixed;c.Path?c.warn("fabric.Path is already defined"):(c.Path=c.util.createClass(c.Object,{type:"path",path:null,cacheProperties:c.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:c.Object.prototype.stateProperties.concat("path"),initialize:function(v,d){delete(d=E(d||{})).path,this.callSuper("initialize",d),this._setPath(v||[],d)},_setPath:function(v,d){this.path=c.util.makePathSimpler(Array.isArray(v)?v:c.util.parsePath(v)),c.Polyline.prototype._setPositionDimensions.call(this,d||{})},_renderPathCommands:function(v){var d,g=0,_=0,F=0,y=0,T=0,S=0,I=-this.pathOffset.x,N=-this.pathOffset.y;v.beginPath();for(var W=0,z=this.path.length;W<z;++W)switch((d=this.path[W])[0]){case"L":F=d[1],y=d[2],v.lineTo(F+I,y+N);break;case"M":g=F=d[1],_=y=d[2],v.moveTo(F+I,y+N);break;case"C":F=d[5],y=d[6],T=d[3],S=d[4],v.bezierCurveTo(d[1]+I,d[2]+N,T+I,S+N,F+I,y+N);break;case"Q":v.quadraticCurveTo(d[1]+I,d[2]+N,d[3]+I,d[4]+N),F=d[3],y=d[4],T=d[1],S=d[2];break;case"z":case"Z":F=g,y=_,v.closePath()}},_render:function(v){this._renderPathCommands(v),this._renderPaintInOrder(v)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(v){return a(this.callSuper("toObject",v),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(v){var d=this.toObject(["sourcePath"].concat(v));return d.sourcePath&&delete d.path,d},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',c.util.joinPath(this.path),'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var v=c.Object.NUM_FRACTION_DIGITS;return" translate("+f(-this.pathOffset.x,v)+", "+f(-this.pathOffset.y,v)+")"},toClipPathSVG:function(v){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:v,additionalTransform:d})},toSVG:function(v){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:v,additionalTransform:d})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var v,d,g=[],_=[],F=0,y=0,T=0,S=0,I=0,N=this.path.length;I<N;++I){switch((v=this.path[I])[0]){case"L":T=v[1],S=v[2],d=[];break;case"M":F=T=v[1],y=S=v[2],d=[];break;case"C":d=c.util.getBoundsOfCurve(T,S,v[1],v[2],v[3],v[4],v[5],v[6]),T=v[5],S=v[6];break;case"Q":d=c.util.getBoundsOfCurve(T,S,v[1],v[2],v[1],v[2],v[3],v[4]),T=v[3],S=v[4];break;case"z":case"Z":T=F,S=y}d.forEach(function(se){g.push(se.x),_.push(se.y)}),g.push(T),_.push(S)}var W=l(g)||0,z=l(_)||0;return{left:W,top:z,width:(A(g)||0)-W,height:(A(_)||0)-z}}}),c.Path.fromObject=function(v,d){if(typeof v.sourcePath=="string"){var g=v.sourcePath;c.loadSVGFromURL(g,function(_){var F=_[0];F.setOptions(v),d&&d(F)})}else c.Object._fromObject("Path",v,d,"path")},c.Path.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["d"]),c.Path.fromElement=function(v,d,g){var _=c.parseAttributes(v,c.Path.ATTRIBUTE_NAMES);_.fromSVG=!0,d(new c.Path(_.d,a(_,g)))})}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.array.min,A=c.util.array.max;c.Group||(c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,E,f){E=E||{},this._objects=[],f&&this.callSuper("initialize",E),this._objects=a||[];for(var v=this._objects.length;v--;)this._objects[v].group=this;if(f)this._updateObjectsACoords();else{var d=E&&E.centerPoint;E.originX!==void 0&&(this.originX=E.originX),E.originY!==void 0&&(this.originY=E.originY),d||this._calcBounds(),this._updateObjectsCoords(d),delete E.centerPoint,this.callSuper("initialize",E)}this.setCoords()},_updateObjectsACoords:function(){for(var a=this._objects.length;a--;)this._objects[a].setCoords(!0)},_updateObjectsCoords:function(a){a=a||this.getCenterPoint();for(var E=this._objects.length;E--;)this._updateObjectCoords(this._objects[E],a)},_updateObjectCoords:function(a,E){var f=a.left,v=a.top;a.set({left:f-E.x,top:v-E.y}),a.group=this,a.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var E=!!this.group;return this._restoreObjectsState(),c.util.resetObjectTransform(this),a&&(E&&c.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,E?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),c.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,E){var f=this._objects.length;if(this.useSetOnGroup)for(;f--;)this._objects[f].setOnGroup(a,E);if(a==="canvas")for(;f--;)this._objects[f]._set(a,E);c.Object.prototype._set.call(this,a,E)},toObject:function(a){var E=this.includeDefaultValues,f=this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){var g=d.includeDefaultValues;d.includeDefaultValues=E;var _=d.toObject(a);return d.includeDefaultValues=g,_}),v=c.Object.prototype.toObject.call(this,a);return v.objects=f,v},toDatalessObject:function(a){var E,f=this.sourcePath;if(f)E=f;else{var v=this.includeDefaultValues;E=this._objects.map(function(g){var _=g.includeDefaultValues;g.includeDefaultValues=v;var F=g.toDatalessObject(a);return g.includeDefaultValues=_,F})}var d=c.Object.prototype.toDatalessObject.call(this,a);return d.objects=E,d},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=c.Object.prototype.shouldCache.call(this);if(a){for(var E=0,f=this._objects.length;E<f;E++)if(this._objects[E].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(c.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,E=this._objects.length;a<E;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var E=0,f=this._objects.length;E<f;E++)this._objects[E].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var E=0,f=this._objects.length;E<f;E++)if(this._objects[E].isCacheDirty(!0)){if(this._cacheCanvas){var v=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-d/2,v,d)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(E){c.util.addTransformToObject(E,a),delete E.group,E.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,E=this.canvas;this._objects=[];var f=this.toObject();delete f.objects;var v=new c.ActiveSelection([]);return v.set(f),v.type="activeSelection",E.remove(this),a.forEach(function(d){d.group=v,d.dirty=!0,E.add(d)}),v.canvas=E,v._objects=a,E._activeObject=v,v.setCoords(),v}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(a){a.setCoords(!0)}),this},_calcBounds:function(a){for(var E,f,v,d,g=[],_=[],F=["tr","br","bl","tl"],y=0,T=this._objects.length,S=F.length;y<T;++y){for(v=(E=this._objects[y]).calcACoords(),d=0;d<S;d++)f=F[d],g.push(v[f].x),_.push(v[f].y);E.aCoords=v}this._getBounds(g,_,a)},_getBounds:function(a,E,f){var v=new c.Point(l(a),l(E)),d=new c.Point(A(a),A(E)),g=v.y||0,_=v.x||0,F=d.x-v.x||0,y=d.y-v.y||0;this.width=F,this.height=y,f||this.setPositionByOrigin({x:_,y:g},"left","top")},_toSVG:function(a){for(var E=["<g ","COMMON_PARTS",` >
`],f=0,v=this._objects.length;f<v;f++)E.push("		",this._objects[f].toSVG(a));return E.push(`</g>
`),E},getSvgStyles:function(){var a=this.opacity!==void 0&&this.opacity!==1?"opacity: "+this.opacity+";":"",E=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),E].join("")},toClipPathSVG:function(a){for(var E=[],f=0,v=this._objects.length;f<v;f++)E.push("	",this._objects[f].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(E,{reviver:a})}}),c.Group.fromObject=function(a,E){var f=a.objects,v=c.util.object.clone(a,!0);delete v.objects,typeof f!="string"?c.util.enlivenObjects(f,function(d){var g=c.util.object.clone(a,!0);delete g.objects,c.util.enlivenObjectEnlivables(a,g,function(){E&&E(new c.Group(d,g,!0))})}):c.loadSVGFromURL(f,function(d){var g=c.util.groupSVGElements(d,a,f);g.set(v),E&&E(g)})})}(e),function(h){var c=h.fabric||(h.fabric={});c.ActiveSelection||(c.ActiveSelection=c.util.createClass(c.Group,{type:"activeSelection",initialize:function(l,A){A=A||{},this._objects=l||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;A.originX&&(this.originX=A.originX),A.originY&&(this.originY=A.originY),this._calcBounds(),this._updateObjectsCoords(),c.Object.prototype.initialize.call(this,A),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var A=c.Object.prototype.toObject.call(this),a=new c.Group([]);if(delete A.type,a.set(A),l.forEach(function(f){f.canvas.remove(f),f.group=a}),a._objects=l,!this.canvas)return a;var E=this.canvas;return E.add(a),E._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,A,a){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,A),(a=a||{}).hasControls===void 0&&(a.hasControls=!1),a.forActiveSelection=!0;for(var E=0,f=this._objects.length;E<f;E++)this._objects[E]._renderControls(l,a);l.restore()}}),c.ActiveSelection.fromObject=function(l,A){c.util.enlivenObjects(l.objects,function(a){delete l.objects,A&&A(new c.ActiveSelection(a,l,!0))})})}(e),function(h){var c=D.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?D.warn("fabric.Image is already defined."):(D.Image=D.util.createClass(D.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:D.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:D.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,A){A||(A={}),this.filters=[],this.cacheKey="texture"+D.Object.__uid++,this.callSuper("initialize",A),this._initElement(l,A)},getElement:function(){return this._element||{}},setElement:function(l,A){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(A),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var A=D.filterBackend;A&&A.evictCachesForKey&&A.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(l){D.util.cleanUpJsdomNode(this[l]),this[l]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(this.stroke&&this.strokeWidth!==0){var A=this.width/2,a=this.height/2;l.beginPath(),l.moveTo(-A,-a),l.lineTo(A,-a),l.lineTo(A,a),l.lineTo(-A,a),l.lineTo(-A,-a),l.closePath()}},toObject:function(l){var A=[];this.filters.forEach(function(E){E&&A.push(E.toObject())});var a=c(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:A});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l,A=[],a=[],E=this._element,f=-this.width/2,v=-this.height/2,d="",g="";if(!E)return[];if(this.hasCrop()){var _=D.Object.__uid++;A.push('<clipPath id="imageCrop_'+_+`">
`,'	<rect x="'+f+'" y="'+v+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+_+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),a.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',f-this.cropX,'" y="',v-this.cropY,'" width="',E.width||E.naturalWidth,'" height="',E.height||E.height,g,'"',d,`></image>
`),this.stroke||this.strokeDashArray){var F=this.fill;this.fill=null,l=["	<rect ",'x="',f,'" y="',v,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=F}return this.paintFirst!=="fill"?A.concat(l,a):A.concat(a,l)},getSrc:function(l){var A=l?this._element:this._originalElement;return A?A.toDataURL?A.toDataURL():this.srcFromAttribute?A.getAttribute("src"):A.src:this.src||""},setSrc:function(l,A,a){return D.util.loadImage(l,function(E,f){this.setElement(E,a),this._setWidthHeight(),A&&A(this,f)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,A=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),E=a.scaleX,f=a.scaleY,v=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||E>A&&f>A)return this._element=v,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=E,void(this._lastScaleY=f);D.filterBackend||(D.filterBackend=D.initFilterBackend());var d=D.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,_=v.width,F=v.height;d.width=_,d.height=F,this._element=d,this._lastScaleX=l.scaleX=E,this._lastScaleY=l.scaleY=f,D.filterBackend.applyFilters([l],v,_,F,this._element,g),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height},applyFilters:function(l){if(l=(l=l||this.filters||[]).filter(function(v){return v&&!v.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var A=this._originalElement,a=A.naturalWidth||A.width,E=A.naturalHeight||A.height;if(this._element===this._originalElement){var f=D.util.createCanvasElement();f.width=a,f.height=E,this._element=f,this._filteredEl=f}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,E),this._lastScaleX=1,this._lastScaleY=1;return D.filterBackend||(D.filterBackend=D.initFilterBackend()),D.filterBackend.applyFilters(l,this._originalElement,a,E,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){D.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){D.util.setImageSmoothing(l,this.imageSmoothing),D.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var A=this._element;if(A){var a=this._filterScalingX,E=this._filterScalingY,f=this.width,v=this.height,d=Math.min,g=Math.max,_=g(this.cropX,0),F=g(this.cropY,0),y=A.naturalWidth||A.width,T=A.naturalHeight||A.height,S=_*a,I=F*E,N=d(f*a,y-S),W=d(v*E,T-I),z=-f/2,se=-v/2,xe=d(f,y/a-_),te=d(v,T/E-F);A&&l.drawImage(A,S,I,N,W,z,se,xe,te)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,A){this.setElement(D.util.getById(l),A),D.util.addClass(this.getElement(),D.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,A){l&&l.length?D.util.enlivenObjects(l,function(a){A&&A(a)},"fabric.Image.filters"):A&&A()},_setWidthHeight:function(l){l||(l={});var A=this.getElement();this.width=l.width||A.naturalWidth||A.width||0,this.height=l.height||A.naturalHeight||A.height||0},parsePreserveAspectRatioAttribute:function(){var l,A=D.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),a=this._element.width,E=this._element.height,f=1,v=1,d=0,g=0,_=0,F=0,y=this.width,T=this.height,S={width:y,height:T};return!A||A.alignX==="none"&&A.alignY==="none"?(f=y/a,v=T/E):(A.meetOrSlice==="meet"&&(l=(y-a*(f=v=D.util.findScaleToFit(this._element,S)))/2,A.alignX==="Min"&&(d=-l),A.alignX==="Max"&&(d=l),l=(T-E*v)/2,A.alignY==="Min"&&(g=-l),A.alignY==="Max"&&(g=l)),A.meetOrSlice==="slice"&&(l=a-y/(f=v=D.util.findScaleToCover(this._element,S)),A.alignX==="Mid"&&(_=l/2),A.alignX==="Max"&&(_=l),l=E-T/v,A.alignY==="Mid"&&(F=l/2),A.alignY==="Max"&&(F=l),a=y/f,E=T/v)),{width:a,height:E,scaleX:f,scaleY:v,offsetLeft:d,offsetTop:g,cropX:_,cropY:F}}}),D.Image.CSS_CANVAS="canvas-img",D.Image.prototype.getSvgSrc=D.Image.prototype.getSrc,D.Image.fromObject=function(l,A){var a=D.util.object.clone(l);D.util.loadImage(a.src,function(E,f){f?A&&A(null,!0):D.Image.prototype._initFilters.call(a,a.filters,function(v){a.filters=v||[],D.Image.prototype._initFilters.call(a,[a.resizeFilter],function(d){a.resizeFilter=d[0],D.util.enlivenObjectEnlivables(a,a,function(){var g=new D.Image(E,a);A(g,!1)})})})},null,a.crossOrigin)},D.Image.fromURL=function(l,A,a){D.util.loadImage(l,function(E,f){A&&A(new D.Image(E,a),f)},null,a&&a.crossOrigin)},D.Image.ATTRIBUTE_NAMES=D.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),D.Image.fromElement=function(l,A,a){var E=D.parseAttributes(l,D.Image.ATTRIBUTE_NAMES);D.Image.fromURL(E["xlink:href"],A,c(a?D.util.object.clone(a):{},E))})}(e),D.util.object.extend(D.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var c=function(){},l=(h=h||{}).onComplete||c,A=h.onChange||c,a=this;return D.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(E){a.rotate(E),A()},onComplete:function(){a.setCoords(),l()}})}}),D.util.object.extend(D.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(l,A){var a="precision "+A+` float;
void main(){}`,E=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(E,a),l.compileShader(E),!!l.getShaderParameter(E,l.COMPILE_STATUS)}function c(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}D.isWebglSupported=function(l){if(D.isLikelyNode)return!1;l=l||D.WebglFilterBackend.prototype.tileSize;var A=document.createElement("canvas"),a=A.getContext("webgl")||A.getContext("experimental-webgl"),E=!1;if(a){D.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),E=D.maxTextureSize>=l;for(var f=["highp","mediump","lowp"],v=0;v<3;v++)if(h(a,f[v])){D.webGlPrecision=f[v];break}}return this.isSupported=E,E},D.WebglFilterBackend=c,c.prototype={tileSize:2048,resources:{},setupGLContext:function(l,A){this.dispose(),this.createWebGLCanvas(l,A),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,A)},chooseFastestCopyGLTo2DMethod:function(l,A){var a,E=window.performance!==void 0;try{new ImageData(1,1),a=!0}catch{a=!1}var f=typeof ArrayBuffer!="undefined",v=typeof Uint8ClampedArray!="undefined";if(E&&a&&f&&v){var d=D.util.createCanvasElement(),g=new ArrayBuffer(l*A*4);if(D.forceGLPutImageData)return this.imageBuffer=g,void(this.copyGLTo2D=ke);var _,F,y={imageBuffer:g,destinationWidth:l,destinationHeight:A,targetCanvas:d};d.width=l,d.height=A,_=window.performance.now(),Ie.call(y,this.gl,y),F=window.performance.now()-_,_=window.performance.now(),ke.call(y,this.gl,y),F>window.performance.now()-_?(this.imageBuffer=g,this.copyGLTo2D=ke):this.copyGLTo2D=Ie}},createWebGLCanvas:function(l,A){var a=D.util.createCanvasElement();a.width=l,a.height=A;var E={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},f=a.getContext("webgl",E);f||(f=a.getContext("experimental-webgl",E)),f&&(f.clearColor(0,0,0,0),this.canvas=a,this.gl=f)},applyFilters:function(l,A,a,E,f,v){var d,g=this.gl;v&&(d=this.getCachedTexture(v,A));var _={originalWidth:A.width||A.originalWidth,originalHeight:A.height||A.originalHeight,sourceWidth:a,sourceHeight:E,destinationWidth:a,destinationHeight:E,context:g,sourceTexture:this.createTexture(g,a,E,!d&&A),targetTexture:this.createTexture(g,a,E),originalTexture:d||this.createTexture(g,a,E,!d&&A),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:f},F=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,F),l.forEach(function(y){y&&y.applyTo(_)}),function(y){var T=y.targetCanvas,S=T.width,I=T.height,N=y.destinationWidth,W=y.destinationHeight;S===N&&I===W||(T.width=N,T.height=W)}(_),this.copyGLTo2D(g,_),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(_.sourceTexture),g.deleteTexture(_.targetTexture),g.deleteFramebuffer(F),f.getContext("2d").setTransform(1,0,0,1,0,0),_},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,A,a,E){var f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),E?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,E):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,A,a,0,l.RGBA,l.UNSIGNED_BYTE,null),f},getCachedTexture:function(l,A){if(this.textureCache[l])return this.textureCache[l];var a=this.createTexture(this.gl,A.width,A.height,A);return this.textureCache[l]=a,a},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:Ie,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,A={renderer:"",vendor:""};if(!l)return A;var a=l.getExtension("WEBGL_debug_renderer_info");if(a){var E=l.getParameter(a.UNMASKED_RENDERER_WEBGL),f=l.getParameter(a.UNMASKED_VENDOR_WEBGL);E&&(A.renderer=E.toLowerCase()),f&&(A.vendor=f.toLowerCase())}return this.gpuInfo=A,A}}}(),function(){var h=function(){};function c(){}D.Canvas2dFilterBackend=c,c.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(l,A,a,E,f){var v=f.getContext("2d");v.drawImage(A,0,0,a,E);var d={sourceWidth:a,sourceHeight:E,imageData:v.getImageData(0,0,a,E),originalEl:A,originalImageData:v.getImageData(0,0,a,E),canvasEl:f,ctx:v,filterBackend:this};return l.forEach(function(g){g.applyTo(d)}),d.imageData.width===a&&d.imageData.height===E||(f.width=d.imageData.width,f.height=d.imageData.height),v.putImageData(d.imageData,0,0),d}}}(),D.Image=D.Image||{},D.Image.filters=D.Image.filters||{},D.Image.filters.BaseFilter=D.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var c in h)this[c]=h[c]},createProgram:function(h,c,l){c=c||this.fragmentSource,l=l||this.vertexSource,D.webGlPrecision!=="highp"&&(c=c.replace(/precision highp float/g,"precision "+D.webGlPrecision+" float"));var A=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(A,l),h.compileShader(A),!h.getShaderParameter(A,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(A));var a=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(a,c),h.compileShader(a),!h.getShaderParameter(a,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(a));var E=h.createProgram();if(h.attachShader(E,A),h.attachShader(E,a),h.linkProgram(E),!h.getProgramParameter(E,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(E));var f=this.getAttributeLocations(h,E),v=this.getUniformLocations(h,E)||{};return v.uStepW=h.getUniformLocation(E,"uStepW"),v.uStepH=h.getUniformLocation(E,"uStepH"),{program:E,attributeLocations:f,uniformLocations:v}},getAttributeLocations:function(h,c){return{aPosition:h.getAttribLocation(c,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,c,l){var A=c.aPosition,a=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,a),h.enableVertexAttribArray(A),h.vertexAttribPointer(A,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,l,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var c,l,A=h.context;h.passes>1?(c=h.destinationWidth,l=h.destinationHeight,h.sourceWidth===c&&h.sourceHeight===l||(A.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(A,c,l)),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,h.targetTexture,0)):(A.bindFramebuffer(A.FRAMEBUFFER,null),A.finish())},_swapTextures:function(h){h.passes--,h.pass++;var c=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=c},isNeutralState:function(){var h=this.mainParameter,c=D.Image.filters[this.type].prototype;if(h){if(Array.isArray(c[h])){for(var l=c[h].length;l--;)if(this[h][l]!==c[h][l])return!1;return!0}return c[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var c=h.context,l=this.retrieveShader(h);h.pass===0&&h.originalTexture?c.bindTexture(c.TEXTURE_2D,h.originalTexture):c.bindTexture(c.TEXTURE_2D,h.sourceTexture),c.useProgram(l.program),this.sendAttributeData(c,l.attributeLocations,h.aPosition),c.uniform1f(l.uniformLocations.uStepW,1/h.sourceWidth),c.uniform1f(l.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(c,l.uniformLocations),c.viewport(0,0,h.destinationWidth,h.destinationHeight),c.drawArrays(c.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,c,l){h.activeTexture(l),h.bindTexture(h.TEXTURE_2D,c),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,c){h.activeTexture(c),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var c=document.createElement("canvas");c.width=h.sourceWidth,c.height=h.sourceHeight,h.helpLayer=c}},toObject:function(){var h={type:this.type},c=this.mainParameter;return c&&(h[c]=this[c]),h},toJSON:function(){return this.toObject()}}),D.Image.filters.BaseFilter.fromObject=function(h,c){var l=new D.Image.filters[h.type](h);return c&&c(l),l},function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.ColorMatrix=A(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var E,f,v,d,g,_=a.imageData.data,F=_.length,y=this.matrix,T=this.colorsOnly;for(g=0;g<F;g+=4)E=_[g],f=_[g+1],v=_[g+2],T?(_[g]=E*y[0]+f*y[1]+v*y[2]+255*y[4],_[g+1]=E*y[5]+f*y[6]+v*y[7]+255*y[9],_[g+2]=E*y[10]+f*y[11]+v*y[12]+255*y[14]):(d=_[g+3],_[g]=E*y[0]+f*y[1]+v*y[2]+d*y[3]+255*y[4],_[g+1]=E*y[5]+f*y[6]+v*y[7]+d*y[8]+255*y[9],_[g+2]=E*y[10]+f*y[11]+v*y[12]+d*y[13]+255*y[14],_[g+3]=E*y[15]+f*y[16]+v*y[17]+d*y[18]+255*y[19])},getUniformLocations:function(a,E){return{uColorMatrix:a.getUniformLocation(E,"uColorMatrix"),uConstants:a.getUniformLocation(E,"uConstants")}},sendUniformData:function(a,E){var f=this.matrix,v=[f[0],f[1],f[2],f[3],f[5],f[6],f[7],f[8],f[10],f[11],f[12],f[13],f[15],f[16],f[17],f[18]],d=[f[4],f[9],f[14],f[19]];a.uniformMatrix4fv(E.uColorMatrix,!1,v),a.uniform4fv(E.uConstants,d)}}),c.Image.filters.ColorMatrix.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Brightness=A(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var E,f=a.imageData.data,v=f.length,d=Math.round(255*this.brightness);for(E=0;E<v;E+=4)f[E]=f[E]+d,f[E+1]=f[E+1]+d,f[E+2]=f[E+2]+d}},getUniformLocations:function(a,E){return{uBrightness:a.getUniformLocation(E,"uBrightness")}},sendUniformData:function(a,E){a.uniform1f(E.uBrightness,this.brightness)}}),c.Image.filters.Brightness.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.Image.filters,a=c.util.createClass;A.Convolute=a(A.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(E){var f=Math.sqrt(this.matrix.length),v=this.type+"_"+f+"_"+(this.opaque?1:0),d=this.fragmentSource[v];return E.programCache.hasOwnProperty(v)||(E.programCache[v]=this.createProgram(E.context,d)),E.programCache[v]},applyTo2d:function(E){var f,v,d,g,_,F,y,T,S,I,N,W,z,se=E.imageData,xe=se.data,te=this.matrix,j=Math.round(Math.sqrt(te.length)),U=Math.floor(j/2),q=se.width,oe=se.height,ae=E.ctx.createImageData(q,oe),G=ae.data,V=this.opaque?1:0;for(N=0;N<oe;N++)for(I=0;I<q;I++){for(_=4*(N*q+I),f=0,v=0,d=0,g=0,z=0;z<j;z++)for(W=0;W<j;W++)F=I+W-U,(y=N+z-U)<0||y>=oe||F<0||F>=q||(T=4*(y*q+F),S=te[z*j+W],f+=xe[T]*S,v+=xe[T+1]*S,d+=xe[T+2]*S,V||(g+=xe[T+3]*S));G[_]=f,G[_+1]=v,G[_+2]=d,G[_+3]=V?xe[_+3]:g}E.imageData=ae},getUniformLocations:function(E,f){return{uMatrix:E.getUniformLocation(f,"uMatrix"),uOpaque:E.getUniformLocation(f,"uOpaque"),uHalfSize:E.getUniformLocation(f,"uHalfSize"),uSize:E.getUniformLocation(f,"uSize")}},sendUniformData:function(E,f){E.uniform1fv(f.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),c.Image.filters.Convolute.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Grayscale=A(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var E,f,v=a.imageData.data,d=v.length,g=this.mode;for(E=0;E<d;E+=4)g==="average"?f=(v[E]+v[E+1]+v[E+2])/3:g==="lightness"?f=(Math.min(v[E],v[E+1],v[E+2])+Math.max(v[E],v[E+1],v[E+2]))/2:g==="luminosity"&&(f=.21*v[E]+.72*v[E+1]+.07*v[E+2]),v[E]=f,v[E+1]=f,v[E+2]=f},retrieveShader:function(a){var E=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(E)){var f=this.fragmentSource[this.mode];a.programCache[E]=this.createProgram(a.context,f)}return a.programCache[E]},getUniformLocations:function(a,E){return{uMode:a.getUniformLocation(E,"uMode")}},sendUniformData:function(a,E){a.uniform1i(E.uMode,1)},isNeutralState:function(){return!1}}),c.Image.filters.Grayscale.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Invert=A(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var E,f=a.imageData.data,v=f.length;for(E=0;E<v;E+=4)f[E]=255-f[E],f[E+1]=255-f[E+1],f[E+2]=255-f[E+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,E){return{uInvert:a.getUniformLocation(E,"uInvert")}},sendUniformData:function(a,E){a.uniform1i(E.uInvert,this.invert)}}),c.Image.filters.Invert.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.Image.filters,a=c.util.createClass;A.Noise=a(A.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(E){if(this.noise!==0){var f,v,d=E.imageData.data,g=d.length,_=this.noise;for(f=0,g=d.length;f<g;f+=4)v=(.5-Math.random())*_,d[f]+=v,d[f+1]+=v,d[f+2]+=v}},getUniformLocations:function(E,f){return{uNoise:E.getUniformLocation(f,"uNoise"),uSeed:E.getUniformLocation(f,"uSeed")}},sendUniformData:function(E,f){E.uniform1f(f.uNoise,this.noise/255),E.uniform1f(f.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),c.Image.filters.Noise.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Pixelate=A(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var E,f,v,d,g,_,F,y,T,S,I,N=a.imageData,W=N.data,z=N.height,se=N.width;for(f=0;f<z;f+=this.blocksize)for(v=0;v<se;v+=this.blocksize)for(d=W[E=4*f*se+4*v],g=W[E+1],_=W[E+2],F=W[E+3],S=Math.min(f+this.blocksize,z),I=Math.min(v+this.blocksize,se),y=f;y<S;y++)for(T=v;T<I;T++)W[E=4*y*se+4*T]=d,W[E+1]=g,W[E+2]=_,W[E+3]=F},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,E){return{uBlocksize:a.getUniformLocation(E,"uBlocksize"),uStepW:a.getUniformLocation(E,"uStepW"),uStepH:a.getUniformLocation(E,"uStepH")}},sendUniformData:function(a,E){a.uniform1f(E.uBlocksize,this.blocksize)}}),c.Image.filters.Pixelate.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.extend,A=c.Image.filters,a=c.util.createClass;A.RemoveColor=a(A.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(E){var f,v,d,g,_=E.imageData.data,F=255*this.distance,y=new c.Color(this.color).getSource(),T=[y[0]-F,y[1]-F,y[2]-F],S=[y[0]+F,y[1]+F,y[2]+F];for(f=0;f<_.length;f+=4)v=_[f],d=_[f+1],g=_[f+2],v>T[0]&&d>T[1]&&g>T[2]&&v<S[0]&&d<S[1]&&g<S[2]&&(_[f+3]=0)},getUniformLocations:function(E,f){return{uLow:E.getUniformLocation(f,"uLow"),uHigh:E.getUniformLocation(f,"uHigh")}},sendUniformData:function(E,f){var v=new c.Color(this.color).getSource(),d=parseFloat(this.distance),g=[0+v[0]/255-d,0+v[1]/255-d,0+v[2]/255-d,1],_=[v[0]/255+d,v[1]/255+d,v[2]/255+d,1];E.uniform4fv(f.uLow,g),E.uniform4fv(f.uHigh,_)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),c.Image.filters.RemoveColor.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var E in a)l[E]=A(l.ColorMatrix,{type:E,matrix:a[E],mainParameter:!1,colorsOnly:!0}),c.Image.filters[E].fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric,l=c.Image.filters,A=c.util.createClass;l.BlendColor=A(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var E,f=this.type+"_"+this.mode;return a.programCache.hasOwnProperty(f)||(E=this.buildSource(this.mode),a.programCache[f]=this.createProgram(a.context,E)),a.programCache[f]},applyTo2d:function(a){var E,f,v,d,g,_,F,y=a.imageData.data,T=y.length,S=1-this.alpha;E=(F=new c.Color(this.color).getSource())[0]*this.alpha,f=F[1]*this.alpha,v=F[2]*this.alpha;for(var I=0;I<T;I+=4)switch(d=y[I],g=y[I+1],_=y[I+2],this.mode){case"multiply":y[I]=d*E/255,y[I+1]=g*f/255,y[I+2]=_*v/255;break;case"screen":y[I]=255-(255-d)*(255-E)/255,y[I+1]=255-(255-g)*(255-f)/255,y[I+2]=255-(255-_)*(255-v)/255;break;case"add":y[I]=d+E,y[I+1]=g+f,y[I+2]=_+v;break;case"diff":case"difference":y[I]=Math.abs(d-E),y[I+1]=Math.abs(g-f),y[I+2]=Math.abs(_-v);break;case"subtract":y[I]=d-E,y[I+1]=g-f,y[I+2]=_-v;break;case"darken":y[I]=Math.min(d,E),y[I+1]=Math.min(g,f),y[I+2]=Math.min(_,v);break;case"lighten":y[I]=Math.max(d,E),y[I+1]=Math.max(g,f),y[I+2]=Math.max(_,v);break;case"overlay":y[I]=E<128?2*d*E/255:255-2*(255-d)*(255-E)/255,y[I+1]=f<128?2*g*f/255:255-2*(255-g)*(255-f)/255,y[I+2]=v<128?2*_*v/255:255-2*(255-_)*(255-v)/255;break;case"exclusion":y[I]=E+d-2*E*d/255,y[I+1]=f+g-2*f*g/255,y[I+2]=v+_-2*v*_/255;break;case"tint":y[I]=E+d*S,y[I+1]=f+g*S,y[I+2]=v+_*S}},getUniformLocations:function(a,E){return{uColor:a.getUniformLocation(E,"uColor")}},sendUniformData:function(a,E){var f=new c.Color(this.color).getSource();f[0]=this.alpha*f[0]/255,f[1]=this.alpha*f[1]/255,f[2]=this.alpha*f[2]/255,f[3]=this.alpha,a.uniform4fv(E.uColor,f)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendColor.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric,l=c.Image.filters,A=c.util.createClass;l.BlendImage=A(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var E=this.type+"_"+this.mode,f=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(E)||(a.programCache[E]=this.createProgram(a.context,f)),a.programCache[E]},applyToWebGL:function(a){var E=a.context,f=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(E,f,E.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(E,E.TEXTURE1)},createTexture:function(a,E){return a.getCachedTexture(E.cacheKey,E._element)},calculateMatrix:function(){var a=this.image,E=a._element.width,f=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/E,-a.top/f,1]},applyTo2d:function(a){var E,f,v,d,g,_,F,y,T,S,I,N=a.imageData,W=a.filterBackend.resources,z=N.data,se=z.length,xe=N.width,te=N.height,j=this.image;W.blendImage||(W.blendImage=c.util.createCanvasElement()),S=(T=W.blendImage).getContext("2d"),T.width!==xe||T.height!==te?(T.width=xe,T.height=te):S.clearRect(0,0,xe,te),S.setTransform(j.scaleX,0,0,j.scaleY,j.left,j.top),S.drawImage(j._element,0,0,xe,te),I=S.getImageData(0,0,xe,te).data;for(var U=0;U<se;U+=4)switch(g=z[U],_=z[U+1],F=z[U+2],y=z[U+3],E=I[U],f=I[U+1],v=I[U+2],d=I[U+3],this.mode){case"multiply":z[U]=g*E/255,z[U+1]=_*f/255,z[U+2]=F*v/255,z[U+3]=y*d/255;break;case"mask":z[U+3]=d}},getUniformLocations:function(a,E){return{uTransformMatrix:a.getUniformLocation(E,"uTransformMatrix"),uImage:a.getUniformLocation(E,"uImage")}},sendUniformData:function(a,E){var f=this.calculateMatrix();a.uniform1i(E.uImage,1),a.uniformMatrix3fv(E.uTransformMatrix,!1,f)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendImage.fromObject=function(a,E){c.Image.fromObject(a.image,function(f){var v=c.util.object.clone(a);v.image=f,E(new c.Image.filters.BlendImage(v))})}}(e),function(h){var c=h.fabric||(h.fabric={}),l=Math.pow,A=Math.floor,a=Math.sqrt,E=Math.abs,f=Math.round,v=Math.sin,d=Math.ceil,g=c.Image.filters,_=c.util.createClass;g.Resize=_(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(F,y){return{uDelta:F.getUniformLocation(y,"uDelta"),uTaps:F.getUniformLocation(y,"uTaps")}},sendUniformData:function(F,y){F.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),F.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(F){var y=this.getFilterWindow(),T=this.type+"_"+y;if(!F.programCache.hasOwnProperty(T)){var S=this.generateShader(y);F.programCache[T]=this.createProgram(F.context,S)}return F.programCache[T]},getFilterWindow:function(){var F=this.tempScale;return Math.ceil(this.lanczosLobes/F)},getTaps:function(){for(var F=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,T=this.getFilterWindow(),S=new Array(T),I=1;I<=T;I++)S[I-1]=F(I*y);return S},generateShader:function(F){for(var y=new Array(F),T=this.fragmentSourceTOP,S=1;S<=F;S++)y[S-1]=S+".0 * uDelta";return T+="uniform float uTaps["+F+`];
`,T+=`void main() {
`,T+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,T+=`  float sum = 1.0;
`,y.forEach(function(I,N){T+="  color += texture2D(uTexture, vTexCoord + "+I+") * uTaps["+N+`];
`,T+="  color += texture2D(uTexture, vTexCoord - "+I+") * uTaps["+N+`];
`,T+="  sum += 2.0 * uTaps["+N+`];
`}),T+=`  gl_FragColor = color / sum;
`,T+="}"},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(F){F.webgl?(F.passes++,this.width=F.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=F.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),F.destinationWidth=this.dW,this._setupFrameBuffer(F),this.applyToWebGL(F),this._swapTextures(F),F.sourceWidth=F.destinationWidth,this.height=F.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),F.destinationHeight=this.dH,this._setupFrameBuffer(F),this.applyToWebGL(F),this._swapTextures(F),F.sourceHeight=F.destinationHeight):this.applyTo2d(F)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(F){return function(y){if(y>=F||y<=-F)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;var T=(y*=Math.PI)/F;return v(y)/y*v(T)/T}},applyTo2d:function(F){var y=F.imageData,T=this.scaleX,S=this.scaleY;this.rcpScaleX=1/T,this.rcpScaleY=1/S;var I,N=y.width,W=y.height,z=f(N*T),se=f(W*S);this.resizeType==="sliceHack"?I=this.sliceByTwo(F,N,W,z,se):this.resizeType==="hermite"?I=this.hermiteFastResize(F,N,W,z,se):this.resizeType==="bilinear"?I=this.bilinearFiltering(F,N,W,z,se):this.resizeType==="lanczos"&&(I=this.lanczosResize(F,N,W,z,se)),F.imageData=I},sliceByTwo:function(F,y,T,S,I){var N,W,z=F.imageData,se=.5,xe=!1,te=!1,j=y*se,U=T*se,q=c.filterBackend.resources,oe=0,ae=0,G=y,V=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),((N=q.sliceByTwo).width<1.5*y||N.height<T)&&(N.width=1.5*y,N.height=T),(W=N.getContext("2d")).clearRect(0,0,1.5*y,T),W.putImageData(z,0,0),S=A(S),I=A(I);!xe||!te;)y=j,T=U,S<A(j*se)?j=A(j*se):(j=S,xe=!0),I<A(U*se)?U=A(U*se):(U=I,te=!0),W.drawImage(N,oe,ae,y,T,G,V,j,U),oe=G,ae=V,V+=U;return W.getImageData(oe,ae,S,I)},lanczosResize:function(F,y,T,S,I){var N=F.imageData.data,W=F.ctx.createImageData(S,I),z=W.data,se=this.lanczosCreate(this.lanczosLobes),xe=this.rcpScaleX,te=this.rcpScaleY,j=2/this.rcpScaleX,U=2/this.rcpScaleY,q=d(xe*this.lanczosLobes/2),oe=d(te*this.lanczosLobes/2),ae={},G={},V={};return function Q(Ee){var ie,fe,De,ve,Be,_e,pe,ye,Te,we,Le;for(G.x=(Ee+.5)*xe,V.x=A(G.x),ie=0;ie<I;ie++){for(G.y=(ie+.5)*te,V.y=A(G.y),Be=0,_e=0,pe=0,ye=0,Te=0,fe=V.x-q;fe<=V.x+q;fe++)if(!(fe<0||fe>=y)){we=A(1e3*E(fe-G.x)),ae[we]||(ae[we]={});for(var Ve=V.y-oe;Ve<=V.y+oe;Ve++)Ve<0||Ve>=T||(Le=A(1e3*E(Ve-G.y)),ae[we][Le]||(ae[we][Le]=se(a(l(we*j,2)+l(Le*U,2))/1e3)),(De=ae[we][Le])>0&&(Be+=De,_e+=De*N[ve=4*(Ve*y+fe)],pe+=De*N[ve+1],ye+=De*N[ve+2],Te+=De*N[ve+3]))}z[ve=4*(ie*S+Ee)]=_e/Be,z[ve+1]=pe/Be,z[ve+2]=ye/Be,z[ve+3]=Te/Be}return++Ee<S?Q(Ee):W}(0)},bilinearFiltering:function(F,y,T,S,I){var N,W,z,se,xe,te,j,U,q,oe=0,ae=this.rcpScaleX,G=this.rcpScaleY,V=4*(y-1),Q=F.imageData.data,Ee=F.ctx.createImageData(S,I),ie=Ee.data;for(z=0;z<I;z++)for(se=0;se<S;se++)for(xe=ae*se-(N=A(ae*se)),te=G*z-(W=A(G*z)),q=4*(W*y+N),j=0;j<4;j++)U=Q[q+j]*(1-xe)*(1-te)+Q[q+4+j]*xe*(1-te)+Q[q+V+j]*te*(1-xe)+Q[q+V+4+j]*xe*te,ie[oe++]=U;return Ee},hermiteFastResize:function(F,y,T,S,I){for(var N=this.rcpScaleX,W=this.rcpScaleY,z=d(N/2),se=d(W/2),xe=F.imageData.data,te=F.ctx.createImageData(S,I),j=te.data,U=0;U<I;U++)for(var q=0;q<S;q++){for(var oe=4*(q+U*S),ae=0,G=0,V=0,Q=0,Ee=0,ie=0,fe=0,De=(U+.5)*W,ve=A(U*W);ve<(U+1)*W;ve++)for(var Be=E(De-(ve+.5))/se,_e=(q+.5)*N,pe=Be*Be,ye=A(q*N);ye<(q+1)*N;ye++){var Te=E(_e-(ye+.5))/z,we=a(pe+Te*Te);we>1&&we<-1||(ae=2*we*we*we-3*we*we+1)>0&&(fe+=ae*xe[3+(Te=4*(ye+ve*y))],V+=ae,xe[Te+3]<255&&(ae=ae*xe[Te+3]/250),Q+=ae*xe[Te],Ee+=ae*xe[Te+1],ie+=ae*xe[Te+2],G+=ae)}j[oe]=Q/G,j[oe+1]=Ee/G,j[oe+2]=ie/G,j[oe+3]=fe/V}return te},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),c.Image.filters.Resize.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Contrast=A(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var E,f=a.imageData.data,v=f.length,d=Math.floor(255*this.contrast),g=259*(d+255)/(255*(259-d));for(E=0;E<v;E+=4)f[E]=g*(f[E]-128)+128,f[E+1]=g*(f[E+1]-128)+128,f[E+2]=g*(f[E+2]-128)+128}},getUniformLocations:function(a,E){return{uContrast:a.getUniformLocation(E,"uContrast")}},sendUniformData:function(a,E){a.uniform1f(E.uContrast,this.contrast)}}),c.Image.filters.Contrast.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Saturation=A(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var E,f,v=a.imageData.data,d=v.length,g=-this.saturation;for(E=0;E<d;E+=4)f=Math.max(v[E],v[E+1],v[E+2]),v[E]+=f!==v[E]?(f-v[E])*g:0,v[E+1]+=f!==v[E+1]?(f-v[E+1])*g:0,v[E+2]+=f!==v[E+2]?(f-v[E+2])*g:0}},getUniformLocations:function(a,E){return{uSaturation:a.getUniformLocation(E,"uSaturation")}},sendUniformData:function(a,E){a.uniform1f(E.uSaturation,-this.saturation)}}),c.Image.filters.Saturation.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Vibrance=A(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var E,f,v,d,g=a.imageData.data,_=g.length,F=-this.vibrance;for(E=0;E<_;E+=4)f=Math.max(g[E],g[E+1],g[E+2]),v=(g[E]+g[E+1]+g[E+2])/3,d=2*Math.abs(f-v)/255*F,g[E]+=f!==g[E]?(f-g[E])*d:0,g[E+1]+=f!==g[E+1]?(f-g[E+1])*d:0,g[E+2]+=f!==g[E+2]?(f-g[E+2])*d:0}},getUniformLocations:function(a,E){return{uVibrance:a.getUniformLocation(E,"uVibrance")}},sendUniformData:function(a,E){a.uniform1f(E.uVibrance,-this.vibrance)}}),c.Image.filters.Vibrance.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Blur=A(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var E,f,v=a.filterBackend.resources,d=a.imageData.width,g=a.imageData.height;v.blurLayer1||(v.blurLayer1=c.util.createCanvasElement(),v.blurLayer2=c.util.createCanvasElement()),E=v.blurLayer1,f=v.blurLayer2,E.width===d&&E.height===g||(f.width=E.width=d,f.height=E.height=g);var _,F,y,T,S=E.getContext("2d"),I=f.getContext("2d"),N=.06*this.blur*.5;for(S.putImageData(a.imageData,0,0),I.clearRect(0,0,d,g),T=-15;T<=15;T++)y=N*(F=T/15)*d+(_=(Math.random()-.5)/4),I.globalAlpha=1-Math.abs(F),I.drawImage(E,y,_),S.drawImage(f,0,0),I.globalAlpha=1,I.clearRect(0,0,f.width,f.height);for(T=-15;T<=15;T++)y=N*(F=T/15)*g+(_=(Math.random()-.5)/4),I.globalAlpha=1-Math.abs(F),I.drawImage(E,_,y),S.drawImage(f,0,0),I.globalAlpha=1,I.clearRect(0,0,f.width,f.height);a.ctx.drawImage(E,0,0);var W=a.ctx.getImageData(0,0,E.width,E.height);return S.globalAlpha=1,S.clearRect(0,0,E.width,E.height),W},getUniformLocations:function(a,E){return{delta:a.getUniformLocation(E,"uDelta")}},sendUniformData:function(a,E){var f=this.chooseRightDelta();a.uniform2fv(E.delta,f)},chooseRightDelta:function(){var a,E=1,f=[0,0];return this.horizontal?this.aspectRatio>1&&(E=1/this.aspectRatio):this.aspectRatio<1&&(E=this.aspectRatio),a=E*this.blur*.12,this.horizontal?f[0]=a:f[1]=a,f}}),l.Blur.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Gamma=A(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var E,f=a.imageData.data,v=this.gamma,d=f.length,g=1/v[0],_=1/v[1],F=1/v[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),E=0,d=256;E<d;E++)this.rVals[E]=255*Math.pow(E/255,g),this.gVals[E]=255*Math.pow(E/255,_),this.bVals[E]=255*Math.pow(E/255,F);for(E=0,d=f.length;E<d;E+=4)f[E]=this.rVals[f[E]],f[E+1]=this.gVals[f[E+1]],f[E+2]=this.bVals[f[E+2]]},getUniformLocations:function(a,E){return{uGamma:a.getUniformLocation(E,"uGamma")}},sendUniformData:function(a,E){a.uniform3fv(E.uGamma,this.gamma)}}),c.Image.filters.Gamma.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.Composed=A(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(E){E.applyTo(a)})},toObject:function(){return c.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),c.Image.filters.Composed.fromObject=function(a,E){var f=(a.subFilters||[]).map(function(d){return new c.Image.filters[d.type](d)}),v=new c.Image.filters.Composed({subFilters:f});return E&&E(v),v}}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.Image.filters,A=c.util.createClass;l.HueRotation=A(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,E=c.util.cos(a),f=c.util.sin(a),v=1/3,d=Math.sqrt(v)*f,g=1-E;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=E+g/3,this.matrix[1]=v*g-d,this.matrix[2]=v*g+d,this.matrix[5]=v*g+d,this.matrix[6]=E+v*g,this.matrix[7]=v*g-d,this.matrix[10]=v*g-d,this.matrix[11]=v*g+d,this.matrix[12]=E+v*g},isNeutralState:function(a){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,a)}}),c.Image.filters.HueRotation.fromObject=c.Image.filters.BaseFilter.fromObject}(e),function(h){var c=h.fabric||(h.fabric={}),l=c.util.object.clone;if(c.Text)c.warn("fabric.Text is already defined");else{var A="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:c.Object.prototype.stateProperties.concat(A),cacheProperties:c.Object.prototype.cacheProperties.concat(A),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,E){this.styles=E&&E.styles||{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",E),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=c.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return c._measuringContext||(c._measuringContext=this.canvas&&this.canvas.contextCache||c.util.createCanvasElement().getContext("2d")),c._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,E,f,v,d,g,_,F=0,y=this._textLines.length;F<y;F++)if((this.textAlign==="justify"||F!==y-1&&!this.isEndOfWrapping(F))&&(v=0,d=this._textLines[F],(E=this.getLineWidth(F))<this.width&&(_=this.textLines[F].match(this._reSpacesAndTabs)))){f=_.length,a=(this.width-E)/f;for(var T=0,S=d.length;T<=S;T++)g=this.__charBounds[F][T],this._reSpaceAndTab.test(d[T])?(g.width+=a,g.kernedWidth+=a,g.left+=v,v+=a):g.left+=v}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),E=this.fontSize;return a.width+=E*a.zoomX,a.height+=E*a.zoomY,a},_render:function(a){var E=this.path;E&&!E.isNotVisible()&&E._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,E,f){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom"}a.font=this._getFontDeclaration(E,f)},calcTextWidth:function(){for(var a=this.getLineWidth(0),E=1,f=this._textLines.length;E<f;E++){var v=this.getLineWidth(E);v>a&&(a=v)}return a},_renderTextLine:function(a,E,f,v,d,g){this._renderChars(a,E,f,v,d,g)},_renderTextLinesBackground:function(a){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var E,f,v,d,g,_,F,y=a.fillStyle,T=this._getLeftOffset(),S=this._getTopOffset(),I=0,N=0,W=this.path,z=0,se=this._textLines.length;z<se;z++)if(E=this.getHeightOfLine(z),this.textBackgroundColor||this.styleHas("textBackgroundColor",z)){v=this._textLines[z],f=this._getLineLeftOffset(z),N=0,I=0,d=this.getValueOfPropertyAt(z,0,"textBackgroundColor");for(var xe=0,te=v.length;xe<te;xe++)g=this.__charBounds[z][xe],_=this.getValueOfPropertyAt(z,xe,"textBackgroundColor"),W?(a.save(),a.translate(g.renderLeft,g.renderTop),a.rotate(g.angle),a.fillStyle=_,_&&a.fillRect(-g.width/2,-E/this.lineHeight*(1-this._fontSizeFraction),g.width,E/this.lineHeight),a.restore()):_!==d?(F=T+f+I,this.direction==="rtl"&&(F=this.width-F-N),a.fillStyle=d,d&&a.fillRect(F,S,N,E/this.lineHeight),I=g.left,N=g.width,d=_):N+=g.kernedWidth;_&&!W&&(F=T+f+I,this.direction==="rtl"&&(F=this.width-F-N),a.fillStyle=_,a.fillRect(F,S,N,E/this.lineHeight)),S+=E}else S+=E;a.fillStyle=y,this._removeShadow(a)}},getFontCache:function(a){var E=a.fontFamily.toLowerCase();c.charWidthsCache[E]||(c.charWidthsCache[E]={});var f=c.charWidthsCache[E],v=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return f[v]||(f[v]={}),f[v]},_measureChar:function(a,E,f,v){var d,g,_,F,y=this.getFontCache(E),T=f+a,S=this._getFontDeclaration(E)===this._getFontDeclaration(v),I=E.fontSize/this.CACHE_FONT_SIZE;if(f&&y[f]!==void 0&&(_=y[f]),y[a]!==void 0&&(F=d=y[a]),S&&y[T]!==void 0&&(F=(g=y[T])-_),d===void 0||_===void 0||g===void 0){var N=this.getMeasuringContext();this._setTextStyles(N,E,!0)}return d===void 0&&(F=d=N.measureText(a).width,y[a]=d),_===void 0&&S&&f&&(_=N.measureText(f).width,y[f]=_),S&&g===void 0&&(g=N.measureText(T).width,y[T]=g,F=g-_),{width:d*I,kernedWidth:F*I}},getHeightOfChar:function(a,E){return this.getValueOfPropertyAt(a,E,"fontSize")},measureLine:function(a){var E=this._measureLine(a);return this.charSpacing!==0&&(E.width-=this._getWidthOfCharSpacing()),E.width<0&&(E.width=0),E},_measureLine:function(a){var E,f,v,d,g,_,F=0,y=this._textLines[a],T=new Array(y.length),S=0,I=this.path,N=this.pathSide==="right";for(this.__charBounds[a]=T,E=0;E<y.length;E++)f=y[E],d=this._getGraphemeBox(f,a,E,v),T[E]=d,F+=d.kernedWidth,v=f;if(T[E]={left:d?d.left+d.width:0,width:0,kernedWidth:0,height:this.fontSize},I){switch(_=I.segmentsInfo[I.segmentsInfo.length-1].length,(g=c.util.getPointOnPath(I.path,0,I.segmentsInfo)).x+=I.pathOffset.x,g.y+=I.pathOffset.y,this.textAlign){case"left":S=N?_-F:0;break;case"center":S=(_-F)/2;break;case"right":S=N?0:_-F}for(S+=this.pathStartOffset*(N?-1:1),E=N?y.length-1:0;N?E>=0:E<y.length;N?E--:E++)d=T[E],S>_?S%=_:S<0&&(S+=_),this._setGraphemeOnPath(S,d,g),S+=d.kernedWidth}return{width:F,numOfSpaces:0}},_setGraphemeOnPath:function(a,E,f){var v=a+E.kernedWidth/2,d=this.path,g=c.util.getPointOnPath(d.path,v,d.segmentsInfo);E.renderLeft=g.x-f.x,E.renderTop=g.y-f.y,E.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,E,f,v,d){var g,_=this.getCompleteStyleDeclaration(E,f),F=v?this.getCompleteStyleDeclaration(E,f-1):{},y=this._measureChar(a,_,v,F),T=y.kernedWidth,S=y.width;this.charSpacing!==0&&(S+=g=this._getWidthOfCharSpacing(),T+=g);var I={width:S,left:0,height:_.fontSize,kernedWidth:T,deltaY:_.deltaY};if(f>0&&!d){var N=this.__charBounds[E][f-1];I.left=N.left+N.width+y.kernedWidth-y.width}return I},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var E=this._textLines[a],f=this.getHeightOfChar(a,0),v=1,d=E.length;v<d;v++)f=Math.max(this.getHeightOfChar(a,v),f);return this.__lineHeights[a]=f*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,E=0,f=0,v=this._textLines.length;f<v;f++)a=this.getHeightOfLine(f),E+=f===v-1?a/this.lineHeight:a;return E},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,E){a.save();for(var f=0,v=this._getLeftOffset(),d=this._getTopOffset(),g=0,_=this._textLines.length;g<_;g++){var F=this.getHeightOfLine(g),y=F/this.lineHeight,T=this._getLineLeftOffset(g);this._renderTextLine(E,a,this._textLines[g],v+T,d+f+y,g),f+=F}a.restore()},_renderTextFill:function(a){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,E,f,v,d,g){var _,F,y,T,S,I=this.getHeightOfLine(g),N=this.textAlign.indexOf("justify")!==-1,W="",z=0,se=this.path,xe=!N&&this.charSpacing===0&&this.isEmptyStyles(g)&&!se,te=this.direction==="ltr",j=this.direction==="ltr"?1:-1,U=E.canvas.getAttribute("dir");if(E.save(),U!==this.direction&&(E.canvas.setAttribute("dir",te?"ltr":"rtl"),E.direction=te?"ltr":"rtl",E.textAlign=te?"left":"right"),d-=I*this._fontSizeFraction/this.lineHeight,xe)return this._renderChar(a,E,g,0,f.join(""),v,d,I),void E.restore();for(var q=0,oe=f.length-1;q<=oe;q++)T=q===oe||this.charSpacing||se,W+=f[q],y=this.__charBounds[g][q],z===0?(v+=j*(y.kernedWidth-y.width),z+=y.width):z+=y.kernedWidth,N&&!T&&this._reSpaceAndTab.test(f[q])&&(T=!0),T||(_=_||this.getCompleteStyleDeclaration(g,q),F=this.getCompleteStyleDeclaration(g,q+1),T=this._hasStyleChanged(_,F)),T&&(se?(E.save(),E.translate(y.renderLeft,y.renderTop),E.rotate(y.angle),this._renderChar(a,E,g,q,W,-z/2,0,I),E.restore()):(S=v,this._renderChar(a,E,g,q,W,S,d,I)),W="",_=F,v+=j*z,z=0);E.restore()},_applyPatternGradientTransformText:function(a){var E,f=c.util.createCanvasElement(),v=this.width+this.strokeWidth,d=this.height+this.strokeWidth;return f.width=v,f.height=d,(E=f.getContext("2d")).beginPath(),E.moveTo(0,0),E.lineTo(v,0),E.lineTo(v,d),E.lineTo(0,d),E.closePath(),E.translate(v/2,d/2),E.fillStyle=a.toLive(E),this._applyPatternGradientTransform(E,a),E.fill(),E.createPattern(f,"no-repeat")},handleFiller:function(a,E,f){var v,d;return f.toLive?f.gradientUnits==="percentage"||f.gradientTransform||f.patternTransform?(v=-this.width/2,d=-this.height/2,a.translate(v,d),a[E]=this._applyPatternGradientTransformText(f),{offsetX:v,offsetY:d}):(a[E]=f.toLive(a,this),this._applyPatternGradientTransform(a,f)):(a[E]=f,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,E){return a.lineWidth=E.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",E.stroke)},_setFillStyles:function(a,E){return this.handleFiller(a,"fillStyle",E.fill)},_renderChar:function(a,E,f,v,d,g,_){var F,y,T=this._getStyleDeclaration(f,v),S=this.getCompleteStyleDeclaration(f,v),I=a==="fillText"&&S.fill,N=a==="strokeText"&&S.stroke&&S.strokeWidth;(N||I)&&(E.save(),I&&(F=this._setFillStyles(E,S)),N&&(y=this._setStrokeStyles(E,S)),E.font=this._getFontDeclaration(S),T&&T.textBackgroundColor&&this._removeShadow(E),T&&T.deltaY&&(_+=T.deltaY),I&&E.fillText(d,g-F.offsetX,_-F.offsetY),N&&E.strokeText(d,g-y.offsetX,_-y.offsetY),E.restore())},setSuperscript:function(a,E){return this._setScript(a,E,this.superscript)},setSubscript:function(a,E){return this._setScript(a,E,this.subscript)},_setScript:function(a,E,f){var v=this.get2DCursorLocation(a,!0),d=this.getValueOfPropertyAt(v.lineIndex,v.charIndex,"fontSize"),g=this.getValueOfPropertyAt(v.lineIndex,v.charIndex,"deltaY"),_={fontSize:d*f.size,deltaY:g+d*f.baseline};return this.setSelectionStyles(_,a,E),this},_hasStyleChanged:function(a,E){return a.fill!==E.fill||a.stroke!==E.stroke||a.strokeWidth!==E.strokeWidth||a.fontSize!==E.fontSize||a.fontFamily!==E.fontFamily||a.fontWeight!==E.fontWeight||a.fontStyle!==E.fontStyle||a.deltaY!==E.deltaY},_hasStyleChangedForSvg:function(a,E){return this._hasStyleChanged(a,E)||a.overline!==E.overline||a.underline!==E.underline||a.linethrough!==E.linethrough},_getLineLeftOffset:function(a){var E=this.getLineWidth(a),f=this.width-E,v=this.textAlign,d=this.direction,g=0,_=this.isEndOfWrapping(a);return v==="justify"||v==="justify-center"&&!_||v==="justify-right"&&!_||v==="justify-left"&&!_?0:(v==="center"&&(g=f/2),v==="right"&&(g=f),v==="justify-center"&&(g=f/2),v==="justify-right"&&(g=f),d==="rtl"&&(g-=f),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var E=this.measureLine(a).width;return this.__lineWidths[a]=E,E},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,E,f){var v=this._getStyleDeclaration(a,E);return v&&v[f]!==void 0?v[f]:this[f]},_renderTextDecoration:function(a,E){if(this[E]||this.styleHas(E)){for(var f,v,d,g,_,F,y,T,S,I,N,W,z,se,xe,te,j=this._getLeftOffset(),U=this._getTopOffset(),q=this.path,oe=this._getWidthOfCharSpacing(),ae=this.offsets[E],G=0,V=this._textLines.length;G<V;G++)if(f=this.getHeightOfLine(G),this[E]||this.styleHas(E,G)){y=this._textLines[G],se=f/this.lineHeight,g=this._getLineLeftOffset(G),I=0,N=0,T=this.getValueOfPropertyAt(G,0,E),te=this.getValueOfPropertyAt(G,0,"fill"),S=U+se*(1-this._fontSizeFraction),v=this.getHeightOfChar(G,0),_=this.getValueOfPropertyAt(G,0,"deltaY");for(var Q=0,Ee=y.length;Q<Ee;Q++)if(W=this.__charBounds[G][Q],z=this.getValueOfPropertyAt(G,Q,E),xe=this.getValueOfPropertyAt(G,Q,"fill"),d=this.getHeightOfChar(G,Q),F=this.getValueOfPropertyAt(G,Q,"deltaY"),q&&z&&xe)a.save(),a.fillStyle=te,a.translate(W.renderLeft,W.renderTop),a.rotate(W.angle),a.fillRect(-W.kernedWidth/2,ae*d+F,W.kernedWidth,this.fontSize/15),a.restore();else if((z!==T||xe!==te||d!==v||F!==_)&&N>0){var ie=j+g+I;this.direction==="rtl"&&(ie=this.width-ie-N),T&&te&&(a.fillStyle=te,a.fillRect(ie,S+ae*v+_,N,this.fontSize/15)),I=W.left,N=W.width,T=z,te=xe,v=d,_=F}else N+=W.kernedWidth;ie=j+g+I,this.direction==="rtl"&&(ie=this.width-ie-N),a.fillStyle=xe,z&&xe&&a.fillRect(ie,S+ae*v+_,N-oe,this.fontSize/15),U+=f}else U+=f;this._removeShadow(a)}},_getFontDeclaration:function(a,E){var f=a||this,v=this.fontFamily,d=c.Text.genericFonts.indexOf(v.toLowerCase())>-1,g=v===void 0||v.indexOf("'")>-1||v.indexOf(",")>-1||v.indexOf('"')>-1||d?f.fontFamily:'"'+f.fontFamily+'"';return[c.isLikelyNode?f.fontWeight:f.fontStyle,c.isLikelyNode?f.fontStyle:f.fontWeight,E?this.CACHE_FONT_SIZE+"px":f.fontSize+"px",g].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var E=a.split(this._reNewline),f=new Array(E.length),v=[`
`],d=[],g=0;g<E.length;g++)f[g]=c.util.string.graphemeSplit(E[g]),d=d.concat(f[g],v);return d.pop(),{_unwrappedLines:f,lines:E,graphemeText:d,graphemeLines:f}},toObject:function(a){var E=A.concat(a),f=this.callSuper("toObject",E);return f.styles=l(this.styles,!0),f.path&&(f.path=this.path.toObject()),f},set:function(a,E){this.callSuper("set",a,E);var f=!1,v=!1;if(typeof a=="object")for(var d in a)d==="path"&&this.setPathInfo(),f=f||this._dimensionAffectingProps.indexOf(d)!==-1,v=v||d==="path";else f=this._dimensionAffectingProps.indexOf(a)!==-1,v=a==="path";return v&&this.setPathInfo(),f&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(a,E,f){if(!a)return E(null);var v=c.parseAttributes(a,c.Text.ATTRIBUTE_NAMES),d=v.textAnchor||"left";if((f=c.util.object.extend(f?l(f):{},v)).top=f.top||0,f.left=f.left||0,v.textDecoration){var g=v.textDecoration;g.indexOf("underline")!==-1&&(f.underline=!0),g.indexOf("overline")!==-1&&(f.overline=!0),g.indexOf("line-through")!==-1&&(f.linethrough=!0),delete f.textDecoration}"dx"in v&&(f.left+=v.dx),"dy"in v&&(f.top+=v.dy),"fontSize"in f||(f.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);var _="";"textContent"in a?_=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(_=a.firstChild.data),_=_.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var F=f.strokeWidth;f.strokeWidth=0;var y=new c.Text(_,f),T=y.getScaledHeight()/y.height,S=((y.height+y.strokeWidth)*y.lineHeight-y.height)*T,I=y.getScaledHeight()+S,N=0;d==="center"&&(N=y.getScaledWidth()/2),d==="right"&&(N=y.getScaledWidth()),y.set({left:y.left-N,top:y.top-(I-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:F!==void 0?F:1}),E(y)},c.Text.fromObject=function(a,E){var f=l(a),v=a.path;return delete f.path,c.Object._fromObject("Text",f,function(d){v?c.Object._fromObject("Path",v,function(g){d.set("path",g),E(d)},"path"):E(d)},"text")},c.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],c.util.createAccessors&&c.util.createAccessors(c.Text)}}(e),D.util.object.extend(D.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||h!==void 0&&!this.styles[h])return!0;var c=h===void 0?this.styles:{line:this.styles[h]};for(var l in c)for(var A in c[l])for(var a in c[l][A])return!1;return!0},styleHas:function(h,c){if(!this.styles||!h||h===""||c!==void 0&&!this.styles[c])return!1;var l=c===void 0?this.styles:{0:this.styles[c]};for(var A in l)for(var a in l[A])if(l[A][a][h]!==void 0)return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var c,l,A=this.styles,a=0,E=!0,f=0;for(var v in A){for(var d in c=0,A[v]){var g;a++,(g=A[v][d]).hasOwnProperty(h)?(l?g[h]!==l&&(E=!1):l=g[h],g[h]===this[h]&&delete g[h]):E=!1,Object.keys(g).length!==0?c++:delete A[v][d]}c===0&&delete A[v]}for(var _=0;_<this._textLines.length;_++)f+=this._textLines[_].length;E&&a===f&&(this[h]=l,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&h!==""){var c,l,A,a=this.styles;for(l in a){for(A in c=a[l])delete c[A][h],Object.keys(c[A]).length===0&&delete c[A];Object.keys(c).length===0&&delete a[l]}}},_extendStyles:function(h,c){var l=this.get2DCursorLocation(h);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),D.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),c)},get2DCursorLocation:function(h,c){h===void 0&&(h=this.selectionStart);for(var l=c?this._unwrappedTextLines:this._textLines,A=l.length,a=0;a<A;a++){if(h<=l[a].length)return{lineIndex:a,charIndex:h};h-=l[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:l[a-1].length<h?l[a-1].length:h}},getSelectionStyles:function(h,c,l){h===void 0&&(h=this.selectionStart||0),c===void 0&&(c=this.selectionEnd||h);for(var A=[],a=h;a<c;a++)A.push(this.getStyleAtPosition(a,l));return A},getStyleAtPosition:function(h,c){var l=this.get2DCursorLocation(h);return(c?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex))||{}},setSelectionStyles:function(h,c,l){c===void 0&&(c=this.selectionStart||0),l===void 0&&(l=this.selectionEnd||c);for(var A=c;A<l;A++)this._extendStyles(A,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,c){var l=this.styles&&this.styles[h];return l?l[c]:null},getCompleteStyleDeclaration:function(h,c){for(var l,A=this._getStyleDeclaration(h,c)||{},a={},E=0;E<this._styleProperties.length;E++)a[l=this._styleProperties[E]]=A[l]===void 0?this[l]:A[l];return a},_setStyleDeclaration:function(h,c,l){this.styles[h][c]=l},_deleteStyleDeclaration:function(h,c){delete this.styles[h][c]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(c){c.textDecoration&&(c.textDecoration.indexOf("underline")>-1&&(c.underline=!0),c.textDecoration.indexOf("line-through")>-1&&(c.linethrough=!0),c.textDecoration.indexOf("overline")>-1&&(c.overline=!0),delete c.textDecoration)}D.IText=D.util.createClass(D.Text,D.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(c,l){this.callSuper("initialize",c,l),this.initBehavior()},setSelectionStart:function(c){c=Math.max(c,0),this._updateAndFire("selectionStart",c)},setSelectionEnd:function(c){c=Math.min(c,this.text.length),this._updateAndFire("selectionEnd",c)},_updateAndFire:function(c,l){this[c]!==l&&(this._fireSelectionChanged(),this[c]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(c){this.clearContextTop(),this.callSuper("render",c),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(c){this.callSuper("_render",c)},clearContextTop:function(c){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var l=this.canvas.contextTop,A=this.canvas.viewportTransform;l.save(),l.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this.transform(l),this._clearTextArea(l),c||l.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var c=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(c,l):this.renderSelection(c,l),l.restore()}},_clearTextArea:function(c){var l=this.width+4,A=this.height+4;c.clearRect(-l/2,-A/2,l,A)},_getCursorBoundaries:function(c){c===void 0&&(c=this.selectionStart);var l=this._getLeftOffset(),A=this._getTopOffset(),a=this._getCursorBoundariesOffsets(c);return{left:l,top:A,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(c){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,A,a,E,f=0,v=0,d=this.get2DCursorLocation(c);a=d.charIndex,A=d.lineIndex;for(var g=0;g<A;g++)f+=this.getHeightOfLine(g);l=this._getLineLeftOffset(A);var _=this.__charBounds[A][a];return _&&(v=_.left),this.charSpacing!==0&&a===this._textLines[A].length&&(v-=this._getWidthOfCharSpacing()),E={top:f,left:l+(v>0?v:0)},this.direction==="rtl"&&(E.left*=-1),this.cursorOffsetCache=E,this.cursorOffsetCache},renderCursor:function(c,l){var A=this.get2DCursorLocation(),a=A.lineIndex,E=A.charIndex>0?A.charIndex-1:0,f=this.getValueOfPropertyAt(a,E,"fontSize"),v=this.scaleX*this.canvas.getZoom(),d=this.cursorWidth/v,g=c.topOffset,_=this.getValueOfPropertyAt(a,E,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-f*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(c,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,E,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(c.left+c.leftOffset-d/2,g+c.top+_,d,f)},renderSelection:function(c,l){for(var A=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,E=this.textAlign.indexOf("justify")!==-1,f=this.get2DCursorLocation(A),v=this.get2DCursorLocation(a),d=f.lineIndex,g=v.lineIndex,_=f.charIndex<0?0:f.charIndex,F=v.charIndex<0?0:v.charIndex,y=d;y<=g;y++){var T,S=this._getLineLeftOffset(y)||0,I=this.getHeightOfLine(y),N=0,W=0;if(y===d&&(N=this.__charBounds[d][_].left),y>=d&&y<g)W=E&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===g)if(F===0)W=this.__charBounds[g][F].left;else{var z=this._getWidthOfCharSpacing();W=this.__charBounds[g][F-1].left+this.__charBounds[g][F-1].width-z}T=I,(this.lineHeight<1||y===g&&this.lineHeight>1)&&(I/=this.lineHeight);var se=c.left+S+N,xe=W-N,te=I,j=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",te=1,j=I):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(se=this.width-se-xe),l.fillRect(se,c.top+c.topOffset+j,xe,te),c.topOffset+=T}},getCurrentCharFontSize:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fontSize")},getCurrentCharColor:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fill")},_getCurrentCharIndex:function(){var c=this.get2DCursorLocation(this.selectionStart,!0),l=c.charIndex>0?c.charIndex-1:0;return{l:c.lineIndex,c:l}}}),D.IText.fromObject=function(c,l){if(h(c),c.styles)for(var A in c.styles)for(var a in c.styles[A])h(c.styles[A][a]);D.Object._fromObject("IText",c,l,"text")}}(),ue=D.util.object.clone,D.util.object.extend(D.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var h=this;this.on("added",function(){var c=h.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,h._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(h))})},initRemovedHandler:function(){var h=this;this.on("removed",function(){var c=h.canvas;c&&(c._iTextInstances=c._iTextInstances||[],D.util.removeFromArray(c._iTextInstances,h),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,h._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(h){h._mouseUpITextHandler=function(){h._iTextInstances&&h._iTextInstances.forEach(function(c){c.__isMousedown=!1})},h.on("mouse:up",h._mouseUpITextHandler)},_removeCanvasHandlers:function(h){h.off("mouse:up",h._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(h,c,l,A){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},h.animate("_currentCursorOpacity",c,{duration:l,onComplete:function(){a.isAborted||h[A]()},onChange:function(){h.canvas&&h.selectionStart===h.selectionEnd&&h.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var h=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){h._currentTickCompleteState=h._animateCursor(h,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(h){var c=this,l=h?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},l)},abortCursorAnimation:function(){var h=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,h&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(h){var c=0,l=h-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l--;for(;/\S/.test(this._text[l])&&l>-1;)c++,l--;return h-c},findWordBoundaryRight:function(h){var c=0,l=h;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)c++,l++;return h+c},findLineBoundaryLeft:function(h){for(var c=0,l=h-1;!/\n/.test(this._text[l])&&l>-1;)c++,l--;return h-c},findLineBoundaryRight:function(h){for(var c=0,l=h;!/\n/.test(this._text[l])&&l<this._text.length;)c++,l++;return h+c},searchWordBoundary:function(h,c){for(var l=this._text,A=this._reSpace.test(l[h])?h-1:h,a=l[A],E=D.reNonWord;!E.test(a)&&A>0&&A<l.length;)a=l[A+=c];return E.test(a)&&(A+=c===1?0:1),A},selectWord:function(h){h=h||this.selectionStart;var c=this.searchWordBoundary(h,-1),l=this.searchWordBoundary(h,1);this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(h){h=h||this.selectionStart;var c=this.findLineBoundaryLeft(h),l=this.findLineBoundaryRight(h);return this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(h){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(h),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(h){h._iTextInstances&&h._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(h){if(this.__isMousedown&&this.isEditing){var c=this.getSelectionStartFromPointer(h.e),l=this.selectionStart,A=this.selectionEnd;(c===this.__selectionStartOnMouseDown&&l!==A||l!==c&&A!==c)&&(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===l&&this.selectionEnd===A||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(h,c,l){var A=l.slice(0,h),a=D.util.string.graphemeSplit(A).length;if(h===c)return{selectionStart:a,selectionEnd:a};var E=l.slice(h,c);return{selectionStart:a,selectionEnd:a+D.util.string.graphemeSplit(E).length}},fromGraphemeToStringSelection:function(h,c,l){var A=l.slice(0,h).join("").length;return h===c?{selectionStart:A,selectionEnd:A}:{selectionStart:A,selectionEnd:A+l.slice(h,c).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var h=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=h.selectionStart,this.hiddenTextarea.selectionEnd=h.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var h=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=h.selectionEnd,this.inCompositionMode||(this.selectionStart=h.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var h=this._calcTextareaPosition();this.hiddenTextarea.style.left=h.left,this.hiddenTextarea.style.top=h.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var h=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(h),l=this.get2DCursorLocation(h),A=l.lineIndex,a=l.charIndex,E=this.getValueOfPropertyAt(A,a,"fontSize")*this.lineHeight,f=c.leftOffset,v=this.calcTransformMatrix(),d={x:c.left+f,y:c.top+c.topOffset+E},g=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,F=_.width/g,y=_.height/g,T=F-E,S=y-E,I=_.clientWidth/F,N=_.clientHeight/y;return d=D.util.transformPoint(d,v),(d=D.util.transformPoint(d,this.canvas.viewportTransform)).x*=I,d.y*=N,d.x<0&&(d.x=0),d.x>T&&(d.x=T),d.y<0&&(d.y=0),d.y>S&&(d.y=S),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:d.x+"px",top:d.y+"px",fontSize:E+"px",charHeight:E}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var h=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),h&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),h&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var h in this.styles)this._textLines[h]||delete this.styles[h]},removeStyleFromTo:function(h,c){var l,A,a=this.get2DCursorLocation(h,!0),E=this.get2DCursorLocation(c,!0),f=a.lineIndex,v=a.charIndex,d=E.lineIndex,g=E.charIndex;if(f!==d){if(this.styles[f])for(l=v;l<this._unwrappedTextLines[f].length;l++)delete this.styles[f][l];if(this.styles[d])for(l=g;l<this._unwrappedTextLines[d].length;l++)(A=this.styles[d][l])&&(this.styles[f]||(this.styles[f]={}),this.styles[f][v+l-g]=A);for(l=f+1;l<=d;l++)delete this.styles[l];this.shiftLineStyles(d,f-d)}else if(this.styles[f]){A=this.styles[f];var _,F,y=g-v;for(l=v;l<g;l++)delete A[l];for(F in this.styles[f])(_=parseInt(F,10))>=g&&(A[_-y]=A[F],delete A[F])}},shiftLineStyles:function(h,c){var l=ue(this.styles);for(var A in this.styles){var a=parseInt(A,10);a>h&&(this.styles[a+c]=l[a],l[a-c]||delete this.styles[a])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(h,c,l,A){var a,E={},f=!1,v=this._unwrappedTextLines[h].length===c;for(var d in l||(l=1),this.shiftLineStyles(h,l),this.styles[h]&&(a=this.styles[h][c===0?c:c-1]),this.styles[h]){var g=parseInt(d,10);g>=c&&(f=!0,E[g-c]=this.styles[h][d],v&&c===0||delete this.styles[h][d])}var _=!1;for(f&&!v&&(this.styles[h+l]=E,_=!0),_&&l--;l>0;)A&&A[l-1]?this.styles[h+l]={0:ue(A[l-1])}:a?this.styles[h+l]={0:ue(a)}:delete this.styles[h+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(h,c,l,A){this.styles||(this.styles={});var a=this.styles[h],E=a?ue(a):{};for(var f in l||(l=1),E){var v=parseInt(f,10);v>=c&&(a[v+l]=E[v],E[v-l]||delete a[v])}if(this._forceClearCache=!0,A)for(;l--;)Object.keys(A[l]).length&&(this.styles[h]||(this.styles[h]={}),this.styles[h][c+l]=ue(A[l]));else if(a)for(var d=a[c?c-1:1];d&&l--;)this.styles[h][c+l]=ue(d)},insertNewStyleBlock:function(h,c,l){for(var A=this.get2DCursorLocation(c,!0),a=[0],E=0,f=0;f<h.length;f++)h[f]===`
`?a[++E]=0:a[E]++;for(a[0]>0&&(this.insertCharStyleObject(A.lineIndex,A.charIndex,a[0],l),l=l&&l.slice(a[0]+1)),E&&this.insertNewlineStyleObject(A.lineIndex,A.charIndex+a[0],E),f=1;f<E;f++)a[f]>0?this.insertCharStyleObject(A.lineIndex+f,0,a[f],l):l&&this.styles[A.lineIndex+f]&&l[0]&&(this.styles[A.lineIndex+f][0]=l[0]),l=l&&l.slice(a[f]+1);a[f]>0&&this.insertCharStyleObject(A.lineIndex+f,0,a[f],l)},setSelectionStartEndWithShift:function(h,c,l){l<=h?(c===h?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=h),this.selectionStart=l):l>h&&l<c?this._selectionDirection==="right"?this.selectionEnd=l:this.selectionStart=l:(c===h?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=l)},setSelectionInBoundaries:function(){var h=this.text.length;this.selectionStart>h?this.selectionStart=h:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>h?this.selectionEnd=h:this.selectionEnd<0&&(this.selectionEnd=0)}}),D.util.object.extend(D.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var c=h.pointer;this.isTripleClick(c)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=c,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var c=this.canvas._activeObject;if(c&&c!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var c=this.getSelectionStartFromPointer(h),l=this.selectionStart,A=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(l,A,c):(this.selectionStart=c,this.selectionEnd=c),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var c,l=this.getLocalPointer(h),A=0,a=0,E=0,f=0,v=0,d=0,g=this._textLines.length;d<g&&E<=l.y;d++)E+=this.getHeightOfLine(d)*this.scaleY,v=d,d>0&&(f+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));a=this._getLineLeftOffset(v)*this.scaleX,c=this._textLines[v],this.direction==="rtl"&&(l.x=this.width*this.scaleX-l.x+a);for(var _=0,F=c.length;_<F&&(A=a,(a+=this.__charBounds[v][_].kernedWidth*this.scaleX)<=l.x);_++)f++;return this._getNewSelectionStartFromOffset(l,A,a,f,F)},_getNewSelectionStartFromOffset:function(h,c,l,A,a){var E=h.x-c,f=l-h.x,v=A+(f>E||f<0?0:1);return this.flipX&&(v=a-v),v>this._text.length&&(v=this._text.length),v}}),D.util.object.extend(D.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=D.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):D.document.body.appendChild(this.hiddenTextarea),D.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),D.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),D.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),D.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),D.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),D.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),D.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),D.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),D.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(D.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var c=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in c)this[c[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var c=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var l,A,a,E,f,v=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,g=v.length,_=g-d,F=this.selectionStart,y=this.selectionEnd,T=F!==y;if(this.hiddenTextarea.value==="")return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),I=F>S.selectionStart;T?(l=this._text.slice(F,y),_+=y-F):g<d&&(l=I?this._text.slice(y+_,y):this._text.slice(F,F-_)),A=v.slice(S.selectionEnd-_,S.selectionEnd),l&&l.length&&(A.length&&(a=this.getSelectionStyles(F,F+1,!1),a=A.map(function(){return a[0]})),T?(E=F,f=y):I?(E=y-l.length,f=y):(E=y,f=y+l.length),this.removeStyleFromTo(E,f)),A.length&&(c&&A.join("")===D.copiedText&&!D.disableStyleCopyPaste&&(a=D.copiedTextStyle),this.insertNewStyleBlock(A,F,a)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(D.copiedText=this.getSelectedText(),D.disableStyleCopyPaste?D.copiedTextStyle=null:D.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||D.window.clipboardData},_getWidthBeforeCursor:function(h,c){var l,A=this._getLineLeftOffset(h);return c>0&&(A+=(l=this.__charBounds[h][c-1]).left+l.width),A},getDownCursorOffset:function(h,c){var l=this._getSelectionForOffset(h,c),A=this.get2DCursorLocation(l),a=A.lineIndex;if(a===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-l;var E=A.charIndex,f=this._getWidthBeforeCursor(a,E),v=this._getIndexOnLine(a+1,f);return this._textLines[a].slice(E).length+v+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(h,c){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&c?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,c){var l=this._getSelectionForOffset(h,c),A=this.get2DCursorLocation(l),a=A.lineIndex;if(a===0||h.metaKey||h.keyCode===33)return-l;var E=A.charIndex,f=this._getWidthBeforeCursor(a,E),v=this._getIndexOnLine(a-1,f),d=this._textLines[a].slice(0,E),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+v-d.length+(1-g)},_getIndexOnLine:function(h,c){for(var l,A,a=this._textLines[h],E=this._getLineLeftOffset(h),f=0,v=0,d=a.length;v<d;v++)if((E+=l=this.__charBounds[h][v].width)>c){A=!0;var g=E-l,_=E,F=Math.abs(g-c);f=Math.abs(_-c)<F?v:v-1;break}return A||(f=a.length-1),f},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,c){var l=this["get"+h+"CursorOffset"](c,this._selectionDirection==="right");c.shiftKey?this.moveCursorWithShift(l):this.moveCursorWithoutShift(l),l!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var c=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,c),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,c,l){var A;if(h.altKey)A=this["findWordBoundary"+l](this[c]);else{if(!h.metaKey&&h.keyCode!==35&&h.keyCode!==36)return this[c]+=l==="Left"?-1:1,!0;A=this["findLineBoundary"+l](this[c])}if(typeof A!==void 0&&this[c]!==A)return this[c]=A,!0},_moveLeft:function(h,c){return this._move(h,c,"Left")},_moveRight:function(h,c){return this._move(h,c,"Right")},moveCursorLeftWithoutShift:function(h){var c=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(c=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,c},moveCursorLeftWithShift:function(h){return this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,c){var l="moveCursor"+h+"With";this._currentCursorOpacity=1,c.shiftKey?l+="Shift":l+="outShift",this[l](c)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var c=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(c=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,c},removeChars:function(h,c){c===void 0&&(c=h+1),this.removeStyleFromTo(h,c),this._text.splice(h,c-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,c,l,A){A===void 0&&(A=l),A>l&&this.removeStyleFromTo(l,A);var a=D.util.string.graphemeSplit(h);this.insertNewStyleBlock(a,l,c),this._text=[].concat(this._text.slice(0,l),a,this._text.slice(A)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=D.util.toFixed,c=/  +/g;D.util.object.extend(D.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),A=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(A)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var A=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",A?'text-decoration="'+A+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,A){var a,E=[],f=[],v=l;this._setSVGBg(f);for(var d=0,g=this._textLines.length;d<g;d++)a=this._getLineLeftOffset(d),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(f,d,A+a,v),this._setSVGTextLineText(E,d,A+a,v),v+=this.getHeightOfLine(d);return{textSpans:E,textBgRects:f}},_createTextCharSpan:function(l,A,a,E){var f=l!==l.trim()||l.match(c),v=this.getSvgSpanStyles(A,f),d=v?'style="'+v+'"':"",g=A.deltaY,_="",F=D.Object.NUM_FRACTION_DIGITS;return g&&(_=' dy="'+h(g,F)+'" '),['<tspan x="',h(a,F),'" y="',h(E,F),'" ',_,d,">",D.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,A,a,E){var f,v,d,g,_,F=this.getHeightOfLine(A),y=this.textAlign.indexOf("justify")!==-1,T="",S=0,I=this._textLines[A];E+=F*(1-this._fontSizeFraction)/this.lineHeight;for(var N=0,W=I.length-1;N<=W;N++)_=N===W||this.charSpacing,T+=I[N],d=this.__charBounds[A][N],S===0?(a+=d.kernedWidth-d.width,S+=d.width):S+=d.kernedWidth,y&&!_&&this._reSpaceAndTab.test(I[N])&&(_=!0),_||(f=f||this.getCompleteStyleDeclaration(A,N),v=this.getCompleteStyleDeclaration(A,N+1),_=this._hasStyleChangedForSvg(f,v)),_&&(g=this._getStyleDeclaration(A,N)||{},l.push(this._createTextCharSpan(T,g,a,E)),T="",f=v,a+=S,S=0)},_pushTextBgRect:function(l,A,a,E,f,v){var d=D.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(A),' x="',h(a,d),'" y="',h(E,d),'" width="',h(f,d),'" height="',h(v,d),`"></rect>
`)},_setSVGTextLineBg:function(l,A,a,E){for(var f,v,d=this._textLines[A],g=this.getHeightOfLine(A)/this.lineHeight,_=0,F=0,y=this.getValueOfPropertyAt(A,0,"textBackgroundColor"),T=0,S=d.length;T<S;T++)f=this.__charBounds[A][T],(v=this.getValueOfPropertyAt(A,T,"textBackgroundColor"))!==y?(y&&this._pushTextBgRect(l,y,a+F,E,_,g),F=f.left,_=f.width,y=v):_+=f.kernedWidth;v&&this._pushTextBgRect(l,v,a+F,E,_,g)},_getFillAttributes:function(l){var A=l&&typeof l=="string"?new D.Color(l):"";return A&&A.getSource()&&A.getAlpha()!==1?'opacity="'+A.getAlpha()+'" fill="'+A.setAlpha(1).toRgb()+'"':'fill="'+l+'"'},_getSVGLineTopOffset:function(l){for(var A,a=0,E=0;E<l;E++)a+=this.getHeightOfLine(E);return A=this.getHeightOfLine(E),{lineTop:a,offset:(this._fontSizeMult-this._fontSizeFraction)*A/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){return D.Object.prototype.getSvgStyles.call(this,l)+" white-space: pre;"}})}(),function(h){var c=h.fabric||(h.fabric={});c.Textbox=c.util.createClass(c.IText,c.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:c.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var A=0,a=0,E=0,f={},v=0;v<l.graphemeLines.length;v++)l.graphemeText[E]===`
`&&v>0?(a=0,E++,A++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[E])&&v>0&&(a++,E++),f[v]={line:A,offset:a},E+=l.graphemeLines[v].length,a+=l.graphemeLines[v].length;return f},styleHas:function(l,A){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[A];a&&(A=a.line)}return c.Text.prototype.styleHas.call(this,l,A)},isEmptyStyles:function(l){if(!this.styles)return!0;var A,a,E=0,f=!1,v=this._styleMap[l],d=this._styleMap[l+1];for(var g in v&&(l=v.line,E=v.offset),d&&(f=d.line===l,A=d.offset),a=l===void 0?this.styles:{line:this.styles[l]})for(var _ in a[g])if(_>=E&&(!f||_<A))for(var F in a[g][_])return!1;return!0},_getStyleDeclaration:function(l,A){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[l];if(!a)return null;l=a.line,A=a.offset+A}return this.callSuper("_getStyleDeclaration",l,A)},_setStyleDeclaration:function(l,A,a){var E=this._styleMap[l];l=E.line,A=E.offset+A,this.styles[l][A]=a},_deleteStyleDeclaration:function(l,A){var a=this._styleMap[l];l=a.line,A=a.offset+A,delete this.styles[l][A]},_getLineStyle:function(l){var A=this._styleMap[l];return!!this.styles[A.line]},_setLineStyle:function(l){var A=this._styleMap[l];this.styles[A.line]={}},_wrapText:function(l,A){var a,E=[];for(this.isWrapping=!0,a=0;a<l.length;a++)E=E.concat(this._wrapLine(l[a],a,A));return this.isWrapping=!1,E},_measureWord:function(l,A,a){var E,f=0;a=a||0;for(var v=0,d=l.length;v<d;v++)f+=this._getGraphemeBox(l[v],A,v+a,E,!0).kernedWidth,E=l[v];return f},_wrapLine:function(l,A,a,E){var f=0,v=this.splitByGrapheme,d=[],g=[],_=v?c.util.string.graphemeSplit(l):l.split(this._wordJoiners),F="",y=0,T=v?"":" ",S=0,I=0,N=0,W=!0,z=this._getWidthOfCharSpacing();E=E||0,_.length===0&&_.push([]),a-=E;for(var se=0;se<_.length;se++)F=v?_[se]:c.util.string.graphemeSplit(_[se]),S=this._measureWord(F,A,y),y+=F.length,(f+=I+S-z)>a&&!W?(d.push(g),g=[],f=S,W=!0):f+=z,W||v||g.push(T),g=g.concat(F),I=v?0:this._measureWord([T],A,y),y++,W=!1,S>N&&(N=S);return se&&d.push(g),N+E>this.dynamicMinWidth&&(this.dynamicMinWidth=N-z+E),d},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var A=c.Text.prototype._splitTextIntoLines.call(this,l),a=this._wrapText(A.lines,this.width),E=new Array(a.length),f=0;f<a.length;f++)E[f]=a[f].join("");return A.lines=E,A.graphemeLines=a,A},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var A in this._styleMap)this._textLines[A]&&(l[this._styleMap[A].line]=1);for(var A in this.styles)l[A]||delete this.styles[A]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),c.Textbox.fromObject=function(l,A){return c.Object._fromObject("Textbox",l,A,"text")}}(e),function(){var h=D.controlsUtils,c=h.scaleSkewCursorStyleHandler,l=h.scaleCursorStyleHandler,A=h.scalingEqually,a=h.scalingYOrSkewingX,E=h.scalingXOrSkewingY,f=h.scaleOrSkewActionName,v=D.Object.prototype.controls;if(v.ml=new D.Control({x:-.5,y:0,cursorStyleHandler:c,actionHandler:E,getActionName:f}),v.mr=new D.Control({x:.5,y:0,cursorStyleHandler:c,actionHandler:E,getActionName:f}),v.mb=new D.Control({x:0,y:.5,cursorStyleHandler:c,actionHandler:a,getActionName:f}),v.mt=new D.Control({x:0,y:-.5,cursorStyleHandler:c,actionHandler:a,getActionName:f}),v.tl=new D.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:A}),v.tr=new D.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:A}),v.bl=new D.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:A}),v.br=new D.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:A}),v.mtr=new D.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),D.Textbox){var d=D.Textbox.prototype.controls={};d.mtr=v.mtr,d.tr=v.tr,d.br=v.br,d.tl=v.tl,d.bl=v.bl,d.mt=v.mt,d.mb=v.mb,d.mr=new D.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:c,actionName:"resizing"}),d.ml=new D.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:c,actionName:"resizing"})}}()},192:()=>{},898:()=>{},245:()=>{}},Hn={};function g0(t){var e=Hn[t];if(e!==void 0)return e.exports;var r=Hn[t]={exports:{}};return Ro[t](r,r.exports,g0),r.exports}g0.d=(t,e)=>{for(var r in e)g0.o(e,r)&&!g0.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},g0.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ci={};(()=>{let t;g0.d(ci,{R:()=>t}),t=typeof document!="undefined"&&typeof window!="undefined"?g0(653).fabric:{version:"5.2.1"}})();var xt=ci.R;/*!
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Camera Enhancer JS Edition
 * @website https://www.dynamsoft.com
 * @copyright Copyright 2023, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 3.3.4 (js 20230414)
 * @fileoverview Dynamsoft JavaScript Library for Camera Enhancer
 * More info on DCE JS: https://www.dynamsoft.com/camera-enhancer/docs/programming/javascript/?ver=latest
 */const pn=typeof self=="undefined";let j0,t0,Er,rn,Kt;if(typeof navigator!="undefined"&&(j0=navigator,t0=j0.userAgent,Er=j0.platform,rn=j0.mediaDevices),!pn){const t={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:j0.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:Er,search:"Win"},Mac:{str:Er},Linux:{str:Er}};let r="unknownBrowser",n=0,x="unknownOS";for(let i in t){const o=t[i]||{};let s=o.str||t0,u=o.search||i,B=o.verStr||t0,C=o.verSearch||i;if(C instanceof Array||(C=[C]),s.indexOf(u)!=-1){r=i;for(let p of C){let m=B.indexOf(p);if(m!=-1){n=parseFloat(B.substring(m+p.length+1));break}}break}}for(let i in e){const o=e[i]||{};let s=o.str||t0,u=o.search||i;if(s.indexOf(u)!=-1){x=i;break}}x=="Linux"&&t0.indexOf("Windows NT")!=-1&&(x="HarmonyOS"),Kt={browser:r,version:n,OS:x}}pn&&(Kt={browser:"ssr",version:0,OS:"ssr"});typeof WebAssembly!="undefined"&&t0&&(/Safari/.test(t0)&&!/Chrome/.test(t0)&&/\(.+\s11_2_([2-6]).*\)/.test(t0));!rn||rn.getUserMedia;Kt.browser==="Chrome"&&Kt.version>66||Kt.browser==="Safari"&&Kt.version>13||Kt.browser==="OPR"&&Kt.version>43||Kt.browser==="Edge"&&Kt.version;(()=>{if(!pn&&document.currentScript){let t=document.currentScript.src,e=t.indexOf("?");if(e!=-1)t=t.substring(0,e);else{let r=t.indexOf("#");r!=-1&&(t=t.substring(0,r))}return t.substring(0,t.lastIndexOf("/")+1)}return"./"})();typeof document!="undefined"&&typeof window!="undefined"&&(xt.StaticCanvas.prototype.dispose=function(){return this.isRendering&&(xt.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),xt.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},xt.Object.prototype.transparentCorners=!1,xt.Object.prototype.cornerSize=20,xt.Object.prototype.touchCornerSize=100,xt.Object.prototype.cornerColor="rgb(254,142,20)",xt.Object.prototype.cornerStyle="circle",xt.Object.prototype.strokeUniform=!0,xt.Object.prototype.hasBorders=!1,xt.Canvas.prototype.containerClass="",xt.Canvas.prototype.getPointer=function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var r,n=this.upperCanvasEl,x=xt.util.getPointer(t,n),i=n.getBoundingClientRect(),o=i.width||0,s=i.height||0;o&&s||("top"in i&&"bottom"in i&&(s=Math.abs(i.top-i.bottom)),"right"in i&&"left"in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),x.x=x.x-this._offset.left,x.y=x.y-this._offset.top,e||(x=this.restorePointerVpt(x));var u=this.getRetinaScaling();if(u!==1&&(x.x/=u,x.y/=u),o!==0&&s!==0){var B=window.getComputedStyle(n).objectFit,C=n.width,p=n.height,m=o,w=s;r={width:C/m,height:p/w};var b,R,L=C/p,X=m/w;return B==="contain"?L>X?(b=m,R=m/L,{x:x.x*r.width,y:(x.y-(w-R)/2)*r.width}):(b=w*L,R=w,{x:(x.x-(m-b)/2)*r.height,y:x.y*r.height}):B==="cover"?L>X?{x:(C-r.height*m)/2+x.x*r.height,y:x.y*r.height}:{x:x.x*r.width,y:(p-r.width*w)/2+x.y*r.width}:{x:x.x*r.width,y:x.y*r.height}}return r={width:1,height:1},{x:x.x*r.width,y:x.y*r.height}},xt.Canvas.prototype._onTouchStart=function(t){var e=this.findTarget(t);!this.allowTouchScrolling&&t.cancelable&&t.preventDefault&&t.preventDefault(),e&&t.cancelable&&t.preventDefault&&t.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var r=this.upperCanvasEl,n=this._getEventPrefix();xt.util.addListener(xt.document,"touchend",this._onTouchEnd,{passive:!1}),xt.util.addListener(xt.document,"touchmove",this._onMouseMove,{passive:!1}),xt.util.removeListener(r,n+"down",this._onMouseDown)},xt.Textbox.prototype._wrapLine=function(t,e,r,n){const x=t.match(/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/g),i=!(!x||!x.length);var o=0,s=this.splitByGrapheme||i,u=[],B=[],C=s?xt.util.string.graphemeSplit(t):t.split(this._wordJoiners),p="",m=0,w=s?"":" ",b=0,R=0,L=0,X=!0,k=this._getWidthOfCharSpacing();n=n||0,C.length===0&&C.push([]),r-=n;for(var J=0;J<C.length;J++)p=s?C[J]:xt.util.string.graphemeSplit(C[J]),b=this._measureWord(p,e,m),m+=p.length,(o+=R+b-k)>r&&!X?(u.push(B),B=[],o=b,X=!0):o+=k,X||s||B.push(w),B=B.concat(p),R=s?0:this._measureWord([w],e,m),m++,X=!1,b>L&&(L=b);return J&&u.push(B),L+n>this.dynamicMinWidth&&(this.dynamicMinWidth=L-k+n),u});var Wn;(function(t){t.GREY="grey",t.GREY32="grey32",t.RGBA="rgba",t.RBGA="rbga",t.GRBA="grba",t.GBRA="gbra",t.BRGA="brga",t.BGRA="bgra"})(Wn||(Wn={}));var Xn,Yn,zn,Kn,Zn,Jn,$n,qn,Qn,ex,tx,rx,nx,xx,ix,ox,ax,sx,Ex,cx,lx,ux,hx,fx,Ax,Bx;(function(t){t[t.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",t[t.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",t[t.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",t[t.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",t[t.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",t[t.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",t[t.BICM_SKIP=0]="BICM_SKIP",t[t.BICM_REV=2147483648]="BICM_REV"})(Xn||(Xn={})),function(t){t[t.BCM_AUTO=1]="BCM_AUTO",t[t.BCM_GENERAL=2]="BCM_GENERAL",t[t.BCM_SKIP=0]="BCM_SKIP",t[t.BCM_REV=2147483648]="BCM_REV"}(Yn||(Yn={})),function(t){t[t.BF2_NULL=0]="BF2_NULL",t[t.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",t[t.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",t[t.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",t[t.BF2_POSTNET=2097152]="BF2_POSTNET",t[t.BF2_PLANET=4194304]="BF2_PLANET",t[t.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",t[t.BF2_RM4SCC=16777216]="BF2_RM4SCC",t[t.BF2_DOTCODE=2]="BF2_DOTCODE",t[t.BF2_PHARMACODE_ONE_TRACK=4]="BF2_PHARMACODE_ONE_TRACK",t[t.BF2_PHARMACODE_TWO_TRACK=8]="BF2_PHARMACODE_TWO_TRACK",t[t.BF2_PHARMACODE=12]="BF2_PHARMACODE",t[t.BF2_ALL=-1]="BF2_ALL"}(zn||(zn={})),function(t){t[t.BM_AUTO=1]="BM_AUTO",t[t.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",t[t.BM_SKIP=0]="BM_SKIP",t[t.BM_THRESHOLD=4]="BM_THRESHOLD",t[t.BM_REV=2147483648]="BM_REV"}(Kn||(Kn={})),function(t){t[t.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(Zn||(Zn={})),function(t){t[t.CFM_GENERAL=1]="CFM_GENERAL"}(Jn||(Jn={})),function(t){t[t.CCM_AUTO=1]="CCM_AUTO",t[t.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",t[t.CCM_SKIP=0]="CCM_SKIP",t[t.CCM_REV=2147483648]="CCM_REV"}($n||($n={})),function(t){t[t.CICM_GENERAL=1]="CICM_GENERAL",t[t.CICM_SKIP=0]="CICM_SKIP",t[t.CICM_REV=2147483648]="CICM_REV"}(qn||(qn={})),function(t){t[t.CM_IGNORE=1]="CM_IGNORE",t[t.CM_OVERWRITE=2]="CM_OVERWRITE"}(Qn||(Qn={})),function(t){t[t.DM_SKIP=0]="DM_SKIP",t[t.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",t[t.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",t[t.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",t[t.DM_SMOOTHING=8]="DM_SMOOTHING",t[t.DM_MORPHING=16]="DM_MORPHING",t[t.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",t[t.DM_SHARPENING=64]="DM_SHARPENING",t[t.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",t[t.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(ex||(ex={})),function(t){t[t.DRM_AUTO=1]="DRM_AUTO",t[t.DRM_GENERAL=2]="DRM_GENERAL",t[t.DRM_BROAD_WARP=4]="DRM_BROAD_WARP",t[t.DRM_LOCAL_REFERENCE=8]="DRM_LOCAL_REFERENCE",t[t.DRM_DEWRINKLE=16]="DRM_DEWRINKLE",t[t.DRM_SKIP=0]="DRM_SKIP",t[t.DRM_REV=2147483648]="DRM_REV"}(tx||(tx={})),function(t){t[t.DPMCRM_AUTO=1]="DPMCRM_AUTO",t[t.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",t[t.DPMCRM_SKIP=0]="DPMCRM_SKIP",t[t.DPMCRM_REV=2147483648]="DPMCRM_REV"}(rx||(rx={})),function(t){t[t.GTM_INVERTED=1]="GTM_INVERTED",t[t.GTM_ORIGINAL=2]="GTM_ORIGINAL",t[t.GTM_SKIP=0]="GTM_SKIP",t[t.GTM_REV=2147483648]="GTM_REV"}(nx||(nx={})),function(t){t[t.IPM_AUTO=1]="IPM_AUTO",t[t.IPM_GENERAL=2]="IPM_GENERAL",t[t.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",t[t.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",t[t.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",t[t.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",t[t.IPM_SKIP=0]="IPM_SKIP",t[t.IPM_REV=2147483648]="IPM_REV"}(xx||(xx={})),function(t){t[t.IRSM_MEMORY=1]="IRSM_MEMORY",t[t.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",t[t.IRSM_BOTH=4]="IRSM_BOTH"}(ix||(ix={})),function(t){t[t.LM_SKIP=0]="LM_SKIP",t[t.LM_AUTO=1]="LM_AUTO",t[t.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",t[t.LM_LINES=8]="LM_LINES",t[t.LM_STATISTICS=4]="LM_STATISTICS",t[t.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",t[t.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",t[t.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",t[t.LM_CENTRE=128]="LM_CENTRE",t[t.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",t[t.LM_REV=2147483648]="LM_REV"}(ox||(ox={})),function(t){t[t.PDFRM_RASTER=1]="PDFRM_RASTER",t[t.PDFRM_AUTO=2]="PDFRM_AUTO",t[t.PDFRM_VECTOR=4]="PDFRM_VECTOR",t[t.PDFRM_REV=2147483648]="PDFRM_REV"}(ax||(ax={})),function(t){t[t.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",t[t.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",t[t.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",t[t.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(sx||(sx={})),function(t){t[t.RPM_AUTO=1]="RPM_AUTO",t[t.RPM_GENERAL=2]="RPM_GENERAL",t[t.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",t[t.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",t[t.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",t[t.RPM_SKIP=0]="RPM_SKIP",t[t.RPM_REV=2147483648]="RPM_REV"}(Ex||(Ex={})),function(t){t[t.RCT_PIXEL=1]="RCT_PIXEL",t[t.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(cx||(cx={})),function(t){t[t.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",t[t.RT_RAW_TEXT=1]="RT_RAW_TEXT",t[t.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",t[t.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(lx||(lx={})),function(t){t[t.SUM_AUTO=1]="SUM_AUTO",t[t.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",t[t.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",t[t.SUM_SKIP=0]="SUM_SKIP",t[t.SUM_REV=2147483648]="SUM_REV"}(ux||(ux={})),function(t){t[t.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",t[t.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",t[t.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",t[t.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",t[t.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",t[t.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(hx||(hx={})),function(t){t[t.TFM_AUTO=1]="TFM_AUTO",t[t.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",t[t.TFM_SKIP=0]="TFM_SKIP",t[t.TFM_REV=2147483648]="TFM_REV"}(fx||(fx={})),function(t){t[t.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",t[t.TROM_POSITION=2]="TROM_POSITION",t[t.TROM_FORMAT=4]="TROM_FORMAT",t[t.TROM_SKIP=0]="TROM_SKIP",t[t.TROM_REV=2147483648]="TROM_REV"}(Ax||(Ax={})),function(t){t[t.TDM_AUTO=1]="TDM_AUTO",t[t.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",t[t.TDM_SKIP=0]="TDM_SKIP",t[t.TDM_REV=2147483648]="TDM_REV"}(Bx||(Bx={}));const _n=t=>{let e=parseInt(t).toString(16);const r=e.length;if(r<4)for(let n=0;n<4-r;n++)e="0"+e;return e.toUpperCase()};var Nt={},vt={},ot=Nt,Z0=String.fromCharCode,Po=Array.prototype.slice,li=Object.prototype.toString,ui=Object.prototype.hasOwnProperty,dx=Array.isArray,gx=Object.keys;function Mo(t){var e=typeof t;return e==="function"||e==="object"&&!!t}vt.isObject=Mo;function Dn(t){return dx?dx(t):li.call(t)==="[object Array]"}vt.isArray=Dn;function No(t){return typeof t=="string"||li.call(t)==="[object String]"}vt.isString=No;function hi(t){if(gx)return gx(t);var e=[];for(var r in t)ui.call(t,r)&&(e[e.length]=r);return e}vt.objectKeys=hi;function fi(t,e){if(ot.HAS_TYPED)switch(t){case 8:return new Uint8Array(e);case 16:return new Uint16Array(e)}return new Array(e)}vt.createBuffer=fi;function Lo(t){for(var e=t.length,r=fi(16,e),n=0;n<e;n++)r[n]=t.charCodeAt(n);return r}vt.stringToBuffer=Lo;function Ai(t){if(ot.CAN_CHARCODE_APPLY&&ot.CAN_CHARCODE_APPLY_TYPED){var e=t&&t.length;if(e<ot.APPLY_BUFFER_SIZE&&ot.APPLY_BUFFER_SIZE_OK)return Z0.apply(null,t);if(ot.APPLY_BUFFER_SIZE_OK===null)try{var r=Z0.apply(null,t);return e>ot.APPLY_BUFFER_SIZE&&(ot.APPLY_BUFFER_SIZE_OK=!0),r}catch{ot.APPLY_BUFFER_SIZE_OK=!1}}return Bi(t)}vt.codeToString_fast=Ai;function Bi(t){for(var e="",r=t&&t.length,n=0,x;n<r;){if(t.subarray?x=t.subarray(n,n+ot.APPLY_BUFFER_SIZE):x=t.slice(n,n+ot.APPLY_BUFFER_SIZE),n+=ot.APPLY_BUFFER_SIZE,ot.APPLY_BUFFER_SIZE_OK){e+=Z0.apply(null,x);continue}if(ot.APPLY_BUFFER_SIZE_OK===null)try{e+=Z0.apply(null,x),x.length>ot.APPLY_BUFFER_SIZE&&(ot.APPLY_BUFFER_SIZE_OK=!0);continue}catch{ot.APPLY_BUFFER_SIZE_OK=!1}return di(t)}return e}vt.codeToString_chunked=Bi;function di(t){for(var e="",r=t&&t.length,n=0;n<r;n++)e+=Z0(t[n]);return e}vt.codeToString_slow=di;function ko(t){for(var e=[],r=t&&t.length,n=0;n<r;n++)e[n]=t.charCodeAt(n);return e}vt.stringToCode=ko;function Uo(t){if(ot.HAS_TYPED)return new Uint16Array(t);if(Dn(t))return t;for(var e=t&&t.length,r=[],n=0;n<e;n++)r[n]=t[n];return r}vt.codeToBuffer=Uo;function jo(t){return Dn(t)?t:Po.call(t)}vt.bufferToCode=jo;function Vo(t){for(var e="",r=(""+t).toUpperCase().replace(/[^A-Z0-9]+/g,""),n=hi(ot.EncodingAliases),x=n.length,i=0,o,s,u,B=0;B<x;B++){if(o=n[B],o===r){e=o;break}for(s=o.length,u=i;u<s;u++)(o.slice(0,u)===r.slice(0,u)||o.slice(-u)===r.slice(-u))&&(e=o,i=u)}return ui.call(ot.EncodingAliases,e)?ot.EncodingAliases[e]:e}vt.canonicalizeEncodingName=Vo;var qt=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],cr=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],Yr="=".charCodeAt(0);function Go(t){var e,r,n,x,i,o;for(n=t&&t.length,r=0,e=[];r<n;){if(x=t[r++],r==n){e[e.length]=qt[x>>2],e[e.length]=qt[(x&3)<<4],e[e.length]=Yr,e[e.length]=Yr;break}if(i=t[r++],r==n){e[e.length]=qt[x>>2],e[e.length]=qt[(x&3)<<4|(i&240)>>4],e[e.length]=qt[(i&15)<<2],e[e.length]=Yr;break}o=t[r++],e[e.length]=qt[x>>2],e[e.length]=qt[(x&3)<<4|(i&240)>>4],e[e.length]=qt[(i&15)<<2|(o&192)>>6],e[e.length]=qt[o&63]}return Ai(e)}vt.base64encode=Go;function Ho(t){var e,r,n,x,i,o,s;for(o=t&&t.length,i=0,s=[];i<o;){do e=cr[t.charCodeAt(i++)&255];while(i<o&&e==-1);if(e==-1)break;do r=cr[t.charCodeAt(i++)&255];while(i<o&&r==-1);if(r==-1)break;s[s.length]=e<<2|(r&48)>>4;do{if(n=t.charCodeAt(i++)&255,n==61)return s;n=cr[n]}while(i<o&&n==-1);if(n==-1)break;s[s.length]=(r&15)<<4|(n&60)>>2;do{if(x=t.charCodeAt(i++)&255,x==61)return s;x=cr[x]}while(i<o&&x==-1);if(x==-1)break;s[s.length]=(n&3)<<6|x}return s}vt.base64decode=Ho;var R0={},Wo={15711649:33,15711650:34,15711651:35,15711652:36,15711653:37,15711654:38,15711655:39,15711656:40,15711657:41,15711658:42,15711659:43,15711660:44,15711661:45,15711662:46,15711663:47,15711664:48,15711665:49,15711666:50,15711667:51,15711668:52,15711669:53,15711670:54,15711671:55,15711672:56,15711673:57,15711674:58,15711675:59,15711676:60,15711677:61,15711678:62,15711679:63,15711872:64,15711873:65,15711874:66,15711875:67,15711876:68,15711877:69,15711878:70,15711879:71,15711880:72,15711881:73,15711882:74,15711883:75,15711884:76,15711885:77,15711886:78,15711887:79,15711888:80,15711889:81,15711890:82,15711891:83,15711892:84,15711893:85,15711894:86,15711895:87,15711896:88,15711897:89,15711898:90,15711899:91,15711900:92,15711901:93,15711902:94,15711903:95,14848416:11553,14848417:11554,14848418:11555,14848419:11556,14848420:11557,14848421:11558,14848422:11559,14848423:11560,14848424:11561,14848425:11562,14848426:11563,14848427:11564,14848428:11565,14848429:11566,14848430:11567,14848431:11568,14848432:11569,14848433:11570,14848434:11571,14848435:11572,14845344:11573,14845345:11574,14845346:11575,14845347:11576,14845348:11577,14845349:11578,14845350:11579,14845351:11580,14845352:11581,14845353:11582,14912905:11584,14912660:11585,14912674:11586,14912909:11587,14912664:11588,14912679:11589,14912643:11590,14912694:11591,14912913:11592,14912919:11593,14912653:11594,14912678:11595,14912675:11596,14912683:11597,14912906:11598,14912699:11599,14913180:11600,14913181:11601,14913182:11602,14913166:11603,14913167:11604,14913412:11605,14913185:11606,14912955:11615,14909597:11616,14909599:11617,14845078:11618,14913421:11619,14845089:11620,14912164:11621,14912165:11622,14912166:11623,14912167:11624,14912168:11625,14911665:11626,14911666:11627,14911673:11628,14912958:11629,14912957:11630,14912956:11631,14846126:11635,14846097:11636,14846111:11640,14846655:11641,14909568:8481,14909569:8482,14909570:8483,15711372:8484,15711374:8485,14910395:8486,15711386:8487,15711387:8488,15711391:8489,15711361:8490,14910107:8491,14910108:8492,49844:8493,15711616:8494,49832:8495,15711422:8496,15712163:8497,15711423:8498,14910397:8499,14910398:8500,14910109:8501,14910110:8502,14909571:8503,14990237:8504,14909573:8505,14909574:8506,14909575:8507,14910396:8508,14844053:8509,14844048:8510,15711375:8511,15711420:8512,15711646:8513,14844054:8514,15711644:8515,14844070:8516,14844069:8517,14844056:8518,14844057:8519,14844060:8520,14844061:8521,15711368:8522,15711369:8523,14909588:8524,14909589:8525,15711419:8526,15711421:8527,15711643:8528,15711645:8529,14909576:8530,14909577:8531,14909578:8532,14909579:8533,14909580:8534,14909581:8535,14909582:8536,14909583:8537,14909584:8538,14909585:8539,15711371:8540,15711373:8541,49841:8542,50071:8543,50103:8544,15711389:8545,14846368:8546,15711388:8547,15711390:8548,14846374:8549,14846375:8550,14846110:8551,14846132:8552,14850434:8553,14850432:8554,49840:8555,14844082:8556,14844083:8557,14845059:8558,15712165:8559,15711364:8560,15712160:8561,15712161:8562,15711365:8563,15711363:8564,15711366:8565,15711370:8566,15711392:8567,49831:8568,14850182:8569,14850181:8570,14849931:8571,14849935:8572,14849934:8573,14849927:8574,14849926:8737,14849697:8738,14849696:8739,14849715:8740,14849714:8741,14849725:8742,14849724:8743,14844091:8744,14909586:8745,14845586:8746,14845584:8747,14845585:8748,14845587:8749,14909587:8750,14846088:8762,14846091:8763,14846598:8764,14846599:8765,14846594:8766,14846595:8767,14846122:8768,14846121:8769,14846119:8778,14846120:8779,49836:8780,14845842:8781,14845844:8782,14846080:8783,14846083:8784,14846112:8796,14846629:8797,14847122:8798,14846082:8799,14846087:8800,14846369:8801,14846354:8802,14846378:8803,14846379:8804,14846106:8805,14846141:8806,14846109:8807,14846133:8808,14846123:8809,14846124:8810,14845099:8818,14844080:8819,14850479:8820,14850477:8821,14850474:8822,14844064:8823,14844065:8824,49846:8825,14849967:8830,15711376:9008,15711377:9009,15711378:9010,15711379:9011,15711380:9012,15711381:9013,15711382:9014,15711383:9015,15711384:9016,15711385:9017,15711393:9025,15711394:9026,15711395:9027,15711396:9028,15711397:9029,15711398:9030,15711399:9031,15711400:9032,15711401:9033,15711402:9034,15711403:9035,15711404:9036,15711405:9037,15711406:9038,15711407:9039,15711408:9040,15711409:9041,15711410:9042,15711411:9043,15711412:9044,15711413:9045,15711414:9046,15711415:9047,15711416:9048,15711417:9049,15711418:9050,15711617:9057,15711618:9058,15711619:9059,15711620:9060,15711621:9061,15711622:9062,15711623:9063,15711624:9064,15711625:9065,15711626:9066,15711627:9067,15711628:9068,15711629:9069,15711630:9070,15711631:9071,15711632:9072,15711633:9073,15711634:9074,15711635:9075,15711636:9076,15711637:9077,15711638:9078,15711639:9079,15711640:9080,15711641:9081,15711642:9082,14909825:9249,14909826:9250,14909827:9251,14909828:9252,14909829:9253,14909830:9254,14909831:9255,14909832:9256,14909833:9257,14909834:9258,14909835:9259,14909836:9260,14909837:9261,14909838:9262,14909839:9263,14909840:9264,14909841:9265,14909842:9266,14909843:9267,14909844:9268,14909845:9269,14909846:9270,14909847:9271,14909848:9272,14909849:9273,14909850:9274,14909851:9275,14909852:9276,14909853:9277,14909854:9278,14909855:9279,14909856:9280,14909857:9281,14909858:9282,14909859:9283,14909860:9284,14909861:9285,14909862:9286,14909863:9287,14909864:9288,14909865:9289,14909866:9290,14909867:9291,14909868:9292,14909869:9293,14909870:9294,14909871:9295,14909872:9296,14909873:9297,14909874:9298,14909875:9299,14909876:9300,14909877:9301,14909878:9302,14909879:9303,14909880:9304,14909881:9305,14909882:9306,14909883:9307,14909884:9308,14909885:9309,14909886:9310,14909887:9311,14910080:9312,14910081:9313,14910082:9314,14910083:9315,14910084:9316,14910085:9317,14910086:9318,14910087:9319,14910088:9320,14910089:9321,14910090:9322,14910091:9323,14910092:9324,14910093:9325,14910094:9326,14910095:9327,14910096:9328,14910097:9329,14910098:9330,14910099:9331,14910113:9505,14910114:9506,14910115:9507,14910116:9508,14910117:9509,14910118:9510,14910119:9511,14910120:9512,14910121:9513,14910122:9514,14910123:9515,14910124:9516,14910125:9517,14910126:9518,14910127:9519,14910128:9520,14910129:9521,14910130:9522,14910131:9523,14910132:9524,14910133:9525,14910134:9526,14910135:9527,14910136:9528,14910137:9529,14910138:9530,14910139:9531,14910140:9532,14910141:9533,14910142:9534,14910143:9535,14910336:9536,14910337:9537,14910338:9538,14910339:9539,14910340:9540,14910341:9541,14910342:9542,14910343:9543,14910344:9544,14910345:9545,14910346:9546,14910347:9547,14910348:9548,14910349:9549,14910350:9550,14910351:9551,14910352:9552,14910353:9553,14910354:9554,14910355:9555,14910356:9556,14910357:9557,14910358:9558,14910359:9559,14910360:9560,14910361:9561,14910362:9562,14910363:9563,14910364:9564,14910365:9565,14910366:9566,14910367:9567,14910368:9568,14910369:9569,14910370:9570,14910371:9571,14910372:9572,14910373:9573,14910374:9574,14910375:9575,14910376:9576,14910377:9577,14910378:9578,14910379:9579,14910380:9580,14910381:9581,14910382:9582,14910383:9583,14910384:9584,14910385:9585,14910386:9586,14910387:9587,14910388:9588,14910389:9589,14910390:9590,52881:9761,52882:9762,52883:9763,52884:9764,52885:9765,52886:9766,52887:9767,52888:9768,52889:9769,52890:9770,52891:9771,52892:9772,52893:9773,52894:9774,52895:9775,52896:9776,52897:9777,52899:9778,52900:9779,52901:9780,52902:9781,52903:9782,52904:9783,52905:9784,52913:9793,52914:9794,52915:9795,52916:9796,52917:9797,52918:9798,52919:9799,52920:9800,52921:9801,52922:9802,52923:9803,52924:9804,52925:9805,52926:9806,52927:9807,53120:9808,53121:9809,53123:9810,53124:9811,53125:9812,53126:9813,53127:9814,53128:9815,53129:9816,53392:10017,53393:10018,53394:10019,53395:10020,53396:10021,53397:10022,53377:10023,53398:10024,53399:10025,53400:10026,53401:10027,53402:10028,53403:10029,53404:10030,53405:10031,53406:10032,53407:10033,53408:10034,53409:10035,53410:10036,53411:10037,53412:10038,53413:10039,53414:10040,53415:10041,53416:10042,53417:10043,53418:10044,53419:10045,53420:10046,53421:10047,53422:10048,53423:10049,53424:10065,53425:10066,53426:10067,53427:10068,53428:10069,53429:10070,53649:10071,53430:10072,53431:10073,53432:10074,53433:10075,53434:10076,53435:10077,53436:10078,53437:10079,53438:10080,53439:10081,53632:10082,53633:10083,53634:10084,53635:10085,53636:10086,53637:10087,53638:10088,53639:10089,53640:10090,53641:10091,53642:10092,53643:10093,53644:10094,53645:10095,53646:10096,53647:10097,14849152:10273,14849154:10274,14849164:10275,14849168:10276,14849176:10277,14849172:10278,14849180:10279,14849196:10280,14849188:10281,14849204:10282,14849212:10283,14849153:10284,14849155:10285,14849167:10286,14849171:10287,14849179:10288,14849175:10289,14849187:10290,14849203:10291,14849195:10292,14849211:10293,14849419:10294,14849184:10295,14849199:10296,14849192:10297,14849207:10298,14849215:10299,14849181:10300,14849200:10301,14849189:10302,14849208:10303,14849410:10304,14989980:12321,15045782:12322,15050883:12323,15308991:12324,15045504:12325,15107227:12326,15109288:12327,15050678:12328,15302818:12329,15241653:12330,15240348:12331,15182224:12332,15106730:12333,15110049:12334,15120549:12335,15112109:12336,15241638:12337,15239846:12338,15314869:12339,15114899:12340,15047847:12341,15111841:12342,15108529:12343,15052443:12344,15050640:12345,15243707:12346,15311796:12347,15185314:12348,15185598:12349,15314574:12350,15108246:12351,15184543:12352,15246007:12353,15052425:12354,15055541:12355,15109257:12356,15112855:12357,15114632:12358,15308679:12359,15310477:12360,15113615:12361,14990245:12362,14990474:12363,14990733:12364,14991005:12365,15040905:12366,15047602:12367,15049911:12368,15050644:12369,15050881:12370,15052937:12371,15106975:12372,15107215:12373,15107504:12374,15112339:12375,15115397:12376,15172282:12377,15177103:12378,15177136:12379,15181755:12380,15185581:12381,15185839:12382,15238019:12383,15241358:12384,15245731:12385,15248514:12386,15303061:12387,15303098:12388,15043771:12389,14989973:12390,14989989:12391,15048607:12392,15237810:12393,15303553:12394,15180719:12395,14989440:12396,15049649:12397,15121058:12398,15302840:12399,15182002:12400,15240360:12401,15239819:12402,15315119:12403,15041921:12404,15044016:12405,15045309:12406,15045537:12407,15047584:12408,15050683:12409,15056021:12410,15311794:12411,15120299:12412,15238052:12413,15242413:12414,15309218:12577,15309232:12578,15309472:12579,15310779:12580,15044747:12581,15044531:12582,15052423:12583,15172495:12584,15187645:12585,15253378:12586,15309736:12587,15044015:12588,15316380:12589,15182522:12590,14989457:12591,15180435:12592,15239100:12593,15120550:12594,15046808:12595,15045764:12596,15117469:12597,15242394:12598,15315131:12599,15050661:12600,15044265:12601,15119782:12602,15176604:12603,15308431:12604,15047042:12605,14989969:12606,15303051:12607,15309746:12608,15240591:12609,15312012:12610,15044513:12611,15046326:12612,15051952:12613,15056305:12614,15112352:12615,15113139:12616,15114372:12617,15118520:12618,15119283:12619,15119529:12620,15176091:12621,15178632:12622,15182222:12623,15311028:12624,15240113:12625,15245723:12626,15247776:12627,15305645:12628,15120050:12629,15177387:12630,15178634:12631,15312773:12632,15106726:12633,15248513:12634,15251082:12635,15308466:12636,15115918:12637,15044269:12638,15042182:12639,15047826:12640,15048880:12641,15050116:12642,15052468:12643,15055798:12644,15106216:12645,15109801:12646,15110068:12647,15119039:12648,15121556:12649,15172238:12650,15172756:12651,15173017:12652,15173525:12653,15174847:12654,15186049:12655,15239606:12656,15240081:12657,15242903:12658,15303072:12659,15305115:12660,15316123:12661,15049129:12662,15111868:12663,15118746:12664,15176869:12665,15042489:12666,15049902:12667,15050149:12668,15056512:12669,15056796:12670,15108796:12833,15112122:12834,15116458:12835,15117479:12836,15118004:12837,15175307:12838,15187841:12839,15246742:12840,15316140:12841,15316110:12842,15317892:12843,15053473:12844,15118998:12845,15240635:12846,15041668:12847,15053195:12848,15107766:12849,15239046:12850,15114678:12851,15174049:12852,14989721:12853,14991290:12854,15044024:12855,15106473:12856,15120553:12857,15182223:12858,15310771:12859,14989451:12860,15043734:12861,14990254:12862,14990741:12863,14990525:12864,14991009:12865,14990771:12866,15043232:12867,15044527:12868,15046793:12869,15049871:12870,15051649:12871,15052470:12872,15052705:12873,15181713:12874,15112839:12875,15113884:12876,15113910:12877,15117708:12878,15119027:12879,15172011:12880,15175554:12881,15181453:12882,15181502:12883,15182012:12884,15183495:12885,15239857:12886,15240091:12887,15240324:12888,15240631:12889,15241135:12890,15241107:12891,15244710:12892,15248050:12893,15046825:12894,15250088:12895,15253414:12896,15303054:12897,15309982:12898,15243914:12899,14991236:12900,15053736:12901,15108241:12902,15174041:12903,15176891:12904,15239077:12905,15239869:12906,15244222:12907,15250304:12908,15309701:12909,15312019:12910,15312789:12911,14990219:12912,14990490:12913,15247267:12914,15047582:12915,15049098:12916,15049610:12917,15055803:12918,15056811:12919,15106218:12920,15106708:12921,15106466:12922,15107984:12923,15108242:12924,15109008:12925,15111353:12926,15314305:13089,15112614:13090,15114928:13091,15119799:13092,15172016:13093,15177100:13094,15178374:13095,15185333:13096,15239845:13097,15245241:13098,15308427:13099,15309454:13100,15250077:13101,15042481:13102,15043262:13103,15049878:13104,15045299:13105,15052467:13106,15053974:13107,15107496:13108,15115906:13109,15120047:13110,15180429:13111,15242123:13112,15245719:13113,15247794:13114,15306407:13115,15313592:13116,15119788:13117,15312552:13118,15244185:13119,15048355:13120,15114175:13121,15244174:13122,15304846:13123,15043203:13124,15047303:13125,15044740:13126,15055763:13127,15109025:13128,15110841:13129,15114428:13130,15114424:13131,15118011:13132,15175090:13133,15180474:13134,15182251:13135,15247002:13136,15247250:13137,15250859:13138,15252611:13139,15303597:13140,15308451:13141,15309460:13142,15310249:13143,15052198:13144,15053491:13145,15115709:13146,15311245:13147,15311246:13148,15109787:13149,15183008:13150,15116459:13151,15116735:13152,15114934:13153,15315085:13154,15121823:13155,15042994:13156,15046301:13157,15106480:13158,15109036:13159,15119547:13160,15120519:13161,15121297:13162,15241627:13163,15246480:13164,15252868:13165,14989460:13166,15315129:13167,15044534:13168,15115419:13169,15116474:13170,15310468:13171,15114410:13172,15041948:13173,15182723:13174,15241906:13175,15304604:13176,15306380:13177,15047067:13178,15316136:13179,15114402:13180,15240325:13181,15241393:13182,15184549:13345,15042696:13346,15240069:13347,15176614:13348,14989758:13349,14990979:13350,15042208:13351,15052690:13352,15042698:13353,15043480:13354,15043495:13355,15054779:13356,15046298:13357,15048874:13358,15050662:13359,15052428:13360,15052440:13361,15052699:13362,15055282:13363,15055289:13364,15106723:13365,15107231:13366,15107491:13367,15107774:13368,15110043:13369,15111586:13370,15114129:13371,15114643:13372,15115194:13373,15117502:13374,15117715:13375,15118743:13376,15121570:13377,15122071:13378,15121797:13379,15176368:13380,15176856:13381,15178659:13382,15178891:13383,15182783:13384,15183521:13385,15184033:13386,15185833:13387,15187126:13388,15187888:13389,15237789:13390,15239590:13391,15240862:13392,15247027:13393,15248268:13394,15250091:13395,15303300:13396,15307153:13397,15308435:13398,15308433:13399,15308450:13400,15309221:13401,15310739:13402,15312040:13403,15239320:13404,14989496:13405,15044779:13406,15053496:13407,15054732:13408,15175337:13409,15178124:13410,15178940:13411,15053481:13412,15187883:13413,15250571:13414,15309697:13415,15310993:13416,15311252:13417,15311256:13418,14990465:13419,14990478:13420,15044017:13421,15046300:13422,15047080:13423,15048634:13424,15050119:13425,15051913:13426,15052676:13427,15053456:13428,15054988:13429,15055294:13430,15056780:13431,15110062:13432,15113402:13433,15112087:13434,15112098:13435,15113375:13436,15115147:13437,15115140:13438,15116703:13601,15055024:13602,15118213:13603,15118487:13604,15118781:13605,15177151:13606,15181192:13607,15052195:13608,15181952:13609,15185024:13610,15056573:13611,15246991:13612,15247512:13613,15250100:13614,15250871:13615,15252364:13616,15252637:13617,15311778:13618,15313038:13619,15314108:13620,14989952:13621,15040957:13622,15041664:13623,15050387:13624,15052444:13625,15108271:13626,15108736:13627,15111084:13628,15117498:13629,15174304:13630,15177361:13631,15181191:13632,15187625:13633,15245243:13634,15248060:13635,15248816:13636,15109804:13637,15241098:13638,15310496:13639,15044745:13640,15044739:13641,15046315:13642,15114644:13643,15116696:13644,15247792:13645,15179943:13646,15113653:13647,15317901:13648,15044020:13649,15052450:13650,15238298:13651,15243664:13652,15302790:13653,14989464:13654,14989701:13655,14990215:13656,14990481:13657,15044490:13658,15044792:13659,15052462:13660,15056019:13661,15106213:13662,15111569:13663,15113405:13664,15118722:13665,15118770:13666,15119267:13667,15172024:13668,15175811:13669,15182262:13670,15182510:13671,15182984:13672,15185050:13673,15184830:13674,15185318:13675,15112103:13676,15174043:13677,15044283:13678,15053189:13679,15054760:13680,15109010:13681,15109024:13682,15109273:13683,15120544:13684,15243674:13685,15247537:13686,15251357:13687,15305656:13688,15121537:13689,15181478:13690,15314330:13691,14989992:13692,14989995:13693,14989996:13694,14991003:13857,14991008:13858,15041425:13859,15041927:13860,15182774:13861,15041969:13862,15042486:13863,15043988:13864,15043745:13865,15044031:13866,15044523:13867,15046316:13868,15049347:13869,15053729:13870,15056055:13871,15056266:13872,15106223:13873,15106448:13874,15106477:13875,15109279:13876,15111577:13877,15116683:13878,15119233:13879,15174530:13880,15174573:13881,15179695:13882,15238072:13883,15238277:13884,15239304:13885,15242638:13886,15303607:13887,15306657:13888,15310783:13889,15312279:13890,15313306:13891,14990256:13892,15042461:13893,15052973:13894,15112833:13895,15115693:13896,15053184:13897,15113138:13898,15115701:13899,15175305:13900,15114640:13901,15184513:13902,15041413:13903,15043492:13904,15048071:13905,15054782:13906,15305894:13907,15111844:13908,15117475:13909,15117501:13910,15175860:13911,15181441:13912,15181501:13913,15183243:13914,15185802:13915,15239865:13916,15241100:13917,15245759:13918,15246751:13919,15248569:13920,15253393:13921,15304593:13922,15044767:13923,15305344:13924,14989725:13925,15040694:13926,15044517:13927,15043770:13928,15174551:13929,15175318:13930,15179689:13931,15240102:13932,15252143:13933,15312774:13934,15312776:13935,15312786:13936,15041975:13937,15107226:13938,15243678:13939,15046320:13940,15182266:13941,15040950:13942,15052691:13943,15303047:13944,15309445:13945,14989490:13946,15117211:13947,15304615:13948,15053201:13949,15053192:13950,15109784:14113,15182495:14114,15118995:14115,15310260:14116,15252897:14117,15182506:14118,15173258:14119,15309448:14120,15184514:14121,15114391:14122,15186352:14123,15114641:14124,15306156:14125,15043506:14126,15044763:14127,15242923:14128,15247507:14129,15187620:14130,15252365:14131,15303585:14132,15044006:14133,15245960:14134,15181185:14135,14991234:14136,15041214:14137,15042705:14138,15041924:14139,15046035:14140,15047853:14141,15175594:14142,15048331:14143,15050129:14144,15056290:14145,15056516:14146,15106485:14147,15107510:14148,15107495:14149,15107753:14150,15109810:14151,15110330:14152,15111596:14153,15112623:14154,15114626:14155,15120531:14156,15177126:14157,15182013:14158,15184827:14159,15185292:14160,15185561:14161,15186315:14162,15187371:14163,15240334:14164,15240586:14165,15244173:14166,15247496:14167,15247779:14168,15248806:14169,15252413:14170,15311002:14171,15316623:14172,15239864:14173,15253390:14174,15314856:14175,15043207:14176,15108255:14177,15110787:14178,15122304:14179,15309465:14180,15114625:14181,15041169:14182,15117472:14183,15118778:14184,15121812:14185,15182260:14186,15185296:14187,15245696:14188,15247523:14189,15113352:14190,14990262:14191,15040697:14192,15040678:14193,15040933:14194,15041980:14195,15042744:14196,15042979:14197,15046311:14198,15047823:14199,15048837:14200,15051660:14201,15055802:14202,15107762:14203,15108024:14204,15109043:14205,15109554:14206,15115420:14369,15116457:14370,15174077:14371,15174316:14372,15174830:14373,15179924:14374,15180207:14375,15185337:14376,15178892:14377,15237801:14378,15246987:14379,15248537:14380,15250338:14381,15252370:14382,15303075:14383,15306165:14384,15309242:14385,15311253:14386,15313043:14387,15317432:14388,15041923:14389,15044255:14390,15044275:14391,15055291:14392,15056038:14393,15120539:14394,15121040:14395,15175300:14396,15175614:14397,15185283:14398,15239351:14399,15247488:14400,15248314:14401,15309200:14402,14989710:14403,15040651:14404,15044516:14405,15045052:14406,15047610:14407,15050641:14408,15052196:14409,15054769:14410,15055531:14411,15056039:14412,15108280:14413,15111557:14414,15113903:14415,15120790:14416,15174544:14417,15184778:14418,15246004:14419,15237793:14420,15238049:14421,15241136:14422,15243662:14423,15248007:14424,15251368:14425,15304887:14426,15309703:14427,15311271:14428,15318163:14429,14989972:14430,14989970:14431,14990477:14432,15043976:14433,15045001:14434,15044798:14435,15050927:14436,15056524:14437,15056545:14438,15106719:14439,15114919:14440,15116942:14441,15176090:14442,15180417:14443,15248030:14444,15248036:14445,15248823:14446,15304336:14447,14989726:14448,15314825:14449,14989988:14450,14990780:14451,14991023:14452,15040665:14453,15040662:14454,15041929:14455,15041964:14456,15043231:14457,15043257:14458,15043518:14459,15044250:14460,15044515:14461,15044753:14462,15044750:14625,15046281:14626,15048081:14627,15048354:14628,15050173:14629,15052180:14630,15052189:14631,15052431:14632,15054757:14633,15054759:14634,15054775:14635,15055288:14636,15055491:14637,15055514:14638,15055543:14639,15056024:14640,15106450:14641,15107468:14642,15108759:14643,15109016:14644,15109799:14645,15111355:14646,15112322:14647,15112579:14648,15113140:14649,15113645:14650,15114401:14651,15114903:14652,15116171:14653,15118751:14654,15119530:14655,15119785:14656,15120559:14657,15121053:14658,15176882:14659,15178375:14660,15180204:14661,15182015:14662,15184800:14663,15185029:14664,15185048:14665,15185310:14666,15185585:14667,15237269:14668,15237251:14669,15237807:14670,15237809:14671,15238548:14672,15238799:14673,15239338:14674,15240594:14675,15245708:14676,15245729:14677,15248539:14678,15250082:14679,15250364:14680,15303562:14681,15304117:14682,15305137:14683,15179967:14684,15305660:14685,15308452:14686,15309197:14687,15310981:14688,15312537:14689,15313816:14690,15316155:14691,15042971:14692,15043243:14693,15044535:14694,15044744:14695,15049621:14696,15109047:14697,15122336:14698,15249834:14699,15252895:14700,15317689:14701,15041931:14702,15042747:14703,15045002:14704,15047613:14705,15182208:14706,15304119:14707,15316384:14708,15317906:14709,15175044:14710,15121545:14711,15238576:14712,15176849:14713,15056829:14714,15106970:14715,15313576:14716,15174555:14717,15253180:14718,15117732:14881,15310979:14882,14990218:14883,15047600:14884,15048100:14885,15049406:14886,15051162:14887,15106472:14888,15107975:14889,15112335:14890,15112326:14891,15114425:14892,15114929:14893,15120311:14894,15177621:14895,15185082:14896,15239598:14897,15314306:14898,14989979:14899,14990736:14900,15044489:14901,15045766:14902,15054255:14903,15054758:14904,15054766:14905,15114171:14906,15119001:14907,15176115:14908,15179906:14909,15247760:14910,15306390:14911,15246239:14912,15048080:14913,15055527:14914,15109291:14915,15041205:14916,15041196:14917,15042189:14918,15113344:14919,15045513:14920,15049118:14921,15050427:14922,15052464:14923,15056297:14924,15108493:14925,15109793:14926,15114429:14927,15117747:14928,15120520:14929,15172029:14930,15304583:14931,15174272:14932,15179925:14933,15179942:14934,15181229:14935,15111822:14936,15185072:14937,15241116:14938,15246209:14939,15252617:14940,15309467:14941,15042980:14942,15047848:14943,15113616:14944,15187370:14945,15250081:14946,15042228:14947,15048066:14948,15308970:14949,15048890:14950,15115914:14951,15237812:14952,15045298:14953,15053966:14954,15048636:14955,15180437:14956,15316922:14957,14990748:14958,15042954:14959,15045259:14960,15110334:14961,15112360:14962,15113364:14963,15114165:14964,15182468:14965,15183254:14966,15185058:14967,15305903:14968,15114652:14969,15314605:14970,15183033:14971,15043737:14972,15042186:14973,15042743:14974,15052703:15137,15109046:15138,15110830:15139,15111078:15140,15113389:15141,15118010:15142,15242921:15143,15309713:15144,15178384:15145,15314838:15146,15109516:15147,15305862:15148,15314603:15149,15178431:15150,15112594:15151,14989449:15152,15041176:15153,15044482:15154,15053233:15155,15106984:15156,15110802:15157,15111587:15158,15114655:15159,15173542:15160,15175562:15161,15176867:15162,15183511:15163,15186562:15164,15243925:15165,15249027:15166,15250331:15167,15304120:15168,15312016:15169,15111852:15170,15112875:15171,15117963:15172,14990229:15173,14990228:15174,14990522:15175,14990783:15176,15042746:15177,15044536:15178,15044530:15179,15046563:15180,15047579:15181,15049643:15182,15050635:15183,15050633:15184,15050687:15185,15052176:15186,15053197:15187,15054978:15188,15055019:15189,15056791:15190,15106205:15191,15109255:15192,15111343:15193,15052188:15194,15111855:15195,15111869:15196,15112104:15197,15113885:15198,15117730:15199,15117755:15200,15118479:15201,15175045:15202,15181193:15203,15181697:15204,15184824:15205,15185049:15206,15185067:15207,15237794:15208,15238274:15209,15239091:15210,15246998:15211,15247774:15212,15247785:15213,15247782:15214,15248012:15215,15248302:15216,15250311:15217,15250332:15218,15309708:15219,15311804:15220,15117743:15221,14989963:15222,14990524:15223,14990989:15224,15041936:15225,15052183:15226,15052730:15227,15107464:15228,15109249:15229,15112578:15230,15117473:15393,15121291:15394,15119035:15395,15173822:15396,15176381:15397,15177620:15398,15180673:15399,15180986:15400,15237260:15401,15237299:15402,15239082:15403,15241876:15404,15253150:15405,15118736:15406,15317439:15407,15056015:15408,15248792:15409,15316139:15410,15182778:15411,15252408:15412,15052429:15413,15309739:15414,14989443:15415,15044529:15416,15048631:15417,15049905:15418,15051657:15419,15052452:15420,15106697:15421,15120831:15422,15121542:15423,15177406:15424,15250346:15425,15052447:15426,15242368:15427,15183776:15428,15040946:15429,15114164:15430,15239837:15431,15053217:15432,15242634:15433,15186078:15434,15239310:15435,15042201:15436,15052932:15437,15109544:15438,15250854:15439,15111836:15440,15173038:15441,15180990:15442,15185047:15443,15237253:15444,15248541:15445,15252362:15446,15303086:15447,15244167:15448,15303338:15449,15040671:15450,15043514:15451,15052986:15452,15113619:15453,15172028:15454,15173813:15455,15304076:15456,15304584:15457,15305899:15458,15240101:15459,15052674:15460,15056049:15461,15107001:15462,14989499:15463,15044502:15464,15052424:15465,15108491:15466,15113393:15467,15117962:15468,15174569:15469,15175584:15470,15181998:15471,15238571:15472,15251107:15473,15304082:15474,15312534:15475,15041682:15476,15044503:15477,15045034:15478,15052735:15479,15109768:15480,15116473:15481,15185580:15482,15309952:15483,15047578:15484,15044494:15485,15045032:15486,15052439:15649,15052977:15650,15054750:15651,14991278:15652,15107201:15653,15109054:15654,15119538:15655,15181696:15656,15181707:15657,15185282:15658,15186317:15659,15187858:15660,15239085:15661,15239327:15662,15241872:15663,15245702:15664,15246770:15665,15249040:15666,15251892:15667,15252655:15668,15302833:15669,15304075:15670,15304108:15671,15309702:15672,15304348:15673,14990208:15674,14990735:15675,15041925:15676,15043969:15677,15056531:15678,15108238:15679,15114132:15680,15118721:15681,15120523:15682,15175075:15683,15186086:15684,15304589:15685,15305347:15686,15044500:15687,15049881:15688,15052479:15689,15120273:15690,15181213:15691,15186094:15692,15184539:15693,15049150:15694,15173279:15695,15042490:15696,15245715:15697,15253424:15698,14991242:15699,15053755:15700,15112357:15701,15179436:15702,15182755:15703,15239324:15704,15312831:15705,15042438:15706,15056554:15707,15112108:15708,15115695:15709,15117961:15710,15120307:15711,15121046:15712,15121828:15713,15178686:15714,15185044:15715,15054753:15716,15303093:15717,15304327:15718,15310982:15719,15042470:15720,15042717:15721,15108480:15722,15112849:15723,15113113:15724,15120538:15725,15055542:15726,15185810:15727,15187378:15728,15113144:15729,15242927:15730,15243191:15731,15248312:15732,15043241:15733,15044505:15734,15050163:15735,15055503:15736,15056528:15737,15106453:15738,15305636:15739,15309220:15740,15041207:15741,15041695:15742,15043485:15905,15043744:15906,15043975:15907,15044524:15908,15045544:15909,15046022:15910,15045809:15911,15046807:15912,15050152:15913,15050430:15914,15050940:15915,15052469:15916,15052934:15917,15052943:15918,15052945:15919,15052954:15920,15055492:15921,15055498:15922,15055776:15923,15056304:15924,15108543:15925,15108740:15926,15109019:15927,15109772:15928,15109559:15929,15112327:15930,15112332:15931,15112365:15932,15112630:15933,15113662:15934,15114914:15935,15116447:15936,15116469:15937,15119036:15938,15120008:15939,15120521:15940,15120792:15941,15172796:15942,15172774:15943,15173031:15944,15177607:15945,15178881:15946,15180189:15947,15180929:15948,15181221:15949,15181744:15950,15182752:15951,15182993:15952,15184551:15953,15185081:15954,15237782:15955,15241110:15956,15241867:15957,15242633:15958,15245725:15959,15246259:15960,15247519:15961,15247548:15962,15247764:15963,15247795:15964,15249825:15965,15250334:15966,15304356:15967,15305126:15968,15306174:15969,15306904:15970,15309468:15971,15310488:15972,14989450:15973,14989448:15974,14989470:15975,14989719:15976,15042199:15977,15042992:15978,15048590:15979,15048884:15980,15049612:15981,15051938:15982,15055032:15983,15106949:15984,15111102:15985,15113633:15986,15113622:15987,15119748:15988,15174326:15989,15177139:15990,15182243:15991,15241912:15992,15248818:15993,15304376:15994,15305888:15995,15046833:15996,15048628:15997,15311806:15998,15109037:16161,15115405:16162,15117974:16163,15173549:16164,15186324:16165,15237559:16166,15239602:16167,15247270:16168,15311775:16169,15244693:16170,15253169:16171,15052987:16172,14990520:16173,14991265:16174,14991029:16175,15045767:16176,15050912:16177,15052701:16178,15052713:16179,15056771:16180,15107470:16181,15109295:16182,15111856:16183,15112587:16184,15115182:16185,15115931:16186,15119800:16187,15120305:16188,15176883:16189,15177401:16190,15178911:16191,15181214:16192,15181734:16193,15185075:16194,15239075:16195,15239855:16196,15242922:16197,15247018:16198,15247546:16199,15252139:16200,15253147:16201,15302834:16202,15304605:16203,15309959:16204,14990010:16205,14990209:16206,15042691:16207,15049141:16208,15049644:16209,15052939:16210,15176858:16211,15052989:16212,15238542:16213,15247498:16214,15253381:16215,15309219:16216,15310253:16217,15183013:16218,15248271:16219,15310984:16220,15304098:16221,15047603:16222,15044264:16223,15302807:16224,15044793:16225,15048322:16226,15055013:16227,15109800:16228,15118516:16229,15172234:16230,15179169:16231,15184523:16232,15187872:16233,15245744:16234,15303042:16235,15304084:16236,15305872:16237,15305880:16238,15309455:16239,15176094:16240,15313796:16241,15053959:16242,15054249:16243,15111600:16244,15113890:16245,15251112:16246,15309723:16247,15109550:16248,15113609:16249,15115417:16250,15241093:16251,15310999:16252,15309696:16253,15246270:16254,15122052:16417,15110586:16418,15052728:16419,14989462:16420,15171756:16421,15177117:16422,15112367:16423,15042436:16424,15042742:16425,15043490:16426,15050643:16427,15056513:16428,15106215:16429,15108240:16430,15111359:16431,15111604:16432,15112351:16433,15112628:16434,15115186:16435,15114390:16436,15117731:16437,15120517:16438,15174066:16439,15176863:16440,15178651:16441,15184574:16442,15237526:16443,15049648:16444,15246269:16445,15246783:16446,15248032:16447,15248019:16448,15248267:16449,15302813:16450,15304338:16451,15310226:16452,15310233:16453,15111817:16454,15181966:16455,15238278:16456,15309499:16457,15055021:16458,15106972:16459,15108250:16460,15111845:16461,15112340:16462,15113872:16463,15179699:16464,15182221:16465,15184269:16466,15186110:16467,15238282:16468,15250092:16469,15250852:16470,15251361:16471,15251871:16472,15180457:16473,15042695:16474,15109017:16475,15109797:16476,15110530:16477,15108760:16478,15247533:16479,15182467:16480,15183744:16481,15248044:16482,15309738:16483,15185334:16484,15239308:16485,15244681:16486,14990233:16487,15041928:16488,15043971:16489,15044e3:16490,15052451:16491,15052930:16492,15052950:16493,15054749:16494,15108262:16495,15108487:16496,15110832:16497,15114387:16498,15114420:16499,15119241:16500,15119749:16501,15119511:16502,15114131:16503,15121820:16504,15173006:16505,15173053:16506,15112075:16507,15182271:16508,15183533:16509,15185818:16510,15186314:16673,15187624:16674,15238586:16675,15239323:16676,15239353:16677,15242918:16678,15247790:16679,15250318:16680,15251381:16681,15303096:16682,15303095:16683,15305389:16684,15305361:16685,15308419:16686,15314606:16687,15042957:16688,15046276:16689,15121592:16690,15172790:16691,15041960:16692,15181445:16693,15186325:16694,15238835:16695,15184782:16696,15047052:16697,15049105:16698,15053480:16699,15109802:16700,15113150:16701,15113149:16702,15115674:16703,15174553:16704,15177359:16705,15177358:16706,15180942:16707,15181206:16708,15181727:16709,15184535:16710,15185056:16711,15185284:16712,15243399:16713,15247540:16714,15308987:16715,15303073:16716,15318176:16717,15041447:16718,15042997:16719,15044492:16720,15044514:16721,15040649:16722,15046314:16723,15049646:16724,15050127:16725,15173821:16726,15052427:16727,15053220:16728,15043741:16729,15106979:16730,15106995:16731,15109532:16732,15109763:16733,15109311:16734,15109819:16735,15111053:16736,15112105:16737,15113145:16738,15054755:16739,15116173:16740,15116221:16741,15121557:16742,15173541:16743,14989961:16744,15177641:16745,15178680:16746,15182483:16747,15184799:16748,15185807:16749,15185564:16750,15237537:16751,15240585:16752,15240600:16753,15241644:16754,15241916:16755,15243195:16756,15246213:16757,15250864:16758,15302785:16759,15303085:16760,15306391:16761,15309980:16762,15313042:16763,15041423:16764,15049367:16765,15107726:16766,15239059:16929,15242421:16930,15250568:16931,15302816:16932,14991235:16933,15040948:16934,15042951:16935,15044019:16936,15106479:16937,15109513:16938,15113631:16939,15120556:16940,15251123:16941,15302815:16942,14991255:16943,15053214:16944,15250314:16945,15112079:16946,15185562:16947,15043986:16948,15245974:16949,15041974:16950,15110019:16951,15052184:16952,15052203:16953,15052938:16954,15110285:16955,15113617:16956,15303068:16957,14990230:16958,15049882:16959,15049898:16960,15118768:16961,15247761:16962,15045822:16963,15048853:16964,15050405:16965,15106992:16966,15108499:16967,15114113:16968,15239349:16969,15115669:16970,15309184:16971,15312772:16972,15313064:16973,14990739:16974,15048838:16975,15052734:16976,15237264:16977,15053489:16978,15055023:16979,15056517:16980,15106208:16981,15107467:16982,15108276:16983,15113151:16984,15119280:16985,15121310:16986,15238030:16987,15238591:16988,15240084:16989,15245963:16990,15250104:16991,15302784:16992,15302830:16993,15309450:16994,15317915:16995,15314843:16996,14990243:16997,15044528:16998,15049895:16999,15183020:17e3,15304333:17001,15311244:17002,15316921:17003,15121309:17004,15171751:17005,15043987:17006,15046020:17007,15052421:17008,15108504:17009,15108766:17010,15109011:17011,15119010:17012,15122351:17013,15175842:17014,15247511:17015,15306936:17016,15122305:17017,15248318:17018,15240376:17019,15042471:17020,15244216:17021,15044522:17022,15044521:17185,14990726:17186,15303060:17187,15253168:17188,15050154:17189,15238321:17190,15054781:17191,15182762:17192,15253183:17193,15115162:17194,15249591:17195,15174584:17196,15315336:17197,15116477:17198,15248048:17199,14989497:17200,15043992:17201,15046790:17202,15048102:17203,15108997:17204,15109794:17205,15112102:17206,15117710:17207,15120289:17208,15120795:17209,15172269:17210,15179693:17211,15182767:17212,15183530:17213,15185595:17214,15237309:17215,15238022:17216,15244171:17217,15248021:17218,15306139:17219,15047587:17220,15049607:17221,15056062:17222,15111853:17223,15112854:17224,15116928:17225,15118005:17226,15176887:17227,15248263:17228,15040676:17229,15179685:17230,15047856:17231,15056027:17232,15106469:17233,15112634:17234,15118752:17235,15177652:17236,15181978:17237,15187374:17238,15239092:17239,15244440:17240,15303045:17241,15312563:17242,15183753:17243,15177116:17244,15182777:17245,15183249:17246,15242116:17247,15302800:17248,15181737:17249,15182482:17250,15240374:17251,15051681:17252,15179136:17253,14989485:17254,14990258:17255,15052441:17256,15056800:17257,15108797:17258,15112380:17259,15114161:17260,15119272:17261,15243691:17262,15245751:17263,15247547:17264,15304078:17265,15305651:17266,15312784:17267,15116439:17268,15171750:17269,15174826:17270,15240103:17271,15241623:17272,15250095:17273,14989441:17274,15041926:17275,15042443:17276,15046283:17277,15052725:17278,15054998:17441,15055027:17442,15055489:17443,15056020:17444,15056053:17445,15056299:17446,15056564:17447,15108018:17448,15109265:17449,15112866:17450,15113373:17451,15121838:17452,15174034:17453,15176890:17454,15178938:17455,15237556:17456,15238329:17457,15238584:17458,15244726:17459,15248063:17460,15248284:17461,15251077:17462,15251379:17463,15305370:17464,15308215:17465,15310978:17466,15315877:17467,15043461:17468,15109527:17469,15178676:17470,15113365:17471,15118984:17472,15175565:17473,15250307:17474,15306414:17475,15309235:17476,15119525:17477,15049372:17478,15115406:17479,15116172:17480,15253437:17481,15306394:17482,15177627:17483,15302810:17484,15049114:17485,15114370:17486,15109812:17487,15116219:17488,14990723:17489,15121580:17490,15114136:17491,15253179:17492,15242406:17493,15185588:17494,15306132:17495,15115455:17496,15121840:17497,15048106:17498,15049655:17499,15051948:17500,15185068:17501,15173802:17502,15044746:17503,15304611:17504,15316660:17505,14989997:17506,14990734:17507,15040924:17508,15040949:17509,15042947:17510,15250078:17511,15045e3:17512,15048868:17513,15052442:17514,15055005:17515,15055509:17516,15055533:17517,15055799:17518,15056031:17519,15106700:17520,15108789:17521,15109306:17522,15110032:17523,15114927:17524,15118720:17525,15180423:17526,15181454:17527,15181963:17528,15185824:17529,15239559:17530,15247490:17531,15248294:17532,15251844:17533,15302803:17534,15303352:17697,15303853:17698,15304600:17699,15318158:17700,15119269:17701,15110552:17702,15111074:17703,15111605:17704,15121332:17705,15178372:17706,15183003:17707,15303081:17708,15306641:17709,15121082:17710,15045554:17711,15056569:17712,15110820:17713,15252877:17714,15253421:17715,15305092:17716,15041976:17717,15049131:17718,15049897:17719,15053205:17720,15055511:17721,15120315:17722,15186575:17723,15176860:17724,15250108:17725,15252386:17726,15311259:17727,15172281:17728,14990493:17729,15118015:17730,15122097:17731,15176880:17732,15309755:17733,15041934:17734,15044752:17735,15048885:17736,15049111:17737,15050412:17738,15053216:17739,15056530:17740,15111831:17741,15113628:17742,15120545:17743,15178171:17744,15241119:17745,15250349:17746,15302804:17747,15303613:17748,15306125:17749,15179941:17750,15179962:17751,15043242:17752,15055526:17753,15047839:17754,15050164:17755,15106194:17756,15040658:17757,15041946:17758,15042220:17759,15042445:17760,15042688:17761,15045776:17762,15049108:17763,15049112:17764,15050135:17765,15052437:17766,15053750:17767,15054475:17768,15106748:17769,15108757:17770,15110317:17771,15113649:17772,15114627:17773,15114940:17774,15115167:17775,15178647:17776,15120280:17777,15120815:17778,15120027:17779,15172015:17780,15173512:17781,15056275:17782,15177624:17783,15181239:17784,15183241:17785,15183252:17786,15183250:17787,15184790:17788,15185329:17789,15042736:17790,15241635:17953,15242665:17954,15243172:17955,15247502:17956,15248516:17957,15249798:17958,15251599:17959,15302787:17960,15302799:17961,15306905:17962,15309238:17963,15311021:17964,15313072:17965,15308696:17966,15041421:17967,15043477:17968,15044748:17969,15048834:17970,15052942:17971,15107751:17972,15110814:17973,15119518:17974,15179443:17975,15182757:17976,15238068:17977,15241348:17978,15303059:17979,15305349:17980,15053728:17981,15316103:17982,15043775:17983,15056535:17984,15056563:17985,15120028:17986,15174073:17987,15179171:17988,15181503:17989,15183780:17990,15118226:17991,15174572:17992,15248045:17993,15114371:17994,15116705:17995,15042488:17996,15182465:17997,15115444:17998,15053194:17999,15315894:18e3,15240107:18001,15052677:18002,15304073:18003,15171742:18004,15047096:18005,15053231:18006,15106951:18007,15111590:18008,15118988:18009,15249818:18010,15303041:18011,15310995:18012,15045009:18013,15113095:18014,15304845:18015,15050120:18016,15303331:18017,15042181:18018,14989709:18019,15042474:18020,15242905:18021,15248526:18022,15171992:18023,15109562:18024,15306123:18025,15115682:18026,15312564:18027,15186052:18028,15177143:18029,15043991:18030,15115680:18031,15252383:18032,15309731:18033,15118749:18034,14989964:18035,15052988:18036,15056016:18037,15253417:18038,15043714:18039,15250321:18040,15237769:18041,15243705:18042,15055807:18043,15112101:18044,14989747:18045,15041957:18046,15050370:18209,15052991:18210,15310766:18211,14990267:18212,15050378:18213,15056781:18214,15248013:18215,15122337:18216,15181488:18217,15181218:18218,15052711:18219,15241649:18220,15174827:18221,15173297:18222,15055284:18223,15056821:18224,15109563:18225,15110810:18226,15173507:18227,15184536:18228,14989699:18229,15055804:18230,14989707:18231,15048604:18232,15047330:18233,15106729:18234,15122307:18235,15185037:18236,15238077:18237,15238323:18238,15238847:18239,15253170:18240,15246999:18241,15243940:18242,15054772:18243,15108746:18244,15110829:18245,15246983:18246,15113655:18247,15119266:18248,15119550:18249,15175862:18250,15179956:18251,15051142:18252,15187381:18253,15239853:18254,15312556:18255,14991283:18256,15055747:18257,15109021:18258,15109778:18259,15111575:18260,15113647:18261,15178627:18262,15174028:18263,15238028:18264,15237818:18265,15252649:18266,15304077:18267,15040653:18268,15048633:18269,15051410:18270,15114885:18271,15115699:18272,15173028:18273,15174589:18274,15250103:18275,15049650:18276,15250336:18277,15309226:18278,15302809:18279,15244735:18280,15181732:18281,15179687:18282,15241385:18283,14990511:18284,15042981:18285,15043994:18286,15109005:18287,15114127:18288,15119242:18289,15178173:18290,15183508:18291,15184533:18292,15239350:18293,15242884:18294,15253419:18295,15113117:18296,15121568:18297,15173766:18298,15186075:18299,15240875:18300,15312769:18301,15317670:18302,15042493:18465,15183537:18466,15180210:18467,15183544:18468,15237767:18469,15183240:18470,15117224:18471,15055265:18472,15237772:18473,15177105:18474,15177120:18475,15041963:18476,15305122:18477,15121036:18478,15178170:18479,15304343:18480,15313834:18481,14990480:18482,15187376:18483,15108764:18484,15183247:18485,15308453:18486,15315881:18487,15047098:18488,15049113:18489,15244196:18490,15309500:18491,14990516:18492,15042724:18493,15043978:18494,15044493:18495,15044507:18496,15054982:18497,15110316:18498,15111825:18499,15113663:18500,15118526:18501,15118734:18502,15174024:18503,15174319:18504,15175597:18505,15177108:18506,15186305:18507,15239340:18508,15243177:18509,15250089:18510,15183748:18511,15304582:18512,15173033:18513,15310994:18514,15311791:18515,15109309:18516,15112617:18517,15177130:18518,15178660:18519,15180688:18520,15242627:18521,15244206:18522,15043754:18523,15043985:18524,15044774:18525,15050371:18526,15055495:18527,15056316:18528,15106738:18529,15108489:18530,15108537:18531,15108779:18532,15111824:18533,15118228:18534,15119244:18535,15177394:18536,15178414:18537,15180433:18538,15181720:18539,15185803:18540,15187383:18541,15237797:18542,15245995:18543,15248057:18544,15250107:18545,15303103:18546,15310238:18547,15311771:18548,15116427:18549,15184056:18550,15041177:18551,15052990:18552,15056558:18553,15113863:18554,15118232:18555,15175861:18556,15178889:18557,15187598:18558,15318203:18721,15114122:18722,15181975:18723,15043769:18724,15177355:18725,15313837:18726,15056294:18727,15238813:18728,15241137:18729,15237784:18730,15056060:18731,15056773:18732,15177122:18733,15183238:18734,15302844:18735,15114663:18736,15050667:18737,15051419:18738,15185040:18739,15178174:18740,15248556:18741,14991285:18742,15056298:18743,15116441:18744,15118519:18745,15121538:18746,15176610:18747,15181224:18748,15245736:18749,15247765:18750,15249849:18751,15055775:18752,15110031:18753,15177605:18754,15181714:18755,15240087:18756,15305896:18757,15305650:18758,15241884:18759,15244205:18760,15315117:18761,15045505:18762,15056300:18763,15111820:18764,15119772:18765,15171733:18766,15250087:18767,15250323:18768,15311035:18769,15111567:18770,15176630:18771,14989453:18772,14990232:18773,15048608:18774,15049899:18775,15051174:18776,15052684:18777,15042216:18778,15054979:18779,15055516:18780,15106198:18781,15108534:18782,15111607:18783,15111847:18784,15112622:18785,15119790:18786,15173814:18787,15183014:18788,15238544:18789,15238810:18790,15239833:18791,15248796:18792,15250080:18793,15250342:18794,15250868:18795,15308956:18796,15309188:18797,14991022:18798,15110827:18799,15117734:18800,15239326:18801,15241633:18802,15242666:18803,15303592:18804,15052929:18805,15115667:18806,15311528:18807,15241658:18808,15242647:18809,14990479:18810,15042991:18811,15056553:18812,15055237:18813,15113357:18814,15181455:18977,15238585:18978,15246471:18979,15246982:18980,15120309:18981,15056023:18982,15108501:18983,15119032:18984,14990223:18985,15174057:18986,15314578:18987,15042694:18988,15044795:18989,15047092:18990,15049395:18991,15107748:18992,15108526:18993,15172762:18994,15050158:18995,15184521:18996,15184798:18997,15185051:18998,15309744:18999,15111815:19e3,15237534:19001,14989465:19002,14990773:19003,15041973:19004,15049088:19005,15055267:19006,15055283:19007,15056010:19008,15114116:19009,14989478:19010,15242429:19011,15308425:19012,15309211:19013,15184307:19014,15310977:19015,15041467:19016,15049601:19017,15178134:19018,15180455:19019,15042725:19020,15179429:19021,15242385:19022,15183494:19023,15040911:19024,15049865:19025,15174023:19026,15183751:19027,15185832:19028,15253178:19029,15253396:19030,15303053:19031,14991039:19032,15043465:19033,15050921:19034,15056001:19035,15310509:19036,14991261:19037,15239319:19038,15305642:19039,15047811:19040,15109525:19041,15117737:19042,15176875:19043,15246236:19044,15252628:19045,15182210:19046,15043487:19047,15049363:19048,15107477:19049,15108234:19050,15112878:19051,15118221:19052,15184063:19053,15241129:19054,15040675:19055,14991288:19056,15043717:19057,15044998:19058,15048881:19059,15050121:19060,15052445:19061,15053744:19062,15053743:19063,15053993:19064,15055510:19065,15108785:19066,15109543:19067,15111358:19068,15111865:19069,15113355:19070,15119253:19233,15119265:19234,15172537:19235,15179954:19236,15186091:19237,15238046:19238,15239859:19239,15241356:19240,15242156:19241,15244418:19242,15246482:19243,15247530:19244,15249802:19245,15303334:19246,15305618:19247,15311805:19248,15315891:19249,15316396:19250,14989711:19251,14989985:19252,15041165:19253,15042966:19254,15048074:19255,15050408:19256,15055037:19257,15056792:19258,15056793:19259,15108287:19260,15112884:19261,15113371:19262,15114128:19263,15115154:19264,15042194:19265,15185057:19266,15237802:19267,15238824:19268,15248512:19269,15250060:19270,15250111:19271,15305150:19272,15308978:19273,15044768:19274,15311020:19275,15043735:19276,15041429:19277,15043996:19278,15049384:19279,15110834:19280,15113396:19281,15174055:19282,15179174:19283,15182214:19284,15304614:19285,15043459:19286,15119009:19287,15117958:19288,15048832:19289,15055244:19290,15050132:19291,15113388:19292,15187899:19293,15042465:19294,15178630:19295,15110569:19296,15180712:19297,15314324:19298,15317691:19299,15048587:19300,15050425:19301,15112359:19302,15113882:19303,15118222:19304,15045545:19305,15116185:19306,15055253:19307,15238812:19308,15113877:19309,15314602:19310,15114174:19311,15315346:19312,15114653:19313,14989990:19314,14991267:19315,15044488:19316,15108793:19317,15113387:19318,15119019:19319,15253380:19320,14991021:19321,15186349:19322,15317695:19323,14989447:19324,15107490:19325,15121024:19326,15121579:19489,15242387:19490,15045043:19491,15113386:19492,15314309:19493,15054771:19494,15183509:19495,15053484:19496,15052678:19497,15244444:19498,15120778:19499,15242129:19500,15181972:19501,15238280:19502,15050393:19503,15184525:19504,15118481:19505,15178912:19506,15043481:19507,15049890:19508,15172769:19509,15174047:19510,15179675:19511,15309991:19512,15316385:19513,15115403:19514,15051199:19515,15050904:19516,15042213:19517,15044749:19518,15045053:19519,15112334:19520,15178655:19521,15253431:19522,15305368:19523,15315892:19524,15050666:19525,15174045:19526,15121285:19527,15041933:19528,15115145:19529,15185599:19530,15185836:19531,15310242:19532,15317690:19533,15110584:19534,15116449:19535,15240322:19536,15050372:19537,15052191:19538,15118235:19539,15174811:19540,15178674:19541,15185586:19542,15237271:19543,15241881:19544,15041714:19545,15113384:19546,15317913:19547,15178670:19548,15113634:19549,15043519:19550,15312005:19551,15052964:19552,15108283:19553,15184318:19554,15250096:19555,15046031:19556,15106742:19557,15185035:19558,15308416:19559,15043713:19560,14989727:19561,15042230:19562,15049884:19563,15173818:19564,15237302:19565,15304590:19566,15056037:19567,15179682:19568,15044228:19569,15056313:19570,15185028:19571,15242924:19572,15247539:19573,15252109:19574,15310230:19575,15114163:19576,15242926:19577,15307155:19578,15107209:19579,15107208:19580,15119033:19581,15178130:19582,15248301:19745,15252664:19746,15045807:19747,14990737:19748,15041706:19749,15043463:19750,15044491:19751,15052453:19752,15055293:19753,15106720:19754,15107714:19755,15110038:19756,15113353:19757,15114138:19758,15120807:19759,15120012:19760,15174838:19761,15174839:19762,15176881:19763,15181200:19764,15246229:19765,15248024:19766,15303050:19767,15303313:19768,15303605:19769,15309700:19770,15244941:19771,15049877:19772,14989960:19773,14990745:19774,14989454:19775,15248009:19776,15252671:19777,15310992:19778,15041197:19779,15055292:19780,15050390:19781,15052473:19782,15055544:19783,15110042:19784,15110074:19785,15111041:19786,15113116:19787,15115658:19788,15116184:19789,15119499:19790,15121078:19791,15173268:19792,15176872:19793,15182511:19794,15187594:19795,15237248:19796,15241609:19797,15242121:19798,15246977:19799,15248545:19800,15251594:19801,15303077:19802,15309245:19803,15312010:19804,15107518:19805,15108753:19806,15117490:19807,15118979:19808,15119796:19809,15187852:19810,15187900:19811,15120256:19812,15187589:19813,15244986:19814,15246264:19815,15113637:19816,15240881:19817,15311036:19818,15309751:19819,15119515:19820,15185313:19821,15241405:19822,15304106:19823,14989745:19824,15044021:19825,15054224:19826,15117444:19827,15122347:19828,15243149:19829,15243437:19830,15247015:19831,15042729:19832,15044751:19833,15053221:19834,15113614:19835,15114920:19836,15175814:19837,15176323:19838,15177634:20001,15246223:20002,15246241:20003,15304588:20004,15309730:20005,15309240:20006,15056523:20007,15175303:20008,15182731:20009,15241614:20010,15109792:20011,15177125:20012,15043209:20013,15119745:20014,15121052:20015,15175817:20016,15177113:20017,15180203:20018,15184530:20019,15309446:20020,15182748:20021,15318669:20022,14991030:20023,15107502:20024,15112069:20025,15243676:20026,14989958:20027,14989998:20028,15041434:20029,14989473:20030,15042444:20031,15052718:20032,15111833:20033,15114881:20034,15120060:20035,15174815:20036,15178114:20037,15179437:20038,15181980:20039,15184807:20040,15239599:20041,15248274:20042,15303100:20043,15304591:20044,15309237:20045,15311e3:20046,15043227:20047,15185809:20048,15040683:20049,15044248:20050,15113879:20051,15120267:20052,15173520:20053,15175859:20054,15239080:20055,15252650:20056,15309475:20057,15315351:20058,15317663:20059,15176096:20060,15049089:20061,15120025:20062,15185071:20063,15311262:20064,14990244:20065,14990518:20066,14990987:20067,15042231:20068,15043249:20069,15054522:20070,15106204:20071,15175346:20072,15180988:20073,15240083:20074,15304884:20075,15309495:20076,15309750:20077,15309962:20078,15317655:20079,15318434:20080,15112870:20081,15117748:20082,15042711:20083,15043235:20084,15172488:20085,15246210:20086,15055753:20087,15106443:20088,15107728:20089,15121571:20090,15173001:20091,15184062:20092,15185844:20093,15237551:20094,15242158:20257,15302819:20258,15305900:20259,15044994:20260,15314351:20261,15117203:20262,15172233:20263,15250306:20264,15251375:20265,15310002:20266,15043252:20267,15051137:20268,15055754:20269,15056004:20270,15113367:20271,15115708:20272,15115924:20273,15119786:20274,15121551:20275,15174050:20276,15174588:20277,15183789:20278,15237249:20279,15237566:20280,15244683:20281,15303566:20282,15041965:20283,15317651:20284,15181444:20285,15237771:20286,15305906:20287,15248278:20288,15040685:20289,15045260:20290,15247793:20291,15117738:20292,15250308:20293,15238279:20294,15106961:20295,15113888:20296,15316914:20297,14989977:20298,14989976:20299,15315088:20300,15247787:20301,15243137:20302,15242664:20303,15115392:20304,15120830:20305,15180439:20306,15238549:20307,15056012:20513,14989456:20514,14989461:20515,14989482:20516,14989489:20517,14989494:20518,14989500:20519,14989503:20520,14989698:20521,14989718:20522,14989720:20523,14989954:20524,14989957:20525,15249835:20526,14989962:20527,15239314:20528,15056013:20529,14989966:20530,14989982:20531,14989983:20532,14989984:20533,14989986:20534,1499e4:20535,14990003:20536,14990006:20537,14990222:20538,14990221:20539,14990212:20540,14990214:20541,14990210:20542,14990231:20543,14990238:20544,14990253:20545,14990239:20546,14990263:20547,14990473:20548,14990746:20549,14990512:20550,14990747:20551,14990749:20552,14990743:20553,14990727:20554,14990774:20555,14990984:20556,14990991:20557,14991e3:20558,14990779:20559,14990761:20560,14990768:20561,14990993:20562,14990767:20563,14990982:20564,14990998:20565,15041688:20566,14991252:20567,14991263:20568,14991246:20569,14991256:20570,14991259:20571,14991249:20572,14991258:20573,14991248:20574,14991268:20575,14991269:20576,15040666:20577,15040680:20578,15040660:20579,15040682:20580,15040677:20581,15040645:20582,14990492:20583,14991286:20584,15040673:20585,15040681:20586,15040684:20587,14991294:20588,14991279:20589,15040657:20590,15040646:20591,15040899:20592,15040903:20593,15113347:20594,15040917:20595,15040912:20596,15040904:20597,15040922:20598,15040918:20599,15040940:20600,15040952:20601,15041152:20602,15041178:20603,15041157:20604,15041204:20605,15041202:20606,15041417:20769,15041418:20770,15041203:20771,15041410:20772,15041430:20773,15041438:20774,15041445:20775,15041453:20776,15041443:20777,15041454:20778,15041465:20779,15041461:20780,15041673:20781,15041665:20782,15041666:20783,15041686:20784,15041685:20785,15041684:20786,15041690:20787,15041697:20788,15041722:20789,15041719:20790,15041724:20791,15041723:20792,15041727:20793,15041920:20794,15041938:20795,15041932:20796,15041940:20797,15041954:20798,15182776:20799,15041961:20800,15041962:20801,15041966:20802,15042176:20803,15042178:20804,15047576:20805,15042188:20806,15042185:20807,15042191:20808,15042193:20809,15042195:20810,15042197:20811,15042198:20812,15042212:20813,15042214:20814,15042210:20815,15042217:20816,15042218:20817,15042219:20818,15042227:20819,15042225:20820,15042226:20821,15042224:20822,15042229:20823,15042237:20824,15042437:20825,15042441:20826,15042459:20827,15042464:20828,15243669:20829,15042473:20830,15042477:20831,15042480:20832,15042485:20833,15042494:20834,15042692:20835,15042699:20836,15042708:20837,15042702:20838,15042727:20839,15042730:20840,15042734:20841,15042739:20842,15042745:20843,15042959:20844,15042948:20845,15042955:20846,15042956:20847,15042974:20848,15042964:20849,15042986:20850,15042996:20851,15042985:20852,15042995:20853,15043007:20854,15043005:20855,15043213:20856,15043220:20857,15043218:20858,15042993:20859,15043208:20860,15043217:20861,15253160:20862,15253159:21025,15043244:21026,15043245:21027,15043260:21028,15043253:21029,15043457:21030,15043469:21031,15043479:21032,15043486:21033,15043491:21034,15043494:21035,15311789:21036,15043488:21037,15043507:21038,15043509:21039,15043512:21040,15043513:21041,15043718:21042,15043720:21043,15176888:21044,15043725:21045,15043728:21046,15043727:21047,15043733:21048,15043738:21049,15043747:21050,15043759:21051,15043761:21052,15043763:21053,15043768:21054,15043968:21055,15043974:21056,15043973:21057,14989463:21058,15043977:21059,15043981:21060,15042454:21061,15043998:21062,15044009:21063,15044014:21064,15049880:21065,15044027:21066,15044023:21067,15044226:21068,15044246:21069,15044256:21070,15044262:21071,15044261:21072,15044270:21073,15044272:21074,15044278:21075,15044483:21076,15184018:21077,15309721:21078,15044511:21079,15113148:21080,15173550:21081,15044526:21082,15044520:21083,15044525:21084,15044538:21085,15044737:21086,15044797:21087,15044992:21088,15044780:21089,15044781:21090,15044796:21091,15044782:21092,15044790:21093,15044777:21094,15044765:21095,15045006:21096,15045263:21097,15045045:21098,15045262:21099,15045023:21100,15045041:21101,15045047:21102,15045040:21103,15045266:21104,15045051:21105,15045248:21106,15045046:21107,15045252:21108,15045264:21109,15045254:21110,15045511:21111,15045282:21112,15045304:21113,15045285:21114,15045292:21115,15045508:21116,15045512:21117,15045288:21118,15045291:21281,15045506:21282,15045284:21283,15045310:21284,15045308:21285,15045528:21286,15045541:21287,15045542:21288,15045775:21289,15045780:21290,15045565:21291,15045550:21292,15045549:21293,15045562:21294,15045538:21295,15045817:21296,15046016:21297,15046051:21298,15046028:21299,15045806:21300,15046044:21301,15046021:21302,15046038:21303,15046039:21304,15045816:21305,15045811:21306,15046045:21307,15046297:21308,15046272:21309,15045295:21310,15046282:21311,15046303:21312,15046075:21313,15046078:21314,15046296:21315,15046302:21316,15046318:21317,15046076:21318,15046275:21319,15046313:21320,15046279:21321,15046312:21322,15046554:21323,15046533:21324,15046559:21325,15046532:21326,15046556:21327,15046564:21328,15046548:21329,15046804:21330,15046583:21331,15046806:21332,15046590:21333,15046589:21334,15046811:21335,15046585:21336,15047054:21337,15047056:21338,15173535:21339,15046836:21340,15046838:21341,15046834:21342,15046840:21343,15047083:21344,15047076:21345,15046831:21346,15047084:21347,15047082:21348,15047302:21349,15047296:21350,15047306:21351,15047328:21352,15047316:21353,15047311:21354,15047333:21355,15047342:21356,15047350:21357,15047348:21358,15047554:21359,15047356:21360,15047553:21361,15047555:21362,15047552:21363,15047560:21364,15047566:21365,15047569:21366,15047571:21367,15047575:21368,15047598:21369,15047609:21370,15047808:21371,15047615:21372,15047812:21373,15047817:21374,15047816:21537,15047819:21538,15047821:21539,15047827:21540,15047832:21541,15047830:21542,15046535:21543,15047836:21544,15047846:21545,15047863:21546,15047864:21547,15048078:21548,15047867:21549,15048064:21550,15048079:21551,15048105:21552,15048576:21553,15048328:21554,15048097:21555,15048127:21556,15048329:21557,15048339:21558,15048352:21559,15048371:21560,15048356:21561,15048362:21562,15048368:21563,15048579:21564,15048582:21565,15048596:21566,15048594:21567,15048595:21568,15048842:21569,15048598:21570,15048611:21571,15048843:21572,15048857:21573,15048861:21574,15049138:21575,15048865:21576,15049122:21577,15049099:21578,15049136:21579,15118208:21580,15049106:21581,15048893:21582,15049145:21583,15049349:21584,15049401:21585,15049375:21586,15049387:21587,15049402:21588,15049630:21589,15049403:21590,15049400:21591,15049390:21592,15049605:21593,15049619:21594,15049617:21595,15049623:21596,15049625:21597,15049624:21598,15049637:21599,15049628:21600,15049636:21601,15049631:21602,15049647:21603,15049658:21604,15049657:21605,15049659:21606,15049660:21607,15049661:21608,15049858:21609,15049866:21610,15049872:21611,15049883:21612,15114918:21613,15049893:21614,15049900:21615,15049901:21616,15049906:21617,15049912:21618,15049918:21619,15182738:21620,15050133:21621,15050128:21622,15050126:21623,15050138:21624,15050136:21625,15050146:21626,15050144:21627,15050151:21628,15050156:21629,15050153:21630,15050168:21793,15050369:21794,15050397:21795,14990750:21796,14991019:21797,15050403:21798,15050418:21799,15050630:21800,15050664:21801,15050652:21802,15050381:21803,15050649:21804,15050650:21805,15050917:21806,15050911:21807,15050897:21808,15050908:21809,15050889:21810,15050906:21811,15051136:21812,15051180:21813,15051145:21814,15050933:21815,15050934:21816,15051170:21817,15051178:21818,15051418:21819,15051452:21820,15051454:21821,15051659:21822,15051650:21823,15051453:21824,15051683:21825,15051671:21826,15051686:21827,15051689:21828,15051670:21829,15051706:21830,15051707:21831,15051916:21832,15051915:21833,15051926:21834,15051954:21835,15051664:21836,15051946:21837,15051958:21838,15051966:21839,15052163:21840,15052165:21841,15052160:21842,15052177:21843,15052181:21844,15052186:21845,15052187:21846,15052197:21847,15052201:21848,15052208:21849,15052211:21850,15052213:21851,15052216:21852,15111816:21853,15052218:21854,15052416:21855,15052419:21856,15052454:21857,15052472:21858,15052675:21859,15052679:21860,15052681:21861,15052692:21862,15052688:21863,15052708:21864,15052710:21865,15052706:21866,15052702:21867,15052709:21868,15052715:21869,15052720:21870,15052726:21871,15052723:21872,15052933:21873,15052935:21874,15052936:21875,15052941:21876,15052947:21877,15052960:21878,15052962:21879,15052968:21880,15052984:21881,15052985:21882,15053185:21883,15053190:21884,15053198:21885,15053203:21886,15053200:22049,15053199:22050,15052209:22051,15053228:22052,15053230:22053,14989730:22054,15053238:22055,15053241:22056,15053452:22057,15053457:22058,15053460:22059,15050395:22060,15053483:22061,15053499:22062,15053494:22063,15053500:22064,15053495:22065,15053701:22066,15053502:22067,15053703:22068,15053721:22069,15053737:22070,15053757:22071,15053754:22072,15053741:22073,15054476:22074,15053738:22075,15053963:22076,15053973:22077,15053975:22078,15054236:22079,15053983:22080,15053979:22081,15053969:22082,15053972:22083,15053986:22084,15053978:22085,15053977:22086,15053976:22087,15054220:22088,15054226:22089,15054222:22090,15054219:22091,15054252:22092,15054259:22093,15054262:22094,15054471:22095,15054468:22096,15054466:22097,15054498:22098,15054493:22099,15054508:22100,15054510:22101,15054525:22102,15054480:22103,15054519:22104,15054524:22105,15054729:22106,15054733:22107,15054739:22108,15054738:22109,15054742:22110,15054747:22111,15054763:22112,15054770:22113,15054773:22114,15054987:22115,15055002:22116,15055001:22117,15054993:22118,15055003:22119,15055030:22120,15055031:22121,15055236:22122,15055235:22123,15055232:22124,15055246:22125,15055255:22126,15055252:22127,15055263:22128,15055266:22129,15055268:22130,15055239:22131,15055285:22132,15055286:22133,15055290:22134,15317692:22135,15055295:22136,15055520:22137,15055745:22138,15055746:22139,15055752:22140,15055760:22141,15055759:22142,15055766:22305,15055779:22306,15055773:22307,15055770:22308,15055771:22309,15055778:22310,15055777:22311,15055784:22312,15055785:22313,15055788:22314,15055793:22315,15055795:22316,15055792:22317,15055796:22318,15055800:22319,15055806:22320,15056003:22321,15056009:22322,15056285:22323,15056284:22324,15056011:22325,15056017:22326,15056022:22327,15056041:22328,15056045:22329,15056056:22330,15056257:22331,15056264:22332,15056268:22333,15056270:22334,15056047:22335,15056273:22336,15056278:22337,15056279:22338,15056281:22339,15056289:22340,15056301:22341,15056307:22342,15056311:22343,15056515:22344,15056514:22345,15056319:22346,15056522:22347,15056520:22348,15056529:22349,15056519:22350,15056542:22351,15056537:22352,15056536:22353,15056544:22354,15056552:22355,15056557:22356,15056572:22357,15056790:22358,15056827:22359,15056804:22360,15056824:22361,15056817:22362,15056797:22363,15106739:22364,15056831:22365,15106209:22366,15106464:22367,15106201:22368,15106192:22369,15106217:22370,15106190:22371,15106225:22372,15106203:22373,15106197:22374,15106219:22375,15106214:22376,15106191:22377,15106234:22378,15106458:22379,15106433:22380,15106474:22381,15106487:22382,15106463:22383,15106442:22384,15106438:22385,15106445:22386,15106467:22387,15106435:22388,15106468:22389,15106434:22390,15106476:22391,15106475:22392,15106457:22393,15106689:22394,15106701:22395,15106983:22396,15106691:22397,15106714:22398,15106692:22561,15106715:22562,15106710:22563,15106711:22564,15106706:22565,15106727:22566,15106699:22567,15106977:22568,15106744:22569,15106976:22570,15106963:22571,15106740:22572,15056816:22573,15106749:22574,15106950:22575,15106741:22576,15106968:22577,15107469:22578,15107221:22579,15107206:22580,15106998:22581,15106999:22582,15107200:22583,15106996:22584,15107002:22585,15107203:22586,15107233:22587,15107003:22588,15106993:22589,15107213:22590,15107214:22591,15107463:22592,15107262:22593,15107240:22594,15107239:22595,15107466:22596,15107263:22597,15107260:22598,15107244:22599,15107252:22600,15107261:22601,15107458:22602,15107460:22603,15107507:22604,15107511:22605,15107480:22606,15107481:22607,15107482:22608,15107499:22609,15107508:22610,15107503:22611,15107493:22612,15107505:22613,15107487:22614,15107485:22615,15107475:22616,15107509:22617,15107737:22618,15107734:22619,15107719:22620,15107756:22621,15107732:22622,15107738:22623,15107722:22624,15107729:22625,15107755:22626,15107758:22627,15107980:22628,15107978:22629,15107977:22630,15108023:22631,15107976:22632,15107971:22633,15107974:22634,15107770:22635,15107979:22636,15187385:22637,15107981:22638,15108006:22639,15108003:22640,15108022:22641,15108026:22642,15108020:22643,15108031:22644,15108029:22645,15108028:22646,15108030:22647,15108224:22648,15108232:22649,15108233:22650,15108237:22651,15108236:22652,15108244:22653,15108251:22654,15108254:22817,15108257:22818,15108266:22819,15108270:22820,15108272:22821,15108274:22822,15108275:22823,15108481:22824,15108494:22825,15108510:22826,15108515:22827,15108507:22828,15108512:22829,15108520:22830,15108540:22831,15108738:22832,15108745:22833,15108542:22834,15108754:22835,15108755:22836,15108758:22837,15109012:22838,15108739:22839,15108756:22840,15109015:22841,15109009:22842,15108795:22843,15109007:22844,15109055:22845,15108998:22846,15111060:22847,15109e3:22848,15109020:22849,15109004:22850,15109002:22851,15108994:22852,15108999:22853,15108763:22854,15109001:22855,15109260:22856,15109038:22857,15109041:22858,15109287:22859,15109250:22860,15109256:22861,15109039:22862,15109045:22863,15109520:22864,15109310:22865,15109517:22866,15110300:22867,15109519:22868,15109782:22869,15109774:22870,15109760:22871,15109803:22872,15109558:22873,15109795:22874,15109775:22875,15109769:22876,15109791:22877,15109813:22878,15109547:22879,15109545:22880,15109822:22881,15110057:22882,15110016:22883,15110022:22884,15110051:22885,15110025:22886,15110034:22887,15110070:22888,15110020:22889,15110294:22890,15110324:22891,15110278:22892,15110291:22893,15110310:22894,15110326:22895,15111325:22896,15110295:22897,15110312:22898,15110287:22899,15110567:22900,15110575:22901,15110582:22902,15110542:22903,15111338:22904,15110805:22905,15110803:22906,15110821:22907,15110825:22908,15110792:22909,15110844:22910,15111066:23073,15111058:23074,15111045:23075,15111047:23076,15110843:23077,15111064:23078,15111042:23079,15111089:23080,15111079:23081,15239305:23082,15111072:23083,15111073:23084,15108780:23085,15111075:23086,15111087:23087,15111340:23088,15111094:23089,15111092:23090,15111090:23091,15111098:23092,15111296:23093,15111101:23094,15111320:23095,15111324:23096,15111301:23097,15111332:23098,15111331:23099,15111339:23100,15111348:23101,15111349:23102,15111351:23103,15111350:23104,15111352:23105,15177099:23106,15111560:23107,15111574:23108,15111573:23109,15111565:23110,15111576:23111,15111582:23112,15111581:23113,15111602:23114,15111608:23115,15111810:23116,15111811:23117,15249034:23118,15111835:23119,15111839:23120,15111851:23121,15111863:23122,15112067:23123,15112070:23124,15112065:23125,15112068:23126,15112076:23127,15112082:23128,15112091:23129,15112089:23130,15112096:23131,15112097:23132,15112113:23133,15113650:23134,15112330:23135,15112323:23136,15112123:23137,15113651:23138,15112373:23139,15112374:23140,15112372:23141,15112348:23142,15112591:23143,15112580:23144,15112585:23145,15112577:23146,15112606:23147,15112605:23148,15112612:23149,15112615:23150,15112616:23151,15112607:23152,15112610:23153,15112624:23154,15112835:23155,15112840:23156,15112846:23157,15112841:23158,15112836:23159,15112856:23160,15112861:23161,15113089:23162,15112889:23163,15113097:23164,15112894:23165,15112892:23166,15113092:23329,15112888:23330,15113110:23331,15113114:23332,15113120:23333,15112383:23334,15113126:23335,15113129:23336,15113136:23337,15113141:23338,15113143:23339,15113359:23340,15113366:23341,15113374:23342,15113382:23343,15113383:23344,15310008:23345,15113390:23346,15113407:23347,15113398:23348,15113601:23349,15113400:23350,15113399:23351,15113606:23352,15113630:23353,15113632:23354,15113625:23355,15113635:23356,15113636:23357,15113865:23358,15113648:23359,15113897:23360,15113660:23361,15113642:23362,15113868:23363,15113867:23364,15113894:23365,15113889:23366,15113861:23367,15113911:23368,15114159:23369,15113908:23370,15114156:23371,15113907:23372,15114153:23373,15113912:23374,15114148:23375,15114142:23376,15114141:23377,15114146:23378,15114158:23379,15113913:23380,15114126:23381,15114118:23382,15114151:23383,15116956:23384,15114398:23385,15114630:23386,15114409:23387,15114624:23388,15114637:23389,15114418:23390,15114638:23391,15114931:23392,15114411:23393,15114649:23394,15114659:23395,15114679:23396,15114687:23397,15114911:23398,15114895:23399,15114925:23400,15114900:23401,15114909:23402,15114907:23403,15114883:23404,15116974:23405,15114937:23406,15114676:23407,15114933:23408,15114912:23409,15114938:23410,15115407:23411,15114893:23412,15114686:23413,15115393:23414,15115146:23415,15115400:23416,15115160:23417,15115426:23418,15115430:23419,15115169:23420,15115404:23421,15115149:23422,15115156:23585,15115175:23586,15115157:23587,15115446:23588,15115410:23589,15115396:23590,15115159:23591,15115171:23592,15115429:23593,15115193:23594,15115168:23595,15115183:23596,15115432:23597,15115434:23598,15115418:23599,15115427:23600,15115425:23601,15115142:23602,15115705:23603,15115703:23604,15115676:23605,15115704:23606,15115691:23607,15115668:23608,15115710:23609,15115694:23610,15115449:23611,15115700:23612,15115453:23613,15115673:23614,15115440:23615,15115681:23616,15115678:23617,15115677:23618,15115905:23619,15115690:23620,15115954:23621,15115950:23622,15116176:23623,15115967:23624,15116161:23625,15116179:23626,15115966:23627,15116174:23628,15052712:23629,15116170:23630,15116189:23631,15115963:23632,15116163:23633,15115943:23634,15116462:23635,15115921:23636,15115936:23637,15115932:23638,15115925:23639,15115956:23640,15116190:23641,15116200:23642,15116418:23643,15116443:23644,15116223:23645,15117450:23646,15116217:23647,15116210:23648,15116199:23649,15116421:23650,15115953:23651,15116446:23652,15116205:23653,15116436:23654,15116203:23655,15116426:23656,15116434:23657,15117185:23658,15116451:23659,15116435:23660,15116676:23661,15116428:23662,15116722:23663,15116470:23664,15116728:23665,15116679:23666,15116706:23667,15116697:23668,15116710:23669,15116680:23670,15116472:23671,15116450:23672,15116944:23673,15116941:23674,15116960:23675,15116932:23676,15116962:23677,15116963:23678,15116951:23841,15243415:23842,15116987:23843,15117187:23844,15117186:23845,15116984:23846,15116979:23847,15116972:23848,15117214:23849,15117201:23850,15117215:23851,15116970:23852,15117210:23853,15117226:23854,15117243:23855,15117445:23856,15243414:23857,15117242:23858,15117458:23859,15117462:23860,15314097:23861,15117471:23862,15117496:23863,15117495:23864,15178652:23865,15117497:23866,15311790:23867,15117703:23868,15117699:23869,15117705:23870,15117712:23871,15117721:23872,15117716:23873,15117723:23874,15117727:23875,15117729:23876,15117752:23877,15117753:23878,15117759:23879,15117952:23880,15117956:23881,15117955:23882,15117965:23883,15117976:23884,15117973:23885,15117982:23886,15117988:23887,15117994:23888,15117995:23889,15117999:23890,15118002:23891,15118001:23892,15118003:23893,15118007:23894,15118012:23895,15118214:23896,15118219:23897,15118227:23898,15118239:23899,15118252:23900,15118251:23901,15118259:23902,15118255:23903,15317694:23904,15118472:23905,15118483:23906,15118484:23907,15118491:23908,15118500:23909,15118499:23910,15118750:23911,15118741:23912,15118754:23913,15118762:23914,15118978:23915,15118989:23916,15119002:23917,15118977:23918,15119003:23919,15118782:23920,15118760:23921,15118771:23922,15118994:23923,15118992:23924,15119236:23925,15119281:23926,15119251:23927,15119037:23928,15119255:23929,15119237:23930,15119261:23931,15119022:23932,15119025:23933,15119038:23934,15119034:24097,15119259:24098,15119279:24099,15119257:24100,15119274:24101,15119519:24102,15245709:24103,15119542:24104,15119531:24105,15119549:24106,15119544:24107,15119513:24108,15119541:24109,15119539:24110,15119506:24111,15119500:24112,15119779:24113,15120019:24114,15119780:24115,15119770:24116,15119801:24117,15119769:24118,15120014:24119,15120021:24120,15122340:24121,15120005:24122,15120313:24123,15120533:24124,15120522:24125,15120053:24126,15120263:24127,15120294:24128,15120056:24129,15120262:24130,15120300:24131,15120286:24132,15120268:24133,15120296:24134,15120274:24135,15120261:24136,15120314:24137,15120281:24138,15120292:24139,15120277:24140,15120298:24141,15120302:24142,15120557:24143,15120814:24144,15120558:24145,15120537:24146,15120818:24147,15120799:24148,15120574:24149,15120547:24150,15120811:24151,15120555:24152,15120822:24153,15120781:24154,15120543:24155,15120771:24156,15120570:24157,15120782:24158,15120548:24159,15121343:24160,15120541:24161,15120568:24162,15121026:24163,15121066:24164,15121048:24165,15121289:24166,15121079:24167,15121299:24168,15121085:24169,15121071:24170,15121284:24171,15121074:24172,15121300:24173,15121301:24174,15121039:24175,15121061:24176,15121282:24177,15121055:24178,15121793:24179,15121553:24180,15171980:24181,15121324:24182,15121336:24183,15121342:24184,15121599:24185,15121330:24186,15121585:24187,15121327:24188,15121586:24189,15121292:24190,15121598:24353,15121555:24354,15121335:24355,15122054:24356,15121850:24357,15121848:24358,15122049:24359,15122048:24360,15121839:24361,15121819:24362,15122355:24363,15121837:24364,15122050:24365,15121852:24366,15121816:24367,15122062:24368,15122065:24369,15122306:24370,15121830:24371,15122099:24372,15122083:24373,15122081:24374,15122084:24375,15122105:24376,15122310:24377,15122090:24378,15122335:24379,15122325:24380,15122348:24381,15122324:24382,15122328:24383,15122353:24384,15122350:24385,15122331:24386,15171721:24387,15171723:24388,15122362:24389,15171729:24390,15171713:24391,15171727:24392,15122366:24393,15171739:24394,15171738:24395,15121844:24396,15171741:24397,15171736:24398,15171743:24399,15171760:24400,15171774:24401,15171762:24402,15171985:24403,15172003:24404,15172249:24405,15172242:24406,15172271:24407,15172529:24408,15172268:24409,15172280:24410,15172275:24411,15172270:24412,15172511:24413,15172491:24414,15172509:24415,15172505:24416,15172745:24417,15172541:24418,15172764:24419,15172761:24420,15173029:24421,15173013:24422,15173256:24423,15173030:24424,15173026:24425,15173004:24426,15173014:24427,15173036:24428,15173263:24429,15173563:24430,15173252:24431,15173269:24432,15173288:24433,15173292:24434,15173527:24435,15173305:24436,15173310:24437,15173522:24438,15173513:24439,15173524:24440,15173518:24441,15173536:24442,15173548:24443,15173543:24444,15173557:24445,15173564:24446,15173561:24609,15173567:24610,15173773:24611,15173776:24612,15173787:24613,15173800:24614,15173805:24615,15173804:24616,15173808:24617,15173810:24618,15173819:24619,15173820:24620,15173823:24621,15174016:24622,15174022:24623,15174027:24624,15174040:24625,15174068:24626,15174078:24627,15174274:24628,15174273:24629,15174279:24630,15174290:24631,15174294:24632,15174306:24633,15174311:24634,15174329:24635,15174322:24636,15174531:24637,15174534:24638,15174532:24639,15174542:24640,15174546:24641,15174562:24642,15174560:24643,15174561:24644,15174585:24645,15174583:24646,15040655:24647,15174807:24648,15174794:24649,15174812:24650,15174806:24651,15174813:24652,15174836:24653,15174831:24654,15174825:24655,15174821:24656,15174846:24657,15175054:24658,15175055:24659,15317912:24660,15175063:24661,15175082:24662,15175080:24663,15175088:24664,15175096:24665,15175093:24666,15175099:24667,15175098:24668,15175560:24669,15175347:24670,15175566:24671,15175355:24672,15175552:24673,15175589:24674,15175598:24675,15175582:24676,15176354:24677,15175813:24678,15176111:24679,15175845:24680,15175608:24681,15175858:24682,15175866:24683,15176085:24684,15175871:24685,15176095:24686,15176089:24687,15176065:24688,15176092:24689,15176105:24690,15176112:24691,15176099:24692,15176106:24693,15176118:24694,15176126:24695,15176331:24696,15176350:24697,15176359:24698,15176586:24699,15176591:24700,15176596:24701,15175601:24702,15176608:24865,15176611:24866,15176615:24867,15176617:24868,15176622:24869,15176626:24870,15176624:24871,15176625:24872,15176632:24873,15176631:24874,15176836:24875,15176835:24876,15176837:24877,15176844:24878,15176846:24879,15176845:24880,15176853:24881,15176851:24882,15176862:24883,15176870:24884,15176876:24885,15176892:24886,15177092:24887,15177101:24888,15177098:24889,15177097:24890,15177115:24891,15177094:24892,15177114:24893,15177129:24894,15177124:24895,15177127:24896,15177131:24897,15177133:24898,15177144:24899,15177142:24900,15177350:24901,15177351:24902,15177140:24903,15177354:24904,15177353:24905,15177346:24906,15177364:24907,15177370:24908,15177373:24909,15177381:24910,15177379:24911,15177602:24912,15177395:24913,15177603:24914,15177397:24915,15177405:24916,15177400:24917,15177404:24918,15177393:24919,15177613:24920,15177610:24921,15177618:24922,15177625:24923,15177635:24924,15177630:24925,15177662:24926,15177663:24927,15177660:24928,15177857:24929,15177648:24930,15177658:24931,15177650:24932,15177651:24933,15177867:24934,15177869:24935,15177865:24936,15177887:24937,15177895:24938,15177888:24939,15177889:24940,15177890:24941,15177892:24942,15177908:24943,15177904:24944,15177915:24945,15178119:24946,15178120:24947,15178118:24948,15178140:24949,15178136:24950,15178145:24951,15178146:24952,15178152:24953,15178153:24954,15178154:24955,15178151:24956,15178156:24957,15178160:24958,15178162:25121,15178166:25122,15178168:25123,15178172:25124,15178368:25125,15178371:25126,15178376:25127,15178379:25128,15178382:25129,15178390:25130,15178387:25131,15178393:25132,15178394:25133,15178416:25134,15178420:25135,15178424:25136,15178425:25137,15178426:25138,15178626:25139,15178637:25140,15178646:25141,15178642:25142,15178654:25143,15178657:25144,15178661:25145,15178663:25146,15178666:25147,15243439:25148,15178683:25149,15178888:25150,15178887:25151,15178884:25152,15178921:25153,15178916:25154,15178910:25155,15178917:25156,15178918:25157,15178907:25158,15178935:25159,15178936:25160,15179143:25161,15179162:25162,15179176:25163,15179179:25164,15179163:25165,15179173:25166,15179199:25167,15179198:25168,15179193:25169,15179406:25170,15179403:25171,15179409:25172,15179424:25173,15179422:25174,15179440:25175,15179446:25176,15179449:25177,15179455:25178,15179452:25179,15179453:25180,15179451:25181,15179655:25182,15179661:25183,15179671:25184,15179674:25185,15179676:25186,15179683:25187,15179694:25188,15179708:25189,15179916:25190,15179922:25191,15180966:25192,15179936:25193,15180970:25194,15180165:25195,15180430:25196,15180212:25197,15180422:25198,15180220:25199,15180442:25200,15180428:25201,15180451:25202,15180469:25203,15180458:25204,15180463:25205,15180689:25206,15180678:25207,15180683:25208,15180692:25209,15180478:25210,15180476:25211,15180677:25212,15180682:25213,15180716:25214,15180711:25377,15180698:25378,15180733:25379,15180724:25380,15180935:25381,15180946:25382,15180945:25383,15180953:25384,15180972:25385,15180971:25386,15181184:25387,15181216:25388,15181207:25389,15181215:25390,15181210:25391,15181205:25392,15181203:25393,15181242:25394,15181247:25395,15181450:25396,15181469:25397,15181479:25398,15318411:25399,15181482:25400,15181486:25401,15181491:25402,15181497:25403,15181498:25404,15181705:25405,15181717:25406,15181735:25407,15181740:25408,15181729:25409,15181731:25410,15181960:25411,15181965:25412,15181976:25413,15181977:25414,15181984:25415,15181983:25416,15181440:25417,15182001:25418,15182011:25419,15182014:25420,15182007:25421,15182211:25422,15182231:25423,15182217:25424,15182241:25425,15182242:25426,15182249:25427,15318685:25428,15182256:25429,15182265:25430,15182269:25431,15182472:25432,15182487:25433,15182485:25434,15182488:25435,15182486:25436,15182505:25437,15182728:25438,15182512:25439,15182518:25440,15182725:25441,15182724:25442,15182527:25443,15303299:25444,15182727:25445,15182730:25446,15182733:25447,15182735:25448,15182741:25449,15182739:25450,15182745:25451,15182746:25452,15182749:25453,15182753:25454,15182754:25455,15182758:25456,15182765:25457,15182768:25458,15182978:25459,15182991:25460,15182986:25461,15182982:25462,15183027:25463,15183e3:25464,15183001:25465,15183006:25466,15183029:25467,15183016:25468,15183030:25469,15183248:25470,15183290:25633,15182980:25634,15183245:25635,15182987:25636,15183244:25637,15183237:25638,15183285:25639,15183269:25640,15183284:25641,15183271:25642,15183280:25643,15183281:25644,15183276:25645,15183278:25646,15183517:25647,15183512:25648,15183519:25649,15183501:25650,15183516:25651,15183514:25652,15183499:25653,15183506:25654,15183503:25655,15183261:25656,15183513:25657,15183755:25658,15183745:25659,15183756:25660,15183759:25661,15183540:25662,15183750:25663,15183773:25664,15183785:25665,15184017:25666,15184020:25667,15183782:25668,15183781:25669,15184288:25670,15184e3:25671,15184007:25672,15184019:25673,15183795:25674,15183799:25675,15184023:25676,15184013:25677,15183798:25678,15184035:25679,15184039:25680,15184042:25681,15184031:25682,15184055:25683,15184043:25684,15184061:25685,15184268:25686,15184259:25687,15184276:25688,15184271:25689,15184256:25690,15184272:25691,15184280:25692,15184287:25693,15184292:25694,15184278:25695,15184293:25696,15184300:25697,15184309:25698,15184515:25699,15184528:25700,15184548:25701,15184557:25702,15184546:25703,15184555:25704,15184545:25705,15184552:25706,15184563:25707,15184562:25708,15184561:25709,15184558:25710,15184569:25711,15184573:25712,15184768:25713,15184773:25714,15184770:25715,15184792:25716,15184786:25717,15184796:25718,15184802:25719,15314107:25720,15184815:25721,15184818:25722,15184820:25723,15184822:25724,15184826:25725,15185030:25726,15185026:25889,15185052:25890,15185045:25891,15185034:25892,15185285:25893,15185291:25894,15185070:25895,15185074:25896,15185087:25897,15185077:25898,15185286:25899,15185331:25900,15185302:25901,15185294:25902,15185330:25903,15185320:25904,15185326:25905,15185295:25906,15185315:25907,15185555:25908,15185545:25909,15185307:25910,15185551:25911,15185341:25912,15185563:25913,15185594:25914,15185582:25915,15185571:25916,15185589:25917,15185799:25918,15185597:25919,15185579:25920,15186109:25921,15185570:25922,15185583:25923,15185820:25924,15185592:25925,15185567:25926,15185584:25927,15185816:25928,15185821:25929,15185828:25930,15185822:25931,15185851:25932,15185842:25933,15185825:25934,15186053:25935,15186058:25936,15186083:25937,15186081:25938,15186066:25939,15186097:25940,15186079:25941,15186057:25942,15186059:25943,15186082:25944,15186310:25945,15186342:25946,15186107:25947,15186101:25948,15186105:25949,15186307:25950,15186103:25951,15186098:25952,15186106:25953,15186343:25954,15186333:25955,15186326:25956,15186334:25957,15186329:25958,15186330:25959,15186361:25960,15186346:25961,15186345:25962,15186364:25963,15186363:25964,15186563:25965,15185813:25966,15186365:25967,15253166:25968,15186367:25969,15186568:25970,15186569:25971,15186572:25972,15186578:25973,15186576:25974,15186579:25975,15186580:25976,15186582:25977,15186574:25978,15186587:25979,15186588:25980,15187128:25981,15187130:25982,15187333:26145,15187340:26146,15187341:26147,15187342:26148,15187344:26149,15187345:26150,15187349:26151,15187348:26152,15187352:26153,15187359:26154,15187360:26155,15187368:26156,15187369:26157,15187367:26158,15187384:26159,15187586:26160,15187590:26161,15187587:26162,15187592:26163,15187591:26164,15187596:26165,15187604:26166,15187614:26167,15187613:26168,15187610:26169,15187619:26170,15187631:26171,15187634:26172,15187641:26173,15187630:26174,15187638:26175,15187640:26176,15248817:26177,15187845:26178,15187846:26179,15187850:26180,15187861:26181,15187860:26182,15187873:26183,15187878:26184,15187881:26185,15187891:26186,15187897:26187,15311772:26188,15237254:26189,15237252:26190,15237259:26191,15237266:26192,15237272:26193,15237273:26194,15237276:26195,15237281:26196,15237288:26197,15237311:26198,15237307:26199,15237514:26200,15237510:26201,15237522:26202,15237528:26203,15237530:26204,15237535:26205,15237538:26206,15237544:26207,15237555:26208,15237554:26209,15237552:26210,15237558:26211,15237561:26212,15237565:26213,15237567:26214,15237764:26215,15237766:26216,15237765:26217,15237787:26218,15237779:26219,15237786:26220,15237805:26221,15042192:26222,15237804:26223,15238043:26224,15238053:26225,15238041:26226,15238045:26227,15238020:26228,15238042:26229,15238038:26230,15238281:26231,15238063:26232,15238065:26233,15238299:26234,15238313:26235,15238307:26236,15238319:26237,15238539:26238,15309451:26401,15238534:26402,15238334:26403,15238547:26404,15238545:26405,15238076:26406,15238577:26407,15238574:26408,15238565:26409,15238566:26410,15238580:26411,15238787:26412,15238792:26413,15238794:26414,15238784:26415,15238786:26416,15238816:26417,15238805:26418,15238820:26419,15238819:26420,15238559:26421,15238803:26422,15238825:26423,15238832:26424,15238837:26425,15238846:26426,15238840:26427,15238845:26428,15239040:26429,15239042:26430,15238842:26431,15239049:26432,15239053:26433,15239057:26434,15239065:26435,15239064:26436,15239048:26437,15239066:26438,15239071:26439,15239072:26440,15239079:26441,15239098:26442,15239099:26443,15239102:26444,15239297:26445,15239298:26446,15239301:26447,15239303:26448,15239306:26449,15239309:26450,15239312:26451,15239318:26452,15239337:26453,15239339:26454,15239352:26455,15239347:26456,15239552:26457,15239577:26458,15239576:26459,15239581:26460,15239578:26461,15239583:26462,15239588:26463,15239586:26464,15239592:26465,15239594:26466,15239595:26467,15239342:26468,15239601:26469,15239607:26470,15239608:26471,15239614:26472,15239821:26473,15239826:26474,15239851:26475,15239839:26476,15239867:26477,15239852:26478,15240097:26479,15240099:26480,15240095:26481,15240082:26482,15240116:26483,15240115:26484,15240122:26485,15240851:26486,15240323:26487,15240123:26488,15240121:26489,15240094:26490,15240326:26491,15240092:26492,15240329:26493,15240089:26494,15240373:26657,15240372:26658,15240342:26659,15240370:26660,15240369:26661,15240576:26662,15240377:26663,15240592:26664,15240581:26665,15240367:26666,15240363:26667,15240343:26668,15240344:26669,15240837:26670,15240858:26671,15240874:26672,15240863:26673,15240866:26674,15240854:26675,15240355:26676,15240846:26677,15240839:26678,15240842:26679,15240636:26680,15240885:26681,15240627:26682,15240629:26683,15240864:26684,15240841:26685,15240872:26686,15241140:26687,15241363:26688,15241131:26689,15241102:26690,15241149:26691,15241347:26692,15241112:26693,15241355:26694,15241089:26695,15241143:26696,15241351:26697,15241120:26698,15241138:26699,15241357:26700,15241378:26701,15241376:26702,15240893:26703,15241400:26704,15242374:26705,15241147:26706,15241645:26707,15241386:26708,15241404:26709,15242650:26710,15241860:26711,15241655:26712,15241643:26713,15241901:26714,15241646:26715,15241858:26716,15241641:26717,15241606:26718,15241388:26719,15241647:26720,15241657:26721,15241397:26722,15242122:26723,15241634:26724,15241913:26725,15241919:26726,15241887:26727,15242137:26728,15242125:26729,15241915:26730,15242138:26731,15242128:26732,15242113:26733,15242118:26734,15242134:26735,15241889:26736,15242401:26737,15242175:26738,15242164:26739,15242391:26740,15242392:26741,15242412:26742,15242399:26743,15242389:26744,15242388:26745,15242172:26746,15242624:26747,15242659:26748,15242648:26749,15242632:26750,15242625:26913,15243394:26914,15242635:26915,15242645:26916,15242880:26917,15242916:26918,15242888:26919,15242897:26920,15242890:26921,15242920:26922,15242669:26923,15242900:26924,15242907:26925,15243178:26926,15242887:26927,15242908:26928,15242679:26929,15242686:26930,15242896:26931,15243145:26932,15242938:26933,15243151:26934,15242937:26935,15243152:26936,15243157:26937,15243165:26938,15243173:26939,15243164:26940,15243193:26941,15243402:26942,15243411:26943,15243403:26944,15243198:26945,15243194:26946,15243398:26947,15243426:26948,15243418:26949,15243440:26950,15243455:26951,15243661:26952,14989717:26953,15243668:26954,15243679:26955,15243687:26956,15243697:26957,15243923:26958,15243939:26959,15243945:26960,15243946:26961,15243915:26962,15243916:26963,15243958:26964,15243951:26965,15244164:26966,15244166:26967,15243952:26968,15244169:26969,15245475:26970,15243947:26971,15244180:26972,15244190:26973,15244201:26974,15244204:26975,15244191:26976,15244187:26977,15244207:26978,15244434:26979,15244422:26980,15244424:26981,15244416:26982,15244419:26983,15244219:26984,15244433:26985,15244425:26986,15244429:26987,15244217:26988,15244426:26989,15244468:26990,15244479:26991,15244471:26992,15244475:26993,15244453:26994,15244457:26995,15244442:26996,15244704:26997,15244703:26998,15244728:26999,15244684:27e3,15244686:27001,15244724:27002,15244695:27003,15244712:27004,15244718:27005,15244697:27006,15244691:27169,15244707:27170,15244714:27171,15245445:27172,15244962:27173,15244959:27174,15244930:27175,15244975:27176,15245195:27177,15244989:27178,15245184:27179,15245200:27180,15309718:27181,15244971:27182,15245188:27183,15244979:27184,15245191:27185,15245190:27186,15244987:27187,15245231:27188,15245234:27189,15245216:27190,15245455:27191,15245453:27192,15245246:27193,15245238:27194,15245239:27195,15245454:27196,15245202:27197,15245457:27198,15245462:27199,15245461:27200,15245474:27201,15245473:27202,15245489:27203,15245494:27204,15245497:27205,15245479:27206,15245499:27207,15245700:27208,15245698:27209,15245714:27210,15245721:27211,15245726:27212,15245730:27213,15245739:27214,15245953:27215,15245758:27216,15245982:27217,15245749:27218,15245757:27219,15246005:27220,15245746:27221,15245954:27222,15245975:27223,15245970:27224,15245998:27225,15245977:27226,15245986:27227,15245965:27228,15245988:27229,15246e3:27230,15246015:27231,15246001:27232,15246211:27233,15246212:27234,15246228:27235,15246232:27236,15246233:27237,15246237:27238,15246265:27239,15246466:27240,15246268:27241,15246260:27242,15246248:27243,15246258:27244,15246468:27245,15246476:27246,15246474:27247,15246483:27248,15246723:27249,15246494:27250,15246501:27251,15246506:27252,15246507:27253,15246721:27254,15246724:27255,15246523:27256,15246518:27257,15246520:27258,15246732:27259,15246493:27260,15246752:27261,15246750:27262,15246758:27425,15246756:27426,15246765:27427,15246762:27428,15246767:27429,15246772:27430,15246775:27431,15246782:27432,15246979:27433,15246984:27434,15246986:27435,15246995:27436,15247e3:27437,15247009:27438,15247017:27439,15247014:27440,15247020:27441,15247023:27442,15247026:27443,15247034:27444,15247037:27445,15247039:27446,15247232:27447,15247258:27448,15247260:27449,15247261:27450,15247271:27451,15247284:27452,15247288:27453,15247491:27454,15247510:27455,15247504:27456,15247500:27457,15247515:27458,15247517:27459,15247525:27460,15247542:27461,15247745:27462,15247771:27463,15247762:27464,15247750:27465,15247752:27466,15247804:27467,15247789:27468,15247788:27469,15247778:27470,15248005:27471,15248002:27472,15248004:27473,15248040:27474,15248033:27475,15248017:27476,15248037:27477,15248038:27478,15248026:27479,15248035:27480,15248260:27481,15248269:27482,15248258:27483,15248282:27484,15248299:27485,15248307:27486,15248295:27487,15248292:27488,15248305:27489,15248532:27490,15248288:27491,15248290:27492,15248311:27493,15248286:27494,15248283:27495,15248524:27496,15248519:27497,15248538:27498,15248289:27499,15248534:27500,15248528:27501,15248535:27502,15248544:27503,15248563:27504,15310507:27505,15248550:27506,15248555:27507,15248574:27508,15248552:27509,15248769:27510,15248780:27511,15248783:27512,15248782:27513,15248777:27514,15248790:27515,15248795:27516,15248794:27517,15248811:27518,15248799:27681,15248812:27682,15248815:27683,15248820:27684,15248829:27685,15249024:27686,15249036:27687,15249038:27688,15249042:27689,15249043:27690,15249046:27691,15249049:27692,15249050:27693,15249594:27694,15249793:27695,15249599:27696,15249800:27697,15249804:27698,15249806:27699,15249808:27700,15249813:27701,15249826:27702,15249836:27703,15249848:27704,15249850:27705,15250050:27706,15250057:27707,15250053:27708,15250058:27709,15250061:27710,15250062:27711,15250068:27712,15249852:27713,15250072:27714,15108253:27715,15250093:27716,15250090:27717,15250109:27718,15250098:27719,15250099:27720,15250094:27721,15250102:27722,15250312:27723,15250305:27724,15250340:27725,15250339:27726,15250330:27727,15250365:27728,15250362:27729,15250363:27730,15250564:27731,15250565:27732,15250570:27733,15250567:27734,15250575:27735,15250573:27736,15250576:27737,15318414:27738,15250579:27739,15250317:27740,15250580:27741,15250582:27742,15250855:27743,15250861:27744,15250865:27745,15250867:27746,15251073:27747,15251097:27748,15251330:27749,15251134:27750,15251130:27751,15251343:27752,15251354:27753,15251350:27754,15251340:27755,15251355:27756,15251339:27757,15251370:27758,15251371:27759,15251359:27760,15251363:27761,15251388:27762,15251592:27763,15251593:27764,15251391:27765,15251613:27766,15251614:27767,15251600:27768,15251615:27769,15251842:27770,15251637:27771,15251632:27772,15251636:27773,15251850:27774,15251847:27937,15251849:27938,15251852:27939,15251856:27940,15251848:27941,15251865:27942,15251876:27943,15251872:27944,15251626:27945,15251875:27946,15251861:27947,15251894:27948,15251890:27949,15251900:27950,15252097:27951,15252103:27952,15252101:27953,15252100:27954,15252107:27955,15252106:27956,15252115:27957,15252113:27958,15252116:27959,15252121:27960,15252138:27961,15252129:27962,15252140:27963,15252144:27964,15252358:27965,15252145:27966,15252158:27967,15252357:27968,15252360:27969,15252363:27970,15252379:27971,15252387:27972,15252412:27973,15252411:27974,15252395:27975,15252414:27976,15252618:27977,15252613:27978,15252629:27979,15252626:27980,15252633:27981,15252627:27982,15252636:27983,15252639:27984,15252635:27985,15252620:27986,15252646:27987,15252659:27988,15252667:27989,15252665:27990,15252869:27991,15252866:27992,15252670:27993,15252876:27994,15252873:27995,15252870:27996,15252878:27997,15252887:27998,15252892:27999,15252898:28e3,15252899:28001,15252900:28002,15253148:28003,15253151:28004,15253155:28005,15253165:28006,15253167:28007,15253175:28008,15253402:28009,15253413:28010,15253410:28011,15253418:28012,15253423:28013,15303303:28014,15253428:28015,15302789:28016,15253433:28017,15253434:28018,15302801:28019,15302805:28020,15302817:28021,15302797:28022,15302814:28023,15302806:28024,15302795:28025,15302823:28026,15302838:28027,15302837:28028,15302841:28029,15253432:28030,15303055:28193,15303056:28194,15303057:28195,15303058:28196,15302798:28197,15303049:28198,15302846:28199,15303062:28200,15303064:28201,15303070:28202,15303080:28203,15303087:28204,15303094:28205,15309480:28206,15303090:28207,15303298:28208,15303101:28209,15303297:28210,15303296:28211,15303306:28212,15303305:28213,15303311:28214,15303336:28215,15303343:28216,15303345:28217,15303349:28218,15303586:28219,15303588:28220,15108488:28221,15303579:28222,15303810:28223,15303826:28224,15303833:28225,15303858:28226,15303856:28227,15304074:28228,15304086:28229,15304088:28230,15304099:28231,15304101:28232,15304105:28233,15304115:28234,15304114:28235,15304331:28236,15304329:28237,15304322:28238,15304354:28239,15304363:28240,15304367:28241,15304362:28242,15304373:28243,15304372:28244,15304378:28245,15304576:28246,15304577:28247,15304585:28248,15304587:28249,15304592:28250,15304598:28251,15304607:28252,15304609:28253,15304603:28254,15304636:28255,15304629:28256,15304630:28257,15304862:28258,15304639:28259,15304852:28260,15304876:28261,15304853:28262,15304849:28263,15305118:28264,15305111:28265,15305093:28266,15305097:28267,15305124:28268,15305096:28269,15305365:28270,15304895:28271,15305099:28272,15305104:28273,15305372:28274,15305366:28275,15305363:28276,15305371:28277,15305114:28278,15305615:28279,15305401:28280,15305399:28281,15305641:28282,15305871:28283,15305658:28284,15306116:28285,15305902:28286,15305881:28449,15305890:28450,15305882:28451,15305891:28452,15305914:28453,15305909:28454,15305915:28455,15306140:28456,15306144:28457,15306172:28458,15306158:28459,15306134:28460,15306416:28461,15306412:28462,15306413:28463,15306388:28464,15306425:28465,15306646:28466,15306647:28467,15306664:28468,15306661:28469,15306648:28470,15306627:28471,15306653:28472,15306640:28473,15306632:28474,15306660:28475,15306906:28476,15306900:28477,15306899:28478,15306883:28479,15306887:28480,15306896:28481,15306934:28482,15306923:28483,15306933:28484,15306913:28485,15306938:28486,15307137:28487,15307154:28488,15307140:28489,15307163:28490,15307168:28491,15307170:28492,15307166:28493,15307178:28494,15304873:28495,15307184:28496,15307189:28497,15307191:28498,15307197:28499,15307162:28500,15307196:28501,15307198:28502,15307393:28503,15307199:28504,15308418:28505,15308423:28506,15308426:28507,15308436:28508,15308438:28509,15308440:28510,15308441:28511,15308448:28512,15308456:28513,15308455:28514,15308461:28515,15308476:28516,15308475:28517,15308473:28518,15308478:28519,15308682:28520,15122358:28521,15308675:28522,15308685:28523,15308684:28524,15308693:28525,15308692:28526,15308694:28527,15308700:28528,15308705:28529,15308709:28530,15308706:28531,15308961:28532,15308968:28533,15308974:28534,15308975:28535,15309186:28536,15309196:28537,15309199:28538,15309195:28539,15309239:28540,15309212:28541,15309214:28542,15309213:28705,15309215:28706,15309222:28707,15309234:28708,15309228:28709,15309453:28710,15309464:28711,15309461:28712,15309463:28713,15309482:28714,15309479:28715,15309489:28716,15309490:28717,15309488:28718,15309492:28719,15309494:28720,15309496:28721,15309497:28722,15309710:28723,15309707:28724,15309705:28725,15309709:28726,15246733:28727,15309724:28728,15309965:28729,15309717:28730,15309753:28731,15309956:28732,15309958:28733,15309960:28734,15309971:28735,15309966:28736,15309969:28737,15309967:28738,15309974:28739,15309977:28740,15309988:28741,15309994:28742,1531e4:28743,15310009:28744,15310013:28745,15310014:28746,15310212:28747,15310214:28748,15310216:28749,15310210:28750,15310217:28751,15310236:28752,15310240:28753,15310244:28754,15310246:28755,15310248:28756,15043474:28757,15310251:28758,15310257:28759,15310265:28760,15310469:28761,15310268:28762,15310465:28763,15310266:28764,15310470:28765,15310475:28766,15310479:28767,15310480:28768,15310492:28769,15310504:28770,15310502:28771,15310499:28772,15310515:28773,15310516:28774,15310723:28775,15310726:28776,15310728:28777,15310731:28778,15310748:28779,15310765:28780,15318415:28781,15310770:28782,15182751:28783,15310774:28784,15310773:28785,15310991:28786,15310988:28787,15311032:28788,15311012:28789,15311009:28790,15311031:28791,15311037:28792,15311238:28793,15311247:28794,15311243:28795,15311275:28796,15311279:28797,15311280:28798,15311281:28961,15311284:28962,15311283:28963,15311530:28964,15311535:28965,15311537:28966,15311542:28967,15311748:28968,15311747:28969,15311750:28970,15311785:28971,15311787:28972,15312003:28973,15312009:28974,15312018:28975,15312020:28976,15312024:28977,15312033:28978,15312029:28979,15312030:28980,15312036:28981,15312032:28982,15312044:28983,15312046:28984,15312061:28985,15312062:28986,15312258:28987,15312265:28988,15312261:28989,15312272:28990,15312267:28991,15312273:28992,15312274:28993,15312268:28994,15312277:28995,15312535:28996,15312536:28997,15312549:28998,15312557:28999,15312558:29e3,15312572:29001,15312799:29002,15312795:29003,15312797:29004,15312792:29005,15312785:29006,15312813:29007,15312814:29008,15312817:29009,15312818:29010,15312827:29011,15312824:29012,15313025:29013,15313039:29014,15313029:29015,15312802:29016,15313049:29017,15313067:29018,15313079:29019,15313285:29020,15313282:29021,15313280:29022,15313283:29023,15313086:29024,15313301:29025,15313293:29026,15313307:29027,15313303:29028,15313311:29029,15313314:29030,15313317:29031,15313316:29032,15313321:29033,15313323:29034,15313322:29035,15313581:29036,15313584:29037,15313596:29038,15313792:29039,15313807:29040,15313809:29041,15313811:29042,15313812:29043,15313822:29044,15313823:29045,15313826:29046,15313827:29047,15313830:29048,15313839:29049,15313835:29050,15313838:29051,15313844:29052,15313841:29053,15313847:29054,15313851:29217,15314054:29218,15314072:29219,15314074:29220,15314079:29221,15314082:29222,15314083:29223,15314085:29224,15314087:29225,15314088:29226,15314089:29227,15314090:29228,15314094:29229,15314095:29230,15314098:29231,15314308:29232,15314307:29233,15314319:29234,15314317:29235,15314318:29236,15314321:29237,15314328:29238,15314356:29239,15314579:29240,15314563:29241,15314577:29242,15314582:29243,15314583:29244,15314591:29245,15314592:29246,15314600:29247,15314612:29248,15314816:29249,15314826:29250,15314617:29251,15314822:29252,15314831:29253,15314833:29254,15314834:29255,15314851:29256,15314850:29257,15314852:29258,15314836:29259,15314849:29260,15315130:29261,15314866:29262,15314865:29263,15314864:29264,15315093:29265,15315092:29266,15315081:29267,15315091:29268,15315084:29269,15315078:29270,15315080:29271,15315090:29272,15315082:29273,15315076:29274,15315118:29275,15315099:29276,15315109:29277,15315108:29278,15315105:29279,15315120:29280,15315335:29281,15315122:29282,15315334:29283,15315134:29284,15315354:29285,15315360:29286,15315367:29287,15315382:29288,15315384:29289,15315879:29290,15315884:29291,15315888:29292,15316105:29293,15316104:29294,15315883:29295,15316099:29296,15316102:29297,15316138:29298,15316134:29299,15316655:29300,15316131:29301,15316127:29302,15316356:29303,15316117:29304,15316114:29305,15316353:29306,15316159:29307,15316158:29308,15316358:29309,15316360:29310,15316381:29473,15316382:29474,15316388:29475,15316369:29476,15316368:29477,15316377:29478,15316402:29479,15316617:29480,15316615:29481,15316651:29482,15316399:29483,15316410:29484,15316634:29485,15316644:29486,15316649:29487,15316658:29488,15316868:29489,15316865:29490,15316667:29491,15316664:29492,15316666:29493,15316870:29494,15316879:29495,15316866:29496,15316889:29497,15316883:29498,15316920:29499,15316902:29500,15316909:29501,15316911:29502,15316925:29503,15317146:29504,15317147:29505,15317150:29506,15317429:29507,15317433:29508,15317437:29509,15317633:29510,15317640:29511,15317643:29512,15317644:29513,15317650:29514,15317653:29515,15317649:29516,15317661:29517,15317669:29518,15317673:29519,15317688:29520,15317674:29521,15317677:29522,15310241:29523,15317900:29524,15317902:29525,15317903:29526,15317904:29527,15317908:29528,15317916:29529,15317918:29530,15317917:29531,15317920:29532,15317925:29533,15317928:29534,15317935:29535,15317940:29536,15317942:29537,15317943:29538,15317945:29539,15317947:29540,15317948:29541,15317949:29542,15318151:29543,15318152:29544,15178423:29545,15318165:29546,15318177:29547,15318188:29548,15318206:29549,15318410:29550,15318418:29551,15318420:29552,15318435:29553,15318431:29554,15318432:29555,15318433:29556,15318438:29557,15318439:29558,15318444:29559,15318442:29560,15318455:29561,15318450:29562,15318454:29563,15318677:29564,15318684:29565,15318688:29566,15048879:29729,15116167:29730,15303065:29731,15176100:29732,15042460:29733,15173273:29734,15186570:31009,15246492:31010,15306120:31011,15305352:31012,15242140:31013,14991241:31014,15172283:31015,15112369:31016,15115144:31017,15305657:31018,15113147:31019,15056261:31020,14989480:31021,14990241:31022,14990268:31023,14990464:31024,14990467:31025,14990521:31026,14990742:31027,14990994:31028,14990986:31029,14991002:31030,14990996:31031,14991245:31032,15040896:31033,15040674:31034,14991295:31035,15040670:31036,15040902:31037,15040944:31038,15040898:31039,15041172:31040,15041460:31041,15041432:31042,15041930:31043,15041956:31044,15042205:31045,15042238:31046,15042476:31047,15042709:31048,15043228:31049,15043238:31050,15043456:31051,15043483:31052,15043712:31053,15043719:31054,15043748:31055,15044018:31056,15044243:31057,15044274:31058,15044509:31059,15706254:31060,15045276:31061,15045258:31062,15045289:31063,15045567:31064,15046278:31065,15048089:31066,15048101:31067,15048364:31068,15048584:31069,15048583:31070,15706255:31071,15706256:31072,15049374:31073,15049394:31074,15049867:31075,15050131:31076,15050139:31077,15050141:31078,15050147:31079,15050404:31080,15050426:31081,15052182:31082,15052672:31083,15176879:31084,15052696:31085,15052716:31086,15052958:31087,15053478:31088,15053498:31089,15053749:31090,15053991:31091,15054227:31092,15706257:31093,15054210:31094,15054253:31095,15054520:31096,15054521:31097,15054736:31098,15056033:31099,15056052:31100,15056295:31101,15056567:31102,15056798:31265,15106461:31266,15106693:31267,15106698:31268,15106974:31269,15106965:31270,15107232:31271,15106994:31272,15107217:31273,15107255:31274,15107248:31275,15107736:31276,15108243:31277,15108774:31278,15110069:31279,15110560:31280,15110813:31281,15111054:31282,15111566:31283,15112320:31284,15112341:31285,15112379:31286,15112329:31287,15112366:31288,15112350:31289,15112356:31290,15112613:31291,15112599:31292,15112601:31293,15706258:31294,15112627:31295,15112857:31296,15112864:31297,15112882:31298,15112895:31299,15113146:31300,15113358:31301,15705257:31302,15113638:31303,15113915:31304,15114642:31305,15114112:31306,15114369:31307,15114628:31308,15115151:31309,15706259:31310,15115688:31311,15706260:31312,15115928:31313,15116194:31314,15116464:31315,15116715:31316,15116678:31317,15116723:31318,15116734:31319,15117218:31320,15117220:31321,15118230:31322,15118527:31323,15118748:31324,15118982:31325,15118767:31326,15119258:31327,15119492:31328,15120007:31329,15119791:31330,15120022:31331,15120044:31332,15120271:31333,15120312:31334,15120306:31335,15120316:31336,15120569:31337,15120796:31338,15120551:31339,15120572:31340,15121087:31341,15122056:31342,15122101:31343,15122357:31344,15171717:31345,15171719:31346,15171752:31347,15172229:31348,15172267:31349,15172751:31350,15172740:31351,15173020:31352,15172998:31353,15172999:31354,15706261:31355,15173505:31356,15173566:31357,15174321:31358,15174334:31521,15174820:31522,15706262:31523,15175095:31524,15175357:31525,15175561:31526,15175574:31527,15175587:31528,15175570:31529,15175815:31530,15175605:31531,15175846:31532,15175850:31533,15175849:31534,15175854:31535,15176098:31536,15176329:31537,15176351:31538,15176833:31539,15177135:31540,15178370:31541,15178396:31542,15178398:31543,15178395:31544,15178406:31545,15706263:31546,15179142:31547,15043247:31548,15179937:31549,15180174:31550,15180196:31551,15180218:31552,15180976:31553,15706264:31554,15706265:31555,15706266:31556,15181460:31557,15706267:31558,15181467:31559,15182737:31560,15182759:31561,15706268:31562,15182763:31563,15183518:31564,15706269:31565,15185288:31566,15185308:31567,15185591:31568,15185568:31569,15185814:31570,15186322:31571,15187335:31572,15187617:31573,15706270:31574,15240321:31575,15240610:31576,15240639:31577,15241095:31578,15241142:31579,15241608:31580,15241908:31581,15242643:31582,15242649:31583,15242667:31584,15706271:31585,15242928:31586,15706272:31587,15706273:31588,15245447:31589,15246261:31590,15247506:31591,15247543:31592,15247801:31593,15248039:31594,15248062:31595,15248287:31596,15706274:31597,15248310:31598,15248787:31599,15248831:31600,15250352:31601,15250356:31602,15250578:31603,15250870:31604,15706275:31605,15252367:31606,15706276:31607,15706277:31608,15303079:31609,15303582:31610,15706278:31611,15303829:31612,15303847:31613,15304602:31614,15304599:31777,15304606:31778,15304621:31779,15304622:31780,15304612:31781,15304613:31782,15304838:31783,15304848:31784,15304842:31785,15304890:31786,15305088:31787,15304892:31788,15305102:31789,15305113:31790,15305105:31791,15304889:31792,15305127:31793,15305383:31794,15305143:31795,15305144:31796,15305639:31797,15305623:31798,15305625:31799,15305616:31800,15706279:31801,15305621:31802,15305632:31803,15305619:31804,15305893:31805,15305889:31806,15305659:31807,15706280:31808,15305886:31809,15305663:31810,15305885:31811,15305858:31812,15306160:31813,15306135:31814,15306404:31815,15306630:31816,15306654:31817,15306680:31818,15306929:31819,15307141:31820,15307144:31821,15308434:31822,15706012:31823,15706281:31824,15309469:31825,15309487:31826,15310003:31827,15310011:31828,15310211:31829,15310221:31830,15310223:31831,15310225:31832,15310229:31833,15311255:31834,15311269:31835,15706282:31836,15706283:31837,15312039:31838,15706284:31839,15312542:31840,15313294:31841,15313817:31842,15313820:31843,15314357:31844,15314354:31845,15314575:31846,15314609:31847,15314619:31848,15315072:31849,15316400:31850,15316395:31851,15706285:31852,15317145:31853,15317905:31854,14845360:31857,14845361:31858,14845362:31859,14845363:31860,14845364:31861,14845365:31862,14845366:31863,14845367:31864,14845368:31865,14845369:31866,15712164:31868,15711367:31869,15711362:31870,14846117:8514,15712162:8780,14846098:74077},Xo={52120:8751,52103:8752,49848:8753,52121:8754,52125:8755,49839:8756,52123:8757,52122:8758,126:8759,52868:8760,52869:8761,49825:8770,49830:8771,49855:8772,49850:8811,49834:8812,49833:8813,49838:8814,14845090:8815,49828:8816,14845078:8817,52870:9825,52872:9826,52873:9827,52874:9828,52906:9829,52876:9831,52878:9833,52907:9834,52879:9836,52908:9841,52909:9842,52910:9843,52911:9844,53130:9845,52880:9846,53132:9847,53122:9848,53133:9849,53131:9850,52912:9851,53134:9852,53378:10050,53379:10051,53380:10052,53381:10053,53382:10054,53383:10055,53384:10056,53385:10057,53386:10058,53387:10059,53388:10060,53390:10061,53391:10062,53650:10098,53651:10099,53652:10100,53653:10101,53654:10102,53655:10103,53656:10104,53657:10105,53658:10106,53659:10107,53660:10108,53662:10109,53663:10110,50054:10529,50320:10530,50342:10532,50354:10534,50561:10536,50367:10537,50570:10539,50072:10540,50578:10541,50598:10543,50078:10544,50086:10561,50321:10562,50096:10563,50343:10564,50353:10565,50355:10566,50360:10567,50562:10568,50560:10569,50569:10570,50571:10571,50104:10572,50579:10573,50079:10574,50599:10575,50110:10576,50049:10785,50048:10786,50052:10787,50050:10788,50306:10789,51085:10790,50304:10791,50308:10792,50053:10793,50051:10794,50310:10795,50312:10796,50316:10797,50055:10798,50314:10799,50318:10800,50057:10801,50056:10802,50059:10803,50058:10804,50330:10805,50326:10806,50322:10807,50328:10808,50332:10810,50334:10811,50338:10812,50336:10813,50340:10814,50061:10815,50060:10816,50063:10817,50062:10818,51087:10819,50352:10820,50346:10821,50350:10822,50344:10823,50356:10824,50358:10825,50361:10826,50365:10827,50363:10828,50563:10829,50567:10830,50565:10831,50065:10832,50067:10833,50066:10834,50070:10835,50068:10836,51089:10837,50576:10838,50572:10839,50069:10840,50580:10841,50584:10842,50582:10843,50586:10844,50588:10845,50592:10846,50590:10847,50596:10848,50594:10849,50074:10850,50073:10851,50076:10852,50075:10853,50604:10854,51091:10855,50608:10856,50602:10857,50610:10858,50606:10859,50600:10860,51095:10861,51099:10862,51097:10863,51093:10864,50612:10865,50077:10866,50616:10867,50614:10868,50617:10869,50621:10870,50619:10871,50081:11041,50080:11042,50084:11043,50082:11044,50307:11045,51086:11046,50305:11047,50309:11048,50085:11049,50083:11050,50311:11051,50313:11052,50317:11053,50087:11054,50315:11055,50319:11056,50089:11057,50088:11058,50091:11059,50090:11060,50331:11061,50327:11062,50323:11063,50329:11064,51125:11065,50333:11066,50335:11067,50337:11069,50341:11070,50093:11071,50092:11072,50095:11073,50094:11074,51088:11075,50347:11077,50351:11078,50345:11079,50357:11080,50359:11081,50362:11082,50366:11083,50364:11084,50564:11085,50568:11086,50566:11087,50097:11088,50099:11089,50098:11090,50102:11091,50100:11092,51090:11093,50577:11094,50573:11095,50101:11096,50581:11097,50585:11098,50583:11099,50587:11100,50589:11101,50593:11102,50591:11103,50597:11104,50595:11105,50106:11106,50105:11107,50108:11108,50107:11109,50605:11110,51092:11111,50609:11112,50603:11113,50611:11114,50607:11115,50601:11116,51096:11117,51100:11118,51098:11119,51094:11120,50613:11121,50109:11122,50111:11123,50615:11124,50618:11125,50622:11126,50620:11127,14989442:12321,14989444:12322,14989445:12323,14989452:12324,14989458:12325,14989471:12326,14989475:12327,14989476:12328,14989480:12329,14989483:12330,14989486:12331,14989487:12332,14989488:12333,14989493:12334,14989696:12335,14989697:12336,14989700:12337,14989703:12338,14989713:12339,14989722:12340,14989724:12341,14989731:12342,14989736:12343,14989737:12344,14989748:12345,14989749:12346,14989753:12347,14989759:12348,14989965:12349,14989974:12350,14989975:12351,14989981:12352,14989999:12353,14990009:12354,14990211:12355,14990224:12356,14990234:12357,14990235:12358,14990240:12359,14990241:12360,14990242:12361,14990248:12362,14990255:12363,14990257:12364,14990259:12365,14990261:12366,14990269:12367,14990270:12368,14990271:12369,14990464:12370,14990466:12371,14990467:12372,14990472:12373,14990475:12374,14990476:12375,14990482:12376,14990485:12377,14990486:12378,14990487:12379,14990489:12380,14990510:12381,14990513:12382,14990752:12383,14990515:12384,14990517:12385,14990519:12386,14990521:12387,14990523:12388,14990526:12389,14990720:12390,14990722:12391,14990728:12392,14990729:12393,14990731:12394,14990732:12395,14990738:12396,14990740:12397,14990742:12398,14990744:12399,14990751:12400,14990755:12401,14990762:12402,14990764:12403,14990766:12404,14990769:12405,14990775:12406,14990776:12407,14990777:12408,14990778:12409,14990781:12410,14990782:12411,14990977:12412,14990978:12413,14990980:12414,14990981:12577,14990985:12578,14990986:12579,14990988:12580,14990990:12581,14990992:12582,14990994:12583,14990995:12584,14990996:12585,14990999:12586,14991001:12587,14991002:12588,14991006:12589,14991007:12590,14991026:12591,14991031:12592,14991033:12593,14991035:12594,14991036:12595,14991037:12596,14991038:12597,14991232:12598,14991233:12599,14991237:12600,14991238:12601,14991240:12602,14991241:12603,14991243:12604,14991244:12605,14991245:12606,14991247:12607,14991250:12608,14991260:12609,14991264:12610,14991266:12611,14991280:12612,14991282:12613,14991292:12614,14991293:12615,14991295:12616,15040640:12617,15040641:12618,15040644:12619,15040647:12620,15040650:12621,15040652:12622,15040654:12623,15040656:12624,15040659:12625,15040663:12626,15040664:12627,15040667:12628,15040668:12629,15040669:12630,15040670:12631,15040674:12632,15040679:12633,15040686:12634,15040688:12635,15040690:12636,15040691:12637,15040693:12638,15040896:12639,15040897:12640,15040898:12641,15040901:12642,15040902:12643,15040906:12644,15040908:12645,15040910:12646,15040913:12647,15040914:12648,15040915:12649,15040919:12650,15040921:12651,15040927:12652,15040928:12653,15040930:12654,15040931:12655,15040934:12656,15040935:12657,15040938:12658,15040941:12659,15040944:12660,15040945:12661,15040699:12662,15041153:12663,15041155:12664,15041156:12665,15041158:12666,15041162:12667,15041166:12668,15041167:12669,15041168:12670,15041170:12833,15041171:12834,15041172:12835,15041174:12836,15041179:12837,15041180:12838,15041182:12839,15041183:12840,15041184:12841,15041185:12842,15041186:12843,15041194:12844,15041199:12845,15041200:12846,15041209:12847,15041210:12848,15041213:12849,15041408:12850,15041411:12851,15041412:12852,15041415:12853,15041420:12854,15041422:12855,15041424:12856,15041427:12857,15041428:12858,15041432:12859,15041436:12860,15041437:12861,15041439:12862,15041442:12863,15041444:12864,15041446:12865,15041448:12866,15041449:12867,15041455:12868,15041457:12869,15041462:12870,15041466:12871,15041470:12872,15041667:12873,15041670:12874,15041671:12875,15041672:12876,15041675:12877,15041676:12878,15041677:12879,15041678:12880,15041458:12881,15041680:12882,15041687:12883,15041689:12884,15041691:12885,15041692:12886,15041693:12887,15041694:12888,15041699:12889,15041703:12890,15041704:12891,15041708:12892,15041709:12893,15041711:12894,15041713:12895,15041715:12896,15041716:12897,15041717:12898,15041720:12899,15041721:12900,15041922:12901,15041930:12902,15041935:12903,15041939:12904,15041941:12905,15041943:12906,15041944:12907,15041951:12908,15041956:12909,15041958:12910,15041982:12911,15042179:12912,15042180:12913,15042187:12914,15042190:12915,15042200:12916,15042205:12917,15042209:12918,15042211:12919,15042221:12920,15042232:12921,15042234:12922,15042236:12923,15042238:12924,15042239:12925,15042434:12926,15042440:13089,15042447:13090,15042449:13091,15042450:13092,15042451:13093,15042453:13094,15042456:13095,15042462:13096,15042466:13097,15042469:13098,15042478:13099,15042482:13100,15042483:13101,15042484:13102,15042487:13103,15042689:13104,15042690:13105,15042693:13106,15042706:13107,15042707:13108,15042709:13109,15042710:13110,15042712:13111,15042722:13112,15042728:13113,15042737:13114,15042738:13115,15042741:13116,15042748:13117,15042949:13118,15042953:13119,15042965:13120,15042967:13121,15042968:13122,15042970:13123,15042972:13124,15042975:13125,15042976:13126,15042977:13127,15042982:13128,15042990:13129,15042999:13130,15043e3:13131,15043001:13132,15043200:13133,15043202:13134,15043205:13135,15043210:13136,15043212:13137,15043219:13138,15043221:13139,15043222:13140,15043223:13141,15043224:13142,15043226:13143,15043228:13144,15043236:13145,15043237:13146,15043238:13147,15043239:13148,15043247:13149,15043248:13150,15043254:13151,15043255:13152,15043256:13153,15043258:13154,15043259:13155,15043261:13156,15043456:13157,15043460:13158,15043462:13159,15043464:13160,15043468:13161,15043471:13162,15043473:13163,15043476:13164,15043478:13165,15043483:13166,15043484:13167,15043489:13168,15043493:13169,15043496:13170,15043497:13171,15043498:13172,15043500:13173,15043504:13174,15043505:13175,15043508:13176,15043510:13177,15043511:13178,15043712:13179,15043715:13180,15043722:13181,15043723:13182,15043724:13345,15043729:13346,15043731:13347,15043736:13348,15043739:13349,15043740:13350,15043742:13351,15043743:13352,15043749:13353,15043751:13354,15043752:13355,15043753:13356,15043755:13357,15043756:13358,15043757:13359,15043760:13360,15043762:13361,15043765:13362,15043772:13363,15043773:13364,15043774:13365,15043970:13366,15043980:13367,15043979:13368,15043993:13369,15043995:13370,15044001:13371,15044003:13372,15044005:13373,15044012:13374,15044013:13375,15044018:13376,15044025:13377,15044030:13378,15044227:13379,15044231:13380,15044232:13381,15044238:13382,15044243:13383,15044244:13384,15044249:13385,15044253:13386,15044257:13387,15044260:13388,15044266:13389,15044267:13390,15044271:13391,15044274:13392,15044276:13393,15044277:13394,15044279:13395,15044280:13396,15044282:13397,15044285:13398,15044480:13399,15044485:13400,15044495:13401,15044498:13402,15044499:13403,15044501:13404,15044506:13405,15044509:13406,15044510:13407,15044512:13408,15044518:13409,15044519:13410,15044533:13411,15044738:13412,15044755:13413,15044762:13414,15044769:13415,15044775:13416,15044776:13417,15044778:13418,15044783:13419,15044785:13420,15044788:13421,15044789:13422,15044995:13423,15044996:13424,15044999:13425,15045005:13426,15045007:13427,15045022:13428,15045026:13429,15045028:13430,15045030:13431,15045031:13432,15045033:13433,15045035:13434,15045037:13435,15045038:13436,15045044:13437,15045055:13438,15045249:13601,15045251:13602,15045253:13603,15045256:13604,15045257:13605,15045261:13606,15045265:13607,15045269:13608,15045270:13609,15045276:13610,15045279:13611,15045281:13612,15045286:13613,15045287:13614,15045289:13615,15045290:13616,15045293:13617,15045294:13618,15045297:13619,15045303:13620,15045305:13621,15045306:13622,15045307:13623,15045311:13624,15045510:13625,15045514:13626,15045517:13627,15045518:13628,15045536:13629,15045546:13630,15045548:13631,15045551:13632,15045558:13633,15045564:13634,15045566:13635,15045567:13636,15045760:13637,15045761:13638,15045765:13639,15045768:13640,15045769:13641,15045772:13642,15045773:13643,15045774:13644,15045781:13645,15045802:13646,15045803:13647,15045810:13648,15045813:13649,15045814:13650,15045819:13651,15045820:13652,15045821:13653,15046017:13654,15046023:13655,15046025:13656,15046026:13657,15046029:13658,15046032:13659,15046033:13660,15046040:13661,15046042:13662,15046043:13663,15046046:13664,15046048:13665,15046049:13666,15046052:13667,15046054:13668,15046079:13669,15046273:13670,15046274:13671,15046278:13672,15046280:13673,15046286:13674,15046287:13675,15046289:13676,15046290:13677,15046291:13678,15046292:13679,15046295:13680,15046307:13681,15046308:13682,15046317:13683,15046322:13684,15046335:13685,15046529:13686,15046531:13687,15046534:13688,15046537:13689,15046539:13690,15046540:13691,15046542:13692,15046545:13693,15046546:13694,15046547:13857,15046551:13858,15046552:13859,15046555:13860,15046558:13861,15046562:13862,15046569:13863,15046582:13864,15046591:13865,15046789:13866,15046792:13867,15046794:13868,15046797:13869,15046798:13870,15046799:13871,15046800:13872,15046801:13873,15046802:13874,15046809:13875,15046828:13876,15046832:13877,15046835:13878,15046837:13879,15046839:13880,15046841:13881,15046843:13882,15046844:13883,15046845:13884,15046847:13885,15047040:13886,15047041:13887,15047043:13888,15047044:13889,15047046:13890,15047049:13891,15047051:13892,15047053:13893,15047055:13894,15047060:13895,15047070:13896,15047072:13897,15047073:13898,15047074:13899,15047075:13900,15047078:13901,15047081:13902,15047085:13903,15047087:13904,15047089:13905,15047090:13906,15047093:13907,15047300:13908,15047301:13909,15047304:13910,15047307:13911,15047308:13912,15047317:13913,15047321:13914,15047322:13915,15047325:13916,15047326:13917,15047327:13918,15047334:13919,15047335:13920,15047336:13921,15047337:13922,15047339:13923,15047340:13924,15047341:13925,15047345:13926,15047347:13927,15047351:13928,15047358:13929,15047557:13930,15047561:13931,15047562:13932,15047563:13933,15047567:13934,15047568:13935,15047564:13936,15047565:13937,15047577:13938,15047580:13939,15047581:13940,15047583:13941,15047585:13942,15047588:13943,15047589:13944,15047590:13945,15047591:13946,15047592:13947,15047601:13948,15047595:13949,15047597:13950,15047606:14113,15047607:14114,15047809:14115,15047810:14116,15047815:14117,15047818:14118,15047820:14119,15047825:14120,15047829:14121,15047834:14122,15047835:14123,15047837:14124,15047840:14125,15047842:14126,15047843:14127,15047844:14128,15047845:14129,15047849:14130,15047850:14131,15047852:14132,15047854:14133,15047855:14134,15047859:14135,15047860:14136,15047869:14137,15047870:14138,15047871:14139,15048069:14140,15048070:14141,15048076:14142,15048077:14143,15048082:14144,15048098:14145,15048101:14146,15048103:14147,15048104:14148,15048107:14149,15048109:14150,15048110:14151,15048111:14152,15048112:14153,15048113:14154,15048115:14155,15048116:14156,15048117:14157,15048119:14158,15048121:14159,15048122:14160,15048123:14161,15048124:14162,15048126:14163,15048321:14164,15048323:14165,15048332:14166,15048340:14167,15048343:14168,15048345:14169,15048346:14170,15048348:14171,15048349:14172,15048350:14173,15048351:14174,15048353:14175,15048341:14176,15048359:14177,15048360:14178,15048361:14179,15048364:14180,15048376:14181,15048381:14182,15048583:14183,15048584:14184,15048588:14185,15048591:14186,15048597:14187,15048605:14188,15048606:14189,15048612:14190,15048614:14191,15048615:14192,15048617:14193,15048621:14194,15048624:14195,15048629:14196,15048630:14197,15048632:14198,15048637:14199,15048638:14200,15048639:14201,15048835:14202,15048836:14203,15048840:14204,15048841:14205,15048609:14206,15048844:14369,15048845:14370,15048859:14371,15048862:14372,15048863:14373,15048864:14374,15048870:14375,15048871:14376,15048877:14377,15048882:14378,15048889:14379,15048895:14380,15049097:14381,15049100:14382,15049101:14383,15049103:14384,15049104:14385,15049109:14386,15049119:14387,15049121:14388,15049124:14389,15049127:14390,15049128:14391,15049144:14392,15049148:14393,15049151:14394,15049344:14395,15049345:14396,15049351:14397,15049352:14398,15049353:14399,15049354:14400,15049356:14401,15049357:14402,15049359:14403,15049360:14404,15049364:14405,15049366:14406,15049373:14407,15049376:14408,15049377:14409,15049378:14410,15049382:14411,15049385:14412,15049393:14413,15049394:14414,15049604:14415,15049404:14416,15049602:14417,15049608:14418,15049613:14419,15049614:14420,15049616:14421,15049618:14422,15049620:14423,15049622:14424,15049626:14425,15049629:14426,15049633:14427,15049634:14428,15049641:14429,15049651:14430,15049861:14431,15049862:14432,15049867:14433,15049868:14434,15049874:14435,15049875:14436,15049876:14437,15243649:14438,15049885:14439,15049889:14440,15049891:14441,15049892:14442,15049896:14443,15049903:14444,15049904:14445,15049907:14446,15049909:14447,15049910:14448,15049919:14449,15050115:14450,15050118:14451,15050130:14452,15050131:14453,15050137:14454,15050139:14455,15050141:14456,15050142:14457,15050143:14458,15050145:14459,15050147:14460,15050155:14461,15050157:14462,15050159:14625,15050162:14626,15050165:14627,15050166:14628,15050169:14629,15050171:14630,15050172:14631,15050379:14632,15050380:14633,15050382:14634,15050386:14635,15050389:14636,15050391:14637,15050399:14638,15050404:14639,15050407:14640,15050413:14641,15050414:14642,15050415:14643,15050416:14644,15050419:14645,15050423:14646,15050426:14647,15050428:14648,15050625:14649,15050627:14650,15050628:14651,15050632:14652,15050634:14653,15050637:14654,15050642:14655,15050653:14656,15050654:14657,15050655:14658,15050659:14659,15050660:14660,15050663:14661,15050670:14662,15050671:14663,15050673:14664,15050674:14665,15050676:14666,15050679:14667,15050880:14668,15050884:14669,15050892:14670,15050893:14671,15050894:14672,15050898:14673,15050899:14674,15050910:14675,15050915:14676,15050916:14677,15050919:14678,15050920:14679,15050922:14680,15050925:14681,15050928:14682,15051140:14683,15051141:14684,15051143:14685,15051144:14686,15051148:14687,15051152:14688,15051157:14689,15051166:14690,15051171:14691,15051173:14692,15051175:14693,15051181:14694,15051191:14695,15051194:14696,15051195:14697,15051198:14698,15051403:14699,15051408:14700,15051411:14701,15051414:14702,15051417:14703,15051420:14704,15051422:14705,15051423:14706,15051424:14707,15051426:14708,15051431:14709,15051436:14710,15051441:14711,15051442:14712,15051443:14713,15051445:14714,15051448:14715,15051450:14716,15051451:14717,15051455:14718,15051652:14881,15051654:14882,15051656:14883,15051663:14884,15051674:14885,15051676:14886,15051680:14887,15051685:14888,15051690:14889,15051694:14890,15051701:14891,15051702:14892,15051709:14893,15051904:14894,15051905:14895,15051912:14896,15051927:14897,15051956:14898,15051929:14899,15051931:14900,15051933:14901,15051937:14902,15051941:14903,15051949:14904,15051960:14905,15052161:14906,15052171:14907,15052172:14908,15052178:14909,15052182:14910,15052190:14911,15052200:14912,15052206:14913,15052207:14914,15052220:14915,15052221:14916,15052222:14917,15052223:14918,15052417:14919,15052420:14920,15052422:14921,15052426:14922,15052430:14923,15052432:14924,15052433:14925,15052435:14926,15052436:14927,15052438:14928,15052456:14929,15052457:14930,15052460:14931,15052461:14932,15052463:14933,15052465:14934,15052466:14935,15052471:14936,15052474:14937,15052476:14938,15052672:14939,15052673:14940,15052685:14941,15052687:14942,15052694:14943,15052695:14944,15052696:14945,15052697:14946,15052698:14947,15052704:14948,15052719:14949,15052721:14950,15052724:14951,15052733:14952,15052940:14953,15052951:14954,15052958:14955,15052959:14956,15052963:14957,15052966:14958,15052969:14959,15052971:14960,15052972:14961,15052974:14962,15052976:14963,15052978:14964,15052981:14965,15052982:14966,15053209:14967,15053210:14968,15053212:14969,15053218:14970,15053219:14971,15053223:14972,15053224:14973,15053225:14974,15053229:15137,15053232:15138,15053236:15139,15053237:15140,15053242:15141,15053243:15142,15053244:15143,15053245:15144,15053447:15145,15053448:15146,15053450:15147,15053455:15148,15053458:15149,15053469:15150,15053471:15151,15053472:15152,15053474:15153,15053475:15154,15053478:15155,15053482:15156,15053490:15157,15053492:15158,15053493:15159,15053498:15160,15053705:15161,15053707:15162,15053714:15163,15053725:15164,15053719:15165,15053742:15166,15053745:15167,15053746:15168,15053748:15169,15053953:15170,15053958:15171,15053965:15172,15053970:15173,15053995:15174,15053987:15175,15053988:15176,15053990:15177,15053991:15178,15054001:15179,15054004:15180,15054009:15181,15054013:15182,15054015:15183,15054210:15184,15054211:15185,15054214:15186,15054216:15187,15054229:15188,15054225:15189,15054233:15190,15054218:15191,15054239:15192,15054240:15193,15054241:15194,15054242:15195,15054244:15196,15054250:15197,15054253:15198,15054256:15199,15054265:15200,15054266:15201,15054270:15202,15054271:15203,15054465:15204,15054467:15205,15054472:15206,15054474:15207,15054482:15208,15054483:15209,15054484:15210,15054485:15211,15054489:15212,15054491:15213,15054495:15214,15054496:15215,15054503:15216,15054507:15217,15054512:15218,15054516:15219,15054520:15220,15054521:15221,15054723:15222,15054727:15223,15054731:15224,15054736:15225,15054734:15226,15054744:15227,15054745:15228,15054752:15229,15054756:15230,15054761:15393,15054776:15394,15054777:15395,15054976:15396,15054983:15397,15054989:15398,15054994:15399,15054996:15400,15054997:15401,15055e3:15402,15055007:15403,15055008:15404,15055022:15405,15055016:15406,15055026:15407,15055029:15408,15055038:15409,15055243:15410,15055248:15411,15055241:15412,15055249:15413,15055254:15414,15055256:15415,15055259:15416,15055260:15417,15055262:15418,15055272:15419,15055274:15420,15055275:15421,15055276:15422,15055277:15423,15055278:15424,15055280:15425,15055488:15426,15055499:15427,15055502:15428,15055522:15429,15055524:15430,15055525:15431,15055528:15432,15055530:15433,15055532:15434,15055537:15435,15055539:15436,15055549:15437,15055550:15438,15055551:15439,15055750:15440,15055756:15441,15055755:15442,15055758:15443,15055761:15444,15055762:15445,15055764:15446,15055765:15447,15055772:15448,15055774:15449,15055781:15450,15055787:15451,15056002:15452,15056006:15453,15056007:15454,15056008:15455,15056014:15456,15056025:15457,15056028:15458,15056029:15459,15056033:15460,15056034:15461,15056035:15462,15056036:15463,15056040:15464,15056043:15465,15056044:15466,15056046:15467,15056048:15468,15056052:15469,15056054:15470,15056059:15471,15056061:15472,15056063:15473,15056256:15474,15056260:15475,15056261:15476,15056263:15477,15056269:15478,15056272:15479,15056276:15480,15056280:15481,15056283:15482,15056288:15483,15056291:15484,15056292:15485,15056295:15486,15056303:15649,15056306:15650,15056308:15651,15056309:15652,15056312:15653,15056314:15654,15056317:15655,15056318:15656,15056521:15657,15056525:15658,15056527:15659,15056534:15660,15056540:15661,15056541:15662,15056546:15663,15056551:15664,15056555:15665,15056548:15666,15056556:15667,15056559:15668,15056560:15669,15056561:15670,15056568:15671,15056772:15672,15056775:15673,15056776:15674,15056777:15675,15056779:15676,15056784:15677,15056785:15678,15056786:15679,15056787:15680,15056788:15681,15056798:15682,15056801:15683,15056802:15684,15056808:15685,15056809:15686,15056810:15687,15056812:15688,15056813:15689,15056814:15690,15056815:15691,15056818:15692,15056819:15693,15056822:15694,15056826:15695,15056828:15696,15106183:15697,15106186:15698,15106189:15699,15106195:15700,15106196:15701,15106199:15702,15106200:15703,15106202:15704,15106207:15705,15106212:15706,15106221:15707,15106227:15708,15106229:15709,15106432:15710,15106439:15711,15106440:15712,15106441:15713,15106444:15714,15106449:15715,15106452:15716,15106454:15717,15106455:15718,15106461:15719,15106465:15720,15106471:15721,15106481:15722,15106494:15723,15106495:15724,15106690:15725,15106694:15726,15106696:15727,15106698:15728,15106702:15729,15106705:15730,15106707:15731,15106709:15732,15106712:15733,15106717:15734,15106718:15735,15106722:15736,15106724:15737,15106725:15738,15106728:15739,15106736:15740,15106737:15741,15106743:15742,15106747:15905,15106750:15906,15106946:15907,15106948:15908,15106952:15909,15106953:15910,15106954:15911,15106955:15912,15106958:15913,15106959:15914,15106964:15915,15106965:15916,15106969:15917,15106971:15918,15106973:15919,15106974:15920,15106978:15921,15106981:15922,15106994:15923,15106997:15924,15107e3:15925,15107004:15926,15107005:15927,15107202:15928,15107207:15929,15107210:15930,15107212:15931,15107216:15932,15107217:15933,15107218:15934,15107219:15935,15107220:15936,15107222:15937,15107223:15938,15107225:15939,15107228:15940,15107230:15941,15107234:15942,15107242:15943,15107243:15944,15107248:15945,15107249:15946,15107253:15947,15107254:15948,15107255:15949,15107257:15950,15107457:15951,15107461:15952,15107462:15953,15107465:15954,15107486:15955,15107488:15956,15107500:15957,15107506:15958,15107512:15959,15107515:15960,15107516:15961,15107519:15962,15107712:15963,15107713:15964,15107715:15965,15107716:15966,15107723:15967,15107725:15968,15107730:15969,15107731:15970,15107735:15971,15107736:15972,15107740:15973,15107741:15974,15107743:15975,15107744:15976,15107749:15977,15107752:15978,15107754:15979,15107757:15980,15107768:15981,15107769:15982,15107772:15983,15107968:15984,15107969:15985,15107970:15986,15107982:15987,15107983:15988,15107989:15989,15107996:15990,15107997:15991,15107998:15992,15107999:15993,15108001:15994,15108002:15995,15108007:15996,15108009:15997,15108005:15998,15108012:16161,15108013:16162,15108015:16163,15108225:16164,15108227:16165,15108228:16166,15108231:16167,15108243:16168,15108245:16169,15108252:16170,15108256:16171,15108258:16172,15108259:16173,15108263:16174,15108265:16175,15108267:16176,15108281:16177,15108285:16178,15108482:16179,15108483:16180,15108484:16181,15108486:16182,15108492:16183,15108496:16184,15108497:16185,15108498:16186,15108500:16187,15108502:16188,15108506:16189,15108508:16190,15108516:16191,15108525:16192,15108527:16193,15108531:16194,15108538:16195,15108541:16196,15108749:16197,15108750:16198,15108751:16199,15108752:16200,15108774:16201,15108776:16202,15108787:16203,15108790:16204,15108791:16205,15108794:16206,15108798:16207,15108799:16208,15108996:16209,15109006:16210,15109013:16211,15109014:16212,15109018:16213,15109034:16214,15109042:16215,15109044:16216,15109052:16217,15109053:16218,15109251:16219,15109252:16220,15109258:16221,15109259:16222,15109261:16223,15109264:16224,15109267:16225,15109270:16226,15109272:16227,15109289:16228,15109290:16229,15109293:16230,15109301:16231,15109302:16232,15109305:16233,15109308:16234,15109505:16235,15109506:16236,15109507:16237,15109508:16238,15109510:16239,15109514:16240,15109515:16241,15109518:16242,15109522:16243,15109523:16244,15109524:16245,15109528:16246,15109531:16247,15109541:16248,15109542:16249,15109548:16250,15109549:16251,15109553:16252,15109556:16253,15109557:16254,15109560:16417,15109564:16418,15109565:16419,15109567:16420,15109762:16421,15109764:16422,15109767:16423,15109770:16424,15109776:16425,15109780:16426,15109781:16427,15109785:16428,15109786:16429,15109790:16430,15109796:16431,15109798:16432,15109805:16433,15109806:16434,15109807:16435,15109821:16436,15110017:16437,15110021:16438,15110024:16439,15110030:16440,15110033:16441,15110035:16442,15110036:16443,15110037:16444,15110044:16445,15110048:16446,15110053:16447,15110058:16448,15110060:16449,15110066:16450,15110067:16451,15110069:16452,15110072:16453,15110073:16454,15110281:16455,15110282:16456,15110288:16457,15110290:16458,15110292:16459,15110296:16460,15110302:16461,15110304:16462,15110306:16463,15110308:16464,15110309:16465,15110313:16466,15110314:16467,15110319:16468,15110320:16469,15110325:16470,15110333:16471,15110335:16472,15110539:16473,15110543:16474,15110545:16475,15110546:16476,15110547:16477,15110548:16478,15110554:16479,15110555:16480,15110556:16481,15110557:16482,15110559:16483,15110560:16484,15110561:16485,15110563:16486,15110573:16487,15110579:16488,15110580:16489,15110587:16490,15110589:16491,15110789:16492,15110791:16493,15110799:16494,15110800:16495,15110801:16496,15110808:16497,15110809:16498,15110811:16499,15110813:16500,15110815:16501,15110817:16502,15110819:16503,15110822:16504,15110824:16505,15110828:16506,15110835:16507,15110845:16508,15110846:16509,15110847:16510,15111044:16673,15111049:16674,15111050:16675,15111051:16676,15111052:16677,15111054:16678,15111056:16679,15111057:16680,15111061:16681,15111063:16682,15111076:16683,15111077:16684,15111081:16685,15111082:16686,15111085:16687,15111088:16688,15111093:16689,15111095:16690,15111099:16691,15111103:16692,15111297:16693,15111300:16694,15111304:16695,15111305:16696,15111306:16697,15111311:16698,15111315:16699,15111316:16700,15111318:16701,15111321:16702,15111323:16703,15111326:16704,15111327:16705,15111330:16706,15111334:16707,15111337:16708,15111342:16709,15111345:16710,15111354:16711,15111356:16712,15111357:16713,15111555:16714,15111559:16715,15111561:16716,15111568:16717,15111570:16718,15111572:16719,15111583:16720,15111584:16721,15111591:16722,15111595:16723,15111610:16724,15111613:16725,15111809:16726,15111813:16727,15111818:16728,15111826:16729,15111829:16730,15111832:16731,15111837:16732,15111840:16733,15111843:16734,15111846:16735,15111854:16736,15111858:16737,15111859:16738,15111860:16739,15111871:16740,15112066:16741,15112072:16742,15112073:16743,15112078:16744,15112080:16745,15112084:16746,15112086:16747,15112088:16748,15112095:16749,15112112:16750,15112114:16751,15112116:16752,15112117:16753,15112121:16754,15112126:16755,15112127:16756,15112320:16757,15112324:16758,15112328:16759,15112329:16760,15112333:16761,15112337:16762,15112338:16763,15112341:16764,15112342:16765,15112349:16766,15112350:16929,15112353:16930,15112354:16931,15112355:16932,15112356:16933,15112358:16934,15112361:16935,15112362:16936,15112363:16937,15112364:16938,15112366:16939,15112368:16940,15112369:16941,15112371:16942,15112377:16943,15112375:16944,15112576:16945,15112581:16946,15112582:16947,15112586:16948,15112588:16949,15112593:16950,15112590:16951,15112599:16952,15112600:16953,15112601:16954,15112603:16955,15112604:16956,15112608:16957,15112609:16958,15113147:16959,15112618:16960,15112619:16961,15112620:16962,15112638:16963,15112627:16964,15112629:16965,15112639:16966,15112631:16967,15112632:16968,15112633:16969,15112635:16970,15112832:16971,15112636:16972,15112843:16973,15112844:16974,15112845:16975,15112848:16976,15112850:16977,15112857:16978,15112858:16979,15112859:16980,15112860:16981,15112863:16982,15112864:16983,15112868:16984,15112877:16985,15112881:16986,15112882:16987,15112885:16988,15112891:16989,15112895:16990,15113088:16991,15113090:16992,15113091:16993,15113096:16994,15113100:16995,15113102:16996,15113103:16997,15113108:16998,15113115:16999,15113119:17e3,15113128:17001,15113131:17002,15113132:17003,15113134:17004,15113146:17005,15113349:17006,15113351:17007,15113358:17008,15113363:17009,15113369:17010,15113372:17011,15113376:17012,15113378:17013,15113395:17014,15113406:17015,15113605:17016,15113607:17017,15113608:17018,15113612:17019,15113620:17020,15113621:17021,15113629:17022,15113638:17185,15113644:17186,15113646:17187,15113652:17188,15113654:17189,15113659:17190,15113857:17191,15113860:17192,15113870:17193,15113871:17194,15113873:17195,15113875:17196,15113878:17197,15113880:17198,15113881:17199,15113883:17200,15113904:17201,15113905:17202,15113906:17203,15113909:17204,15113915:17205,15113916:17206,15113917:17207,15114169:17208,15114112:17209,15114114:17210,15114115:17211,15114117:17212,15114120:17213,15114121:17214,15114130:17215,15114135:17216,15114137:17217,15114140:17218,15114145:17219,15114150:17220,15114160:17221,15114162:17222,15114166:17223,15114167:17224,15114642:17225,15114388:17226,15114393:17227,15114397:17228,15114399:17229,15114408:17230,15114407:17231,15114412:17232,15114413:17233,15114415:17234,15114416:17235,15114417:17236,15114419:17237,15114427:17238,15114431:17239,15114628:17240,15114629:17241,15114634:17242,15114636:17243,15114645:17244,15114647:17245,15114648:17246,15114651:17247,15114667:17248,15114670:17249,15114671:17250,15114672:17251,15114673:17252,15114674:17253,15114677:17254,15114681:17255,15114682:17256,15114683:17257,15114684:17258,15114882:17259,15114884:17260,15114886:17261,15114888:17262,15114902:17263,15114904:17264,15114906:17265,15114908:17266,15114913:17267,15114915:17268,15114917:17269,15114921:17270,15114922:17271,15114926:17272,15114930:17273,15114939:17274,15115141:17275,15115144:17276,15115148:17277,15115151:17278,15115152:17441,15115153:17442,15115155:17443,15115158:17444,15115161:17445,15115164:17446,15115165:17447,15115173:17448,15115176:17449,15115178:17450,15115179:17451,15115180:17452,15115181:17453,15115184:17454,15115185:17455,15115189:17456,15115190:17457,15115195:17458,15115196:17459,15115197:17460,15115398:17461,15115401:17462,15115402:17463,15115408:17464,15115409:17465,15115411:17466,15115414:17467,15115415:17468,15115441:17469,15115443:17470,15115445:17471,15115448:17472,15115451:17473,15115650:17474,15115653:17475,15115657:17476,15115662:17477,15115671:17478,15115675:17479,15115683:17480,15115684:17481,15115685:17482,15115686:17483,15115688:17484,15115689:17485,15115692:17486,15115696:17487,15115697:17488,15115698:17489,15115706:17490,15115707:17491,15115711:17492,15115904:17493,15115917:17494,15115922:17495,15115926:17496,15115928:17497,15115937:17498,15115941:17499,15115942:17500,15115944:17501,15115947:17502,15115949:17503,15115951:17504,15115959:17505,15115960:17506,15115962:17507,15115964:17508,15116165:17509,15116168:17510,15116177:17511,15116182:17512,15116183:17513,15116194:17514,15116197:17515,15116206:17516,15116207:17517,15116209:17518,15116211:17519,15116213:17520,15116222:17521,15116416:17522,15116417:17523,15116419:17524,15116431:17525,15116433:17526,15116437:17527,15116442:17528,15116445:17529,15116448:17530,15116452:17531,15116456:17532,15116464:17533,15116466:17534,15116468:17697,15116471:17698,15116475:17699,15116478:17700,15116479:17701,15116677:17702,15116678:17703,15116681:17704,15116682:17705,15116686:17706,15116688:17707,15116689:17708,15116690:17709,15116693:17710,15116694:17711,15116699:17712,15116708:17713,15116711:17714,15116714:17715,15116721:17716,15116723:17717,15116734:17718,15116929:17719,15116931:17720,15116934:17721,15116935:17722,15116937:17723,15116939:17724,15116945:17725,15116955:17726,15116957:17727,15116958:17728,15116959:17729,15116965:17730,15116971:17731,15116975:17732,15116976:17733,15116977:17734,15116980:17735,15116989:17736,15116990:17737,15116991:17738,15117190:17739,15117193:17740,15117192:17741,15117196:17742,15117200:17743,15117204:17744,15117205:17745,15117206:17746,15117212:17747,15117213:17748,15117220:17749,15117223:17750,15117228:17751,15117232:17752,15117233:17753,15117234:17754,15117244:17755,15117245:17756,15117442:17757,15117443:17758,15117446:17759,15117447:17760,15117449:17761,15117455:17762,15117456:17763,15117457:17764,15117463:17765,15117467:17766,15117470:17767,15117476:17768,15117480:17769,15117483:17770,15117484:17771,15117487:17772,15117493:17773,15117494:17774,15117499:17775,15117503:17776,15117702:17777,15117706:17778,15117709:17779,15117714:17780,15117718:17781,15117720:17782,15117725:17783,15117728:17784,15117735:17785,15117739:17786,15117742:17787,15117744:17788,15117749:17789,15117757:17790,15117758:17953,15117954:17954,15117957:17955,15117975:17956,15117979:17957,15117983:17958,15117984:17959,15117986:17960,15117987:17961,15117992:17962,15117993:17963,15117996:17964,15117997:17965,15117998:17966,15118e3:17967,15118008:17968,15118009:17969,15118013:17970,15118014:17971,15118211:17972,15118212:17973,15118217:17974,15118220:17975,15118230:17976,15118234:17977,15118241:17978,15118243:17979,15118246:17980,15118247:17981,15118254:17982,15118257:17983,15118263:17984,15118265:17985,15118271:17986,15118466:17987,15118468:17988,15118469:17989,15118473:17990,15118477:17991,15118478:17992,15118480:17993,15118482:17994,15118489:17995,15118495:17996,15118502:17997,15118503:17998,15118504:17999,15118508:18e3,15118510:18001,15118515:18002,15118517:18003,15118518:18004,15118522:18005,15118523:18006,15118527:18007,15118730:18008,15118731:18009,15118733:18010,15118735:18011,15118738:18012,15118740:18013,15118745:18014,15118747:18015,15118748:18016,15118763:18017,15118765:18018,15118767:18019,15118772:18020,15118774:18021,15118776:18022,15118777:18023,15118779:18024,15118981:18025,15118982:18026,15118983:18027,15118985:18028,15118996:18029,15118997:18030,15118999:18031,15119e3:18032,15119004:18033,15119007:18034,15119024:18035,15119026:18036,15119028:18037,15119234:18038,15119238:18039,15119245:18040,15119247:18041,15119248:18042,15119249:18043,15119250:18044,15119252:18045,15119254:18046,15119258:18209,15119260:18210,15119264:18211,15119271:18212,15119273:18213,15119275:18214,15119276:18215,15119278:18216,15119282:18217,15119284:18218,15119492:18219,15119495:18220,15119498:18221,15119502:18222,15119503:18223,15119505:18224,15119507:18225,15119514:18226,15119526:18227,15119527:18228,15119528:18229,15118759:18230,15119534:18231,15119535:18232,15119537:18233,15119545:18234,15119548:18235,15119551:18236,15119767:18237,15119774:18238,15119775:18239,15119777:18240,15119781:18241,15119783:18242,15119791:18243,15119792:18244,15119804:18245,15120002:18246,15120007:18247,15120017:18248,15120018:18249,15120020:18250,15120022:18251,15120023:18252,15120024:18253,15120042:18254,15120044:18255,15120052:18256,15120055:18257,15120057:18258,15120061:18259,15120063:18260,15120260:18261,15120264:18262,15120266:18263,15120270:18264,15120271:18265,15120278:18266,15120283:18267,15120285:18268,15120287:18269,15120288:18270,15120290:18271,15120293:18272,15120297:18273,15120303:18274,15120304:18275,15120308:18276,15120310:18277,15120316:18278,15120512:18279,15120516:18280,15120542:18281,15120546:18282,15120551:18283,15120562:18284,15120566:18285,15120569:18286,15120571:18287,15120572:18288,15120772:18289,15120773:18290,15120776:18291,15120777:18292,15120779:18293,15120783:18294,15120785:18295,15120786:18296,15120787:18297,15120788:18298,15120791:18299,15120796:18300,15120797:18301,15120798:18302,15120802:18465,15120803:18466,15120808:18467,15120819:18468,15120827:18469,15120829:18470,15121037:18471,15121043:18472,15121049:18473,15121056:18474,15121063:18475,15121069:18476,15121070:18477,15121073:18478,15121075:18479,15121083:18480,15121087:18481,15121280:18482,15121281:18483,15121283:18484,15121287:18485,15121288:18486,15121290:18487,15121293:18488,15121294:18489,15121295:18490,15121323:18491,15121325:18492,15121326:18493,15121337:18494,15121339:18495,15121341:18496,15121540:18497,15121544:18498,15121546:18499,15121548:18500,15121549:18501,15121558:18502,15121560:18503,15121562:18504,15121563:18505,15121574:18506,15121577:18507,15121578:18508,15121583:18509,15121584:18510,15121587:18511,15121590:18512,15121595:18513,15121596:18514,15121581:18515,15121807:18516,15121809:18517,15121810:18518,15121811:18519,15121815:18520,15121817:18521,15121818:18522,15121821:18523,15121822:18524,15121825:18525,15121826:18526,15121832:18527,15121836:18528,15121853:18529,15121854:18530,15122051:18531,15122055:18532,15122056:18533,15122059:18534,15122060:18535,15122061:18536,15122064:18537,15122066:18538,15122067:18539,15122068:18540,15122070:18541,15122074:18542,15122079:18543,15122080:18544,15122085:18545,15122086:18546,15122087:18547,15122088:18548,15122094:18549,15122095:18550,15122096:18551,15122101:18552,15122102:18553,15122108:18554,15122309:18555,15122311:18556,15122312:18557,15122314:18558,15122330:18721,15122334:18722,15122344:18723,15122345:18724,15122352:18725,15122357:18726,15122361:18727,15122364:18728,15122365:18729,15171712:18730,15171717:18731,15171718:18732,15171719:18733,15171725:18734,15171735:18735,15171744:18736,15171747:18737,15171759:18738,15171764:18739,15171767:18740,15171769:18741,15171772:18742,15171971:18743,15171972:18744,15171976:18745,15171977:18746,15171978:18747,15171979:18748,15171988:18749,15171989:18750,15171997:18751,15171998:18752,15171982:18753,15172004:18754,15172005:18755,15172012:18756,15172014:18757,15172021:18758,15172022:18759,15172030:18760,15172225:18761,15172229:18762,15172230:18763,15172244:18764,15172245:18765,15172246:18766,15172247:18767,15172248:18768,15172251:18769,15172260:18770,15172267:18771,15172272:18772,15172273:18773,15172276:18774,15172279:18775,15172490:18776,15172497:18777,15172499:18778,15172500:18779,15172501:18780,15172502:18781,15172504:18782,15172508:18783,15172516:18784,15172538:18785,15172739:18786,15172740:18787,15172741:18788,15172742:18789,15172743:18790,15172747:18791,15172748:18792,15172751:18793,15172766:18794,15172768:18795,15172779:18796,15172781:18797,15172783:18798,15172784:18799,15172785:18800,15172792:18801,15172993:18802,15172997:18803,15172998:18804,15172999:18805,15173002:18806,15173003:18807,15173008:18808,15173010:18809,15173015:18810,15173018:18811,15173020:18812,15173022:18813,15173024:18814,15173032:18977,15173049:18978,15173248:18979,15173253:18980,15173255:18981,15173260:18982,15173266:18983,15173274:18984,15173275:18985,15173280:18986,15173282:18987,15173295:18988,15173296:18989,15173298:18990,15173299:18991,15173306:18992,15173311:18993,15173504:18994,15173505:18995,15173508:18996,15173515:18997,15173516:18998,15173523:18999,15173526:19e3,15173529:19001,15173530:19002,15173532:19003,15173560:19004,15173566:19005,15173760:19006,15173767:19007,15173768:19008,15173769:19009,15173779:19010,15173783:19011,15173786:19012,15173789:19013,15173791:19014,15173796:19015,15173803:19016,15173807:19017,15173812:19018,15173816:19019,15173817:19020,15174017:19021,15174018:19022,15174019:19023,15174021:19024,15174030:19025,15174031:19026,15174032:19027,15174035:19028,15174037:19029,15174038:19030,15174042:19031,15174044:19032,15174046:19033,15174048:19034,15174051:19035,15174056:19036,15174059:19037,15174062:19038,15174063:19039,15174065:19040,15174071:19041,15174072:19042,15174075:19043,15174076:19044,15174079:19045,15174276:19046,15174281:19047,15174285:19048,15174286:19049,15174291:19050,15174299:19051,15174312:19052,15174317:19053,15174318:19054,15174321:19055,15174324:19056,15174334:19057,15174529:19058,15174535:19059,15174537:19060,15174540:19061,15174549:19062,15174550:19063,15174552:19064,15174559:19065,15174565:19066,15174579:19067,15174580:19068,15174586:19069,15174587:19070,15174590:19233,15174786:19234,15174788:19235,15174789:19236,15174791:19237,15174795:19238,15174797:19239,15174802:19240,15174803:19241,15174808:19242,15174809:19243,15174814:19244,15174818:19245,15174820:19246,15174823:19247,15174824:19248,15174828:19249,15174833:19250,15174834:19251,15174837:19252,15174842:19253,15174843:19254,15174845:19255,15175043:19256,15175053:19257,15175056:19258,15175058:19259,15175062:19260,15175064:19261,15175069:19262,15175070:19263,15175071:19264,15175072:19265,15175078:19266,15175079:19267,15175081:19268,15175083:19269,15175084:19270,15175086:19271,15175087:19272,15175089:19273,15175095:19274,15175097:19275,15175100:19276,15175296:19277,15175297:19278,15175299:19279,15175301:19280,15175302:19281,15175310:19282,15175312:19283,15175315:19284,15175317:19285,15175319:19286,15175320:19287,15175324:19288,15175326:19289,15175327:19290,15175328:19291,15175330:19292,15175333:19293,15175334:19294,15175338:19295,15175339:19296,15175341:19297,15175349:19298,15175351:19299,15175353:19300,15175356:19301,15175357:19302,15175359:19303,15175557:19304,15175558:19305,15175561:19306,15175563:19307,15175564:19308,15175567:19309,15175570:19310,15175571:19311,15175574:19312,15175577:19313,15175581:19314,15175585:19315,15175587:19316,15175590:19317,15175591:19318,15175593:19319,15175604:19320,15175605:19321,15175607:19322,15175609:19323,15175610:19324,15175611:19325,15175613:19326,15175615:19489,15175808:19490,15175809:19491,15175812:19492,15175815:19493,15175818:19494,15175825:19495,15175834:19496,15175835:19497,15175844:19498,15175846:19499,15175848:19500,15175849:19501,15175850:19502,15175851:19503,15175852:19504,15175853:19505,15175854:19506,15175855:19507,15175856:19508,15175857:19509,15175865:19510,15176064:19511,15176067:19512,15176068:19513,15176070:19514,15176071:19515,15176075:19516,15176077:19517,15176081:19518,15176082:19519,15176087:19520,15176093:19521,15176098:19522,15176102:19523,15176103:19524,15176104:19525,15176107:19526,15176109:19527,15176110:19528,15176113:19529,15176114:19530,15176320:19531,15176321:19532,15176325:19533,15176326:19534,15176327:19535,15176329:19536,15176335:19537,15176336:19538,15176337:19539,15176338:19540,15176344:19541,15176345:19542,15176346:19543,15176348:19544,15176351:19545,15176352:19546,15176353:19547,15176355:19548,15176358:19549,15176360:19550,15176361:19551,15176362:19552,15176363:19553,15176366:19554,15176367:19555,15176369:19556,15176370:19557,15176373:19558,15176377:19559,15176379:19560,15176383:19561,15176584:19562,15176585:19563,15176588:19564,15176592:19565,15176595:19566,15176600:19567,15176602:19568,15176603:19569,15176606:19570,15176607:19571,15176612:19572,15176616:19573,15176618:19574,15176619:19575,15176623:19576,15176628:19577,15176634:19578,15176635:19579,15176636:19580,15176639:19581,15176838:19582,15176850:19745,15176854:19746,15176855:19747,15176864:19748,15176865:19749,15176868:19750,15176871:19751,15176873:19752,15176874:19753,15176879:19754,15176886:19755,15176889:19756,15176893:19757,15176894:19758,15176895:19759,15177088:19760,15177091:19761,15177095:19762,15177096:19763,15177102:19764,15177104:19765,15177106:19766,15177111:19767,15177118:19768,15177119:19769,15177121:19770,15177135:19771,15177137:19772,15177145:19773,15177146:19774,15177147:19775,15177148:19776,15177149:19777,15177150:19778,15177345:19779,15177349:19780,15177360:19781,15177362:19782,15177363:19783,15177365:19784,15177369:19785,15177372:19786,15177378:19787,15177380:19788,15177396:19789,15177402:19790,15177407:19791,15177600:19792,15177601:19793,15177604:19794,15177606:19795,15177612:19796,15177614:19797,15177615:19798,15177623:19799,15177628:19800,15177631:19801,15177632:19802,15177633:19803,15177636:19804,15177639:19805,15177644:19806,15177646:19807,15177647:19808,15177649:19809,15177657:19810,15177856:19811,15177858:19812,15177859:19813,15177860:19814,15177863:19815,15177864:19816,15177866:19817,15177868:19818,15177871:19819,15177874:19820,15177875:19821,15177877:19822,15177878:19823,15177881:19824,15177883:19825,15177884:19826,15177885:19827,15177886:19828,15177891:19829,15177893:19830,15177894:19831,15177897:19832,15177901:19833,15177906:19834,15177907:19835,15177909:19836,15177912:19837,15177913:19838,15177914:20001,15177916:20002,15178122:20003,15178112:20004,15178113:20005,15178115:20006,15178116:20007,15178117:20008,15178121:20009,15178123:20010,15178133:20011,15178137:20012,15178143:20013,15178148:20014,15178149:20015,15178157:20016,15178158:20017,15178159:20018,15178161:20019,15178164:20020,15178369:20021,15178373:20022,15178380:20023,15178381:20024,15178389:20025,15178395:20026,15178396:20027,15178397:20028,15178399:20029,15178400:20030,15178402:20031,15178403:20032,15178404:20033,15178405:20034,15178406:20035,15178407:20036,15178408:20037,15178410:20038,15178413:20039,15178429:20040,15178625:20041,15178629:20042,15178633:20043,15178635:20044,15178636:20045,15178638:20046,15178644:20047,15178649:20048,15178656:20049,15178662:20050,15178664:20051,15178668:20052,15178672:20053,15178673:20054,15178678:20055,15178681:20056,15178684:20057,15178880:20058,15178886:20059,15178890:20060,15178894:20061,15178898:20062,15178900:20063,15178901:20064,15178903:20065,15178905:20066,15178906:20067,15178908:20068,15178914:20069,15178920:20070,15178925:20071,15178926:20072,15178927:20073,15178932:20074,15178933:20075,15178934:20076,15178937:20077,15178941:20078,15178942:20079,15179138:20080,15179141:20081,15179142:20082,15179146:20083,15179149:20084,15179150:20085,15179151:20086,15179154:20087,15179158:20088,15179159:20089,15179164:20090,15179166:20091,15179167:20092,15179168:20093,15179170:20094,15179172:20257,15179175:20258,15179178:20259,15179180:20260,15179184:20261,15179186:20262,15179187:20263,15179188:20264,15179194:20265,15179197:20266,15179392:20267,15179396:20268,15179404:20269,15179405:20270,15179412:20271,15179413:20272,15179414:20273,15179418:20274,15179423:20275,15179426:20276,15179431:20277,15179434:20278,15179438:20279,15179439:20280,15179441:20281,15179445:20282,15179454:20283,15179651:20284,15179657:20285,15179665:20286,15179666:20287,15179669:20288,15179673:20289,15179678:20290,15179679:20291,15179680:20292,15179684:20293,15179686:20294,15179690:20295,15179692:20296,15179696:20297,15179697:20298,15179700:20299,15179704:20300,15179707:20301,15179909:20302,15179910:20303,15179913:20304,15179917:20305,15179918:20306,15179921:20307,15179933:20308,15179937:20309,15179938:20310,15179939:20311,15179949:20312,15179950:20313,15179952:20314,15179957:20315,15179959:20316,15180163:20317,15180164:20318,15180167:20319,15180168:20320,15180172:20321,15180174:20322,15180178:20323,15180188:20324,15180190:20325,15180192:20326,15180193:20327,15180195:20328,15180196:20329,15180200:20330,15180202:20331,15180206:20332,15180218:20333,15180222:20334,15180426:20335,15180431:20336,15180436:20337,15180440:20338,15180449:20339,15180445:20340,15180446:20341,15180447:20342,15180452:20343,15180456:20344,15180460:20345,15180461:20346,15180464:20347,15180465:20348,15180466:20349,15180467:20350,15180475:20513,15180477:20514,15180479:20515,15180679:20516,15180680:20517,15180681:20518,15180684:20519,15180686:20520,15180690:20521,15180691:20522,15180693:20523,15180694:20524,15180708:20525,15180699:20526,15180703:20527,15180704:20528,15180705:20529,15180710:20530,15180714:20531,15180722:20532,15180723:20533,15180928:20534,15180726:20535,15180727:20536,15180730:20537,15180731:20538,15180735:20539,15180934:20540,15180940:20541,15180944:20542,15180954:20543,15180956:20544,15180958:20545,15180959:20546,15180960:20547,15180965:20548,15180967:20549,15180969:20550,15180973:20551,15180977:20552,15180980:20553,15180981:20554,15180987:20555,15180989:20556,15180991:20557,15181188:20558,15181189:20559,15181190:20560,15181194:20561,15181195:20562,15181199:20563,15181201:20564,15181204:20565,15181208:20566,15181211:20567,15181212:20568,15181223:20569,15181225:20570,15181227:20571,15181234:20572,15181241:20573,15181243:20574,15181244:20575,15181246:20576,15181451:20577,15181452:20578,15181457:20579,15181459:20580,15181460:20581,15181461:20582,15181462:20583,15181464:20584,15181467:20585,15181468:20586,15181473:20587,15181480:20588,15181481:20589,15181483:20590,15181487:20591,15181489:20592,15181492:20593,15181496:20594,15181499:20595,15181698:20596,15181700:20597,15181703:20598,15181704:20599,15181706:20600,15181711:20601,15181716:20602,15181718:20603,15181722:20604,15181725:20605,15181726:20606,15181728:20769,15181730:20770,15181733:20771,15181738:20772,15181739:20773,15181741:20774,15181745:20775,15181752:20776,15181756:20777,15181954:20778,15181955:20779,15181959:20780,15181961:20781,15181962:20782,15181964:20783,15181969:20784,15181973:20785,15181979:20786,15181982:20787,15181985:20788,15181991:20789,15181995:20790,15181997:20791,15181999:20792,15182e3:20793,15182004:20794,15182005:20795,15182008:20796,15182009:20797,15182010:20798,15182212:20799,15182213:20800,15182215:20801,15182216:20802,15182220:20803,15182229:20804,15182230:20805,15182233:20806,15182236:20807,15182237:20808,15182239:20809,15182240:20810,15182245:20811,15182247:20812,15182250:20813,15182253:20814,15182261:20815,15182264:20816,15182270:20817,15182464:20818,15182466:20819,15182469:20820,15182470:20821,15182474:20822,15182475:20823,15182480:20824,15182481:20825,15182484:20826,15182494:20827,15182496:20828,15182499:20829,15182508:20830,15182515:20831,15182517:20832,15182521:20833,15182523:20834,15182524:20835,15182726:20836,15182729:20837,15182732:20838,15182734:20839,15182737:20840,15182747:20841,15182760:20842,15182761:20843,15182763:20844,15182764:20845,15182769:20846,15182772:20847,15182779:20848,15182781:20849,15182782:20850,15182983:20851,15182996:20852,15183007:20853,15183011:20854,15183015:20855,15183017:20856,15183018:20857,15183019:20858,15183021:20859,15183022:20860,15183023:20861,15183024:20862,15183025:21025,15183028:21026,15183037:21027,15183039:21028,15183232:21029,15183233:21030,15183239:21031,15183246:21032,15183253:21033,15183264:21034,15183268:21035,15183270:21036,15183273:21037,15183274:21038,15183277:21039,15183279:21040,15183282:21041,15183283:21042,15183287:21043,15183492:21044,15183497:21045,15183502:21046,15183504:21047,15183505:21048,15183510:21049,15183515:21050,15183518:21051,15183520:21052,15183525:21053,15183532:21054,15183535:21055,15183536:21056,15183538:21057,15183541:21058,15183542:21059,15183546:21060,15183547:21061,15183548:21062,15183549:21063,15183746:21064,15183749:21065,15183752:21066,15183754:21067,15183764:21068,15183766:21069,15183767:21070,15183769:21071,15183770:21072,15183771:21073,15183784:21074,15183786:21075,15183794:21076,15183796:21077,15183797:21078,15183800:21079,15183801:21080,15183802:21081,15183804:21082,15183806:21083,15184001:21084,15184002:21085,15184003:21086,15184004:21087,15184006:21088,15184009:21089,15184011:21090,15184012:21091,15184014:21092,15184015:21093,15184025:21094,15184027:21095,15184032:21096,15184037:21097,15184038:21098,15184040:21099,15184044:21100,15184049:21101,15184051:21102,15184052:21103,15184054:21104,15184057:21105,15184058:21106,15184262:21107,15184266:21108,15184277:21109,15184273:21110,15184274:21111,15184275:21112,15184281:21113,15184282:21114,15184283:21115,15184284:21116,15184285:21117,15184286:21118,15184289:21281,15184291:21282,15184295:21283,15184297:21284,15184301:21285,15184302:21286,15184304:21287,15184306:21288,15184313:21289,15184316:21290,15184317:21291,15184518:21292,15184519:21293,15184527:21294,15184532:21295,15184542:21296,15184544:21297,15184550:21298,15184560:21299,15184566:21300,15184567:21301,15184570:21302,15184571:21303,15184572:21304,15184575:21305,15184772:21306,15184775:21307,15184776:21308,15184777:21309,15184781:21310,15184783:21311,15184787:21312,15184788:21313,15184789:21314,15184791:21315,15184793:21316,15184794:21317,15184797:21318,15184806:21319,15184809:21320,15184811:21321,15184821:21322,15185027:21323,15185031:21324,15185032:21325,15185033:21326,15185039:21327,15185041:21328,15185042:21329,15185043:21330,15185046:21331,15185053:21332,15185054:21333,15185059:21334,15185062:21335,15185066:21336,15185069:21337,15185073:21338,15185084:21339,15185085:21340,15185086:21341,15185280:21342,15185281:21343,15185287:21344,15185288:21345,15185293:21346,15185297:21347,15185299:21348,15185303:21349,15185305:21350,15185306:21351,15185308:21352,15185309:21353,15185317:21354,15185319:21355,15185322:21356,15185328:21357,15185336:21358,15185338:21359,15185339:21360,15185343:21361,15185537:21362,15185538:21363,15185539:21364,15185541:21365,15185542:21366,15185544:21367,15185547:21368,15185548:21369,15185549:21370,15185553:21371,15185558:21372,15185559:21373,15185565:21374,15185566:21537,15185574:21538,15185575:21539,15185578:21540,15185587:21541,15185590:21542,15185591:21543,15185593:21544,15185794:21545,15185795:21546,15185796:21547,15185797:21548,15185798:21549,15185804:21550,15185805:21551,15185806:21552,15185815:21553,15185817:21554,15186048:21555,15185826:21556,15185829:21557,15185830:21558,15185834:21559,15185835:21560,15185837:21561,15185841:21562,15185845:21563,15185846:21564,15185849:21565,15185850:21566,15186056:21567,15186064:21568,15186065:21569,15186069:21570,15186071:21571,15186076:21572,15186077:21573,15186080:21574,15186087:21575,15186088:21576,15186092:21577,15186093:21578,15186095:21579,15186099:21580,15186102:21581,15186111:21582,15186308:21583,15186309:21584,15186311:21585,15186318:21586,15186320:21587,15186322:21588,15186328:21589,15186335:21590,15186337:21591,15186338:21592,15186341:21593,15186347:21594,15186350:21595,15186351:21596,15186355:21597,15186360:21598,15186366:21599,15186561:21600,15186566:21601,15186567:21602,15186570:21603,15186573:21604,15186577:21605,15186581:21606,15186584:21607,15186586:21608,15186589:21609,15186590:21610,15187132:21611,15187131:21612,15187133:21613,15187134:21614,15187135:21615,15187331:21616,15187332:21617,15187335:21618,15187343:21619,15187346:21620,15187347:21621,15187355:21622,15187356:21623,15187357:21624,15187361:21625,15187363:21626,15187364:21627,15187365:21628,15187366:21629,15187373:21630,15187377:21793,15187389:21794,15187390:21795,15187391:21796,15187584:21797,15187595:21798,15187597:21799,15187599:21800,15187600:21801,15187601:21802,15187606:21803,15187607:21804,15187612:21805,15187617:21806,15187618:21807,15187622:21808,15187626:21809,15187629:21810,15187636:21811,15187644:21812,15187647:21813,15187840:21814,15187843:21815,15187848:21816,15187854:21817,15187855:21818,15187867:21819,15187871:21820,15187875:21821,15187877:21822,15187880:21823,15187884:21824,15187886:21825,15187887:21826,15187890:21827,15187898:21828,15187901:21829,15187902:21830,15187903:21831,15237255:21832,15237256:21833,15237258:21834,15237261:21835,15237262:21836,15237263:21837,15237265:21838,15237267:21839,15237268:21840,15237270:21841,15237277:21842,15237278:21843,15237279:21844,15237280:21845,15237284:21846,15237286:21847,15237292:21848,15237294:21849,15237296:21850,15237300:21851,15237301:21852,15237303:21853,15237305:21854,15237306:21855,15237308:21856,15237310:21857,15237504:21858,15237508:21859,15237536:21860,15237540:21861,15237542:21862,15237549:21863,15237553:21864,15237557:21865,15237761:21866,15237768:21867,15237774:21868,15237788:21869,15237790:21870,15237798:21871,15237799:21872,15237803:21873,15237816:21874,15237817:21875,15238024:21876,15238029:21877,15238031:21878,15238034:21879,15238036:21880,15238037:21881,15238039:21882,15238040:21883,15238048:21884,15238061:21885,15238062:21886,15238064:22049,15238066:22050,15238067:22051,15238070:22052,15238073:22053,15238074:22054,15238078:22055,15238275:22056,15238283:22057,15238294:22058,15238295:22059,15238296:22060,15238300:22061,15238302:22062,15238304:22063,15238308:22064,15238311:22065,15238316:22066,15238320:22067,15238325:22068,15238330:22069,15238332:22070,15238533:22071,15238535:22072,15238538:22073,15238540:22074,15238546:22075,15238551:22076,15238560:22077,15238561:22078,15238567:22079,15238568:22080,15238569:22081,15238573:22082,15238575:22083,15238583:22084,15238785:22085,15238800:22086,15238788:22087,15238789:22088,15238790:22089,15238795:22090,15238798:22091,15238806:22092,15238808:22093,15238811:22094,15238814:22095,15238818:22096,15238830:22097,15238834:22098,15238836:22099,15238843:22100,15239051:22101,15239043:22102,15239045:22103,15239050:22104,15239054:22105,15239055:22106,15239061:22107,15239063:22108,15239067:22109,15239069:22110,15239070:22111,15239073:22112,15239076:22113,15239083:22114,15239084:22115,15239088:22116,15239089:22117,15239090:22118,15239093:22119,15239094:22120,15239096:22121,15239097:22122,15239101:22123,15239103:22124,15239296:22125,15239299:22126,15239311:22127,15239315:22128,15239316:22129,15239321:22130,15239322:22131,15239325:22132,15239329:22133,15239330:22134,15239336:22135,15239346:22136,15239348:22137,15239354:22138,15239555:22139,15239556:22140,15239557:22141,15239558:22142,15239563:22305,15239566:22306,15239567:22307,15239569:22308,15239574:22309,15239580:22310,15239584:22311,15239587:22312,15239591:22313,15239597:22314,15239604:22315,15239611:22316,15239613:22317,15239615:22318,15239808:22319,15239809:22320,15239811:22321,15239812:22322,15239815:22323,15239817:22324,15239818:22325,15239822:22326,15239825:22327,15239828:22328,15239830:22329,15239832:22330,15239834:22331,15239835:22332,15239840:22333,15239841:22334,15239843:22335,15239844:22336,15239847:22337,15239848:22338,15239849:22339,15239850:22340,15239854:22341,15239856:22342,15239858:22343,15239860:22344,15239863:22345,15239866:22346,15239868:22347,15239870:22348,15239871:22349,15240070:22350,15240080:22351,15240085:22352,15240090:22353,15240096:22354,15240098:22355,15240100:22356,15240104:22357,15240106:22358,15240109:22359,15240111:22360,15240118:22361,15240119:22362,15240125:22363,15240126:22364,15240320:22365,15240321:22366,15240327:22367,15240328:22368,15240330:22369,15240331:22370,15240596:22371,15240347:22372,15240349:22373,15240350:22374,15240351:22375,15240353:22376,15240354:22377,15240364:22378,15240365:22379,15240366:22380,15240368:22381,15240371:22382,15240375:22383,15240378:22384,15240380:22385,15240381:22386,15240578:22387,15240579:22388,15240580:22389,15240583:22390,15240589:22391,15240590:22392,15240593:22393,15240597:22394,15240598:22395,15240599:22396,15240624:22397,15240632:22398,15240637:22561,15240639:22562,15240832:22563,15240834:22564,15240836:22565,15240838:22566,15240845:22567,15240850:22568,15240852:22569,15240853:22570,15240856:22571,15240857:22572,15240859:22573,15240860:22574,15240861:22575,15240870:22576,15240871:22577,15240873:22578,15240876:22579,15240894:22580,15240895:22581,15241088:22582,15241095:22583,15241097:22584,15241103:22585,15241104:22586,15241105:22587,15241108:22588,15241117:22589,15240595:22590,15241128:22591,15241130:22592,15241142:22593,15241144:22594,15241145:22595,15241148:22596,15241345:22597,15241350:22598,15241354:22599,15241359:22600,15241361:22601,15241365:22602,15241369:22603,15240877:22604,15241391:22605,15241401:22606,15241605:22607,15241607:22608,15241608:22609,15241610:22610,15241613:22611,15241615:22612,15241617:22613,15241618:22614,15241622:22615,15241624:22616,15241625:22617,15241626:22618,15241628:22619,15241632:22620,15241636:22621,15241637:22622,15241639:22623,15241642:22624,15241648:22625,15241651:22626,15241652:22627,15241654:22628,15241656:22629,15241660:22630,15241661:22631,15241857:22632,15241861:22633,15241874:22634,15241875:22635,15241877:22636,15241886:22637,15241894:22638,15241896:22639,15241897:22640,15241898:22641,15241903:22642,15241905:22643,15241908:22644,15241914:22645,15241917:22646,15241918:22647,15242112:22648,15242114:22649,15242119:22650,15242120:22651,15242124:22652,15242127:22653,15242131:22654,15242140:22817,15242151:22818,15242154:22819,15242159:22820,15242160:22821,15242161:22822,15242162:22823,15242167:22824,15242418:22825,15242170:22826,15242171:22827,15242173:22828,15242370:22829,15242371:22830,15242375:22831,15242380:22832,15242382:22833,15242384:22834,15242396:22835,15242398:22836,15242402:22837,15242403:22838,15242404:22839,15242405:22840,15242407:22841,15242410:22842,15242411:22843,15242415:22844,15242419:22845,15242420:22846,15242422:22847,15242431:22848,15242630:22849,15242639:22850,15242640:22851,15242641:22852,15242642:22853,15242643:22854,15242646:22855,15242649:22856,15242652:22857,15242653:22858,15242654:22859,15242655:22860,15242656:22861,15242657:22862,15242658:22863,15242660:22864,15242667:22865,15242671:22866,15242681:22867,15242682:22868,15242683:22869,15242685:22870,15242687:22871,15242881:22872,15242885:22873,15242886:22874,15242889:22875,15242891:22876,15242892:22877,15242895:22878,15242899:22879,15242904:22880,15242909:22881,15242911:22882,15242912:22883,15242914:22884,15242917:22885,15242919:22886,15242932:22887,15242934:22888,15242935:22889,15242936:22890,15242940:22891,15242941:22892,15242942:22893,15242943:22894,15243138:22895,15243143:22896,15243146:22897,15243147:22898,15243150:22899,15242925:22900,15243160:22901,15243162:22902,15243167:22903,15243168:22904,15243174:22905,15243176:22906,15243181:22907,15243187:22908,15243190:22909,15243196:22910,15243199:23073,15243392:23074,15243396:23075,15243397:23076,15243405:23077,15243406:23078,15243408:23079,15243409:23080,15243410:23081,15243416:23082,15243417:23083,15243419:23084,15243422:23085,15243425:23086,15243431:23087,15243433:23088,15243446:23089,15243448:23090,15243450:23091,15243452:23092,15243453:23093,15243648:23094,15243650:23095,15243654:23096,15243666:23097,15243667:23098,15243670:23099,15243671:23100,15243672:23101,15243673:23102,15243677:23103,15243680:23104,15243681:23105,15243682:23106,15243683:23107,15243684:23108,15243689:23109,15243692:23110,15243695:23111,15243701:23112,15243702:23113,15243703:23114,15243706:23115,15243917:23116,15243921:23117,15243926:23118,15243928:23119,15243930:23120,15243932:23121,15243937:23122,15243942:23123,15243943:23124,15243944:23125,15243949:23126,15243953:23127,15243955:23128,15243956:23129,15243957:23130,15243959:23131,15243960:23132,15243961:23133,15243967:23134,15244160:23135,15244161:23136,15244163:23137,15244165:23138,15244177:23139,15244178:23140,15244181:23141,15244183:23142,15244186:23143,15244188:23144,15244192:23145,15244195:23146,15244197:23147,15244199:23148,15243912:23149,15244218:23150,15244220:23151,15244221:23152,15244420:23153,15244421:23154,15244423:23155,15244427:23156,15244430:23157,15244431:23158,15244432:23159,15244435:23160,15244436:23161,15244441:23162,15244446:23163,15244447:23164,15244449:23165,15244451:23166,15244456:23329,15244462:23330,15244463:23331,15244465:23332,15244466:23333,15244473:23334,15244474:23335,15244476:23336,15244477:23337,15244478:23338,15244672:23339,15244675:23340,15244677:23341,15244685:23342,15244696:23343,15244701:23344,15244705:23345,15244708:23346,15244709:23347,15244719:23348,15244721:23349,15244722:23350,15244731:23351,15244931:23352,15244932:23353,15244933:23354,15244934:23355,15244935:23356,15244936:23357,15244937:23358,15244939:23359,15244940:23360,15244944:23361,15244947:23362,15244949:23363,15244951:23364,15244952:23365,15244953:23366,15244958:23367,15244960:23368,15244963:23369,15244967:23370,15244972:23371,15244973:23372,15244974:23373,15244977:23374,15244981:23375,15244990:23376,15244991:23377,15245185:23378,15245192:23379,15245193:23380,15245194:23381,15245198:23382,15245205:23383,15245206:23384,15245209:23385,15245210:23386,15245212:23387,15245215:23388,15245218:23389,15245219:23390,15245220:23391,15245226:23392,15245227:23393,15245229:23394,15245233:23395,15245235:23396,15245240:23397,15245242:23398,15245247:23399,15245441:23400,15245443:23401,15245446:23402,15245449:23403,15245450:23404,15245451:23405,15245456:23406,15245465:23407,15245458:23408,15245459:23409,15245460:23410,15245464:23411,15245466:23412,15245467:23413,15245468:23414,15245470:23415,15245471:23416,15245480:23417,15245485:23418,15245486:23419,15245488:23420,15245490:23421,15245493:23422,15245498:23585,15245500:23586,15245697:23587,15245699:23588,15245701:23589,15245704:23590,15245705:23591,15245706:23592,15245707:23593,15245710:23594,15245713:23595,15245717:23596,15245718:23597,15245720:23598,15245722:23599,15245724:23600,15245727:23601,15245728:23602,15245732:23603,15245737:23604,15245745:23605,15245753:23606,15245755:23607,15245952:23608,15245976:23609,15245978:23610,15245979:23611,15245980:23612,15245983:23613,15245984:23614,15245992:23615,15245994:23616,15246010:23617,15246013:23618,15246014:23619,15246208:23620,15246218:23621,15246219:23622,15246220:23623,15246221:23624,15246222:23625,15246225:23626,15246226:23627,15246227:23628,15246235:23629,15246238:23630,15246247:23631,15246255:23632,15246256:23633,15246257:23634,15246261:23635,15246263:23636,15246465:23637,15246470:23638,15246477:23639,15246478:23640,15246479:23641,15246485:23642,15246486:23643,15246488:23644,15246489:23645,15246490:23646,15246492:23647,15246496:23648,15246502:23649,15246503:23650,15246504:23651,15246512:23652,15246513:23653,15246514:23654,15246517:23655,15246521:23656,15246522:23657,15246526:23658,15246720:23659,15246722:23660,15246725:23661,15246726:23662,15246729:23663,15246735:23664,15246738:23665,15246743:23666,15246746:23667,15246747:23668,15246748:23669,15246753:23670,15246754:23671,15246755:23672,15246763:23673,15246766:23674,15246768:23675,15246771:23676,15246773:23677,15246778:23678,15246779:23841,15246780:23842,15246781:23843,15246985:23844,15246989:23845,15246992:23846,15246996:23847,15246997:23848,15247003:23849,15247004:23850,15247007:23851,15247008:23852,15247013:23853,15247024:23854,15247028:23855,15247029:23856,15247030:23857,15247031:23858,15247036:23859,15247252:23860,15247253:23861,15247254:23862,15247255:23863,15247256:23864,15247269:23865,15247273:23866,15247275:23867,15247277:23868,15247281:23869,15247283:23870,15247286:23871,15247289:23872,15247293:23873,15247295:23874,15247492:23875,15247493:23876,15247495:23877,15247503:23878,15247505:23879,15247506:23880,15247508:23881,15247509:23882,15247518:23883,15247520:23884,15247522:23885,15247524:23886,15247526:23887,15247531:23888,15247532:23889,15247535:23890,15247541:23891,15247543:23892,15247549:23893,15247550:23894,15247744:23895,15247747:23896,15247749:23897,15247751:23898,15247753:23899,15247757:23900,15247758:23901,15247763:23902,15247766:23903,15247767:23904,15247768:23905,15247772:23906,15247773:23907,15247777:23908,15247781:23909,15247783:23910,15247797:23911,15247798:23912,15247799:23913,15247801:23914,15247802:23915,15247803:23916,15247806:23917,15247807:23918,15248e3:23919,15248003:23920,15248006:23921,15248011:23922,15248015:23923,15248016:23924,15248018:23925,15248022:23926,15248023:23927,15248025:23928,15248031:23929,15248039:23930,15248041:23931,15248046:23932,15248047:23933,15248051:23934,15248054:24097,15248055:24098,15248059:24099,15248062:24100,15248259:24101,15248262:24102,15248264:24103,15248265:24104,15248266:24105,15248273:24106,15248275:24107,15248276:24108,15248277:24109,15248279:24110,15248285:24111,15248287:24112,15248300:24113,15248304:24114,15248308:24115,15248309:24116,15248310:24117,15248316:24118,15248319:24119,15248517:24120,15248518:24121,15248523:24122,15248529:24123,15248540:24124,15248542:24125,15248543:24126,15248522:24127,15248557:24128,15248560:24129,15248567:24130,15248572:24131,15248770:24132,15248771:24133,15248772:24134,15248773:24135,15248774:24136,15248776:24137,15248786:24138,15248787:24139,15248788:24140,15248793:24141,15248781:24142,15248798:24143,15248803:24144,15248813:24145,15248822:24146,15248824:24147,15248825:24148,15248828:24149,15248830:24150,15249025:24151,15249028:24152,15249029:24153,15249035:24154,15249037:24155,15249039:24156,15249044:24157,15249045:24158,15249052:24159,15249054:24160,15249055:24161,15249592:24162,15249593:24163,15249597:24164,15249598:24165,15249797:24166,15249799:24167,15249801:24168,15249803:24169,15249807:24170,15249809:24171,15249811:24172,15249812:24173,15249815:24174,15249816:24175,15249819:24176,15249821:24177,15249817:24178,15249827:24179,15249828:24180,15249830:24181,15249832:24182,15249833:24183,15249837:24184,15249843:24185,15249845:24186,15249846:24187,15249851:24188,15249854:24189,15250054:24190,15250055:24353,15250059:24354,15250064:24355,15250066:24356,15250067:24357,15250073:24358,15250075:24359,15250076:24360,15250084:24361,15250105:24362,15250106:24363,15250309:24364,15250310:24365,15250313:24366,15250315:24367,15250319:24368,15250326:24369,15250325:24370,15250329:24371,15250333:24372,15250337:24373,15250344:24374,15250348:24375,15250351:24376,15250352:24377,15250354:24378,15250357:24379,15250359:24380,15250360:24381,15250366:24382,15250367:24383,15250561:24384,15250563:24385,15250569:24386,15250578:24387,15250583:24388,15250587:24389,15250853:24390,15250857:24391,15250860:24392,15250862:24393,15250879:24394,15251074:24395,15251076:24396,15251080:24397,15251085:24398,15251088:24399,15251089:24400,15251093:24401,15251102:24402,15251103:24403,15251104:24404,15251110:24405,15251115:24406,15251116:24407,15251119:24408,15251122:24409,15251125:24410,15251127:24411,15251129:24412,15251131:24413,15251328:24414,15251333:24415,15251334:24416,15251335:24417,15251336:24418,15251338:24419,15251342:24420,15251345:24421,15251348:24422,15251349:24423,15251351:24424,15251353:24425,15251364:24426,15251365:24427,15251367:24428,15251372:24429,15251376:24430,15251132:24431,15251377:24432,15251378:24433,15251380:24434,15251389:24435,15251585:24436,15251588:24437,15251589:24438,15251590:24439,15251595:24440,15251601:24441,15251604:24442,15251606:24443,15251616:24444,15251617:24445,15251618:24446,15251619:24609,15251622:24610,15251623:24611,15251633:24612,15251635:24613,15251638:24614,15251639:24615,15251640:24616,15251641:24617,15251645:24618,15251840:24619,15251841:24620,15251851:24621,15251853:24622,15251854:24623,15251855:24624,15251860:24625,15251867:24626,15251868:24627,15251869:24628,15251870:24629,15251873:24630,15251874:24631,15251881:24632,15251884:24633,15251885:24634,15251887:24635,15251888:24636,15251889:24637,15251897:24638,15251898:24639,15251899:24640,15252098:24641,15252099:24642,15252105:24643,15252112:24644,15252114:24645,15252117:24646,15252122:24647,15252123:24648,15252125:24649,15252126:24650,15252130:24651,15252135:24652,15252137:24653,15252141:24654,15252142:24655,15252147:24656,15252149:24657,15252154:24658,15252155:24659,15252352:24660,15252353:24661,15252355:24662,15252356:24663,15252359:24664,15252367:24665,15252369:24666,15252372:24667,15252380:24668,15252392:24669,15252398:24670,15252400:24671,15252401:24672,15252407:24673,15252409:24674,15252410:24675,15252397:24676,15252608:24677,15252610:24678,15252615:24679,15252616:24680,15252623:24681,15252624:24682,15252630:24683,15252631:24684,15252632:24685,15252638:24686,15252640:24687,15252641:24688,15252643:24689,15252645:24690,15252647:24691,15252648:24692,15252652:24693,15252653:24694,15252654:24695,15252660:24696,15252661:24697,15252662:24698,15252663:24699,15252666:24700,15252864:24701,15252865:24702,15252867:24865,15252871:24866,15252879:24867,15252881:24868,15252882:24869,15252883:24870,15252884:24871,15252885:24872,15252888:24873,15252893:24874,15252894:24875,15252901:24876,15253149:24877,15253152:24878,15253153:24879,15253156:24880,15253157:24881,15253158:24882,15253173:24883,15253174:24884,15253176:24885,15253182:24886,15253376:24887,15253377:24888,15253382:24889,15253386:24890,15253387:24891,15253389:24892,15253392:24893,15253394:24894,15253395:24895,15253397:24896,15253408:24897,15253411:24898,15253412:24899,15253416:24900,15253422:24901,15253425:24902,15253429:24903,15253430:24904,15253435:24905,15253438:24906,15302786:24907,15302788:24908,15302792:24909,15302796:24910,15302808:24911,15302811:24912,15302824:24913,15302825:24914,15302831:24915,15302826:24916,15302828:24917,15302829:24918,15302835:24919,15302836:24920,15302839:24921,15302847:24922,15303043:24923,15303044:24924,15303052:24925,15303067:24926,15303069:24927,15303074:24928,15303078:24929,15303079:24930,15303084:24931,15303088:24932,15303092:24933,15303097:24934,15303301:24935,15303304:24936,15303307:24937,15303308:24938,15303310:24939,15303312:24940,15303317:24941,15303319:24942,15303320:24943,15303321:24944,15303323:24945,15303328:24946,15303329:24947,15303330:24948,15303333:24949,15303344:24950,15303346:24951,15303347:24952,15303348:24953,15303350:24954,15303357:24955,15303564:24956,15303358:24957,15303555:24958,15303556:25121,15303557:25122,15303559:25123,15303560:25124,15303573:25125,15303575:25126,15303576:25127,15303577:25128,15303580:25129,15303581:25130,15303583:25131,15303589:25132,15303570:25133,15303606:25134,15303595:25135,15303599:25136,15303600:25137,15303604:25138,15303614:25139,15303615:25140,15303808:25141,15303812:25142,15303813:25143,15303814:25144,15303816:25145,15303821:25146,15303824:25147,15303828:25148,15303830:25149,15303831:25150,15303832:25151,15303834:25152,15303836:25153,15303838:25154,15303840:25155,15303845:25156,15303842:25157,15303843:25158,15303847:25159,15303849:25160,15303854:25161,15303855:25162,15303857:25163,15303860:25164,15303862:25165,15303863:25166,15303865:25167,15303866:25168,15303868:25169,15303869:25170,15304067:25171,15304071:25172,15304072:25173,15304079:25174,15304083:25175,15304087:25176,15304089:25177,15304090:25178,15304091:25179,15304097:25180,15304100:25181,15304103:25182,15304109:25183,15304116:25184,15304121:25185,15304122:25186,15304123:25187,15304321:25188,15304323:25189,15304325:25190,15304326:25191,15304330:25192,15304334:25193,15304337:25194,15304339:25195,15304340:25196,15304341:25197,15304344:25198,15304350:25199,15304353:25200,15304358:25201,15304360:25202,15304364:25203,15304365:25204,15304366:25205,15304368:25206,15304369:25207,15304370:25208,15304371:25209,15304374:25210,15304379:25211,15304380:25212,15304381:25213,15304383:25214,15304578:25377,15304579:25378,15304581:25379,15304595:25380,15304596:25381,15304599:25382,15304601:25383,15304602:25384,15304606:25385,15304612:25386,15304613:25387,15304617:25388,15304618:25389,15304620:25390,15304621:25391,15304622:25392,15304623:25393,15304624:25394,15304625:25395,15304631:25396,15304633:25397,15304635:25398,15304637:25399,15304832:25400,15304833:25401,15304836:25402,15304837:25403,15304838:25404,15304839:25405,15304841:25406,15304842:25407,15304844:25408,15304848:25409,15304850:25410,15304851:25411,15304854:25412,15304856:25413,15304860:25414,15304861:25415,15304867:25416,15304868:25417,15304869:25418,15304870:25419,15304872:25420,15304878:25421,15304879:25422,15304880:25423,15304883:25424,15304885:25425,15304886:25426,15304888:25427,15304889:25428,15304890:25429,15304892:25430,15304894:25431,15305088:25432,15305090:25433,15305091:25434,15305094:25435,15305095:25436,15305098:25437,15305101:25438,15305102:25439,15305103:25440,15305105:25441,15305112:25442,15305113:25443,15305116:25444,15305117:25445,15305120:25446,15305121:25447,15305125:25448,15305127:25449,15305128:25450,15305129:25451,15305134:25452,15305135:25453,15305136:25454,15305141:25455,15305142:25456,15305143:25457,15305144:25458,15305145:25459,15305147:25460,15305148:25461,15305149:25462,15305151:25463,15305352:25464,15305353:25465,15305354:25466,15305357:25467,15305358:25468,15305362:25469,15305367:25470,15305369:25633,15305375:25634,15305376:25635,15305380:25636,15305381:25637,15305383:25638,15305384:25639,15305387:25640,15305391:25641,15305394:25642,15305398:25643,15305400:25644,15305402:25645,15305403:25646,15305404:25647,15305405:25648,15305407:25649,15305600:25650,15305601:25651,15305602:25652,15305603:25653,15305605:25654,15305606:25655,15305607:25656,15305608:25657,15305611:25658,15305612:25659,15305613:25660,15305614:25661,15305616:25662,15305619:25663,15305621:25664,15305623:25665,15305624:25666,15305625:25667,15305628:25668,15305629:25669,15305631:25670,15305632:25671,15305633:25672,15305635:25673,15305637:25674,15305639:25675,15305640:25676,15305644:25677,15305646:25678,15305648:25679,15305657:25680,15305659:25681,15305663:25682,15305856:25683,15305858:25684,15305864:25685,15305869:25686,15305873:25687,15305876:25688,15305877:25689,15305884:25690,15305885:25691,15305886:25692,15305887:25693,15305889:25694,15305892:25695,15305893:25696,15305895:25697,15305897:25698,15305898:25699,15305907:25700,15305908:25701,15305910:25702,15305911:25703,15306119:25704,15306120:25705,15306121:25706,15306128:25707,15306129:25708,15306130:25709,15306133:25710,15306135:25711,15306136:25712,15306138:25713,15306142:25714,15306148:25715,15306149:25716,15306151:25717,15306153:25718,15306154:25719,15306157:25720,15306159:25721,15306160:25722,15306161:25723,15306163:25724,15306164:25725,15306166:25726,15306170:25889,15306173:25890,15306175:25891,15306368:25892,15306369:25893,15306370:25894,15306376:25895,15306378:25896,15306379:25897,15306381:25898,15306383:25899,15306386:25900,15306389:25901,15306392:25902,15306395:25903,15306398:25904,15306401:25905,15306403:25906,15306404:25907,15306406:25908,15306408:25909,15306411:25910,15306420:25911,15306421:25912,15306422:25913,15306426:25914,15306409:25915,15306625:25916,15306628:25917,15306629:25918,15306630:25919,15306631:25920,15306633:25921,15306634:25922,15306635:25923,15306636:25924,15306637:25925,15306643:25926,15306649:25927,15306652:25928,15306654:25929,15306655:25930,15306658:25931,15306662:25932,15306663:25933,15306681:25934,15306679:25935,15306680:25936,15306682:25937,15306683:25938,15306685:25939,15306881:25940,15306882:25941,15306884:25942,15306888:25943,15306889:25944,15306893:25945,15306894:25946,15306895:25947,15306901:25948,15306902:25949,15306903:25950,15306911:25951,15306926:25952,15306927:25953,15306929:25954,15306930:25955,15306931:25956,15306932:25957,15306939:25958,15306943:25959,15306941:25960,15307139:25961,15307141:25962,15307144:25963,15307146:25964,15307148:25965,15307157:25966,15307161:25967,15307164:25968,15307167:25969,15307169:25970,15307171:25971,15307176:25972,15307179:25973,15307181:25974,15307182:25975,15307183:25976,15307185:25977,15307186:25978,15307396:25979,15307395:25980,15308216:25981,15308217:25982,15308222:26145,15308420:26146,15308424:26147,15308428:26148,15308429:26149,15308430:26150,15308445:26151,15308446:26152,15308447:26153,15308449:26154,15308454:26155,15308457:26156,15308459:26157,15308460:26158,15308468:26159,15308470:26160,15308474:26161,15308477:26162,15308479:26163,15308678:26164,15308680:26165,15308681:26166,15308683:26167,15308688:26168,15308689:26169,15308690:26170,15308691:26171,15308697:26172,15308698:26173,15308701:26174,15308702:26175,15308703:26176,15308704:26177,15308708:26178,15308710:26179,15308957:26180,15308958:26181,15308962:26182,15308964:26183,15308965:26184,15308966:26185,15308972:26186,15308977:26187,15308979:26188,15308983:26189,15308984:26190,15308985:26191,15308986:26192,15308988:26193,15308989:26194,15309185:26195,15309202:26196,15309204:26197,15309206:26198,15309207:26199,15309208:26200,15309217:26201,15309230:26202,15309236:26203,15309243:26204,15309244:26205,15309246:26206,15309247:26207,15309441:26208,15309442:26209,15309443:26210,15309444:26211,15309449:26212,15309457:26213,15309462:26214,15309466:26215,15309469:26216,15309471:26217,15309476:26218,15309477:26219,15309478:26220,15309481:26221,15309486:26222,15309487:26223,15309491:26224,15309498:26225,15309706:26226,15309714:26227,15054514:26228,15309720:26229,15309722:26230,15309725:26231,15309726:26232,15309727:26233,15309737:26234,15309743:26235,15309745:26236,15309754:26237,15309954:26238,15309955:26401,15309957:26402,15309961:26403,15309978:26404,15309979:26405,15309981:26406,15309985:26407,15309986:26408,15309987:26409,15309992:26410,15310001:26411,15310003:26412,15310209:26413,15310211:26414,15310218:26415,15310222:26416,15310223:26417,15310229:26418,15310231:26419,15310232:26420,15310234:26421,15310235:26422,15310243:26423,15310247:26424,15310250:26425,15310254:26426,15310259:26427,15310262:26428,15310263:26429,15310264:26430,15310267:26431,15310269:26432,15310271:26433,15310464:26434,15310473:26435,15310485:26436,15310486:26437,15310487:26438,15310489:26439,15310490:26440,15310494:26441,15310495:26442,15310498:26443,15310508:26444,15310510:26445,15310513:26446,15310514:26447,15310517:26448,15310518:26449,15310520:26450,15310521:26451,15310522:26452,15310524:26453,15310526:26454,15310527:26455,15310721:26456,15310724:26457,15310725:26458,15310727:26459,15310729:26460,15310730:26461,15310732:26462,15310733:26463,15310734:26464,15310736:26465,15310737:26466,15310740:26467,15310743:26468,15310744:26469,15310745:26470,15310749:26471,15310750:26472,15310752:26473,15310747:26474,15310753:26475,15310756:26476,15310767:26477,15310769:26478,15310772:26479,15310775:26480,15310776:26481,15310778:26482,15310983:26483,15310986:26484,15311001:26485,15310989:26486,15310990:26487,15310996:26488,15310998:26489,15311004:26490,15311006:26491,15311008:26492,15311011:26493,15311014:26494,15311019:26657,15311022:26658,15311023:26659,15311024:26660,15311026:26661,15311027:26662,15311029:26663,15311013:26664,15311038:26665,15311236:26666,15311239:26667,15311242:26668,15311249:26669,15311250:26670,15311251:26671,15311254:26672,15311255:26673,15311257:26674,15311258:26675,15311266:26676,15311267:26677,15311269:26678,15311270:26679,15311274:26680,15311276:26681,15311531:26682,15311533:26683,15311534:26684,15311536:26685,15311540:26686,15311543:26687,15311544:26688,15311546:26689,15311547:26690,15311551:26691,15311746:26692,15311749:26693,15311752:26694,15311756:26695,15311777:26696,15311779:26697,15311781:26698,15311782:26699,15311783:26700,15311786:26701,15311795:26702,15311798:26703,15312002:26704,15312007:26705,15312008:26706,15312017:26707,15312021:26708,15312022:26709,15312023:26710,15312026:26711,15312027:26712,15312028:26713,15312031:26714,15312034:26715,15312038:26716,15312039:26717,15312043:26718,15312049:26719,15312050:26720,15312051:26721,15312052:26722,15312053:26723,15312057:26724,15312058:26725,15312059:26726,15312060:26727,15312256:26728,15312257:26729,15312262:26730,15312263:26731,15312264:26732,15312269:26733,15312270:26734,15312276:26735,15312280:26736,15312281:26737,15312283:26738,15312284:26739,15312286:26740,15312287:26741,15312288:26742,15312539:26743,15312541:26744,15312543:26745,15312550:26746,15312560:26747,15312561:26748,15312562:26749,15312565:26750,15312569:26913,15312570:26914,15312573:26915,15312575:26916,15312771:26917,15312777:26918,15312787:26919,15312788:26920,15312793:26921,15312794:26922,15312796:26923,15312798:26924,15312807:26925,15312810:26926,15312811:26927,15312812:26928,15312816:26929,15312820:26930,15312821:26931,15312825:26932,15312829:26933,15312830:26934,15313026:26935,15313027:26936,15313028:26937,15313035:26938,15313036:26939,15313040:26940,15313041:26941,15313046:26942,15313054:26943,15313056:26944,15313058:26945,15313059:26946,15313060:26947,15313063:26948,15313069:26949,15313070:26950,15313075:26951,15313077:26952,15313078:26953,15313080:26954,15313287:26955,15313281:26956,15313284:26957,15313290:26958,15313291:26959,15313292:26960,15313294:26961,15313297:26962,15313300:26963,15313302:26964,15313309:26965,15313578:26966,15313580:26967,15313582:26968,15313583:26969,15313586:26970,15313588:26971,15313589:26972,15313590:26973,15313593:26974,15313595:26975,15313598:26976,15313599:26977,15313793:26978,15313795:26979,15313798:26980,15313800:26981,15313806:26982,15313808:26983,15313810:26984,15313813:26985,15313814:26986,15313815:26987,15313819:26988,15313820:26989,15313824:26990,15313828:26991,15313829:26992,15313831:26993,15313833:26994,15313836:26995,15313842:26996,15313843:26997,15313845:26998,15313849:26999,15313850:27e3,15313853:27001,15313855:27002,15314048:27003,15314049:27004,15314050:27005,15314051:27006,15314052:27169,15314053:27170,15314056:27171,15314057:27172,15314059:27173,15314060:27174,15314061:27175,15314062:27176,15314064:27177,15314066:27178,15314070:27179,15314073:27180,15314075:27181,15314076:27182,15314080:27183,15314086:27184,15314091:27185,15314093:27186,15314099:27187,15314100:27188,15314101:27189,15314103:27190,15314105:27191,15314106:27192,15314109:27193,15314312:27194,15314315:27195,15314316:27196,15314325:27197,15314326:27198,15314327:27199,15314331:27200,15314334:27201,15314337:27202,15314339:27203,15314341:27204,15314342:27205,15314344:27206,15314346:27207,15314347:27208,15314348:27209,15314349:27210,15314350:27211,15314355:27212,15314357:27213,15314359:27214,15314360:27215,15314361:27216,15314367:27217,15314560:27218,15314564:27219,15314565:27220,15314566:27221,15314567:27222,15314569:27223,15314570:27224,15314571:27225,15314573:27226,15314575:27227,15314576:27228,15314580:27229,15314586:27230,15314589:27231,15314590:27232,15314598:27233,15314599:27234,15314601:27235,15314604:27236,15314608:27237,15314609:27238,15314610:27239,15314615:27240,15314616:27241,15314619:27242,15314620:27243,15314622:27244,15314623:27245,15314817:27246,15314823:27247,15314824:27248,15314830:27249,15314832:27250,15314839:27251,15314840:27252,15314845:27253,15314847:27254,15314853:27255,15314855:27256,15314858:27257,15314859:27258,15314863:27259,15314867:27260,15314871:27261,15314872:27262,15314873:27425,15314874:27426,15314877:27427,15314879:27428,15315072:27429,15315074:27430,15315083:27431,15315087:27432,15315089:27433,15315094:27434,15315096:27435,15315097:27436,15315098:27437,15315100:27438,15315102:27439,15315106:27440,15315107:27441,15315110:27442,15315111:27443,15315112:27444,15315113:27445,15315114:27446,15315121:27447,15315125:27448,15315126:27449,15315127:27450,15315133:27451,15315329:27452,15315331:27453,15315332:27454,15315333:27455,15315337:27456,15315338:27457,15315342:27458,15315343:27459,15315344:27460,15315347:27461,15315348:27462,15315350:27463,15315352:27464,15315355:27465,15315357:27466,15315358:27467,15315359:27468,15315363:27469,15315369:27470,15315370:27471,15315356:27472,15315371:27473,15315368:27474,15315374:27475,15315376:27476,15315378:27477,15315381:27478,15315383:27479,15315387:27480,15315878:27481,15315890:27482,15315895:27483,15315897:27484,15316107:27485,15316098:27486,15316113:27487,15316119:27488,15316120:27489,15316124:27490,15316125:27491,15316126:27492,15316143:27493,15316144:27494,15316146:27495,15316147:27496,15316148:27497,15316154:27498,15316156:27499,15316357:27500,15316157:27501,15316354:27502,15316355:27503,15316359:27504,15316362:27505,15316371:27506,15316372:27507,15316383:27508,15316387:27509,15316386:27510,15316389:27511,15316393:27512,15316394:27513,15316395:27514,15316400:27515,15316406:27516,15316407:27517,15316411:27518,15316412:27681,15316414:27682,15316611:27683,15316612:27684,15316614:27685,15316618:27686,15316621:27687,15316622:27688,15316626:27689,15316627:27690,15316629:27691,15316630:27692,15316631:27693,15316632:27694,15316641:27695,15316650:27696,15316652:27697,15316654:27698,15316657:27699,15316661:27700,15316665:27701,15316668:27702,15316671:27703,15316867:27704,15316871:27705,15316873:27706,15316874:27707,15316884:27708,15316885:27709,15316886:27710,15316887:27711,15316890:27712,15316894:27713,15316895:27714,15316896:27715,15316901:27716,15316903:27717,15316905:27718,15316907:27719,15316910:27720,15316912:27721,15316915:27722,15316916:27723,15316926:27724,15317130:27725,15317122:27726,15317127:27727,15317134:27728,15317136:27729,15317137:27730,15317138:27731,15317141:27732,15317142:27733,15317145:27734,15317148:27735,15317149:27736,15317434:27737,15317435:27738,15317436:27739,15317632:27740,15317634:27741,15317635:27742,15317636:27743,15317637:27744,15317639:27745,15317646:27746,15317647:27747,15317654:27748,15317656:27749,15317659:27750,15317662:27751,15317668:27752,15317672:27753,15317676:27754,15317678:27755,15317679:27756,15317680:27757,15317683:27758,15317684:27759,15317685:27760,15317894:27761,15317896:27762,15317899:27763,15317909:27764,15317919:27765,15317924:27766,15317927:27767,15317932:27768,15317933:27769,15317934:27770,15317936:27771,15317937:27772,15317938:27773,15317941:27774,15317944:27937,15317951:27938,15318146:27939,15318147:27940,15318153:27941,15318159:27942,15318160:27943,15318161:27944,15318162:27945,15318164:27946,15318166:27947,15318167:27948,15318169:27949,15318170:27950,15318171:27951,15318175:27952,15318178:27953,15318182:27954,15318186:27955,15318187:27956,15318191:27957,15318193:27958,15318194:27959,15318196:27960,15318199:27961,15318201:27962,15318202:27963,15318204:27964,15318205:27965,15318207:27966,15318401:27967,15318403:27968,15318404:27969,15318405:27970,15318406:27971,15318407:27972,15318419:27973,15318421:27974,15318422:27975,15318423:27976,15318424:27977,15318426:27978,15318429:27979,15318430:27980,15318440:27981,15318441:27982,15318445:27983,15318446:27984,15318447:27985,15318448:27986,15318449:27987,15318451:27988,15318453:27989,15318458:27990,15318461:27991,15318671:27992,15318672:27993,15318673:27994,15318674:27995,15318676:27996,15318678:27997,15318679:27998,15318686:27999,15318689:28e3,15318690:28001,15318691:28002,15318693:28003,14909596:8513},Yo=null,zo=Yo,Ko=null,Zo=Ko;R0.UTF8_TO_JIS_TABLE=Wo;R0.UTF8_TO_JISX0212_TABLE=Xo;R0.JIS_TO_UTF8_TABLE=zo;R0.JISX0212_TO_UTF8_TABLE=Zo;var nn=vt,Qt=R0;Nt.FALLBACK_CHARACTER=63;var Jo=Nt.HAS_TYPED=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined",gi=!1,vi=!1;try{String.fromCharCode.apply(null,[97])==="a"&&(gi=!0)}catch{}if(Jo)try{String.fromCharCode.apply(null,new Uint8Array([97]))==="a"&&(vi=!0)}catch{}Nt.CAN_CHARCODE_APPLY=gi;Nt.CAN_CHARCODE_APPLY_TYPED=vi;Nt.APPLY_BUFFER_SIZE=65533;Nt.APPLY_BUFFER_SIZE_OK=null;var lr=Nt.EncodingNames={UTF32:{order:0},UTF32BE:{alias:["UCS4"]},UTF32LE:null,UTF16:{order:1},UTF16BE:{alias:["UCS2"]},UTF16LE:null,BINARY:{order:2},ASCII:{order:3,alias:["ISO646","CP367"]},JIS:{order:4,alias:["ISO2022JP"]},UTF8:{order:5},EUCJP:{order:6},SJIS:{order:7,alias:["CP932","MSKANJI","WINDOWS31J"]},UNICODE:{order:8}},Ci={};Nt.EncodingAliases=Ci;Nt.EncodingOrders=function(){for(var t=Ci,e=nn.objectKeys(lr),r=[],n,x,i,o,s=0,u=e.length;s<u;s++)if(n=e[s],t[n]=n,x=lr[n],x!=null&&(x.order!=null&&(r[r.length]=n),x.alias))for(i=0,o=x.alias.length;i<o;i++)t[x.alias[i]]=n;return r.sort(function(B,C){return lr[B].order-lr[C].order}),r}();function $o(){if(Qt.JIS_TO_UTF8_TABLE===null){Qt.JIS_TO_UTF8_TABLE={};for(var t=nn.objectKeys(Qt.UTF8_TO_JIS_TABLE),e=0,r=t.length,n,x;e<r;e++)n=t[e],x=Qt.UTF8_TO_JIS_TABLE[n],x>95&&(Qt.JIS_TO_UTF8_TABLE[x]=n|0);for(Qt.JISX0212_TO_UTF8_TABLE={},t=nn.objectKeys(Qt.UTF8_TO_JISX0212_TABLE),r=t.length,e=0;e<r;e++)n=t[e],x=Qt.UTF8_TO_JISX0212_TABLE[n],Qt.JISX0212_TO_UTF8_TABLE[x]=n|0}}Nt.init_JIS_TO_UTF8_TABLE=$o;var Lt={};function qo(t){for(var e=0,r=t&&t.length,n;e<r;e++){if(n=t[e],n>255)return!1;if(n>=0&&n<=7||n===255)return!0}return!1}Lt.isBINARY=qo;function Qo(t){for(var e=0,r=t&&t.length,n;e<r;e++)if(n=t[e],n>255||n>=128&&n<=255||n===27)return!1;return!0}Lt.isASCII=Qo;function ea(t){for(var e=0,r=t&&t.length,n,x,i;e<r;e++){if(n=t[e],n>255||n>=128&&n<=255)return!1;if(n===27){if(e+2>=r)return!1;if(x=t[e+1],i=t[e+2],x===36){if(i===40||i===64||i===66)return!0}else{if(x===38&&i===64)return!0;if(x===40&&(i===66||i===73||i===74))return!0}}}return!1}Lt.isJIS=ea;function ta(t){for(var e=0,r=t&&t.length,n;e<r;e++)if(n=t[e],!(n<128)){if(n>255||n<142)return!1;if(n===142){if(e+1>=r||(n=t[++e],n<161||223<n))return!1}else if(n===143){if(e+2>=r||(n=t[++e],n<162||237<n)||(n=t[++e],n<161||254<n))return!1}else if(161<=n&&n<=254){if(e+1>=r||(n=t[++e],n<161||254<n))return!1}else return!1}return!0}Lt.isEUCJP=ta;function ra(t){for(var e=0,r=t&&t.length,n;e<r&&t[e]>128;)if(t[e++]>255)return!1;for(;e<r;e++)if(n=t[e],!(n<=128||161<=n&&n<=223)&&(n===160||n>239||e+1>=r||(n=t[++e],n<64||n===127||n>252)))return!1;return!0}Lt.isSJIS=ra;function na(t){for(var e=0,r=t&&t.length,n;e<r;e++){if(n=t[e],n>255)return!1;if(!(n===9||n===10||n===13||n>=32&&n<=126))if(n>=194&&n<=223){if(e+1>=r||t[e+1]<128||t[e+1]>191)return!1;e++}else if(n===224){if(e+2>=r||t[e+1]<160||t[e+1]>191||t[e+2]<128||t[e+2]>191)return!1;e+=2}else if(n>=225&&n<=236||n===238||n===239){if(e+2>=r||t[e+1]<128||t[e+1]>191||t[e+2]<128||t[e+2]>191)return!1;e+=2}else if(n===237){if(e+2>=r||t[e+1]<128||t[e+1]>159||t[e+2]<128||t[e+2]>191)return!1;e+=2}else if(n===240){if(e+3>=r||t[e+1]<144||t[e+1]>191||t[e+2]<128||t[e+2]>191||t[e+3]<128||t[e+3]>191)return!1;e+=3}else if(n>=241&&n<=243){if(e+3>=r||t[e+1]<128||t[e+1]>191||t[e+2]<128||t[e+2]>191||t[e+3]<128||t[e+3]>191)return!1;e+=3}else if(n===244){if(e+3>=r||t[e+1]<128||t[e+1]>143||t[e+2]<128||t[e+2]>191||t[e+3]<128||t[e+3]>191)return!1;e+=3}else return!1}return!0}Lt.isUTF8=na;function xa(t){var e=0,r=t&&t.length,n=null,x,i,o,s;if(r<2){if(t[0]>255)return!1}else{if(x=t[0],i=t[1],x===255&&i===254||x===254&&i===255)return!0;for(;e<r;e++)if(t[e]===0){n=e;break}else if(t[e]>255)return!1;if(n===null)return!1;if(o=t[n+1],o!==void 0&&o>0&&o<128||(s=t[n-1],s!==void 0&&s>0&&s<128))return!0}return!1}Lt.isUTF16=xa;function ia(t){var e=0,r=t&&t.length,n=null,x,i;if(r<2){if(t[0]>255)return!1}else{if(x=t[0],i=t[1],x===254&&i===255)return!0;for(;e<r;e++)if(t[e]===0){n=e;break}else if(t[e]>255)return!1;if(n===null)return!1;if(n%2===0)return!0}return!1}Lt.isUTF16BE=ia;function oa(t){var e=0,r=t&&t.length,n=null,x,i;if(r<2){if(t[0]>255)return!1}else{if(x=t[0],i=t[1],x===255&&i===254)return!0;for(;e<r;e++)if(t[e]===0){n=e;break}else if(t[e]>255)return!1;if(n===null)return!1;if(n%2!==0)return!0}return!1}Lt.isUTF16LE=oa;function aa(t){var e=0,r=t&&t.length,n=null,x,i,o,s,u,B;if(r<4){for(;e<r;e++)if(t[e]>255)return!1}else{if(x=t[0],i=t[1],o=t[2],s=t[3],x===0&&i===0&&o===254&&s===255||x===255&&i===254&&o===0&&s===0)return!0;for(;e<r;e++)if(t[e]===0&&t[e+1]===0&&t[e+2]===0){n=e;break}else if(t[e]>255)return!1;if(n===null)return!1;if(u=t[n+3],u!==void 0&&u>0&&u<=127)return t[n+2]===0&&t[n+1]===0;if(B=t[n-1],B!==void 0&&B>0&&B<=127)return t[n+1]===0&&t[n+2]===0}return!1}Lt.isUTF32=aa;function sa(t){for(var e=0,r=t&&t.length,n;e<r;e++)if(n=t[e],n<0||n>1114111)return!1;return!0}Lt.isUNICODE=sa;var Re={},Mt=Nt,mn=vt,Fn=Lt,Zt=R0;function Ea(t){for(var e=[],r=0,n=0,x=t&&t.length,i,o;n<x;n++){for(;t[n]===27;)if(t[n+1]===36&&t[n+2]===66||t[n+1]===36&&t[n+2]===64?r=1:t[n+1]===40&&t[n+2]===73?r=2:t[n+1]===36&&t[n+2]===40&&t[n+3]===68?(r=3,n++):r=0,n+=3,t[n]===void 0)return e;r===1?(i=t[n],o=t[++n],i&1?(i>>=1,i<47?i+=113:i-=79,o>95?o+=32:o+=31):(i>>=1,i<=47?i+=112:i-=80,o+=126),e[e.length]=i&255,e[e.length]=o&255):r===2?e[e.length]=t[n]+128&255:r===3?e[e.length]=Mt.FALLBACK_CHARACTER:e[e.length]=t[n]&255}return e}Re.JISToSJIS=Ea;function ca(t){for(var e=[],r=0,n=t&&t.length,x=0;x<n;x++){for(;t[x]===27;)if(t[x+1]===36&&t[x+2]===66||t[x+1]===36&&t[x+2]===64?r=1:t[x+1]===40&&t[x+2]===73?r=2:t[x+1]===36&&t[x+2]===40&&t[x+3]===68?(r=3,x++):r=0,x+=3,t[x]===void 0)return e;r===1?(e[e.length]=t[x]+128&255,e[e.length]=t[++x]+128&255):r===2?(e[e.length]=142,e[e.length]=t[x]+128&255):r===3?(e[e.length]=143,e[e.length]=t[x]+128&255,e[e.length]=t[++x]+128&255):e[e.length]=t[x]&255}return e}Re.JISToEUCJP=ca;function la(t){for(var e=[],r=0,n=t&&t.length,x=0,i,o,s=[27,40,66,27,36,66,27,40,73];x<n;x++)i=t[x],i>=161&&i<=223?(r!==2&&(r=2,e[e.length]=s[6],e[e.length]=s[7],e[e.length]=s[8]),e[e.length]=i-128&255):i>=128?(r!==1&&(r=1,e[e.length]=s[3],e[e.length]=s[4],e[e.length]=s[5]),i<<=1,o=t[++x],o<159?(i<319?i-=225:i-=97,o>126?o-=32:o-=31):(i<319?i-=224:i-=96,o-=126),e[e.length]=i&255,e[e.length]=o&255):(r!==0&&(r=0,e[e.length]=s[0],e[e.length]=s[1],e[e.length]=s[2]),e[e.length]=i&255);return r!==0&&(e[e.length]=s[0],e[e.length]=s[1],e[e.length]=s[2]),e}Re.SJISToJIS=la;function ua(t){for(var e=[],r=t&&t.length,n=0,x,i;n<r;n++)x=t[n],x>=161&&x<=223?(e[e.length]=142,e[e.length]=x):x>=129?(i=t[++n],x<<=1,i<159?(x<319?x-=97:x-=225,i>126?i+=96:i+=97):(x<319?x-=96:x-=224,i+=2),e[e.length]=x&255,e[e.length]=i&255):e[e.length]=x&255;return e}Re.SJISToEUCJP=ua;function ha(t){for(var e=[],r=0,n=t&&t.length,x=0,i,o=[27,40,66,27,36,66,27,40,73,27,36,40,68];x<n;x++)i=t[x],i===142?(r!==2&&(r=2,e[e.length]=o[6],e[e.length]=o[7],e[e.length]=o[8]),e[e.length]=t[++x]-128&255):i===143?(r!==3&&(r=3,e[e.length]=o[9],e[e.length]=o[10],e[e.length]=o[11],e[e.length]=o[12]),e[e.length]=t[++x]-128&255,e[e.length]=t[++x]-128&255):i>142?(r!==1&&(r=1,e[e.length]=o[3],e[e.length]=o[4],e[e.length]=o[5]),e[e.length]=i-128&255,e[e.length]=t[++x]-128&255):(r!==0&&(r=0,e[e.length]=o[0],e[e.length]=o[1],e[e.length]=o[2]),e[e.length]=i&255);return r!==0&&(e[e.length]=o[0],e[e.length]=o[1],e[e.length]=o[2]),e}Re.EUCJPToJIS=ha;function fa(t){for(var e=[],r=t&&t.length,n=0,x,i;n<r;n++)x=t[n],x===143?(e[e.length]=Mt.FALLBACK_CHARACTER,n+=2):x>142?(i=t[++n],x&1?(x>>=1,x<111?x+=49:x+=113,i>223?i-=96:i-=97):(x>>=1,x<=111?x+=48:x+=112,i-=2),e[e.length]=x&255,e[e.length]=i&255):x===142?e[e.length]=t[++n]&255:e[e.length]=x&255;return e}Re.EUCJPToSJIS=fa;function J0(t){Mt.init_JIS_TO_UTF8_TABLE();for(var e=[],r=0,n=t&&t.length,x,i,o,s,u,B,C;r<n;r++)x=t[r],x>=161&&x<=223?(o=x-64,s=188|o>>6&3,u=128|o&63,e[e.length]=239,e[e.length]=s&255,e[e.length]=u&255):x>=128?(i=x<<1,o=t[++r],o<159?(i<319?i-=225:i-=97,o>126?o-=32:o-=31):(i<319?i-=224:i-=96,o-=126),i&=255,B=(i<<8)+o,C=Zt.JIS_TO_UTF8_TABLE[B],C===void 0?e[e.length]=Mt.FALLBACK_CHARACTER:C<65535?(e[e.length]=C>>8&255,e[e.length]=C&255):(e[e.length]=C>>16&255,e[e.length]=C>>8&255,e[e.length]=C&255)):e[e.length]=t[r]&255;return e}Re.SJISToUTF8=J0;function $0(t){Mt.init_JIS_TO_UTF8_TABLE();for(var e=[],r=0,n=t&&t.length,x,i,o,s,u,B,C,p;r<n;r++)x=t[r],x===142?(i=t[++r]-64,o=188|i>>6&3,s=128|i&63,e[e.length]=239,e[e.length]=o&255,e[e.length]=s&255):x===143?(u=t[++r]-128,B=t[++r]-128,C=(u<<8)+B,p=Zt.JISX0212_TO_UTF8_TABLE[C],p===void 0?e[e.length]=Mt.FALLBACK_CHARACTER:p<65535?(e[e.length]=p>>8&255,e[e.length]=p&255):(e[e.length]=p>>16&255,e[e.length]=p>>8&255,e[e.length]=p&255)):x>=128?(C=(x-128<<8)+(t[++r]-128),p=Zt.JIS_TO_UTF8_TABLE[C],p===void 0?e[e.length]=Mt.FALLBACK_CHARACTER:p<65535?(e[e.length]=p>>8&255,e[e.length]=p&255):(e[e.length]=p>>16&255,e[e.length]=p>>8&255,e[e.length]=p&255)):e[e.length]=t[r]&255;return e}Re.EUCJPToUTF8=$0;function q0(t){Mt.init_JIS_TO_UTF8_TABLE();for(var e=[],r=0,n=0,x=t&&t.length,i,o,s,u,B;n<x;n++){for(;t[n]===27;)if(t[n+1]===36&&t[n+2]===66||t[n+1]===36&&t[n+2]===64?r=1:t[n+1]===40&&t[n+2]===73?r=2:t[n+1]===36&&t[n+2]===40&&t[n+3]===68?(r=3,n++):r=0,n+=3,t[n]===void 0)return e;r===1?(u=(t[n]<<8)+t[++n],B=Zt.JIS_TO_UTF8_TABLE[u],B===void 0?e[e.length]=Mt.FALLBACK_CHARACTER:B<65535?(e[e.length]=B>>8&255,e[e.length]=B&255):(e[e.length]=B>>16&255,e[e.length]=B>>8&255,e[e.length]=B&255)):r===2?(i=t[n]+64,o=188|i>>6&3,s=128|i&63,e[e.length]=239,e[e.length]=o&255,e[e.length]=s&255):r===3?(u=(t[n]<<8)+t[++n],B=Zt.JISX0212_TO_UTF8_TABLE[u],B===void 0?e[e.length]=Mt.FALLBACK_CHARACTER:B<65535?(e[e.length]=B>>8&255,e[e.length]=B&255):(e[e.length]=B>>16&255,e[e.length]=B>>8&255,e[e.length]=B&255)):e[e.length]=t[n]&255}return e}Re.JISToUTF8=q0;function Q0(t,e){for(var r=[],n=0,x=t&&t.length,i,o,s,u,B,C,p=e&&e.fallback;n<x;n++)i=t[n],i>=128?(i<=223?(u=[i,t[n+1]],B=(i<<8)+t[++n]):i<=239?(u=[i,t[n+1],t[n+2]],B=(i<<16)+(t[++n]<<8)+(t[++n]&255)):(u=[i,t[n+1],t[n+2],t[n+3]],B=(i<<24)+(t[++n]<<16)+(t[++n]<<8)+(t[++n]&255)),C=Zt.UTF8_TO_JIS_TABLE[B],C==null?p?wn(r,u,p):r[r.length]=Mt.FALLBACK_CHARACTER:C<255?r[r.length]=C+128:(C>65536&&(C-=65536),o=C>>8,s=C&255,o&1?(o>>=1,o<47?o+=113:o-=79,s>95?s+=32:s+=31):(o>>=1,o<=47?o+=112:o-=80,s+=126),r[r.length]=o&255,r[r.length]=s&255)):r[r.length]=t[n]&255;return r}Re.UTF8ToSJIS=Q0;function er(t,e){for(var r=[],n=0,x=t&&t.length,i,o,s,u,B=e&&e.fallback;n<x;n++)i=t[n],i>=128?(i<=223?(o=[i,t[n+1]],s=(i<<8)+t[++n]):i<=239?(o=[i,t[n+1],t[n+2]],s=(i<<16)+(t[++n]<<8)+(t[++n]&255)):(o=[i,t[n+1],t[n+2],t[n+3]],s=(i<<24)+(t[++n]<<16)+(t[++n]<<8)+(t[++n]&255)),u=Zt.UTF8_TO_JIS_TABLE[s],u==null?(u=Zt.UTF8_TO_JISX0212_TABLE[s],u==null?B?wn(r,o,B):r[r.length]=Mt.FALLBACK_CHARACTER:(r[r.length]=143,r[r.length]=(u>>8)-128&255,r[r.length]=(u&255)-128&255)):(u>65536&&(u-=65536),u<255?(r[r.length]=142,r[r.length]=u-128&255):(r[r.length]=(u>>8)-128&255,r[r.length]=(u&255)-128&255))):r[r.length]=t[n]&255;return r}Re.UTF8ToEUCJP=er;function tr(t,e){for(var r=[],n=0,x=t&&t.length,i=0,o,s,u,B,C=e&&e.fallback,p=[27,40,66,27,36,66,27,40,73,27,36,40,68];i<x;i++)o=t[i],o<128?(n!==0&&(n=0,r[r.length]=p[0],r[r.length]=p[1],r[r.length]=p[2]),r[r.length]=o&255):(o<=223?(s=[o,t[i+1]],u=(o<<8)+t[++i]):o<=239?(s=[o,t[i+1],t[i+2]],u=(o<<16)+(t[++i]<<8)+(t[++i]&255)):(s=[o,t[i+1],t[i+2],t[i+3]],u=(o<<24)+(t[++i]<<16)+(t[++i]<<8)+(t[++i]&255)),B=Zt.UTF8_TO_JIS_TABLE[u],B==null?(B=Zt.UTF8_TO_JISX0212_TABLE[u],B==null?(n!==0&&(n=0,r[r.length]=p[0],r[r.length]=p[1],r[r.length]=p[2]),C?wn(r,s,C):r[r.length]=Mt.FALLBACK_CHARACTER):(n!==3&&(n=3,r[r.length]=p[9],r[r.length]=p[10],r[r.length]=p[11],r[r.length]=p[12]),r[r.length]=B>>8&255,r[r.length]=B&255)):(B>65536&&(B-=65536),B<255?(n!==2&&(n=2,r[r.length]=p[6],r[r.length]=p[7],r[r.length]=p[8]),r[r.length]=B&255):(n!==1&&(n=1,r[r.length]=p[3],r[r.length]=p[4],r[r.length]=p[5]),r[r.length]=B>>8&255,r[r.length]=B&255)));return n!==0&&(r[r.length]=p[0],r[r.length]=p[1],r[r.length]=p[2]),r}Re.UTF8ToJIS=tr;function D0(t){for(var e=[],r=0,n=t&&t.length,x,i;r<n;r++)x=t[r],x>=55296&&x<=56319&&r+1<n&&(i=t[r+1],i>=56320&&i<=57343&&(x=(x-55296)*1024+i-56320+65536,r++)),x<128?e[e.length]=x:x<2048?(e[e.length]=192|x>>6&31,e[e.length]=128|x&63):x<65536?(e[e.length]=224|x>>12&15,e[e.length]=128|x>>6&63,e[e.length]=128|x&63):x<2097152&&(e[e.length]=240|x>>18&15,e[e.length]=128|x>>12&63,e[e.length]=128|x>>6&63,e[e.length]=128|x&63);return e}Re.UNICODEToUTF8=D0;function c0(t,e){for(var r=[],n=0,x=t&&t.length,i,o,s,u,B,C,p=e&&e.ignoreSurrogatePair;n<x;)o=t[n++],i=o>>4,i>=0&&i<=7?C=o:i===12||i===13?(s=t[n++],C=(o&31)<<6|s&63):i===14?(s=t[n++],u=t[n++],C=(o&15)<<12|(s&63)<<6|u&63):i===15&&(s=t[n++],u=t[n++],B=t[n++],C=(o&7)<<18|(s&63)<<12|(u&63)<<6|B&63),C<=65535||p?r[r.length]=C:(C-=65536,r[r.length]=(C>>10)+55296,r[r.length]=C%1024+56320);return r}Re.UTF8ToUNICODE=c0;function pi(t,e){var r;if(e&&e.bom){var n=e.bom;mn.isString(n)||(n="BE");var x,i;n.charAt(0).toUpperCase()==="B"?(x=[254,255],i=yr(t)):(x=[255,254],i=yn(t)),r=[],r[0]=x[0],r[1]=x[1];for(var o=0,s=i.length;o<s;o++)r[r.length]=i[o]}else r=yr(t);return r}Re.UNICODEToUTF16=pi;function yr(t){for(var e=[],r=0,n=t&&t.length,x;r<n;)x=t[r++],x<=255?(e[e.length]=0,e[e.length]=x):x<=65535&&(e[e.length]=x>>8&255,e[e.length]=x&255);return e}Re.UNICODEToUTF16BE=yr;function yn(t){for(var e=[],r=0,n=t&&t.length,x;r<n;)x=t[r++],x<=255?(e[e.length]=x,e[e.length]=0):x<=65535&&(e[e.length]=x&255,e[e.length]=x>>8&255);return e}Re.UNICODEToUTF16LE=yn;function _i(t){var e=[],r=0,n=t&&t.length,x,i;for(n>=2&&(t[0]===254&&t[1]===255||t[0]===255&&t[1]===254)&&(r=2);r<n;)x=t[r++],i=t[r++],x===0?e[e.length]=i:e[e.length]=(x&255)<<8|i&255;return e}Re.UTF16BEToUNICODE=_i;function Di(t){var e=[],r=0,n=t&&t.length,x,i;for(n>=2&&(t[0]===254&&t[1]===255||t[0]===255&&t[1]===254)&&(r=2);r<n;)x=t[r++],i=t[r++],i===0?e[e.length]=x:e[e.length]=(i&255)<<8|x&255;return e}Re.UTF16LEToUNICODE=Di;function mi(t){for(var e=[],r=0,n=t&&t.length,x=!1,i=!0,o,s;r<n;){if(o=t[r++],s=t[r++],i&&r===2){i=!1,o===254&&s===255?x=!1:o===255&&s===254?x=!0:(x=Fn.isUTF16LE(t),r=0);continue}x?s===0?e[e.length]=o:e[e.length]=(s&255)<<8|o&255:o===0?e[e.length]=s:e[e.length]=(o&255)<<8|s&255}return e}Re.UTF16ToUNICODE=mi;function Aa(t){for(var e=[],r=0,n=t&&t.length,x=!1,i=!0,o,s;r<n;){if(o=t[r++],s=t[r++],i&&r===2){i=!1,o===254&&s===255?x=!1:o===255&&s===254?x=!0:(x=Fn.isUTF16LE(t),r=0);continue}x?(e[e.length]=s,e[e.length]=o):(e[e.length]=o,e[e.length]=s)}return e}Re.UTF16ToUTF16BE=Aa;function Ba(t,e){var r=!1,n;if(e&&e.bom){var x=e.bom;mn.isString(x)||(x="BE"),x.charAt(0).toUpperCase()==="B"?n=[254,255]:(n=[255,254],r=!0)}var i=[],o=t&&t.length,s=0;o>=2&&(t[0]===254&&t[1]===255||t[0]===255&&t[1]===254)&&(s=2),n&&(i[0]=n[0],i[1]=n[1]);for(var u,B;s<o;)u=t[s++],B=t[s++],r?(i[i.length]=B,i[i.length]=u):(i[i.length]=u,i[i.length]=B);return i}Re.UTF16BEToUTF16=Ba;function da(t){for(var e=[],r=0,n=t&&t.length,x=!1,i=!0,o,s;r<n;){if(o=t[r++],s=t[r++],i&&r===2){i=!1,o===254&&s===255?x=!1:o===255&&s===254?x=!0:(x=Fn.isUTF16LE(t),r=0);continue}x?(e[e.length]=o,e[e.length]=s):(e[e.length]=s,e[e.length]=o)}return e}Re.UTF16ToUTF16LE=da;function ga(t,e){var r=!1,n;if(e&&e.bom){var x=e.bom;mn.isString(x)||(x="BE"),x.charAt(0).toUpperCase()==="B"?n=[254,255]:(n=[255,254],r=!0)}var i=[],o=t&&t.length,s=0;o>=2&&(t[0]===254&&t[1]===255||t[0]===255&&t[1]===254)&&(s=2),n&&(i[0]=n[0],i[1]=n[1]);for(var u,B;s<o;)u=t[s++],B=t[s++],r?(i[i.length]=u,i[i.length]=B):(i[i.length]=B,i[i.length]=u);return i}Re.UTF16LEToUTF16=ga;function Fi(t){var e=[],r=0,n=t&&t.length,x,i;for(n>=2&&(t[0]===254&&t[1]===255||t[0]===255&&t[1]===254)&&(r=2);r<n;)x=t[r++],i=t[r++],e[e.length]=i,e[e.length]=x;return e}Re.UTF16BEToUTF16LE=Fi;function va(t){return Fi(t)}Re.UTF16LEToUTF16BE=va;function Ca(t,e){return tr(D0(t),e)}Re.UNICODEToJIS=Ca;function pa(t){return c0(q0(t))}Re.JISToUNICODE=pa;function _a(t,e){return er(D0(t),e)}Re.UNICODEToEUCJP=_a;function Da(t){return c0($0(t))}Re.EUCJPToUNICODE=Da;function ma(t,e){return Q0(D0(t),e)}Re.UNICODEToSJIS=ma;function Fa(t){return c0(J0(t))}Re.SJISToUNICODE=Fa;function br(t,e){return pi(c0(t),e)}Re.UTF8ToUTF16=br;function Ir(t){return D0(mi(t))}Re.UTF16ToUTF8=Ir;function Or(t){return yr(c0(t))}Re.UTF8ToUTF16BE=Or;function Rr(t){return D0(_i(t))}Re.UTF16BEToUTF8=Rr;function Pr(t){return yn(c0(t))}Re.UTF8ToUTF16LE=Pr;function Mr(t){return D0(Di(t))}Re.UTF16LEToUTF8=Mr;function ya(t,e){return br(q0(t),e)}Re.JISToUTF16=ya;function wa(t,e){return tr(Ir(t),e)}Re.UTF16ToJIS=wa;function Sa(t){return Or(q0(t))}Re.JISToUTF16BE=Sa;function Ta(t,e){return tr(Rr(t),e)}Re.UTF16BEToJIS=Ta;function ba(t){return Pr(q0(t))}Re.JISToUTF16LE=ba;function Ia(t,e){return tr(Mr(t),e)}Re.UTF16LEToJIS=Ia;function Oa(t,e){return br($0(t),e)}Re.EUCJPToUTF16=Oa;function Ra(t,e){return er(Ir(t),e)}Re.UTF16ToEUCJP=Ra;function Pa(t){return Or($0(t))}Re.EUCJPToUTF16BE=Pa;function Ma(t,e){return er(Rr(t),e)}Re.UTF16BEToEUCJP=Ma;function Na(t){return Pr($0(t))}Re.EUCJPToUTF16LE=Na;function La(t,e){return er(Mr(t),e)}Re.UTF16LEToEUCJP=La;function ka(t,e){return br(J0(t),e)}Re.SJISToUTF16=ka;function Ua(t,e){return Q0(Ir(t),e)}Re.UTF16ToSJIS=Ua;function ja(t){return Or(J0(t))}Re.SJISToUTF16BE=ja;function Va(t,e){return Q0(Rr(t),e)}Re.UTF16BEToSJIS=Va;function Ga(t){return Pr(J0(t))}Re.SJISToUTF16LE=Ga;function Ha(t,e){return Q0(Mr(t),e)}Re.UTF16LEToSJIS=Ha;function wn(t,e,r){switch(r){case"html-entity":case"html-entity-hex":var n=c0(e,{ignoreSurrogatePair:!0})[0];if(n){t[t.length]=38,t[t.length]=35;var x=r.slice(-3)==="hex"?16:10;x===16&&(t[t.length]=120);for(var i=n.toString(x),o=0,s=i.length;o<s;o++)t[t.length]=i.charCodeAt(o);t[t.length]=59}}}var rr={};rr.HANKANA_TABLE={12289:65380,12290:65377,12300:65378,12301:65379,12443:65438,12444:65439,12449:65383,12450:65393,12451:65384,12452:65394,12453:65385,12454:65395,12455:65386,12456:65396,12457:65387,12458:65397,12459:65398,12461:65399,12463:65400,12465:65401,12467:65402,12469:65403,12471:65404,12473:65405,12475:65406,12477:65407,12479:65408,12481:65409,12483:65391,12484:65410,12486:65411,12488:65412,12490:65413,12491:65414,12492:65415,12493:65416,12494:65417,12495:65418,12498:65419,12501:65420,12504:65421,12507:65422,12510:65423,12511:65424,12512:65425,12513:65426,12514:65427,12515:65388,12516:65428,12517:65389,12518:65429,12519:65390,12520:65430,12521:65431,12522:65432,12523:65433,12524:65434,12525:65435,12527:65436,12530:65382,12531:65437,12539:65381,12540:65392};rr.HANKANA_SONANTS={12532:65395,12535:65436,12538:65382};rr.HANKANA_MARKS=[65438,65439];rr.ZENKANA_TABLE=[12290,12300,12301,12289,12539,12530,12449,12451,12453,12455,12457,12515,12517,12519,12483,12540,12450,12452,12454,12456,12458,12459,12461,12463,12465,12467,12469,12471,12473,12475,12477,12479,12481,12484,12486,12488,12490,12491,12492,12493,12494,12495,12498,12501,12504,12507,12510,12511,12512,12513,12514,12516,12518,12520,12521,12522,12523,12524,12525,12527,12531,12443,12444];const Wa="encoding-japanese",Xa="2.0.0",Ya="Convert or detect character encoding in JavaScript",za="src/index.js",Ka=["encoding.js","encoding.min.js","encoding.min.js.map","src/*"],Za={build:"npm run compile && npm run minify",compile:"browserify src/index.js -o encoding.js -s Encoding -p [ bannerify --file src/banner.js ] --no-bundle-external --bare",minify:`uglifyjs encoding.js -o encoding.min.js --source-map "url='encoding.min.js.map'" --comments -c -m -b ascii_only=true,beautify=false`,test:"./node_modules/.bin/eslint . && npm run build && mocha tests/test",watch:"watchify src/index.js -o encoding.js -s Encoding -p [ bannerify --file src/banner.js ] --no-bundle-external --bare --poll=300 -v"},Ja={node:">=8.10.0"},$a={type:"git",url:"https://github.com/polygonplanet/encoding.js.git"},qa="polygonplanet <polygon.planet.aqua@gmail.com>",Qa="MIT",es={url:"https://github.com/polygonplanet/encoding.js/issues"},ts="https://github.com/polygonplanet/encoding.js",rs=["base64","charset","convert","detect","encoding","euc-jp","eucjp","iconv","iso-2022-jp","japanese","jis","shift_jis","sjis","unicode","urldecode","urlencode","utf-16","utf-32","utf-8"],ns={},xs={bannerify:"^1.0.1",browserify:"^17.0.0",eslint:"^8.12.0",mocha:"^9.2.2","package-json-versionify":"^1.0.4","power-assert":"^1.6.1","uglify-js":"^3.15.3",uglifyify:"^5.0.2",watchify:"^4.0.0"},is={transform:["package-json-versionify"]};var os={name:Wa,version:Xa,description:Ya,main:za,files:Ka,scripts:Za,engines:Ja,repository:$a,author:qa,license:Qa,bugs:es,homepage:ts,keywords:rs,dependencies:ns,devDependencies:xs,browserify:is},as=Nt,Ne=vt,vx=Lt,Cx=Re,y0=rr,ss=os.version,px=Object.prototype.hasOwnProperty,dr={version:ss,orders:as.EncodingOrders,detect:function(t,e){if(t==null||t.length===0)return!1;Ne.isObject(e)&&!Ne.isArray(e)&&(e=e.encoding),Ne.isString(t)&&(t=Ne.stringToBuffer(t)),e==null?e=dr.orders:Ne.isString(e)&&(e=e.toUpperCase(),e==="AUTO"?e=dr.orders:~e.indexOf(",")?e=e.split(/\s*,\s*/):e=[e]);for(var r=e.length,n,x,i,o=0;o<r;o++)if(n=e[o],x=Ne.canonicalizeEncodingName(n),!!x){if(i="is"+x,!px.call(vx,i))throw new Error("Undefined encoding: "+n);if(vx[i](t))return x}return!1},convert:function(t,e,r){var n,x,i;Ne.isObject(e)?(i=e,r=i.from,e=i.to,i.type&&(x=i.type)):i={},Ne.isString(t)?(x=x||"string",t=Ne.stringToBuffer(t)):(t==null||t.length===0)&&(t=[]);var o;r!=null&&Ne.isString(r)&&r.toUpperCase()!=="AUTO"&&!~r.indexOf(",")?o=Ne.canonicalizeEncodingName(r):o=dr.detect(t);var s=Ne.canonicalizeEncodingName(e),u=o+"To"+s;switch(px.call(Cx,u)?n=Cx[u](t,i):n=t,(""+x).toLowerCase()){case"string":return Ne.codeToString_fast(n);case"arraybuffer":return Ne.codeToBuffer(n);default:return Ne.bufferToCode(n)}},urlEncode:function(t){Ne.isString(t)&&(t=Ne.stringToBuffer(t));for(var e=Ne.stringToCode("0123456789ABCDEF"),r=[],n=0,x=t&&t.length,i;n<x;n++){if(i=t[n],i>255)return encodeURIComponent(Ne.codeToString_fast(t));i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===33||i>=39&&i<=42||i===45||i===46||i===95||i===126?r[r.length]=i:(r[r.length]=37,i<16?(r[r.length]=48,r[r.length]=e[i]):(r[r.length]=e[i>>4&15],r[r.length]=e[i&15]))}return Ne.codeToString_fast(r)},urlDecode:function(t){for(var e=[],r=0,n=t&&t.length,x;r<n;)x=t.charCodeAt(r++),x===37?e[e.length]=parseInt(t.charAt(r++)+t.charAt(r++),16):e[e.length]=x;return e},base64Encode:function(t){return Ne.isString(t)&&(t=Ne.stringToBuffer(t)),Ne.base64encode(t)},base64Decode:function(t){return Ne.base64decode(t)},codeToString:Ne.codeToString_fast,stringToCode:Ne.stringToCode,toHankakuCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));for(var r=[],n=t&&t.length,x=0,i;x<n;)i=t[x++],i>=65281&&i<=65374&&(i-=65248),r[r.length]=i;return e?Ne.codeToString_fast(r):r},toZenkakuCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));for(var r=[],n=t&&t.length,x=0,i;x<n;)i=t[x++],i>=33&&i<=126&&(i+=65248),r[r.length]=i;return e?Ne.codeToString_fast(r):r},toHiraganaCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));for(var r=[],n=t&&t.length,x=0,i;x<n;)i=t[x++],i>=12449&&i<=12534?i-=96:i===12535?(r[r.length]=12431,i=12443):i===12538&&(r[r.length]=12434,i=12443),r[r.length]=i;return e?Ne.codeToString_fast(r):r},toKatakanaCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));for(var r=[],n=t&&t.length,x=0,i;x<n;)i=t[x++],i>=12353&&i<=12438&&((i===12431||i===12434)&&x<n&&t[x]===12443?(i=i===12431?12535:12538,x++):i+=96),r[r.length]=i;return e?Ne.codeToString_fast(r):r},toHankanaCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));for(var r=[],n=t&&t.length,x=0,i,o,s;x<n;){if(i=t[x++],i>=12289&&i<=12540&&(s=y0.HANKANA_TABLE[i],s!==void 0)){r[r.length]=s;continue}i===12532||i===12535||i===12538?(r[r.length]=y0.HANKANA_SONANTS[i],r[r.length]=65438):i>=12459&&i<=12489?(r[r.length]=y0.HANKANA_TABLE[i-1],r[r.length]=65438):i>=12495&&i<=12509?(o=i%3,r[r.length]=y0.HANKANA_TABLE[i-o],r[r.length]=y0.HANKANA_MARKS[o-1]):r[r.length]=i}return e?Ne.codeToString_fast(r):r},toZenkanaCase:function(t){var e=!1;Ne.isString(t)&&(e=!0,t=Ne.stringToBuffer(t));var r=[],n=t&&t.length,x=0,i,o,s;for(x=0;x<n;x++)i=t[x],i>65376&&i<65440&&(o=y0.ZENKANA_TABLE[i-65377],x+1<n&&(s=t[x+1],s===65438&&i===65395?(o=12532,x++):s===65438&&i===65436?(o=12535,x++):s===65438&&i===65382?(o=12538,x++):s===65438&&(i>65397&&i<65413||i>65417&&i<65423)?(o++,x++):s===65439&&i>65417&&i<65423&&(o+=2,x++)),i=o),r[r.length]=i;return e?Ne.codeToString_fast(r):r},toHankakuSpace:function(t){if(Ne.isString(t))return t.replace(/\u3000/g," ");for(var e=[],r=t&&t.length,n=0,x;n<r;)x=t[n++],x===12288&&(x=32),e[e.length]=x;return e},toZenkakuSpace:function(t){if(Ne.isString(t))return t.replace(/\u0020/g,"\u3000");for(var e=[],r=t&&t.length,n=0,x;n<r;)x=t[n++],x===32&&(x=12288),e[e.length]=x;return e}},_x=dr;Y.engineResourcePath="https://unpkg.com/dynamsoft-javascript-barcode@9.6.20/dist/";let w0;class Es{constructor(){zt(this,"settings")}async init(){w0||(w0=await Y.createInstance())}async detect(e){if(!w0)throw new Error("Dynamsoft Barcode Reader has not been initialized.");const r=Date.now(),n=await w0.decode(e);console.log(n);const x=Date.now()-r,i=[];return n.forEach(s=>{const u=this.wrapResult(s);i.push(u)}),{elapsedTime:x,results:i}}wrapResult(e){let r=e.barcodeText;const n=e.results[0].confidence;if(e.barcodeFormat===d0.BF_QR_CODE&&e.detailedResult.mode===8){const i=e.barcodeBytes,o=_x.convert(i,{to:"UNICODE",from:"SJIS"});r=_x.codeToString(o)}return{barcodeFormat:e.barcodeFormatString,barcodeText:r,barcodeBytes:this.getBinary(e.barcodeBytes),confidence:n,x1:e.localizationResult.x1,x2:e.localizationResult.x2,x3:e.localizationResult.x3,x4:e.localizationResult.x4,y1:e.localizationResult.y1,y2:e.localizationResult.y2,y3:e.localizationResult.y3,y4:e.localizationResult.y4}}getBinary(e){let r="";for(let n=0;n<e.length;n++){const x=e[n];r=r+_n(x.toString())}return r}async updateRuntimeSettings(e){console.log("Using template: "+e),e?await w0.initRuntimeSettingsWithString(e):await w0.resetRuntimeSettings()}getSupportedSettings(){return["template"]}async setSupportedSettings(e){this.settings=e;for(let r=0;r<e.length;r++){const n=e[r];n.name==="template"&&await this.updateRuntimeSettings(n.value)}}}class cs{constructor(){zt(this,"canvas");zt(this,"reader");zt(this,"settings")}async init(){this.canvas||(this.canvas=document.createElement("canvas")),this.reader=window.zbarWasm}async detect(e){const r=Date.now();e instanceof HTMLCanvasElement&&(e=e.toDataURL()),typeof e=="string"&&(e=await this.loadImageFromDataURL(e));let n=0;const x=[],i=this.getImageData(e);if(i){const s=await this.reader.scanImageData(i);n=Date.now()-r;for(let u=0;u<s.length;u++){const B=s[u];x.push(this.wrapResult(B))}}return{elapsedTime:n,results:x}}wrapResult(e){const r=this.getRectFromPoints(e.points),n=this.getBinary(e.data);return{barcodeFormat:e.typeName,barcodeText:e.decode(),barcodeBytes:n,confidence:e.quality,x1:r.left,x2:r.right,x3:r.right,x4:r.left,y1:r.top,y2:r.top,y3:r.bottom,y4:r.bottom}}getRectFromPoints(e){return Tr(this.convertZBarPointsToPoints(e))}convertZBarPointsToPoints(e){const r=[];for(let n=0;n<e.length;n++){const x=e[n],i={x:x.x,y:x.y};r.push(i)}return r}getImageData(e){const r=this.canvas.getContext("2d");let n,x;return e instanceof HTMLVideoElement?(n=e.videoWidth,x=e.videoHeight):(n=e.naturalWidth,x=e.naturalHeight),this.canvas.width=n,this.canvas.height=x,r==null||r.drawImage(e,0,0,n,x),r==null?void 0:r.getImageData(0,0,n,x)}loadImageFromDataURL(e){return new Promise(async function(r,n){try{const x=new Image;x.src=e,x.onload=function(){r(x)}}catch(x){n(x)}})}getBinary(e){let r="";for(let n=0;n<e.length;n++){const x=e[n];r=r+_n(x.toString())}return r}getSupportedSettings(){return[]}async setSupportedSettings(e){this.settings=e}}function ls(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function us(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var hs=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,i){x.__proto__=i}||function(x,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(x[o]=i[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fs=function(t){hs(e,t);function e(r,n){var x=this.constructor,i=t.call(this,r,n)||this;return Object.defineProperty(i,"name",{value:x.name,enumerable:!1,configurable:!0}),ls(i,x.prototype),us(i),i}return e}(Error),As=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pt=function(t){As(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(fs),Bs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=function(t){Bs(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Pt),ds=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Me=function(t){ds(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Pt),yi=function(){function t(e){if(this.binarizer=e,e===null)throw new Me("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,x){var i=this.binarizer.getLuminanceSource().crop(e,r,n,x);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),gs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gt=function(t){gs(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Pt),vs=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),et=function(){function t(){}return t.arraycopy=function(e,r,n,x,i){for(;i--;)n[x++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Cs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sn=function(t){Cs(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Pt),ps=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dx=function(t){ps(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var x=t.call(this,n)||this;return x.index=r,x.message=n,x}return e.kind="ArrayIndexOutOfBoundsException",e}(Sn),_s=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=function(){function t(){}return t.fill=function(e,r){for(var n=0,x=e.length;n<x;n++)e[n]=r},t.fillWithin=function(e,r,n,x){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=x},t.rangeCheck=function(e,r,n){if(r>n)throw new Me("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new Dx(r);if(n>e)throw new Dx(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var x=Array.from({length:e});return x.map(function(i){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var x=Array.from({length:e});return x.map(function(i){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,x=e.length;n<x;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var x=1;try{for(var i=_s(e),o=i.next();!o.done;o=i.next()){var s=o.value;x=31*x+s}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return x},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var x=n-r,i=new Int32Array(x);return et.arraycopy(e,r,i,0,x),i},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var x=0,i=e.length-1;x<=i;){var o=i+x>>1,s=n(r,e[o]);if(s>0)x=o+1;else if(s<0)i=o-1;else return o}return-x-1},t.numberComparator=function(e,r){return e-r},t}(),at=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16===0&&(r+=16,e<<=16),e>>>24===0&&(r+=8,e<<=8),e>>>28===0&&(r+=4,e<<=4),e>>>30===0&&(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Rt=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);et.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,x=Math.floor(e/32),i=n[x];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++x===o)return r;i=n[x]}var s=x*32+at.numberOfTrailingZeros(i);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,x=Math.floor(e/32),i=~n[x];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++x===o)return r;i=~n[x]}var s=x*32+at.numberOfTrailingZeros(i);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Me;if(r!==e){r--;for(var n=Math.floor(e/32),x=Math.floor(r/32),i=this.bits,o=n;o<=x;o++){var s=o>n?0:e&31,u=o<x?31:r&31,B=(2<<u)-(1<<s);i[o]|=B}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Me;if(r===e)return!0;r--;for(var x=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,s=x;s<=i;s++){var u=s>x?0:e&31,B=s<i?31:r&31,C=(2<<B)-(1<<u)&4294967295;if((o[s]&C)!==(n?C:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Me("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Me("Sizes don't match");for(var r=this.bits,n=0,x=r.length;n<x;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,x){for(var i=0;i<x;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+i]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,x=this.bits,i=0;i<n;i++){var o=x[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,u=e[0]>>>s,i=1;i<n;i++){var B=e[i];u|=B<<32-s,e[i-1]=u,u=B>>>s}e[n-1]=u}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ft.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ft.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),xn;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(xn||(xn={}));var nt=xn,Ds=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fe=function(t){Ds(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Pt),ms=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ze;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Ze||(Ze={}));var ht=function(){function t(e,r,n){for(var x,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,B=0,C=u.length;B!==C;B++){var p=u[B];t.VALUES_TO_ECI.set(p,this)}try{for(var m=ms(o),w=m.next();!w.done;w=m.next()){var b=w.value;t.NAME_TO_ECI.set(b,this)}}catch(R){x={error:R}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(x)throw x.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Fe("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Fe("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Fe("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Ze.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Ze.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Ze.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Ze.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Ze.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Ze.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Ze.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Ze.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Ze.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Ze.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Ze.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Ze.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Ze.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Ze.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Ze.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Ze.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Ze.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Ze.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Ze.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Ze.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Ze.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Ze.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Ze.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Ze.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Ze.Big5,28,"Big5"),t.GB18030=new t(Ze.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Ze.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),Fs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gr=function(t){Fs(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Pt),jt=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder=="undefined"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder=="undefined"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window!="undefined"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof ht?e:ht.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var x="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),x+="%"+s}return decodeURIComponent(x)}if(n.equals(ht.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new gr("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(ht.UTF8)||e.equals(ht.ISO8859_1)||e.equals(ht.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),x=[],i=0;i<n.length;i++)x.push(n[i].charCodeAt(0));return new Uint8Array(x)},t}(),Qe=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return jt.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(nt.CHARACTER_SET)!==void 0)return r.get(nt.CHARACTER_SET).toString();for(var n=e.length,x=!0,i=!0,o=!0,s=0,u=0,B=0,C=0,p=0,m=0,w=0,b=0,R=0,L=0,X=0,k=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,J=0;J<n&&(x||i||o);J++){var re=e[J]&255;o&&(s>0?(re&128)===0?o=!1:s--:(re&128)!==0&&((re&64)===0?o=!1:(s++,(re&32)===0?u++:(s++,(re&16)===0?B++:(s++,(re&8)===0?C++:o=!1))))),x&&(re>127&&re<160?x=!1:re>159&&(re<192||re===215||re===247)&&X++),i&&(p>0?re<64||re===127||re>252?i=!1:p--:re===128||re===160||re>239?i=!1:re>160&&re<224?(m++,b=0,w++,w>R&&(R=w)):re>127?(p++,w=0,b++,b>L&&(L=b)):(w=0,b=0))}return o&&s>0&&(o=!1),i&&p>0&&(i=!1),o&&(k||u+B+C>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||R>=3||L>=3)?t.SHIFT_JIS:x&&i?R===2&&m===2||X*10>=n?t.SHIFT_JIS:t.ISO88591:x?t.ISO88591:i?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var x=-1;function i(s,u,B,C,p,m){if(s==="%%")return"%";if(r[++x]!==void 0){s=C?parseInt(C.substr(1)):void 0;var w=p?parseInt(p.substr(1)):void 0,b;switch(m){case"s":b=r[x];break;case"c":b=r[x][0];break;case"f":b=parseFloat(r[x]).toFixed(s);break;case"p":b=parseFloat(r[x]).toPrecision(s);break;case"e":b=parseFloat(r[x]).toExponential(s);break;case"x":b=parseInt(r[x]).toString(w||16);break;case"d":b=parseFloat(parseInt(r[x],w||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(w);for(var R=parseInt(B),L=B&&B[0]+""=="0"?"0":" ";b.length<R;)b=u!==void 0?b+L:L+b;return b}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.getBytes=function(e,r){return jt.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=ht.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=ht.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=ht.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Ue=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Qe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var x=r;r<r+n;x++)this.append(e[x]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),n0=function(){function t(e,r,n,x){if(this.width=e,this.height=r,this.rowSize=n,this.bits=x,r==null&&(r=e),this.height=r,e<1||r<1)throw new Me("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,x==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,x=new t(n,r),i=0;i<r;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&x.set(s,i);return x},t.parseFromString=function(e,r,n){if(e===null)throw new Me("stringRepresentation cannot be null");for(var x=new Array(e.length),i=0,o=0,s=-1,u=0,B=0;B<e.length;)if(e.charAt(B)===`
`||e.charAt(B)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new Me("row lengths do not match");o=i,u++}B++}else if(e.substring(B,B+r.length)===r)B+=r.length,x[i]=!0,i++;else if(e.substring(B,B+n.length)===n)B+=n.length,x[i]=!1,i++;else throw new Me("illegal character encountered: "+e.substring(B));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new Me("row lengths do not match");u++}for(var C=new t(s,u),p=0;p<i;p++)x[p]&&C.set(Math.floor(p%s),Math.floor(p/s));return C},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Me("input matrix dimensions do not match");for(var r=new Rt(Math.floor(this.width/32)+1),n=this.rowSize,x=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,u=e.getRow(i,r).getBitArray(),B=0;B<n;B++)x[s+B]^=u[B]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,x){if(r<0||e<0)throw new Me("Left and top must be nonnegative");if(x<1||n<1)throw new Me("Height and width must be at least 1");var i=e+n,o=r+x;if(o>this.height||i>this.width)throw new Me("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,B=r;B<o;B++)for(var C=B*s,p=e;p<i;p++)u[C+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Rt(this.width):r.clear();for(var n=this.rowSize,x=this.bits,i=e*n,o=0;o<n;o++)r.setBulk(o*32,x[i+o]);return r},t.prototype.setRow=function(e,r){et.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Rt(e),x=new Rt(e),i=0,o=Math.floor((r+1)/2);i<o;i++)n=this.getRow(i,n),x=this.getRow(r-1-i,x),n.reverse(),x.reverse(),this.setRow(i,x),this.setRow(r-1-i,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,x=this.bits,i=e,o=r,s=-1,u=-1,B=0;B<r;B++)for(var C=0;C<n;C++){var p=x[B*n+C];if(p!==0){if(B<o&&(o=B),B>u&&(u=B),C*32<i){for(var m=0;(p<<31-m&4294967295)===0;)m++;C*32+m<i&&(i=C*32+m)}if(C*32+31>s){for(var m=31;p>>>m===0;)m--;C*32+m>s&&(s=C*32+m)}}}return s<i||u<o?null:Int32Array.from([i,o,s-i+1,u-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var x=n/e,i=n%e*32,o=r[n],s=0;(o<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,x])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var x=Math.floor(n/e),i=Math.floor(n%e)*32,o=r[n],s=31;o>>>s===0;)s--;return i+=s,Int32Array.from([i,x])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ft.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ft.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var x=new Ue,i=0,o=this.height;i<o;i++){for(var s=0,u=this.width;s<u;s++)x.append(this.get(s,i)?e:r);x.append(n)}return x.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),ys=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),le=function(t){ys(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Pt),ws=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ss=function(t){ws(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var x=this.getLuminanceSource(),i=x.getWidth();n==null||n.getSize()<i?n=new Rt(i):n.clear(),this.initArrays(i);for(var o=x.getRow(r,this.luminances),s=this.buckets,u=0;u<i;u++)s[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var B=e.estimateBlackPoint(s);if(i<3)for(var u=0;u<i;u++)(o[u]&255)<B&&n.set(u);else for(var C=o[0]&255,p=o[1]&255,u=1;u<i-1;u++){var m=o[u+1]&255;(p*4-C-m)/2<B&&n.set(u),C=p,p=m}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),x=r.getHeight(),i=new n0(n,x);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var u=Math.floor(x*s/5),B=r.getRow(u,this.luminances),C=Math.floor(n*4/5),p=Math.floor(n/5);p<C;p++){var m=B[p]&255;o[m>>e.LUMINANCE_SHIFT]++}for(var w=e.estimateBlackPoint(o),b=r.getMatrix(),s=0;s<x;s++)for(var R=s*n,p=0;p<n;p++){var m=b[R+p]&255;m<w&&i.set(p,s)}return i},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,x=0;x<e.LUMINANCE_BUCKETS;x++)n[x]=0},e.estimateBlackPoint=function(r){for(var n=r.length,x=0,i=0,o=0,s=0;s<n;s++)r[s]>o&&(i=s,o=r[s]),r[s]>x&&(x=r[s]);for(var u=0,B=0,s=0;s<n;s++){var C=s-i,p=r[s]*C*C;p>B&&(u=s,B=p)}if(i>u){var m=i;i=u,u=m}if(u-i<=n/16)throw new le;for(var w=u-1,b=-1,s=u-1;s>i;s--){var R=s-i,p=R*R*(u-s)*(x-r[s]);p>b&&(w=s,b=p)}return w<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(vs),Ts=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wi=function(t){Ts(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),x=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&x>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=x>>e.BLOCK_SIZE_POWER;(x&e.BLOCK_SIZE_MASK)!==0&&s++;var u=e.calculateBlackPoints(i,o,s,n,x),B=new n0(n,x);e.calculateThresholdForBlock(i,o,s,n,x,u,B),this.matrix=B}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,x,i,o,s,u){for(var B=o-e.BLOCK_SIZE,C=i-e.BLOCK_SIZE,p=0;p<x;p++){var m=p<<e.BLOCK_SIZE_POWER;m>B&&(m=B);for(var w=e.cap(p,2,x-3),b=0;b<n;b++){var R=b<<e.BLOCK_SIZE_POWER;R>C&&(R=C);for(var L=e.cap(b,2,n-3),X=0,k=-2;k<=2;k++){var J=s[w+k];X+=J[L-2]+J[L-1]+J[L]+J[L+1]+J[L+2]}var re=X/25;e.thresholdBlock(r,R,m,re,i,u)}}},e.cap=function(r,n,x){return r<n?n:r>x?x:r},e.thresholdBlock=function(r,n,x,i,o,s){for(var u=0,B=x*o+n;u<e.BLOCK_SIZE;u++,B+=o)for(var C=0;C<e.BLOCK_SIZE;C++)(r[B+C]&255)<=i&&s.set(n+C,x+u)},e.calculateBlackPoints=function(r,n,x,i,o){for(var s=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,B=new Array(x),C=0;C<x;C++){B[C]=new Int32Array(n);var p=C<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var m=0;m<n;m++){var w=m<<e.BLOCK_SIZE_POWER;w>u&&(w=u);for(var b=0,R=255,L=0,X=0,k=p*i+w;X<e.BLOCK_SIZE;X++,k+=i){for(var J=0;J<e.BLOCK_SIZE;J++){var re=r[k+J]&255;b+=re,re<R&&(R=re),re>L&&(L=re)}if(L-R>e.MIN_DYNAMIC_RANGE)for(X++,k+=i;X<e.BLOCK_SIZE;X++,k+=i)for(var J=0;J<e.BLOCK_SIZE;J++)b+=r[k+J]&255}var Z=b>>e.BLOCK_SIZE_POWER*2;if(L-R<=e.MIN_DYNAMIC_RANGE&&(Z=R/2,C>0&&m>0)){var ce=(B[C-1][m]+2*B[C][m-1]+B[C-1][m-1])/4;R<ce&&(Z=ce)}B[C][m]=Z}}return B},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Ss),Nr=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,x){throw new gr("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new gr("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new gr("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Ue,n=0;n<this.height;n++){for(var x=this.getRow(n,e),i=0;i<this.width;i++){var o=x[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),bs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tn=function(t){bs(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var x=this.delegate.getRow(r,n),i=this.getWidth(),o=0;o<i;o++)x[o]=255-(x[o]&255);return x},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),x=new Uint8ClampedArray(n),i=0;i<n;i++)x[i]=255-(r[i]&255);return x},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,x,i){return new e(this.delegate.crop(r,n,x,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Nr),Is=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Si=function(t){Is(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(n.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,x){var i=new Uint8ClampedArray(n*x);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var o=0,s=0,u=r.length;o<u;o+=4,s++){var B=void 0,C=r[o+3];if(C===0)B=255;else{var p=r[o],m=r[o+1],w=r[o+2];B=306*p+601*m+117*w+512>>10}i[s]=B}else for(var o=0,s=0,b=r.length;o<b;o+=4,s++){var B=void 0,C=r[o+3];if(C===0)B=255;else{var p=r[o],m=r[o+1],w=r[o+2];B=306*p+601*m+117*w+512>>10}i[s]=255-B}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Me("Requested row is outside the image: "+r);var x=this.getWidth(),i=r*x;return n===null?n=this.buffer.slice(i,i+x):(n.length<x&&(n=new Uint8ClampedArray(x)),n.set(this.buffer.slice(i,i+x))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,x,i){return t.prototype.crop.call(this,r,n,x,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),x=n.getContext("2d"),i=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),B=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=u,n.height=B,x.translate(u/2,B/2),x.rotate(i),x.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Tn(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Nr),Os=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),yt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function x(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(C){try{B(n.next(C))}catch(p){o(p)}}function u(C){try{B(n.throw(C))}catch(p){o(p)}}function B(C){C.done?i(C.value):x(C.value).then(s,u)}B((n=n.apply(t,e||[])).next())})},wt=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,x,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(B){return function(C){return u([B,C])}}function u(B){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,x&&(i=B[0]&2?x.return:B[0]?x.throw||((i=x.return)&&i.call(x),0):x.next)&&!(i=i.call(x,B[1])).done)return i;switch(x=0,i&&(B=[B[0]&2,i.value]),B[0]){case 0:case 1:i=B;break;case 4:return r.label++,{value:B[1],done:!1};case 5:r.label++,x=B[1],B=[0];continue;case 7:B=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(B[0]===6||B[0]===2)){r=0;continue}if(B[0]===3&&(!i||B[1]>i[0]&&B[1]<i[3])){r.label=B[1];break}if(B[0]===6&&r.label<i[1]){r.label=i[1],i=B;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(B);break}i[2]&&r.ops.pop(),r.trys.pop();continue}B=e.call(t,r)}catch(C){B=[6,C],x=0}finally{n=i=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}},Rs=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P0=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator!="undefined"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return yt(this,void 0,void 0,function(){var e,r,n,x,i,o,s,u,B,C,p,m;return wt(this,function(w){switch(w.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),r=[];try{for(n=Rs(e),x=n.next();!x.done;x=n.next())i=x.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,u=i.label||"Video device "+(r.length+1),B=i.groupId,C={deviceId:s,label:u,kind:o,groupId:B},r.push(C))}catch(b){p={error:b}}finally{try{x&&!x.done&&(m=n.return)&&m.call(n)}finally{if(p)throw p.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return yt(this,void 0,void 0,function(){var e;return wt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new Os(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return yt(this,void 0,void 0,function(){var r;return wt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(x){return x.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return yt(this,void 0,void 0,function(){return wt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return yt(this,void 0,void 0,function(){var n,x;return wt(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},x={video:n},[4,this.decodeOnceFromConstraints(x,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return yt(this,void 0,void 0,function(){var n;return wt(this,function(x){switch(x.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=x.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,x.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return yt(this,void 0,void 0,function(){var n,x;return wt(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return x=i.sent(),[2,x]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return yt(this,void 0,void 0,function(){return wt(this,function(x){switch(x.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,x.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return yt(this,void 0,void 0,function(){var x,i;return wt(this,function(o){switch(o.label){case 0:return e?x={deviceId:{exact:e}}:x={facingMode:"environment"},i={video:x},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return yt(this,void 0,void 0,function(){var x;return wt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return x=i.sent(),[4,this.decodeFromStream(x,r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return yt(this,void 0,void 0,function(){var x;return wt(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return x=i.sent(),[4,this.decodeContinuously(x,n)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return yt(this,void 0,void 0,function(){var n;return wt(this,function(x){switch(x.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return x.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,x){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return yt(this,void 0,void 0,function(){return wt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ht("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ht("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ht("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ht("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ht("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ht("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ht("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ht("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ht("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ht("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),x=this.decodeFromVideoElementContinuously(n,r);return n.src=e,x},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,x){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,x)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return yt(this,void 0,void 0,function(){return wt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return yt(this,void 0,void 0,function(){return wt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e=="undefined"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document!="undefined"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var x=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(x._stopAsyncDecode){s(new le("Video stream has ended before any code could be detected.")),x._stopAsyncDecode=void 0;return}try{var u=x.decode(e);o(u)}catch(m){var B=r&&m instanceof le,C=m instanceof gt||m instanceof Fe,p=C&&n;if(B||p)return setTimeout(i,x._timeBetweenDecodingAttempts,o,s);s(m)}};return new Promise(function(o,s){return i(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var x=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);r(i,null),setTimeout(x,n.timeBetweenScansMillis)}catch(u){r(null,u);var o=u instanceof gt||u instanceof Fe,s=u instanceof le;(o||s)&&setTimeout(x,n._timeBetweenDecodingAttempts)}};x()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),n=new Si(r),x=new wi(n);return new yi(x)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document=="undefined")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,x;return typeof e!="undefined"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,x=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,x=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=x+"px",r.width=n,r.height=x,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){!this.videoElement||(typeof this.videoEndedListener!="undefined"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener!="undefined"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener!="undefined"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){!this.imageElement||(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Ft=function(){function t(e,r,n,x,i,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=et.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=x,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=x,this.format=i,this.resultMetadata=null,o==null?this.timestamp=et.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);et.arraycopy(r,0,n,0,r.length),et.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),on;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(on||(on={}));var Pe=on,an;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(an||(an={}));var _t=an,Lr=function(){function t(e,r,n,x,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=x,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),H0=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Me;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),E0=function(){function t(e,r){if(r.length===0)throw new Me;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var x=1;x<n&&r[x]===0;)x++;x===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-x),et.arraycopy(r,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var x=0,i=r.length;x!==i;x++){var o=r[x];n=H0.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,u=this.field,x=1;x<s;x++)n=H0.addOrSubtract(u.multiply(e,n),r[x]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Me("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var x=r;r=n,n=x}var i=new Int32Array(n.length),o=n.length-r.length;et.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=H0.addOrSubtract(r[s-o],n[s]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Me("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,x=e.coefficients,i=x.length,o=new Int32Array(n+i-1),s=this.field,u=0;u<n;u++)for(var B=r[u],C=0;C<i;C++)o[u+C]=H0.addOrSubtract(o[u+C],s.multiply(B,x[C]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,x=new Int32Array(r),i=this.coefficients,o=0;o<r;o++)x[o]=n.multiply(i[o],e);return new t(n,x)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Me;if(r===0)return this.field.getZero();for(var n=this.coefficients,x=n.length,i=new Int32Array(x+e),o=this.field,s=0;s<x;s++)i[s]=o.multiply(n[s],r);return new t(o,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Me("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Me("Divide by 0");for(var r=this.field,n=r.getZero(),x=this,i=e.getCoefficient(e.getDegree()),o=r.inverse(i);x.getDegree()>=e.getDegree()&&!x.isZero();){var s=x.getDegree()-e.getDegree(),u=r.multiply(x.getCoefficient(x.getDegree()),o),B=e.multiplyByMonomial(s,u),C=r.buildMonomial(s,u);n=n.addOrSubtract(C),x=x.addOrSubtract(B)}return[n,x]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var x=this.field.log(n);x===0?e+="1":x===1?e+="a":(e+="a^",e+=x)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Ps=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ti=function(t){Ps(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Pt),Ms=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r0=function(t){Ms(e,t);function e(r,n,x){var i=t.call(this)||this;i.primitive=r,i.size=n,i.generatorBase=x;for(var o=new Int32Array(n),s=1,u=0;u<n;u++)o[u]=s,s*=2,s>=n&&(s^=r,s&=n-1);i.expTable=o;for(var B=new Int32Array(n),u=0;u<n-1;u++)B[o[u]]=u;return i.logTable=B,i.zero=new E0(i,Int32Array.from([0])),i.one=new E0(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Me;if(n===0)return this.zero;var x=new Int32Array(r+1);return x[0]=n,new E0(this,x)},e.prototype.inverse=function(r){if(r===0)throw new Ti;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+at.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(H0),Ns=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(t){Ns(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Pt),Ls=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nr=function(t){Ls(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Pt),kr=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,x=new E0(n,e),i=new Int32Array(r),o=!0,s=0;s<r;s++){var u=x.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=u,u!==0&&(o=!1)}if(!o)for(var B=new E0(n,i),C=this.runEuclideanAlgorithm(n.buildMonomial(r,1),B,r),p=C[0],m=C[1],w=this.findErrorLocations(p),b=this.findErrorMagnitudes(m,w),s=0;s<w.length;s++){var R=e.length-1-n.log(w[s]);if(R<0)throw new ur("Bad error location");e[R]=r0.addOrSubtract(e[R],b[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var x=e;e=r,r=x}for(var i=this.field,o=e,s=r,u=i.getZero(),B=i.getOne();s.getDegree()>=(n/2|0);){var C=o,p=u;if(o=s,u=B,o.isZero())throw new ur("r_{i-1} was zero");s=C;for(var m=i.getZero(),w=o.getCoefficient(o.getDegree()),b=i.inverse(w);s.getDegree()>=o.getDegree()&&!s.isZero();){var R=s.getDegree()-o.getDegree(),L=i.multiply(s.getCoefficient(s.getDegree()),b);m=m.addOrSubtract(i.buildMonomial(R,L)),s=s.addOrSubtract(o.multiplyByMonomial(R,L))}if(B=m.multiply(u).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new nr("Division algorithm failed to reduce polynomial?")}var X=B.getCoefficient(0);if(X===0)throw new ur("sigmaTilde(0) was zero");var k=i.inverse(X),J=B.multiplyScalar(k),re=s.multiplyScalar(k);return[J,re]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),x=0,i=this.field,o=1;o<i.getSize()&&x<r;o++)e.evaluateAt(o)===0&&(n[x]=i.inverse(o),x++);if(x!==r)throw new ur("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,x=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(r[o]),u=1,B=0;B<n;B++)if(o!==B){var C=i.multiply(r[B],s),p=(C&1)===0?C|1:C&-2;u=i.multiply(u,p)}x[o]=i.multiply(e.evaluateAt(s),i.inverse(u)),i.getGeneratorBase()!==0&&(x[o]=i.multiply(x[o],s))}return x},t}(),Ct;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Ct||(Ct={}));var mx=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),x=this.correctBits(n),i=t.convertBoolArrayToByteArray(x),o=t.getEncodedData(x),s=new Lr(i,o,null,null);return s.setNumBits(x.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Ct.UPPER,x=Ct.UPPER,i="",o=0;o<r;)if(x===Ct.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var u=0;u<s;u++){if(r-o<8){o=r;break}var B=t.readCode(e,o,8);i+=Qe.castAsNonUtf8Char(B),o+=8}x=n}else{var C=x===Ct.DIGIT?4:5;if(r-o<C)break;var B=t.readCode(e,o,C);o+=C;var p=t.getCharacter(x,B);p.startsWith("CTRL_")?(n=x,x=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(n=x)):(i+=p,x=n)}return i},t.getTable=function(e){switch(e){case"L":return Ct.LOWER;case"P":return Ct.PUNCT;case"M":return Ct.MIXED;case"D":return Ct.DIGIT;case"B":return Ct.BINARY;case"U":default:return Ct.UPPER}},t.getCharacter=function(e,r){switch(e){case Ct.UPPER:return t.UPPER_TABLE[r];case Ct.LOWER:return t.LOWER_TABLE[r];case Ct.MIXED:return t.MIXED_TABLE[r];case Ct.PUNCT:return t.PUNCT_TABLE[r];case Ct.DIGIT:return t.DIGIT_TABLE[r];default:throw new nr("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=r0.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=r0.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=r0.AZTEC_DATA_10):(n=12,r=r0.AZTEC_DATA_12);var x=this.ddata.getNbDatablocks(),i=e.length/n;if(i<x)throw new Fe;for(var o=e.length%n,s=new Int32Array(i),u=0;u<i;u++,o+=n)s[u]=t.readCode(e,o,n);try{var B=new kr(r);B.decode(s,i-x)}catch(L){throw new Fe(L)}for(var C=(1<<n)-1,p=0,u=0;u<x;u++){var m=s[u];if(m===0||m===C)throw new Fe;(m===1||m===C-1)&&p++}for(var w=new Array(x*n-p),b=0,u=0;u<x;u++){var m=s[u];if(m===1||m===C-1)w.fill(m>1,b,b+n-1),b+=n-1;else for(var R=n-1;R>=0;--R)w[b++]=(m&1<<R)!==0}return w},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),x=(r?11:14)+n*4,i=new Int32Array(x),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<i.length;s++)i[s]=s;else for(var u=x+1+2*at.truncDivision(at.truncDivision(x,2)-1,15),B=x/2,C=at.truncDivision(u,2),s=0;s<B;s++){var p=s+at.truncDivision(s,15);i[B-s-1]=C-p-1,i[B+s]=C+p+1}for(var s=0,m=0;s<n;s++){for(var w=(n-s)*4+(r?9:12),b=s*2,R=x-1-b,L=0;L<w;L++)for(var X=L*2,k=0;k<2;k++)o[m+X+k]=e.get(i[b+k],i[b+L]),o[m+2*w+X+k]=e.get(i[b+L],i[R-k]),o[m+4*w+X+k]=e.get(i[R-k],i[R-L]),o[m+6*w+X+k]=e.get(i[R-L],i[b+k]);m+=w*8}return o},t.readCode=function(e,r,n){for(var x=0,i=r;i<r+n;i++)x<<=1,e[i]&&(x|=1);return x},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),He=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,x){var i=e-n,o=r-x;return Math.sqrt(i*i+o*o)},t.sum=function(e){for(var r=0,n=0,x=e.length;n!==x;n++){var i=e[n];r+=i}return r},t}(),sn=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),be=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*sn.floatToIntBits(this.x)+sn.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),x=this.distance(e[0],e[2]),i,o,s;if(n>=r&&n>=x?(o=e[0],i=e[1],s=e[2]):x>=n&&x>=r?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var u=i;i=s,s=u}e[0]=i,e[1]=o,e[2]=s},t.distance=function(e,r){return He.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var x=r.x,i=r.y;return(n.x-x)*(e.y-i)-(n.y-i)*(e.x-x)},t}(),bn=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),ks=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Us=function(t){ks(e,t);function e(r,n,x,i,o){var s=t.call(this,r,n)||this;return s.compact=x,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(bn),En=function(){function t(e,r,n,x){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),x==null&&(x=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=x-i,this.downInit=x+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,x=this.downInit,i=!1,o=!0,s=!1,u=!1,B=!1,C=!1,p=!1,m=this.width,w=this.height;o;){o=!1;for(var b=!0;(b||!u)&&r<m;)b=this.containsBlackPoint(n,x,r,!1),b?(r++,o=!0,u=!0):u||r++;if(r>=m){i=!0;break}for(var R=!0;(R||!B)&&x<w;)R=this.containsBlackPoint(e,r,x,!0),R?(x++,o=!0,B=!0):B||x++;if(x>=w){i=!0;break}for(var L=!0;(L||!C)&&e>=0;)L=this.containsBlackPoint(n,x,e,!1),L?(e--,o=!0,C=!0):C||e--;if(e<0){i=!0;break}for(var X=!0;(X||!p)&&n>=0;)X=this.containsBlackPoint(e,r,n,!0),X?(n--,o=!0,p=!0):p||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var k=r-e,J=null,re=1;J===null&&re<k;re++)J=this.getBlackPointOnSegment(e,x-re,e+re,x);if(J==null)throw new le;for(var Z=null,re=1;Z===null&&re<k;re++)Z=this.getBlackPointOnSegment(e,n+re,e+re,n);if(Z==null)throw new le;for(var ce=null,re=1;ce===null&&re<k;re++)ce=this.getBlackPointOnSegment(r,n+re,r-re,n);if(ce==null)throw new le;for(var ue=null,re=1;ue===null&&re<k;re++)ue=this.getBlackPointOnSegment(r,x-re,r-re,x);if(ue==null)throw new le;return this.centerEdges(ue,J,ce,Z)}else throw new le},t.prototype.getBlackPointOnSegment=function(e,r,n,x){for(var i=He.round(He.distance(e,r,n,x)),o=(n-e)/i,s=(x-r)/i,u=this.image,B=0;B<i;B++){var C=He.round(e+B*o),p=He.round(r+B*s);if(u.get(C,p))return new be(C,p)}return null},t.prototype.centerEdges=function(e,r,n,x){var i=e.getX(),o=e.getY(),s=r.getX(),u=r.getY(),B=n.getX(),C=n.getY(),p=x.getX(),m=x.getY(),w=t.CORR;return i<this.width/2?[new be(p-w,m+w),new be(s+w,u+w),new be(B-w,C-w),new be(i+w,o-w)]:[new be(p+w,m+w),new be(s+w,u-w),new be(B-w,C+w),new be(i-w,o-w)]},t.prototype.containsBlackPoint=function(e,r,n,x){var i=this.image;if(x){for(var o=e;o<=r;o++)if(i.get(o,n))return!0}else for(var s=e;s<=r;s++)if(i.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Fx=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),x=e.getHeight(),i=!0,o=0;o<r.length&&i;o+=2){var s=Math.floor(r[o]),u=Math.floor(r[o+1]);if(s<-1||s>n||u<-1||u>x)throw new le;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),u===-1?(r[o+1]=0,i=!0):u===x&&(r[o+1]=x-1,i=!0)}i=!0;for(var o=r.length-2;o>=0&&i;o-=2){var s=Math.floor(r[o]),u=Math.floor(r[o+1]);if(s<-1||s>n||u<-1||u>x)throw new le;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),u===-1?(r[o+1]=0,i=!0):u===x&&(r[o+1]=x-1,i=!0)}},t}(),bi=function(){function t(e,r,n,x,i,o,s,u,B){this.a11=e,this.a21=r,this.a31=n,this.a12=x,this.a22=i,this.a32=o,this.a13=s,this.a23=u,this.a33=B}return t.quadrilateralToQuadrilateral=function(e,r,n,x,i,o,s,u,B,C,p,m,w,b,R,L){var X=t.quadrilateralToSquare(e,r,n,x,i,o,s,u),k=t.squareToQuadrilateral(B,C,p,m,w,b,R,L);return k.times(X)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,x=this.a12,i=this.a13,o=this.a21,s=this.a22,u=this.a23,B=this.a31,C=this.a32,p=this.a33,m=0;m<r;m+=2){var w=e[m],b=e[m+1],R=i*w+u*b+p;e[m]=(n*w+o*b+B)/R,e[m+1]=(x*w+s*b+C)/R}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,x=this.a12,i=this.a13,o=this.a21,s=this.a22,u=this.a23,B=this.a31,C=this.a32,p=this.a33,m=e.length,w=0;w<m;w++){var b=e[w],R=r[w],L=i*b+u*R+p;e[w]=(n*b+o*R+B)/L,r[w]=(x*b+s*R+C)/L}},t.squareToQuadrilateral=function(e,r,n,x,i,o,s,u){var B=e-n+i-s,C=r-x+o-u;if(B===0&&C===0)return new t(n-e,i-n,e,x-r,o-x,r,0,0,1);var p=n-i,m=s-i,w=x-o,b=u-o,R=p*b-m*w,L=(B*b-m*C)/R,X=(p*C-B*w)/R;return new t(n-e+L*n,s-e+X*s,e,x-r+L*x,u-r+X*u,r,L,X,1)},t.quadrilateralToSquare=function(e,r,n,x,i,o,s,u){return t.squareToQuadrilateral(e,r,n,x,i,o,s,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),js=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vs=function(t){js(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,x,i,o,s,u,B,C,p,m,w,b,R,L,X,k,J,re){var Z=bi.quadrilateralToQuadrilateral(i,o,s,u,B,C,p,m,w,b,R,L,X,k,J,re);return this.sampleGridWithTransform(r,n,x,Z)},e.prototype.sampleGridWithTransform=function(r,n,x,i){if(n<=0||x<=0)throw new le;for(var o=new n0(n,x),s=new Float32Array(2*n),u=0;u<x;u++){for(var B=s.length,C=u+.5,p=0;p<B;p+=2)s[p]=p/2+.5,s[p+1]=C;i.transformPoints(s),Fx.checkAndNudgePoints(r,s);try{for(var p=0;p<B;p+=2)r.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,u)}catch{throw new le}}return o},e}(Fx),In=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new Vs,t}(),Ot=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new be(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),Gs=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var x=n[0];n[0]=n[2],n[2]=x}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Us(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new le;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var x=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(x<<=7,x+=o>>1&127):(x<<=10,x+=(o>>2&31<<5)+(o>>1&31))}var s=this.getCorrectedParameterData(x,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(i,o,s){var u=(i>>r-2<<1)+(i&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(var x=0;x<4;x++)if(at.bitCount(n^this.EXPECTED_CORNER_BITS[x])<=2)return x;throw new le},t.prototype.getCorrectedParameterData=function(e,r){var n,x;r?(n=7,x=2):(n=10,x=4);for(var i=n-x,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var u=new kr(r0.AZTEC_PARAM);u.decode(o,i)}catch{throw new le}for(var B=0,s=0;s<x;s++)B=(B<<4)+o[s];return B},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,x=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),u=this.getFirstDifferent(n,o,1,1),B=this.getFirstDifferent(x,o,-1,1),C=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(C,s)*this.nbCenterLayers/(this.distancePoint(i,r)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,u,B,C))break}r=s,n=u,x=B,i=C,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;var m=new be(r.getX()+.5,r.getY()-.5),w=new be(n.getX()+.5,n.getY()+.5),b=new be(x.getX()-.5,x.getY()+.5),R=new be(i.getX()-.5,i.getY()-.5);return this.expandSquare([m,w,b,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,x;try{var i=new En(this.image).detect();e=i[0],r=i[1],n=i[2],x=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Ot(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ot(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ot(o-7,s+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Ot(o-7,s-7),!1,-1,-1).toResultPoint()}var u=He.round((e.getX()+x.getX()+r.getX()+n.getX())/4),B=He.round((e.getY()+x.getY()+r.getY()+n.getY())/4);try{var i=new En(this.image,15,u,B).detect();e=i[0],r=i[1],n=i[2],x=i[3]}catch{e=this.getFirstDifferent(new Ot(u+7,B-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ot(u+7,B+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ot(u-7,B+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Ot(u-7,B-7),!1,-1,-1).toResultPoint()}return u=He.round((e.getX()+x.getX()+r.getX()+n.getX())/4),B=He.round((e.getY()+x.getY()+r.getY()+n.getY())/4),new Ot(u,B)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,x,i){var o=In.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,B=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,u,u,B,u,B,B,u,B,r.getX(),r.getY(),n.getX(),n.getY(),x.getX(),x.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,r,n){for(var x=0,i=this.distanceResultPoint(e,r),o=i/n,s=e.getX(),u=e.getY(),B=o*(r.getX()-e.getX())/i,C=o*(r.getY()-e.getY())/i,p=0;p<n;p++)this.image.get(He.round(s+p*B),He.round(u+p*C))&&(x|=1<<n-p-1);return x},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,x){var i=3;e=new Ot(e.getX()-i,e.getY()+i),r=new Ot(r.getX()-i,r.getY()-i),n=new Ot(n.getX()+i,n.getY()-i),x=new Ot(x.getX()+i,x.getY()+i);var o=this.getColor(x,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,x),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),x=(r.getX()-e.getX())/n,i=(r.getY()-e.getY())/n,o=0,s=e.getX(),u=e.getY(),B=this.image.get(e.getX(),e.getY()),C=Math.ceil(n),p=0;p<C;p++)s+=x,u+=i,this.image.get(He.round(s),He.round(u))!==B&&o++;var m=o/n;return m>.1&&m<.9?0:m<=.1===B?1:-1},t.prototype.getFirstDifferent=function(e,r,n,x){for(var i=e.getX()+n,o=e.getY()+x;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n,o+=x;for(i-=n,o-=x;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===r;)o+=x;return o-=x,new Ot(i,o)},t.prototype.expandSquare=function(e,r,n){var x=n/(2*r),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,B=new be(s+x*i,u+x*o),C=new be(s-x*i,u-x*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var p=new be(s+x*i,u+x*o),m=new be(s-x*i,u-x*o),w=[B,p,C,m];return w},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=He.round(e.getX()),n=He.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return He.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return He.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(at.truncDivision(this.nbLayers-4,8)+1)+15},t}(),cn=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,x=new Gs(e.getBlackMatrix()),i=null,o=null;try{var s=x.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new mx().decode(s)}catch(p){n=p}if(o==null)try{var s=x.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new mx().decode(s)}catch(p){throw n!=null?n:p}var u=new Ft(o.getText(),o.getRawBytes(),o.getNumBits(),i,Pe.AZTEC,et.currentTimeMillis()),B=o.getByteSegments();B!=null&&u.putMetadata(_t.BYTE_SEGMENTS,B);var C=o.getECLevel();return C!=null&&u.putMetadata(_t.ERROR_CORRECTION_LEVEL,C),u},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(nt.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(x,i,o){n.foundPossibleResultPoint(x)})}},t.prototype.reset=function(){},t}(),Hs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Hs(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new cn,r)||this}return e})(P0);var At=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(nt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var x=e.rotateCounterClockwise(),i=this.doDecode(x,r),o=i.getResultMetadata(),s=270;o!==null&&o.get(_t.ORIENTATION)===!0&&(s=s+o.get(_t.ORIENTATION)%360),i.putMetadata(_t.ORIENTATION,s);var u=i.getResultPoints();if(u!==null)for(var B=x.getHeight(),C=0;C<u.length;C++)u[C]=new be(B-u[C].getY()-1,u[C].getX());return i}else throw new le}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),x=e.getHeight(),i=new Rt(n),o=r&&r.get(nt.TRY_HARDER)===!0,s=Math.max(1,x>>(o?8:5)),u;o?u=x:u=15;for(var B=Math.trunc(x/2),C=0;C<u;C++){var p=Math.trunc((C+1)/2),m=(C&1)===0,w=B+s*(m?p:-p);if(w<0||w>=x)break;try{i=e.getBlackRow(w,i)}catch{continue}for(var b=function(k){if(k===1&&(i.reverse(),r&&r.get(nt.NEED_RESULT_POINT_CALLBACK)===!0)){var J=new Map;r.forEach(function(ce,ue){return J.set(ue,ce)}),J.delete(nt.NEED_RESULT_POINT_CALLBACK),r=J}try{var re=R.decodeRow(w,i,r);if(k===1){re.putMetadata(_t.ORIENTATION,180);var Z=re.getResultPoints();Z!==null&&(Z[0]=new be(n-Z[0].getX()-1,Z[0].getY()),Z[1]=new be(n-Z[1].getX()-1,Z[1].getY()))}return{value:re}}catch{}},R=this,L=0;L<2;L++){var X=b(L);if(typeof X=="object")return X.value}}throw new le},t.recordPattern=function(e,r,n){for(var x=n.length,i=0;i<x;i++)n[i]=0;var o=e.getSize();if(r>=o)throw new le;for(var s=!e.get(r),u=0,B=r;B<o;){if(e.get(B)!==s)n[u]++;else{if(++u===x)break;n[u]=1,s=!s}B++}if(!(u===x||u===x-1&&B===o))throw new le},t.recordPatternInReverse=function(e,r,n){for(var x=n.length,i=e.get(r);r>0&&x>=0;)e.get(--r)!==i&&(x--,i=!i);if(x>=0)throw new le;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var x=e.length,i=0,o=0,s=0;s<x;s++)i+=e[s],o+=r[s];if(i<o)return Number.POSITIVE_INFINITY;var u=i/o;n*=u;for(var B=0,C=0;C<x;C++){var p=e[C],m=r[C]*u,w=p>m?p-m:m-p;if(w>n)return Number.POSITIVE_INFINITY;B+=w}return B/i},t}(),Ws=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yx=function(t){Ws(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),x=r.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=x,u=!1,B=6,C=x;C<n;C++)if(r.get(C)!==u)o[i]++;else{if(i===B-1){for(var p=e.MAX_AVG_VARIANCE,m=-1,w=e.CODE_START_A;w<=e.CODE_START_C;w++){var b=At.patternMatchVariance(o,e.CODE_PATTERNS[w],e.MAX_INDIVIDUAL_VARIANCE);b<p&&(p=b,m=w)}if(m>=0&&r.isRange(Math.max(0,s-(C-s)/2),s,!1))return Int32Array.from([s,C,m]);s+=o[0]+o[1],o=o.slice(2,o.length-1),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,u=!u}throw new le},e.decodeCode=function(r,n,x){At.recordPattern(r,x,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],B=this.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);B<i&&(i=B,o=s)}if(o>=0)return o;throw new le},e.prototype.decodeRow=function(r,n,x){var i=x&&x.get(nt.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],u=0,B=new Uint8Array(20);B[u++]=s;var C;switch(s){case e.CODE_START_A:C=e.CODE_CODE_A;break;case e.CODE_START_B:C=e.CODE_CODE_B;break;case e.CODE_START_C:C=e.CODE_CODE_C;break;default:throw new Fe}for(var p=!1,m=!1,w="",b=o[0],R=o[1],L=Int32Array.from([0,0,0,0,0,0]),X=0,k=0,J=s,re=0,Z=!0,ce=!1,ue=!1;!p;){var D=m;switch(m=!1,X=k,k=e.decodeCode(n,L,R),B[u++]=k,k!==e.CODE_STOP&&(Z=!0),k!==e.CODE_STOP&&(re++,J+=re*k),b=R,R+=L.reduce(function(E,f){return E+f},0),k){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Fe}switch(C){case e.CODE_CODE_A:if(k<64)ue===ce?w+=String.fromCharCode(" ".charCodeAt(0)+k):w+=String.fromCharCode(" ".charCodeAt(0)+k+128),ue=!1;else if(k<96)ue===ce?w+=String.fromCharCode(k-64):w+=String.fromCharCode(k+64),ue=!1;else switch(k!==e.CODE_STOP&&(Z=!1),k){case e.CODE_FNC_1:i&&(w.length===0?w+="]C1":w+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!ce&&ue?(ce=!0,ue=!1):ce&&ue?(ce=!1,ue=!1):ue=!0;break;case e.CODE_SHIFT:m=!0,C=e.CODE_CODE_B;break;case e.CODE_CODE_B:C=e.CODE_CODE_B;break;case e.CODE_CODE_C:C=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(k<96)ue===ce?w+=String.fromCharCode(" ".charCodeAt(0)+k):w+=String.fromCharCode(" ".charCodeAt(0)+k+128),ue=!1;else switch(k!==e.CODE_STOP&&(Z=!1),k){case e.CODE_FNC_1:i&&(w.length===0?w+="]C1":w+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!ce&&ue?(ce=!0,ue=!1):ce&&ue?(ce=!1,ue=!1):ue=!0;break;case e.CODE_SHIFT:m=!0,C=e.CODE_CODE_A;break;case e.CODE_CODE_A:C=e.CODE_CODE_A;break;case e.CODE_CODE_C:C=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(k<100)k<10&&(w+="0"),w+=k;else switch(k!==e.CODE_STOP&&(Z=!1),k){case e.CODE_FNC_1:i&&(w.length===0?w+="]C1":w+=String.fromCharCode(29));break;case e.CODE_CODE_A:C=e.CODE_CODE_A;break;case e.CODE_CODE_B:C=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}D&&(C=C===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var Se=R-b;if(R=n.getNextUnset(R),!n.isRange(R,Math.min(n.getSize(),R+(R-b)/2),!1))throw new le;if(J-=re*X,J%103!==X)throw new gt;var Ie=w.length;if(Ie===0)throw new le;Ie>0&&Z&&(C===e.CODE_CODE_C?w=w.substring(0,Ie-2):w=w.substring(0,Ie-1));for(var ke=(o[1]+o[0])/2,h=b+Se/2,c=B.length,l=new Uint8Array(c),A=0;A<c;A++)l[A]=B[A];var a=[new be(ke,r),new be(h,r)];return new Ft(w,l,0,a,Pe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(At),Xs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wx=function(t){Xs(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var x=t.call(this)||this;return x.usingCheckDigit=r,x.extendedMode=n,x.decodeRowResult="",x.counters=new Int32Array(9),x}return e.prototype.decodeRow=function(r,n,x){var i,o,s,u,B=this.counters;B.fill(0),this.decodeRowResult="";var C=e.findAsteriskPattern(n,B),p=n.getNextSet(C[1]),m=n.getSize(),w,b;do{e.recordPattern(n,p,B);var R=e.toNarrowWidePattern(B);if(R<0)throw new le;w=e.patternToChar(R),this.decodeRowResult+=w,b=p;try{for(var L=(i=void 0,zr(B)),X=L.next();!X.done;X=L.next()){var k=X.value;p+=k}}catch(c){i={error:c}}finally{try{X&&!X.done&&(o=L.return)&&o.call(L)}finally{if(i)throw i.error}}p=n.getNextSet(p)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var J=0;try{for(var re=zr(B),Z=re.next();!Z.done;Z=re.next()){var k=Z.value;J+=k}}catch(c){s={error:c}}finally{try{Z&&!Z.done&&(u=re.return)&&u.call(re)}finally{if(s)throw s.error}}var ce=p-b-J;if(p!==m&&ce*2<J)throw new le;if(this.usingCheckDigit){for(var ue=this.decodeRowResult.length-1,D=0,Se=0;Se<ue;Se++)D+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Se));if(this.decodeRowResult.charAt(ue)!==e.ALPHABET_STRING.charAt(D%43))throw new gt;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new le;var Ie;this.extendedMode?Ie=e.decodeExtended(this.decodeRowResult):Ie=this.decodeRowResult;var ke=(C[1]+C[0])/2,h=b+J/2;return new Ft(Ie,null,0,[new be(ke,r),new be(h,r)],Pe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var x=r.getSize(),i=r.getNextSet(0),o=0,s=i,u=!1,B=n.length,C=i;C<x;C++)if(r.get(C)!==u)n[o]++;else{if(o===B-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((C-s)/2)),s,!1))return[s,C];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,u=!u}throw new le},e.toNarrowWidePattern=function(r){var n,x,i=r.length,o=0,s;do{var u=2147483647;try{for(var B=(n=void 0,zr(r)),C=B.next();!C.done;C=B.next()){var p=C.value;p<u&&p>o&&(u=p)}}catch(R){n={error:R}}finally{try{C&&!C.done&&(x=B.return)&&x.call(B)}finally{if(n)throw n.error}}o=u,s=0;for(var m=0,w=0,b=0;b<i;b++){var p=r[b];p>o&&(w|=1<<i-1-b,s++,m+=p)}if(s===3){for(var b=0;b<i&&s>0;b++){var p=r[b];if(p>o&&(s--,p*2>=m))return-1}return w}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new le},e.decodeExtended=function(r){for(var n=r.length,x="",i=0;i<n;i++){var o=r.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(i+1),u="\0";switch(o){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new Fe;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new Fe;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="\x7F";else throw new Fe;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new Fe;break}x+=u,i++}else x+=o}return x},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(At),Ys=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sx=function(t){Ys(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,x){var i,o,s,u,B=this.findAsteriskPattern(n),C=n.getNextSet(B[1]),p=n.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var w,b;do{e.recordPattern(n,C,m);var R=this.toPattern(m);if(R<0)throw new le;w=this.patternToChar(R),this.decodeRowResult+=w,b=C;try{for(var L=(i=void 0,Kr(m)),X=L.next();!X.done;X=L.next()){var k=X.value;C+=k}}catch(Se){i={error:Se}}finally{try{X&&!X.done&&(o=L.return)&&o.call(L)}finally{if(i)throw i.error}}C=n.getNextSet(C)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var J=0;try{for(var re=Kr(m),Z=re.next();!Z.done;Z=re.next()){var k=Z.value;J+=k}}catch(Se){s={error:Se}}finally{try{Z&&!Z.done&&(u=re.return)&&u.call(re)}finally{if(s)throw s.error}}if(C===p||!n.get(C))throw new le;if(this.decodeRowResult.length<2)throw new le;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var ce=this.decodeExtended(this.decodeRowResult),ue=(B[1]+B[0])/2,D=b+J/2;return new Ft(ce,null,0,[new be(ue,r),new be(D,r)],Pe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),x=r.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=x,s=!1,u=i.length,B=0,C=x;C<n;C++)if(r.get(C)!==s)i[B]++;else{if(B===u-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,C]);o+=i[0]+i[1],i.copyWithin(0,2,2+B-1),i[B-1]=0,i[B]=0,B--}else B++;i[B]=1,s=!s}throw new le},e.prototype.toPattern=function(r){var n,x,i=0;try{for(var o=Kr(r),s=o.next();!s.done;s=o.next()){var u=s.value;i+=u}}catch(b){n={error:b}}finally{try{s&&!s.done&&(x=o.return)&&x.call(o)}finally{if(n)throw n.error}}for(var B=0,C=r.length,p=0;p<C;p++){var m=Math.round(r[p]*9/i);if(m<1||m>4)return-1;if((p&1)===0)for(var w=0;w<m;w++)B=B<<1|1;else B<<=m}return B},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new le},e.prototype.decodeExtended=function(r){for(var n=r.length,x="",i=0;i<n;i++){var o=r.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new Fe;var s=r.charAt(i+1),u="\0";switch(o){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new Fe;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new Fe;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u=String.fromCharCode(127);else throw new Fe;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new Fe;break}x+=u,i++}else x+=o}return x},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,x){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(r.charAt(s)),++i>x&&(i=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new gt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(At),zs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ks=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tx=function(t){zs(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,x){var i,o,s=this.decodeStart(n),u=this.decodeEnd(n),B=new Ue;e.decodeMiddle(n,s[1],u[0],B);var C=B.toString(),p=null;x!=null&&(p=x.get(nt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var m=C.length,w=!1,b=0;try{for(var R=Ks(p),L=R.next();!L.done;L=R.next()){var X=L.value;if(m===X){w=!0;break}X>b&&(b=X)}}catch(re){i={error:re}}finally{try{L&&!L.done&&(o=R.return)&&o.call(R)}finally{if(i)throw i.error}}if(!w&&m>b&&(w=!0),!w)throw new Fe;var k=[new be(s[1],r),new be(u[0],r)],J=new Ft(C,null,0,k,Pe.ITF,new Date().getTime());return J},e.decodeMiddle=function(r,n,x,i){var o=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),s.fill(0),u.fill(0);n<x;){At.recordPattern(r,n,o);for(var B=0;B<5;B++){var C=2*B;s[B]=o[C],u[B]=o[C+1]}var p=e.decodeDigit(s);i.append(p.toString()),p=this.decodeDigit(u),i.append(p.toString()),o.forEach(function(m){n+=m})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),x=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(x[1]-x[0])/4,this.validateQuietZone(r,x[0]),x},e.prototype.validateQuietZone=function(r,n){var x=this.narrowLineWidth*10;x=x<n?x:n;for(var i=n-1;x>0&&i>=0&&!r.get(i);i--)x--;if(x!==0)throw new le},e.skipWhiteSpace=function(r){var n=r.getSize(),x=r.getNextSet(0);if(x===n)throw new le;return x},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),x=void 0;try{x=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof le&&(x=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,x[0]);var i=x[0];return x[0]=r.getSize()-x[1],x[1]=r.getSize()-i,x}finally{r.reverse()}},e.findGuardPattern=function(r,n,x){var i=x.length,o=new Int32Array(i),s=r.getSize(),u=!1,B=0,C=n;o.fill(0);for(var p=n;p<s;p++)if(r.get(p)!==u)o[B]++;else{if(B===i-1){if(At.patternMatchVariance(o,x,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[C,p];C+=o[0]+o[1],et.arraycopy(o,2,o,0,B-1),o[B-1]=0,o[B]=0,B--}else B++;o[B]=1,u=!u}throw new le},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,x=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],u=At.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,x=o):u===n&&(x=-1)}if(x>=0)return x%10;throw new le},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(At),Zs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O0=function(t){Zs(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,x,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),x=e.findGuardPattern(r,i,!1,this.START_END_PATTERN,o);var s=x[0];i=x[1];var u=s-(i-s);u>=0&&(n=r.isRange(u,s,!1))}return x},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var x=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===x},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,x=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new Fe;x+=o}x*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new Fe;x+=o}return(1e3-x)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,x,i){return this.findGuardPattern(r,n,x,i,new Int32Array(i.length))},e.findGuardPattern=function(r,n,x,i,o){var s=r.getSize();n=x?r.getNextUnset(n):r.getNextSet(n);for(var u=0,B=n,C=i.length,p=x,m=n;m<s;m++)if(r.get(m)!==p)o[u]++;else{if(u===C-1){if(At.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([B,m]);B+=o[0]+o[1];for(var w=o.slice(2,o.length),b=0;b<u-1;b++)o[b]=w[b];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,p=!p}throw new le},e.decodeDigit=function(r,n,x,i){this.recordPattern(r,x,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,u=i.length,B=0;B<u;B++){var C=i[B],p=At.patternMatchVariance(n,C,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=B)}if(s>=0)return s;throw new le},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(At),Js=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$s=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var x=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,x),o=x.toString(),s=t.parseExtensionString(o),u=[new be((n[0]+n[1])/2,e),new be(i,e)],B=new Ft(o,null,0,u,Pe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&B.putAllMetadata(s),B},t.prototype.decodeMiddle=function(e,r,n){var x,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=r[1],B=0,C=0;C<5&&u<s;C++){var p=O0.decodeDigit(e,o,u,O0.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var m=(x=void 0,Js(o)),w=m.next();!w.done;w=m.next()){var b=w.value;u+=b}}catch(L){x={error:L}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(x)throw x.error}}p>=10&&(B|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==5)throw new le;var R=this.determineCheckDigit(B);if(t.extensionChecksum(n.toString())!==R)throw new le;return u},t.extensionChecksum=function(e){for(var r=e.length,n=0,x=r-2;x>=0;x-=2)n+=e.charAt(x).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(var x=r-1;x>=0;x-=2)n+=e.charAt(x).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new le},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[_t.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="\xA3";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),x=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return r+x+"."+o},t}(),qs=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qs=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var x=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,x),o=x.toString(),s=t.parseExtensionString(o),u=[new be((n[0]+n[1])/2,e),new be(i,e)],B=new Ft(o,null,0,u,Pe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&B.putAllMetadata(s),B},t.prototype.decodeMiddle=function(e,r,n){var x,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=r[1],B=0,C=0;C<2&&u<s;C++){var p=O0.decodeDigit(e,o,u,O0.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var m=(x=void 0,qs(o)),w=m.next();!w.done;w=m.next()){var b=w.value;u+=b}}catch(R){x={error:R}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(x)throw x.error}}p>=10&&(B|=1<<1-C),C!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==2)throw new le;if(parseInt(n.toString())%4!==B)throw new le;return u},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[_t.ISSUE_NUMBER,parseInt(e)]])},t}(),eE=function(){function t(){}return t.decodeRow=function(e,r,n){var x=O0.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new $s;return i.decodeRow(e,r,x)}catch{var o=new Qs;return o.decodeRow(e,r,x)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),tE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=function(t){tE(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var x=e.L_PATTERNS[n-10],i=new Int32Array(x.length),o=0;o<x.length;o++)i[o]=x[x.length-o-1];e.L_AND_G_PATTERNS[n]=i}return r}return e.prototype.decodeRow=function(r,n,x){var i=e.findStartGuardPattern(n),o=x==null?null:x.get(nt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new be((i[0]+i[1])/2,r);o.foundPossibleResultPoint(s)}var u=this.decodeMiddle(n,i,this.decodeRowStringBuffer),B=u.rowOffset,C=u.resultString;if(o!=null){var p=new be(B,r);o.foundPossibleResultPoint(p)}var m=e.decodeEnd(n,B);if(o!=null){var w=new be((m[0]+m[1])/2,r);o.foundPossibleResultPoint(w)}var b=m[1],R=b+(b-m[0]);if(R>=n.getSize()||!n.isRange(b,R,!1))throw new le;var L=C.toString();if(L.length<8)throw new Fe;if(!e.checkChecksum(L))throw new gt;var X=(i[1]+i[0])/2,k=(m[1]+m[0])/2,J=this.getBarcodeFormat(),re=[new be(X,r),new be(k,r)],Z=new Ft(L,null,0,re,J,new Date().getTime()),ce=0;try{var ue=eE.decodeRow(r,n,m[1]);Z.putMetadata(_t.UPC_EAN_EXTENSION,ue.getText()),Z.putAllMetadata(ue.getResultMetadata()),Z.addResultPoints(ue.getResultPoints()),ce=ue.getText().length}catch{}var D=x==null?null:x.get(nt.ALLOWED_EAN_EXTENSIONS);if(D!=null){var Se=!1;for(var Ie in D)if(ce.toString()===Ie){Se=!0;break}if(!Se)throw new le}return J===Pe.EAN_13||Pe.UPC_A,Z},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var x=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===x},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,x=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new Fe;x+=o}x*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new Fe;x+=o}return(1e3-x)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(O0),rE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ln=function(t){rE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,x){var i,o,s,u,B=this.decodeMiddleCounters;B[0]=0,B[1]=0,B[2]=0,B[3]=0;for(var C=r.getSize(),p=n[1],m=0,w=0;w<6&&p<C;w++){var b=ut.decodeDigit(r,B,p,ut.L_AND_G_PATTERNS);x+=String.fromCharCode("0".charCodeAt(0)+b%10);try{for(var R=(i=void 0,bx(B)),L=R.next();!L.done;L=R.next()){var X=L.value;p+=X}}catch(Z){i={error:Z}}finally{try{L&&!L.done&&(o=R.return)&&o.call(R)}finally{if(i)throw i.error}}b>=10&&(m|=1<<5-w)}x=e.determineFirstDigit(x,m);var k=ut.findGuardPattern(r,p,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0));p=k[1];for(var w=0;w<6&&p<C;w++){var b=ut.decodeDigit(r,B,p,ut.L_PATTERNS);x+=String.fromCharCode("0".charCodeAt(0)+b);try{for(var J=(s=void 0,bx(B)),re=J.next();!re.done;re=J.next()){var X=re.value;p+=X}}catch(ue){s={error:ue}}finally{try{re&&!re.done&&(u=J.return)&&u.call(J)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:x}},e.prototype.getBarcodeFormat=function(){return Pe.EAN_13},e.determineFirstDigit=function(r,n){for(var x=0;x<10;x++)if(n===this.FIRST_DIGIT_ENCODINGS[x])return r=String.fromCharCode("0".charCodeAt(0)+x)+r,r;throw new le},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ut),nE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ix=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ox=function(t){nE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,x){var i,o,s,u,B=this.decodeMiddleCounters;B[0]=0,B[1]=0,B[2]=0,B[3]=0;for(var C=r.getSize(),p=n[1],m=0;m<4&&p<C;m++){var w=ut.decodeDigit(r,B,p,ut.L_PATTERNS);x+=String.fromCharCode("0".charCodeAt(0)+w);try{for(var b=(i=void 0,Ix(B)),R=b.next();!R.done;R=b.next()){var L=R.value;p+=L}}catch(re){i={error:re}}finally{try{R&&!R.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}}var X=ut.findGuardPattern(r,p,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0));p=X[1];for(var m=0;m<4&&p<C;m++){var w=ut.decodeDigit(r,B,p,ut.L_PATTERNS);x+=String.fromCharCode("0".charCodeAt(0)+w);try{for(var k=(s=void 0,Ix(B)),J=k.next();!J.done;J=k.next()){var L=J.value;p+=L}}catch(ce){s={error:ce}}finally{try{J&&!J.done&&(u=k.return)&&u.call(k)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:x}},e.prototype.getBarcodeFormat=function(){return Pe.EAN_8},e}(ut),xE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rx=function(t){xE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new ln,r}return e.prototype.getBarcodeFormat=function(){return Pe.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,x){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,x))},e.prototype.decodeMiddle=function(r,n,x){return this.ean13Reader.decodeMiddle(r,n,x)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var x=new Ft(n.substring(1),null,null,r.getResultPoints(),Pe.UPC_A);return r.getResultMetadata()!=null&&x.putAllMetadata(r.getResultMetadata()),x}else throw new le},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ut),iE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Px=function(t){iE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,x){var i,o,s=this.decodeMiddleCounters.map(function(L){return L});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=r.getSize(),B=n[1],C=0,p=0;p<6&&B<u;p++){var m=e.decodeDigit(r,s,B,e.L_AND_G_PATTERNS);x+=String.fromCharCode("0".charCodeAt(0)+m%10);try{for(var w=(i=void 0,oE(s)),b=w.next();!b.done;b=w.next()){var R=b.value;B+=R}}catch(L){i={error:L}}finally{try{b&&!b.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}m>=10&&(C|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ue(x),C),B},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return ut.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var x=0;x<=1;x++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[x][i]){r.insert(0,"0"+x),r.append("0"+i);return}throw le.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Pe.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),x=new Ue;x.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:x.appendChars(n,0,2),x.append(i),x.append("0000"),x.appendChars(n,2,3);break;case 3:x.appendChars(n,0,3),x.append("00000"),x.appendChars(n,3,2);break;case 4:x.appendChars(n,0,4),x.append("00000"),x.append(n[4]);break;default:x.appendChars(n,0,5),x.append("0000"),x.append(i);break}return r.length>=8&&x.append(r.charAt(7)),x.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ut),aE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zr=function(t){aE(e,t);function e(r){var n=t.call(this)||this,x=r==null?null:r.get(nt.POSSIBLE_FORMATS),i=[];return x!=null&&(x.indexOf(Pe.EAN_13)>-1&&i.push(new ln),x.indexOf(Pe.UPC_A)>-1&&i.push(new Rx),x.indexOf(Pe.EAN_8)>-1&&i.push(new Ox),x.indexOf(Pe.UPC_E)>-1&&i.push(new Px)),i.length===0&&(i.push(new ln),i.push(new Rx),i.push(new Ox),i.push(new Px)),n.readers=i,n}return e.prototype.decodeRow=function(r,n,x){var i,o;try{for(var s=Mx(this.readers),u=s.next();!u.done;u=s.next()){var B=u.value;try{var C=B.decodeRow(r,n,x),p=C.getBarcodeFormat()===Pe.EAN_13&&C.getText().charAt(0)==="0",m=x==null?null:x.get(nt.POSSIBLE_FORMATS),w=m==null||m.includes(Pe.UPC_A);if(p&&w){var b=C.getRawBytes(),R=new Ft(C.getText().substring(1),b,b?b.length:null,C.getResultPoints(),Pe.UPC_A);return R.putAllMetadata(C.getResultMetadata()),R}return C}catch{}}}catch(L){i={error:L}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new le},e.prototype.reset=function(){var r,n;try{for(var x=Mx(this.readers),i=x.next();!i.done;i=x.next()){var o=i.value;o.reset()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}},e}(At),sE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EE=function(t){sE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,x){var i=this.getValidRowData(n);if(!i)throw new le;var o=this.codaBarDecodeRow(i.row);if(!o)throw new le;return new Ft(o,null,0,[new be(i.left,r),new be(i.right,r)],Pe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),x=n.indexOf(!0);if(x===-1)return null;var i=n.lastIndexOf(!0);if(i<=x)return null;n=n.slice(x,i+1);for(var o=[],s=n[0],u=1,B=1;B<n.length;B++)n[B]===s?u++:(s=n[B],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:x,right:i}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],x=Math.ceil(r.reduce(function(u,B){return(u+B)/2},0));r.length>0;){var i=r.splice(0,8).splice(0,7),o=i.map(function(u){return u<x?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(At),cE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A0=function(t){cE(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var x=0;x<n.length;x++)if(At.patternMatchVariance(r,n[x],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return x;throw new le},e.count=function(r){return He.sum(new Int32Array(r))},e.increment=function(r,n){for(var x=0,i=n[0],o=1;o<r.length;o++)n[o]>i&&(i=n[o],x=o);r[x]++},e.decrement=function(r,n){for(var x=0,i=n[0],o=1;o<r.length;o++)n[o]<i&&(i=n[o],x=o);r[x]--},e.isFinderPattern=function(r){var n,x,i=r[0]+r[1],o=i+r[2]+r[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,B=Number.MIN_SAFE_INTEGER;try{for(var C=lE(r),p=C.next();!p.done;p=C.next()){var m=p.value;m>B&&(B=m),m<u&&(u=m)}}catch(w){n={error:w}}finally{try{p&&!p.done&&(x=C.return)&&x.call(C)}finally{if(n)throw n.error}}return B<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(At),wr=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Ii=function(){function t(e,r,n,x,i){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new be(n,i)),this.resultPoints.push(new be(x,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),uE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T0=function(){function t(){}return t.getRSSvalue=function(e,r,n){var x,i,o=0;try{for(var s=uE(e),u=s.next();!u.done;u=s.next()){var B=u.value;o+=B}}catch(k){x={error:k}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(x)throw x.error}}for(var C=0,p=0,m=e.length,w=0;w<m-1;w++){var b=void 0;for(b=1,p|=1<<w;b<e[w];b++,p&=~(1<<w)){var R=t.combins(o-b-1,m-w-2);if(n&&p===0&&o-b-(m-w-1)>=m-w-1&&(R-=t.combins(o-b-(m-w),m-w-2)),m-w-1>1){for(var L=0,X=o-b-(m-w-2);X>r;X--)L+=t.combins(o-b-X-1,m-w-3);R-=L*(m-1-w)}else o-b>r&&R--;C+=R}o-=b}return C},t.combins=function(e,r){var n,x;e-r>r?(x=r,n=e-r):(x=e-r,n=r);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=x&&(i/=o,o++);for(;o<=x;)i/=o,o++;return i},t}(),hE=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,x=new Rt(n),i=0,o=e[0],s=o.getRightChar().getValue(),u=11;u>=0;--u)(s&1<<u)!==0&&x.set(i),i++;for(var u=1;u<e.length;++u){for(var B=e[u],C=B.getLeftChar().getValue(),p=11;p>=0;--p)(C&1<<p)!==0&&x.set(i),i++;if(B.getRightChar()!==null)for(var m=B.getRightChar().getValue(),p=11;p>=0;--p)(m&1<<p)!==0&&x.set(i),i++}return x},t}(),h0=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),On=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),fE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(t){fE(e,t);function e(r,n){var x=t.call(this,r)||this;return x.value=n,x}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(On),AE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f0=function(t){AE(e,t);function e(r,n,x){var i=t.call(this,r)||this;return x?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(On),BE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S0=function(t){BE(e,t);function e(r,n,x){var i=t.call(this,r)||this;if(n<0||n>10||x<0||x>10)throw new Fe;return i.firstDigit=n,i.secondDigit=x,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(On),hr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dE=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,x,i,o,s,u,B;if(!e)return null;if(e.length<2)throw new le;var C=e.substring(0,2);try{for(var p=hr(t.TWO_DIGIT_DATA_LENGTH),m=p.next();!m.done;m=p.next()){var w=m.value;if(w[0]===C)return w[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,w[2],e):t.processFixedAI(2,w[1],e)}}catch(ce){r={error:ce}}finally{try{m&&!m.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}if(e.length<3)throw new le;var b=e.substring(0,3);try{for(var R=hr(t.THREE_DIGIT_DATA_LENGTH),L=R.next();!L.done;L=R.next()){var w=L.value;if(w[0]===b)return w[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,w[2],e):t.processFixedAI(3,w[1],e)}}catch(ce){x={error:ce}}finally{try{L&&!L.done&&(i=R.return)&&i.call(R)}finally{if(x)throw x.error}}try{for(var X=hr(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),k=X.next();!k.done;k=X.next()){var w=k.value;if(w[0]===b)return w[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,w[2],e):t.processFixedAI(4,w[1],e)}}catch(ce){o={error:ce}}finally{try{k&&!k.done&&(s=X.return)&&s.call(X)}finally{if(o)throw o.error}}if(e.length<4)throw new le;var J=e.substring(0,4);try{for(var re=hr(t.FOUR_DIGIT_DATA_LENGTH),Z=re.next();!Z.done;Z=re.next()){var w=Z.value;if(w[0]===J)return w[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,w[2],e):t.processFixedAI(4,w[1],e)}}catch(ce){u={error:ce}}finally{try{Z&&!Z.done&&(B=re.return)&&B.call(re)}finally{if(u)throw u.error}}throw new le},t.processFixedAI=function(e,r,n){if(n.length<e)throw new le;var x=n.substring(0,e);if(n.length<e+r)throw new le;var i=n.substring(e,e+r),o=n.substring(e+r),s="("+x+")"+i,u=t.parseFieldsInGeneralPurpose(o);return u==null?s:s+u},t.processVariableAI=function(e,r,n){var x=n.substring(0,e),i;n.length<e+r?i=n.length:i=e+r;var o=n.substring(e,i),s=n.substring(i),u="("+x+")"+o,B=t.parseFieldsInGeneralPurpose(s);return B==null?u:u+B},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),vr=function(){function t(e){this.buffer=new Ue,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,x=null;do{var i=this.decodeGeneralPurposeField(n,x),o=dE.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?x=""+i.getRemainingValue():x=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new S0(this.information.getSize(),S0.FNC1,S0.FNC1):new S0(this.information.getSize(),r-1,S0.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),x=(n-8)/11,i=(n-8)%11;return new S0(e+7,x,i)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var x=0,i=0;i<n;++i)e.get(r+i)&&(x|=1<<n-i-1);return x},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new f0(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new f0(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var x=n!==this.current.getPosition();if(!x&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new f0(this.current.getPosition(),this.buffer.toString()):r=new f0(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new h0(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new f0(this.current.getPosition(),this.buffer.toString());return new h0(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new h0(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new f0(this.current.getPosition(),this.buffer.toString());return new h0(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new h0(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new f0(this.current.getPosition(),this.buffer.toString());return new h0(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new h0(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var x=this.extractNumericValueFromBitArray(e,8);return x>=232&&x<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Gt(e+5,Gt.FNC1);if(r>=5&&r<15)return new Gt(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Gt(e+7,""+(n+1));if(n>=90&&n<116)return new Gt(e+7,""+(n+7));var x=this.extractNumericValueFromBitArray(e,8),i;switch(x){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new Fe}return new Gt(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Gt(e+5,Gt.FNC1);if(r>=5&&r<15)return new Gt(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Gt(e+6,""+(n+33));var x;switch(n){case 58:x="*";break;case 59:x=",";break;case 60:x="-";break;case 61:x=".";break;case 62:x="/";break;default:throw new nr("Decoding invalid alphanumeric value: "+n)}return new Gt(e+6,x)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Oi=function(){function t(e){this.information=e,this.generalDecoder=new vr(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),gE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(t){gE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var x=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,x)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,x){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,x)},e.appendCheckDigit=function(r,n){for(var x=0,i=0;i<13;i++){var o=r.charAt(i+n).charCodeAt(0)-"0".charCodeAt(0);x+=(i&1)===0?3*o:o}x=10-x%10,x===10&&(x=0),r.append(x)},e.GTIN_SIZE=40,e}(Oi),vE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CE=function(t){vE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ue;r.append("(01)");var n=r.length(),x=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(x),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}(Wt),pE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_E=function(t){pE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ue;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(Oi),DE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cr=function(t){DE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,x){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,x);this.addWeightCode(r,i);for(var o=this.checkWeight(i),s=1e5,u=0;u<5;++u)o/s===0&&r.append("0"),s/=10;r.append(o)},e}(Wt),mE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ri=function(t){mE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Cr.GTIN_SIZE+e.WEIGHT_SIZE)throw new le;var r=new Ue;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Cr.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(Cr),FE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yE=function(t){FE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Ri),wE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SE=function(t){wE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Ri),TE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bE=function(t){TE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Wt.GTIN_SIZE)throw new le;var r=new Ue;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wt.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var x=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Wt.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(x.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}(Wt),IE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OE=function(t){IE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Wt.GTIN_SIZE)throw new le;var r=new Ue;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wt.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var x=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Wt.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);x/100===0&&r.append("0"),x/10===0&&r.append("0"),r.append(x);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Wt.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Wt),RE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i0=function(t){RE(e,t);function e(r,n,x){var i=t.call(this,r)||this;return i.dateCode=x,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new le;var r=new Ue;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var x=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(x!==38400){r.append("("),r.append(this.dateCode),r.append(")");var i=x%32;x/=32;var o=x%12+1;x/=12;var s=x;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),i/10===0&&r.append("0"),r.append(i)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Cr);function PE(t){try{if(t.get(1))return new CE(t);if(!t.get(2))return new _E(t);var e=vr.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new yE(t);case 5:return new SE(t)}var r=vr.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new bE(t);case 13:return new OE(t)}var n=vr.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new i0(t,"310","11");case 57:return new i0(t,"320","11");case 58:return new i0(t,"310","13");case 59:return new i0(t,"320","13");case 60:return new i0(t,"310","15");case 61:return new i0(t,"320","15");case 62:return new i0(t,"310","17");case 63:return new i0(t,"320","17")}}catch(x){throw console.log(x),new nr("unknown decoder: "+t)}}var Nx=function(){function t(e,r,n,x){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=x}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),ME=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(x,i){r.forEach(function(o){x.getLeftChar().getValue()===o.getLeftChar().getValue()&&x.getRightChar().getValue()===o.getRightChar().getValue()&&x.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),NE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LE=function(t){NE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,x){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var x=!1;!x;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof le){if(!this.pairs.length)throw new le;x=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(r,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new le},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(x){console.log(x)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var x,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var u=(x=void 0,o0(r)),B=u.next();!B.done;B=u.next()){var C=B.value;this.pairs.push(C.getPairs())}}catch(m){x={error:m}}finally{try{B&&!B.done&&(i=u.return)&&i.call(u)}finally{if(x)throw x.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(r);p.push(s);try{return this.checkRows(p,o+1)}catch(m){console.log(m)}}}throw new le},e.isValidSequence=function(r){var n,x;try{for(var i=o0(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(r.length>s.length)){for(var u=!0,B=0;B<r.length;B++)if(r[B].getFinderPattern().getValue()!==s[B]){u=!1;break}if(u)return!0}}}catch(C){n={error:C}}finally{try{o&&!o.done&&(x=i.return)&&x.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var x=0,i=!1,o=!1;x<this.rows.length;){var s=this.rows[x];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),x++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(x,new ME(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var x,i,o,s,u,B;try{for(var C=o0(n),p=C.next();!p.done;p=C.next()){var m=p.value;if(m.getPairs().length!==r.length){var w=!0;try{for(var b=(o=void 0,o0(m.getPairs())),R=b.next();!R.done;R=b.next()){var L=R.value,X=!1;try{for(var k=(u=void 0,o0(r)),J=k.next();!J.done;J=k.next()){var re=J.value;if(Nx.equals(L,re)){X=!0;break}}}catch(Z){u={error:Z}}finally{try{J&&!J.done&&(B=k.return)&&B.call(k)}finally{if(u)throw u.error}}X||(w=!1)}}catch(Z){o={error:Z}}finally{try{R&&!R.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}}catch(Z){x={error:Z}}finally{try{p&&!p.done&&(i=C.return)&&i.call(C)}finally{if(x)throw x.error}}},e.isPartialRow=function(r,n){var x,i,o,s,u,B;try{for(var C=o0(n),p=C.next();!p.done;p=C.next()){var m=p.value,w=!0;try{for(var b=(o=void 0,o0(r)),R=b.next();!R.done;R=b.next()){var L=R.value,X=!1;try{for(var k=(u=void 0,o0(m.getPairs())),J=k.next();!J.done;J=k.next()){var re=J.value;if(L.equals(re)){X=!0;break}}}catch(Z){u={error:Z}}finally{try{J&&!J.done&&(B=k.return)&&B.call(k)}finally{if(u)throw u.error}}if(!X){w=!1;break}}}catch(Z){o={error:Z}}finally{try{R&&!R.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}if(w)return!0}}catch(Z){x={error:Z}}finally{try{p&&!p.done&&(i=C.return)&&i.call(C)}finally{if(x)throw x.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=hE.buildBitArray(r),x=PE(n),i=x.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],s[0],s[1]];return new Ft(i,null,null,u,Pe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),x=r.getRightChar();if(x===null)return!1;for(var i=x.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);i+=u.getLeftChar().getChecksumPortion(),o++;var B=u.getRightChar();B!=null&&(i+=B.getChecksumPortion(),o++)}i%=211;var C=211*(o-4)+i;return C===n.getValue()},e.getNextSecondBar=function(r,n){var x;return r.get(n)?(x=r.getNextUnset(n),x=r.getNextSet(x)):(x=r.getNextSet(n),x=r.getNextUnset(x)),x},e.prototype.retrieveNextPair=function(r,n,x){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,u=-1;do this.findNextPair(r,n,u),o=this.parseFoundFinderPattern(r,x,i),o===null?u=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var B=this.decodeDataCharacter(r,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new le;var C;try{C=this.decodeDataCharacter(r,o,i,!1)}catch(p){C=null,console.log(p)}return new Nx(B,C,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,x){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=r.getSize(),s;if(x>=0)s=x;else if(this.isEmptyPair(n))s=0;else{var u=n[n.length-1];s=u.getFinderPattern().getStartEnd()[1]}var B=n.length%2!==0;this.startFromEven&&(B=!B);for(var C=!1;s<o&&(C=!r.get(s),!!C);)s++;for(var p=0,m=s,w=s;w<o;w++)if(r.get(w)!==C)i[p]++;else{if(p===3){if(B&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=m,this.startEnd[1]=w;return}B&&e.reverseCounters(i),m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,p--}else p++;i[p]=1,C=!C}throw new le},e.reverseCounters=function(r){for(var n=r.length,x=0;x<n/2;++x){var i=r[x];r[x]=r[n-x-1],r[n-x-1]=i}},e.prototype.parseFoundFinderPattern=function(r,n,x){var i,o,s;if(x){for(var u=this.startEnd[0]-1;u>=0&&!r.get(u);)u--;u++,i=this.startEnd[0]-u,o=u,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var B=this.getDecodeFinderCounters();et.arraycopy(B,0,B,1,B.length-1),B[0]=i;var C;try{C=this.parseFinderValue(B,e.FINDER_PATTERNS)}catch{return null}return new Ii(C,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,x,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var u=0,B=o.length-1;u<B;u++,B--){var C=o[u];o[u]=o[B],o[B]=C}}var p=17,m=He.sum(new Int32Array(o))/p,w=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(m-w)/w>.3)throw new le;for(var b=this.getOddCounts(),R=this.getEvenCounts(),L=this.getOddRoundingErrors(),X=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var k=1*o[u]/m,J=k+.5;if(J<1){if(k<.3)throw new le;J=1}else if(J>8){if(k>8.7)throw new le;J=8}var re=u/2;(u&1)===0?(b[re]=J,L[re]=k-J):(R[re]=J,X[re]=k-J)}this.adjustOddEvenCounts(p);for(var Z=4*n.getValue()+(x?0:2)+(i?0:1)-1,ce=0,ue=0,u=b.length-1;u>=0;u--){if(e.isNotA1left(n,x,i)){var D=e.WEIGHTS[Z][2*u];ue+=b[u]*D}ce+=b[u]}for(var Se=0,u=R.length-1;u>=0;u--)if(e.isNotA1left(n,x,i)){var D=e.WEIGHTS[Z][2*u+1];Se+=R[u]*D}var Ie=ue+Se;if((ce&1)!==0||ce>13||ce<4)throw new le;var ke=(13-ce)/2,h=e.SYMBOL_WIDEST[ke],c=9-h,l=T0.getRSSvalue(b,h,!0),A=T0.getRSSvalue(R,c,!1),a=e.EVEN_TOTAL_SUBSET[ke],E=e.GSUM[ke],f=l*a+A+E;return new wr(f,Ie)},e.isNotA1left=function(r,n,x){return!(r.getValue()===0&&n&&x)},e.prototype.adjustOddEvenCounts=function(r){var n=He.sum(new Int32Array(this.getOddCounts())),x=He.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,u=!1;x>13?u=!0:x<4&&(s=!0);var B=n+x-r,C=(n&1)===1,p=(x&1)===0;if(B===1)if(C){if(p)throw new le;o=!0}else{if(!p)throw new le;u=!0}else if(B===-1)if(C){if(p)throw new le;i=!0}else{if(!p)throw new le;s=!0}else if(B===0){if(C){if(!p)throw new le;n<x?(i=!0,u=!0):(o=!0,s=!0)}else if(p)throw new le}else throw new le;if(i){if(o)throw new le;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new le;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(A0),kE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UE=function(t){kE(e,t);function e(r,n,x){var i=t.call(this,r,n)||this;return i.count=0,i.finderPattern=x,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(wr),jE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lx=function(t){jE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,x){var i,o,s,u,B=this.decodePair(n,!1,r,x);e.addOrTally(this.possibleLeftPairs,B),n.reverse();var C=this.decodePair(n,!0,r,x);e.addOrTally(this.possibleRightPairs,C),n.reverse();try{for(var p=Jr(this.possibleLeftPairs),m=p.next();!m.done;m=p.next()){var w=m.value;if(w.getCount()>1)try{for(var b=(s=void 0,Jr(this.possibleRightPairs)),R=b.next();!R.done;R=b.next()){var L=R.value;if(L.getCount()>1&&e.checkChecksum(w,L))return e.constructResult(w,L)}}catch(X){s={error:X}}finally{try{R&&!R.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}}}catch(X){i={error:X}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}throw new le},e.addOrTally=function(r,n){var x,i;if(n!=null){var o=!1;try{for(var s=Jr(r),u=s.next();!u.done;u=s.next()){var B=u.value;if(B.getValue()===n.getValue()){B.incrementCount(),o=!0;break}}}catch(C){x={error:C}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(x)throw x.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var x=4537077*r.getValue()+n.getValue(),i=new String(x).toString(),o=new Ue,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var u=0,s=0;s<13;s++){var B=o.charAt(s).charCodeAt(0)-"0".charCodeAt(0);u+=(s&1)===0?3*B:B}u=10-u%10,u===10&&(u=0),o.append(u.toString());var C=r.getFinderPattern().getResultPoints(),p=n.getFinderPattern().getResultPoints();return new Ft(o.toString(),null,0,[C[0],C[1],p[0],p[1]],Pe.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var x=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,x===i},e.prototype.decodePair=function(r,n,x,i){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,x,n,o),u=i==null?null:i.get(nt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var B=(o[0]+o[1])/2;n&&(B=r.getSize()-1-B),u.foundPossibleResultPoint(new be(B,x))}var C=this.decodeDataCharacter(r,s,!0),p=this.decodeDataCharacter(r,s,!1);return new UE(1597*C.getValue()+p.getValue(),C.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,x){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(x)At.recordPatternInReverse(r,n.getStartEnd()[0],i);else{At.recordPattern(r,n.getStartEnd()[1]+1,i);for(var s=0,u=i.length-1;s<u;s++,u--){var B=i[s];i[s]=i[u],i[u]=B}}for(var C=x?16:15,p=He.sum(new Int32Array(i))/C,m=this.getOddCounts(),w=this.getEvenCounts(),b=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var L=i[s]/p,X=Math.floor(L+.5);X<1?X=1:X>8&&(X=8);var k=Math.floor(s/2);(s&1)===0?(m[k]=X,b[k]=L-X):(w[k]=X,R[k]=L-X)}this.adjustOddEvenCounts(x,C);for(var J=0,re=0,s=m.length-1;s>=0;s--)re*=9,re+=m[s],J+=m[s];for(var Z=0,ce=0,s=w.length-1;s>=0;s--)Z*=9,Z+=w[s],ce+=w[s];var ue=re+3*Z;if(x){if((J&1)!==0||J>12||J<4)throw new le;var D=(12-J)/2,Se=e.OUTSIDE_ODD_WIDEST[D],Ie=9-Se,ke=T0.getRSSvalue(m,Se,!1),h=T0.getRSSvalue(w,Ie,!0),c=e.OUTSIDE_EVEN_TOTAL_SUBSET[D],l=e.OUTSIDE_GSUM[D];return new wr(ke*c+h+l,ue)}else{if((ce&1)!==0||ce>10||ce<4)throw new le;var D=(10-ce)/2,Se=e.INSIDE_ODD_WIDEST[D],Ie=9-Se,ke=T0.getRSSvalue(m,Se,!0),h=T0.getRSSvalue(w,Ie,!1),A=e.INSIDE_ODD_TOTAL_SUBSET[D],l=e.INSIDE_GSUM[D];return new wr(h*A+ke+l,ue)}},e.prototype.findFinderPattern=function(r,n){var x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;for(var i=r.getSize(),o=!1,s=0;s<i&&(o=!r.get(s),n!==o);)s++;for(var u=0,B=s,C=s;C<i;C++)if(r.get(C)!==o)x[u]++;else{if(u===3){if(A0.isFinderPattern(x))return[B,C];B+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,u--}else u++;x[u]=1,o=!o}throw new le},e.prototype.parseFoundFinderPattern=function(r,n,x,i){for(var o=r.get(i[0]),s=i[0]-1;s>=0&&o!==r.get(s);)s--;s++;var u=i[0]-s,B=this.getDecodeFinderCounters(),C=new Int32Array(B.length);et.arraycopy(B,0,C,1,B.length-1),C[0]=u;var p=this.parseFinderValue(C,e.FINDER_PATTERNS),m=s,w=i[1];return x&&(m=r.getSize()-1-m,w=r.getSize()-1-w),new Ii(p,[s,i[1]],m,w,n)},e.prototype.adjustOddEvenCounts=function(r,n){var x=He.sum(new Int32Array(this.getOddCounts())),i=He.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,u=!1,B=!1;r?(x>12?s=!0:x<4&&(o=!0),i>12?B=!0:i<4&&(u=!0)):(x>11?s=!0:x<5&&(o=!0),i>10?B=!0:i<4&&(u=!0));var C=x+i-n,p=(x&1)===(r?1:0),m=(i&1)===1;if(C===1)if(p){if(m)throw new le;s=!0}else{if(!m)throw new le;B=!0}else if(C===-1)if(p){if(m)throw new le;o=!0}else{if(!m)throw new le;u=!0}else if(C===0){if(p){if(!m)throw new le;x<i?(o=!0,B=!0):(s=!0,u=!0)}else if(m)throw new le}else throw new le;if(o){if(s)throw new le;A0.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&A0.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(B)throw new le;A0.increment(this.getEvenCounts(),this.getOddRoundingErrors())}B&&A0.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(A0),VE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W0=function(t){VE(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var x=r?r.get(nt.POSSIBLE_FORMATS):null,i=r&&r.get(nt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return x&&((x.includes(Pe.EAN_13)||x.includes(Pe.UPC_A)||x.includes(Pe.EAN_8)||x.includes(Pe.UPC_E))&&n.readers.push(new Zr(r)),x.includes(Pe.CODE_39)&&n.readers.push(new wx(i)),x.includes(Pe.CODE_93)&&n.readers.push(new Sx),x.includes(Pe.CODE_128)&&n.readers.push(new yx),x.includes(Pe.ITF)&&n.readers.push(new Tx),x.includes(Pe.CODABAR)&&n.readers.push(new EE),x.includes(Pe.RSS_14)&&n.readers.push(new Lx),x.includes(Pe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new LE))),n.readers.length===0&&(n.readers.push(new Zr(r)),n.readers.push(new wx),n.readers.push(new Sx),n.readers.push(new Zr(r)),n.readers.push(new yx),n.readers.push(new Tx),n.readers.push(new Lx)),n}return e.prototype.decodeRow=function(r,n,x){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(r,n,x)}catch{}throw new le},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(At),GE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){GE(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new W0(n),r,n)||this}return e})(P0);var kx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ze=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),We=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),HE=function(){function t(e,r,n,x,i,o){var s,u;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=x,this.dataRegionSizeColumns=i,this.ecBlocks=o;var B=0,C=o.getECCodewords(),p=o.getECBlocks();try{for(var m=kx(p),w=m.next();!w.done;w=m.next()){var b=w.value;B+=b.getCount()*(b.getDataCodewords()+C)}}catch(R){s={error:R}}finally{try{w&&!w.done&&(u=m.return)&&u.call(m)}finally{if(s)throw s.error}}this.totalCodewords=B}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,x;if((e&1)!==0||(r&1)!==0)throw new Fe;try{for(var i=kx(t.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(u){n={error:u}}finally{try{o&&!o.done&&(x=i.return)&&x.call(i)}finally{if(n)throw n.error}}throw new Fe},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ze(5,new We(1,3))),new t(2,12,12,10,10,new ze(7,new We(1,5))),new t(3,14,14,12,12,new ze(10,new We(1,8))),new t(4,16,16,14,14,new ze(12,new We(1,12))),new t(5,18,18,16,16,new ze(14,new We(1,18))),new t(6,20,20,18,18,new ze(18,new We(1,22))),new t(7,22,22,20,20,new ze(20,new We(1,30))),new t(8,24,24,22,22,new ze(24,new We(1,36))),new t(9,26,26,24,24,new ze(28,new We(1,44))),new t(10,32,32,14,14,new ze(36,new We(1,62))),new t(11,36,36,16,16,new ze(42,new We(1,86))),new t(12,40,40,18,18,new ze(48,new We(1,114))),new t(13,44,44,20,20,new ze(56,new We(1,144))),new t(14,48,48,22,22,new ze(68,new We(1,174))),new t(15,52,52,24,24,new ze(42,new We(2,102))),new t(16,64,64,14,14,new ze(56,new We(2,140))),new t(17,72,72,16,16,new ze(36,new We(4,92))),new t(18,80,80,18,18,new ze(48,new We(4,114))),new t(19,88,88,20,20,new ze(56,new We(4,144))),new t(20,96,96,22,22,new ze(68,new We(4,174))),new t(21,104,104,24,24,new ze(56,new We(6,136))),new t(22,120,120,18,18,new ze(68,new We(6,175))),new t(23,132,132,20,20,new ze(62,new We(8,163))),new t(24,144,144,22,22,new ze(62,new We(8,156),new We(2,155))),new t(25,8,18,6,16,new ze(7,new We(1,5))),new t(26,8,32,6,14,new ze(11,new We(1,10))),new t(27,12,26,10,24,new ze(14,new We(1,16))),new t(28,12,36,10,16,new ze(18,new We(1,22))),new t(29,16,36,14,16,new ze(24,new We(1,32))),new t(30,16,48,14,22,new ze(28,new We(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),WE=function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new Fe;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new n0(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return HE.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,x=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,u=!1,B=!1,C=!1;do if(n===i&&x===0&&!s)e[r++]=this.readCorner1(i,o)&255,n-=2,x+=2,s=!0;else if(n===i-2&&x===0&&(o&3)!==0&&!u)e[r++]=this.readCorner2(i,o)&255,n-=2,x+=2,u=!0;else if(n===i+4&&x===2&&(o&7)===0&&!B)e[r++]=this.readCorner3(i,o)&255,n-=2,x+=2,B=!0;else if(n===i-2&&x===0&&(o&7)===4&&!C)e[r++]=this.readCorner4(i,o)&255,n-=2,x+=2,C=!0;else{do n<i&&x>=0&&!this.readMappingMatrix.get(x,n)&&(e[r++]=this.readUtah(n,x,i,o)&255),n-=2,x+=2;while(n>=0&&x<o);n+=1,x+=3;do n>=0&&x<o&&!this.readMappingMatrix.get(x,n)&&(e[r++]=this.readUtah(n,x,i,o)&255),n+=2,x-=2;while(n<i&&x>=0);n+=3,x+=1}while(n<i||x<o);if(r!==this.version.getTotalCodewords())throw new Fe;return e},t.prototype.readModule=function(e,r,n,x){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=x,e+=4-(x+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,x){var i=0;return this.readModule(e-2,r-2,n,x)&&(i|=1),i<<=1,this.readModule(e-2,r-1,n,x)&&(i|=1),i<<=1,this.readModule(e-1,r-2,n,x)&&(i|=1),i<<=1,this.readModule(e-1,r-1,n,x)&&(i|=1),i<<=1,this.readModule(e-1,r,n,x)&&(i|=1),i<<=1,this.readModule(e,r-2,n,x)&&(i|=1),i<<=1,this.readModule(e,r-1,n,x)&&(i|=1),i<<=1,this.readModule(e,r,n,x)&&(i|=1),i},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Me("Dimension of bitMatrix must match the version size");for(var x=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=r/x|0,s=n/i|0,u=o*x,B=s*i,C=new n0(B,u),p=0;p<o;++p)for(var m=p*x,w=0;w<s;++w)for(var b=w*i,R=0;R<x;++R)for(var L=p*(x+2)+1+R,X=m+R,k=0;k<i;++k){var J=w*(i+2)+1+k;if(e.get(J,L)){var re=b+k;C.set(re,X)}}return C},t}(),Ux=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XE=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,x,i,o,s=r.getECBlocks(),u=0,B=s.getECBlocks();try{for(var C=Ux(B),p=C.next();!p.done;p=C.next()){var m=p.value;u+=m.getCount()}}catch(l){n={error:l}}finally{try{p&&!p.done&&(x=C.return)&&x.call(C)}finally{if(n)throw n.error}}var w=new Array(u),b=0;try{for(var R=Ux(B),L=R.next();!L.done;L=R.next())for(var m=L.value,X=0;X<m.getCount();X++){var k=m.getDataCodewords(),J=s.getECCodewords()+k;w[b++]=new t(k,new Uint8Array(J))}}catch(l){i={error:l}}finally{try{L&&!L.done&&(o=R.return)&&o.call(R)}finally{if(i)throw i.error}}for(var re=w[0].codewords.length,Z=re-s.getECCodewords(),ce=Z-1,ue=0,X=0;X<ce;X++)for(var D=0;D<b;D++)w[D].codewords[X]=e[ue++];for(var Se=r.getVersionNumber()===24,Ie=Se?8:b,D=0;D<Ie;D++)w[D].codewords[Z-1]=e[ue++];for(var ke=w[0].codewords.length,X=Z;X<ke;X++)for(var D=0;D<b;D++){var h=Se?(D+8)%b:D,c=Se&&h>7?X-1:X;w[h].codewords[c]=e[ue++]}if(ue!==e.length)throw new Me;return w},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Pi=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Me(""+e);var r=0,n=this.bitOffset,x=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,u=o-s,B=255>>8-s<<u;r=(i[x]&B)>>u,e-=s,n+=s,n===8&&(n=0,x++)}if(e>0){for(;e>=8;)r=r<<8|i[x]&255,x++,e-=8;if(e>0){var u=8-e,B=255>>u<<u;r=r<<e|(i[x]&B)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=x,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),ct;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(ct||(ct={}));var YE=function(){function t(){}return t.decode=function(e){var r=new Pi(e),n=new Ue,x=new Ue,i=new Array,o=ct.ASCII_ENCODE;do if(o===ct.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,x);else{switch(o){case ct.C40_ENCODE:this.decodeC40Segment(r,n);break;case ct.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case ct.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case ct.BASE256_ENCODE:this.decodeBase256Segment(r,n,i);break;default:throw new Fe}o=ct.ASCII_ENCODE}while(o!==ct.PAD_ENCODE&&r.available()>0);return x.length()>0&&n.append(x.toString()),new Lr(e,n.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,r,n){var x=!1;do{var i=e.readBits(8);if(i===0)throw new Fe;if(i<=128)return x&&(i+=128),r.append(String.fromCharCode(i-1)),ct.ASCII_ENCODE;if(i===129)return ct.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&r.append("0"),r.append(""+o)}else switch(i){case 230:return ct.C40_ENCODE;case 231:return ct.BASE256_ENCODE;case 232:r.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:x=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return ct.ANSIX12_ENCODE;case 239:return ct.TEXT_ENCODE;case 240:return ct.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new Fe;break}}while(e.available()>0);return ct.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,x=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),x);for(var s=0;s<3;s++){var u=x[s];switch(i){case 0:if(u<3)i=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var B=this.C40_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(B.charCodeAt(0)+128)),n=!1):r.append(B)}else throw new Fe;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var B=this.C40_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(B.charCodeAt(0)+128)),n=!1):r.append(B)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new Fe}i=0;break;case 3:n?(r.append(String.fromCharCode(u+224)),n=!1):r.append(String.fromCharCode(u+96)),i=0;break;default:throw new Fe}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,x=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),x);for(var s=0;s<3;s++){var u=x[s];switch(i){case 0:if(u<3)i=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var B=this.TEXT_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(B.charCodeAt(0)+128)),n=!1):r.append(B)}else throw new Fe;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var B=this.TEXT_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(B.charCodeAt(0)+128)),n=!1):r.append(B)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new Fe}i=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var B=this.TEXT_SHIFT3_SET_CHARS[u];n?(r.append(String.fromCharCode(B.charCodeAt(0)+128)),n=!1):r.append(B),i=0}else throw new Fe;break;default:throw new Fe}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var x=e.readBits(8);if(x===254)return;this.parseTwoBytes(x,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Fe;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var x=(e<<8)+r-1,i=Math.floor(x/1600);n[0]=i,x-=i*1600,i=Math.floor(x/40),n[1]=i,n[2]=x-i*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var x=e.readBits(6);if(x===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(x&32)===0&&(x|=64),r.append(String.fromCharCode(x))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var x=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),x++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),x++),o<0)throw new Fe;for(var s=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new Fe;s[u]=this.unrandomize255State(e.readBits(8),x++)}n.push(s);try{r.append(jt.decode(s,Qe.ISO88591))}catch(B){throw new nr("Platform does not support required encoding: "+B.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,x=e-n;return x>=0?x:x+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),zE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KE=function(){function t(){this.rsDecoder=new kr(r0.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,x=new WE(e),i=x.getVersion(),o=x.readCodewords(),s=XE.getDataBlocks(o,i),u=0;try{for(var B=zE(s),C=B.next();!C.done;C=B.next()){var p=C.value;u+=p.getNumDataCodewords()}}catch(J){r={error:J}}finally{try{C&&!C.done&&(n=B.return)&&n.call(B)}finally{if(r)throw r.error}}for(var m=new Uint8Array(u),w=s.length,b=0;b<w;b++){var R=s[b],L=R.getCodewords(),X=R.getNumDataCodewords();this.correctErrors(L,X);for(var k=0;k<X;k++)m[k*w+b]=L[k]}return YE.decode(m)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new gt}for(var x=0;x<r;x++)e[x]=n[x]},t}(),ZE=function(){function t(e){this.image=e,this.rectangleDetector=new En(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new le;r=this.shiftToModuleCenter(r);var n=r[0],x=r[1],i=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,u=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var B=t.sampleGrid(this.image,n,x,i,o,s,u);return new bn(B,[n,x,i,o])},t.shiftPoint=function(e,r,n){var x=(r.getX()-e.getX())/(n+1),i=(r.getY()-e.getY())/(n+1);return new be(e.getX()+x,e.getY()+i)},t.moveAway=function(e,r,n){var x=e.getX(),i=e.getY();return x<r?x-=1:x+=1,i<n?i-=1:i+=1,new be(x,i)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],x=e[3],i=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,x),u=this.transitionsBetween(x,i),B=this.transitionsBetween(i,r),C=o,p=[i,r,n,x];return C>s&&(C=s,p[0]=r,p[1]=n,p[2]=x,p[3]=i),C>u&&(C=u,p[0]=n,p[1]=x,p[2]=i,p[3]=r),C>B&&(p[0]=x,p[1]=i,p[2]=r,p[3]=n),p},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],x=e[2],i=e[3],o=this.transitionsBetween(r,i),s=t.shiftPoint(n,x,(o+1)*4),u=t.shiftPoint(x,n,(o+1)*4),B=this.transitionsBetween(s,r),C=this.transitionsBetween(u,i);return B<C?(e[0]=r,e[1]=n,e[2]=x,e[3]=i):(e[0]=n,e[1]=x,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],x=e[2],i=e[3],o=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),u=t.shiftPoint(r,n,(s+1)*4),B=t.shiftPoint(x,n,(o+1)*4);o=this.transitionsBetween(u,i),s=this.transitionsBetween(B,i);var C=new be(i.getX()+(x.getX()-n.getX())/(o+1),i.getY()+(x.getY()-n.getY())/(o+1)),p=new be(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(C))return this.isValid(p)?p:null;if(!this.isValid(p))return C;var m=this.transitionsBetween(u,C)+this.transitionsBetween(B,C),w=this.transitionsBetween(u,p)+this.transitionsBetween(B,p);return m>w?C:p},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],x=e[2],i=e[3],o=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(x,i)+1,u=t.shiftPoint(r,n,s*4),B=t.shiftPoint(x,n,o*4);o=this.transitionsBetween(u,i)+1,s=this.transitionsBetween(B,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var C=(r.getX()+n.getX()+x.getX()+i.getX())/4,p=(r.getY()+n.getY()+x.getY()+i.getY())/4;r=t.moveAway(r,C,p),n=t.moveAway(n,C,p),x=t.moveAway(x,C,p),i=t.moveAway(i,C,p);var m,w;return u=t.shiftPoint(r,n,s*4),u=t.shiftPoint(u,i,o*4),m=t.shiftPoint(n,r,s*4),m=t.shiftPoint(m,x,o*4),B=t.shiftPoint(x,i,s*4),B=t.shiftPoint(B,n,o*4),w=t.shiftPoint(i,x,s*4),w=t.shiftPoint(w,r,o*4),[u,m,B,w]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,x,i,o,s){var u=In.getInstance();return u.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),i.getX(),i.getY(),x.getX(),x.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),x=Math.trunc(e.getY()),i=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-x)>Math.abs(i-n);if(s){var u=n;n=x,x=u,u=i,i=o,o=u}for(var B=Math.abs(i-n),C=Math.abs(o-x),p=-B/2,m=x<o?1:-1,w=n<i?1:-1,b=0,R=this.image.get(s?x:n,s?n:x),L=n,X=x;L!==i;L+=w){var k=this.image.get(s?X:L,s?L:X);if(k!==R&&(b++,R=k),p+=C,p>0){if(X===o)break;X+=m,p-=B}}return b},t}(),un=function(){function t(){this.decoder=new KE}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,x;if(r!=null&&r.has(nt.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),x=t.NO_POINTS}else{var o=new ZE(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),x=o.getPoints()}var s=n.getRawBytes(),u=new Ft(n.getText(),s,8*s.length,x,Pe.DATA_MATRIX,et.currentTimeMillis()),B=n.getByteSegments();B!=null&&u.putMetadata(_t.BYTE_SEGMENTS,B);var C=n.getECLevel();return C!=null&&u.putMetadata(_t.ERROR_CORRECTION_LEVEL,C),u},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new le;var x=this.moduleSize(r,e),i=r[1],o=n[1],s=r[0],u=n[0],B=(u-s+1)/x,C=(o-i+1)/x;if(B<=0||C<=0)throw new le;var p=x/2;i+=p,s+=p;for(var m=new n0(B,C),w=0;w<C;w++)for(var b=i+w*x,R=0;R<B;R++)e.get(s+R*x,b)&&m.set(R,w);return m},t.moduleSize=function(e,r){for(var n=r.getWidth(),x=e[0],i=e[1];x<n&&r.get(x,i);)x++;if(x===n)throw new le;var o=x-e[0];if(o===0)throw new le;return o},t.NO_POINTS=[],t}(),JE=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){JE(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new un,r)||this}return e})(P0);var b0;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(b0||(b0={}));var $E=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ht(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Me;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(b0.L,"L",1),t.M=new t(b0.M,"M",0),t.Q=new t(b0.Q,"Q",3),t.H=new t(b0.H,"H",2),t}(),qE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mi=function(){function t(e){this.errorCorrectionLevel=$E.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return at.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,x,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=qE(t.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var B=u.value,C=B[0];if(C===e||C===r)return new t(B[1]);var p=t.numBitsDiffering(e,C);p<i&&(o=B[1],i=p),e!==r&&(p=t.numBitsDiffering(r,C),p<i&&(o=B[1],i=p))}}catch(m){n={error:m}}finally{try{u&&!u.done&&(x=s.return)&&x.call(s)}finally{if(n)throw n.error}}return i<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),QE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,x=this.ecBlocks;try{for(var i=QE(x),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),P=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),ec=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p0=function(){function t(e,r){for(var n,x,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=i;var s=0,u=i[0].getECCodewordsPerBlock(),B=i[0].getECBlocks();try{for(var C=ec(B),p=C.next();!p.done;p=C.next()){var m=p.value;s+=m.getCount()*(m.getDataCodewords()+u)}}catch(w){n={error:w}}finally{try{p&&!p.done&&(x=C.return)&&x.call(C)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Fe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Fe}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Me;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,x=0;x<t.VERSION_DECODE_INFO.length;x++){var i=t.VERSION_DECODE_INFO[x];if(i===e)return t.getVersionForNumber(x+7);var o=Mi.numBitsDiffering(e,i);o<r&&(n=x+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new n0(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,x=0;x<n;x++)for(var i=this.alignmentPatternCenters[x]-2,o=0;o<n;o++)x===0&&(o===0||o===n-1)||x===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ne(7,new P(1,19)),new ne(10,new P(1,16)),new ne(13,new P(1,13)),new ne(17,new P(1,9))),new t(2,Int32Array.from([6,18]),new ne(10,new P(1,34)),new ne(16,new P(1,28)),new ne(22,new P(1,22)),new ne(28,new P(1,16))),new t(3,Int32Array.from([6,22]),new ne(15,new P(1,55)),new ne(26,new P(1,44)),new ne(18,new P(2,17)),new ne(22,new P(2,13))),new t(4,Int32Array.from([6,26]),new ne(20,new P(1,80)),new ne(18,new P(2,32)),new ne(26,new P(2,24)),new ne(16,new P(4,9))),new t(5,Int32Array.from([6,30]),new ne(26,new P(1,108)),new ne(24,new P(2,43)),new ne(18,new P(2,15),new P(2,16)),new ne(22,new P(2,11),new P(2,12))),new t(6,Int32Array.from([6,34]),new ne(18,new P(2,68)),new ne(16,new P(4,27)),new ne(24,new P(4,19)),new ne(28,new P(4,15))),new t(7,Int32Array.from([6,22,38]),new ne(20,new P(2,78)),new ne(18,new P(4,31)),new ne(18,new P(2,14),new P(4,15)),new ne(26,new P(4,13),new P(1,14))),new t(8,Int32Array.from([6,24,42]),new ne(24,new P(2,97)),new ne(22,new P(2,38),new P(2,39)),new ne(22,new P(4,18),new P(2,19)),new ne(26,new P(4,14),new P(2,15))),new t(9,Int32Array.from([6,26,46]),new ne(30,new P(2,116)),new ne(22,new P(3,36),new P(2,37)),new ne(20,new P(4,16),new P(4,17)),new ne(24,new P(4,12),new P(4,13))),new t(10,Int32Array.from([6,28,50]),new ne(18,new P(2,68),new P(2,69)),new ne(26,new P(4,43),new P(1,44)),new ne(24,new P(6,19),new P(2,20)),new ne(28,new P(6,15),new P(2,16))),new t(11,Int32Array.from([6,30,54]),new ne(20,new P(4,81)),new ne(30,new P(1,50),new P(4,51)),new ne(28,new P(4,22),new P(4,23)),new ne(24,new P(3,12),new P(8,13))),new t(12,Int32Array.from([6,32,58]),new ne(24,new P(2,92),new P(2,93)),new ne(22,new P(6,36),new P(2,37)),new ne(26,new P(4,20),new P(6,21)),new ne(28,new P(7,14),new P(4,15))),new t(13,Int32Array.from([6,34,62]),new ne(26,new P(4,107)),new ne(22,new P(8,37),new P(1,38)),new ne(24,new P(8,20),new P(4,21)),new ne(22,new P(12,11),new P(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ne(30,new P(3,115),new P(1,116)),new ne(24,new P(4,40),new P(5,41)),new ne(20,new P(11,16),new P(5,17)),new ne(24,new P(11,12),new P(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ne(22,new P(5,87),new P(1,88)),new ne(24,new P(5,41),new P(5,42)),new ne(30,new P(5,24),new P(7,25)),new ne(24,new P(11,12),new P(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ne(24,new P(5,98),new P(1,99)),new ne(28,new P(7,45),new P(3,46)),new ne(24,new P(15,19),new P(2,20)),new ne(30,new P(3,15),new P(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ne(28,new P(1,107),new P(5,108)),new ne(28,new P(10,46),new P(1,47)),new ne(28,new P(1,22),new P(15,23)),new ne(28,new P(2,14),new P(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ne(30,new P(5,120),new P(1,121)),new ne(26,new P(9,43),new P(4,44)),new ne(28,new P(17,22),new P(1,23)),new ne(28,new P(2,14),new P(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ne(28,new P(3,113),new P(4,114)),new ne(26,new P(3,44),new P(11,45)),new ne(26,new P(17,21),new P(4,22)),new ne(26,new P(9,13),new P(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ne(28,new P(3,107),new P(5,108)),new ne(26,new P(3,41),new P(13,42)),new ne(30,new P(15,24),new P(5,25)),new ne(28,new P(15,15),new P(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ne(28,new P(4,116),new P(4,117)),new ne(26,new P(17,42)),new ne(28,new P(17,22),new P(6,23)),new ne(30,new P(19,16),new P(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ne(28,new P(2,111),new P(7,112)),new ne(28,new P(17,46)),new ne(30,new P(7,24),new P(16,25)),new ne(24,new P(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ne(30,new P(4,121),new P(5,122)),new ne(28,new P(4,47),new P(14,48)),new ne(30,new P(11,24),new P(14,25)),new ne(30,new P(16,15),new P(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ne(30,new P(6,117),new P(4,118)),new ne(28,new P(6,45),new P(14,46)),new ne(30,new P(11,24),new P(16,25)),new ne(30,new P(30,16),new P(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ne(26,new P(8,106),new P(4,107)),new ne(28,new P(8,47),new P(13,48)),new ne(30,new P(7,24),new P(22,25)),new ne(30,new P(22,15),new P(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ne(28,new P(10,114),new P(2,115)),new ne(28,new P(19,46),new P(4,47)),new ne(28,new P(28,22),new P(6,23)),new ne(30,new P(33,16),new P(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ne(30,new P(8,122),new P(4,123)),new ne(28,new P(22,45),new P(3,46)),new ne(30,new P(8,23),new P(26,24)),new ne(30,new P(12,15),new P(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ne(30,new P(3,117),new P(10,118)),new ne(28,new P(3,45),new P(23,46)),new ne(30,new P(4,24),new P(31,25)),new ne(30,new P(11,15),new P(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ne(30,new P(7,116),new P(7,117)),new ne(28,new P(21,45),new P(7,46)),new ne(30,new P(1,23),new P(37,24)),new ne(30,new P(19,15),new P(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ne(30,new P(5,115),new P(10,116)),new ne(28,new P(19,47),new P(10,48)),new ne(30,new P(15,24),new P(25,25)),new ne(30,new P(23,15),new P(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ne(30,new P(13,115),new P(3,116)),new ne(28,new P(2,46),new P(29,47)),new ne(30,new P(42,24),new P(1,25)),new ne(30,new P(23,15),new P(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ne(30,new P(17,115)),new ne(28,new P(10,46),new P(23,47)),new ne(30,new P(10,24),new P(35,25)),new ne(30,new P(19,15),new P(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ne(30,new P(17,115),new P(1,116)),new ne(28,new P(14,46),new P(21,47)),new ne(30,new P(29,24),new P(19,25)),new ne(30,new P(11,15),new P(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ne(30,new P(13,115),new P(6,116)),new ne(28,new P(14,46),new P(23,47)),new ne(30,new P(44,24),new P(7,25)),new ne(30,new P(59,16),new P(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ne(30,new P(12,121),new P(7,122)),new ne(28,new P(12,47),new P(26,48)),new ne(30,new P(39,24),new P(14,25)),new ne(30,new P(22,15),new P(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ne(30,new P(6,121),new P(14,122)),new ne(28,new P(6,47),new P(34,48)),new ne(30,new P(46,24),new P(10,25)),new ne(30,new P(2,15),new P(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ne(30,new P(17,122),new P(4,123)),new ne(28,new P(29,46),new P(14,47)),new ne(30,new P(49,24),new P(10,25)),new ne(30,new P(24,15),new P(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ne(30,new P(4,122),new P(18,123)),new ne(28,new P(13,46),new P(32,47)),new ne(30,new P(48,24),new P(14,25)),new ne(30,new P(42,15),new P(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ne(30,new P(20,117),new P(4,118)),new ne(28,new P(40,47),new P(7,48)),new ne(30,new P(43,24),new P(22,25)),new ne(30,new P(10,15),new P(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ne(30,new P(19,118),new P(6,119)),new ne(28,new P(18,47),new P(31,48)),new ne(30,new P(34,24),new P(34,25)),new ne(30,new P(20,15),new P(61,16)))],t}(),Bt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Bt||(Bt={}));var jx=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var x=0;x<r;x++)this.isMasked(n,x)&&e.flip(x,n)},t.values=new Map([[Bt.DATA_MASK_000,new t(Bt.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Bt.DATA_MASK_001,new t(Bt.DATA_MASK_001,function(e,r){return(e&1)===0})],[Bt.DATA_MASK_010,new t(Bt.DATA_MASK_010,function(e,r){return r%3===0})],[Bt.DATA_MASK_011,new t(Bt.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Bt.DATA_MASK_100,new t(Bt.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Bt.DATA_MASK_101,new t(Bt.DATA_MASK_101,function(e,r){return e*r%6===0})],[Bt.DATA_MASK_110,new t(Bt.DATA_MASK_110,function(e,r){return e*r%6<3})],[Bt.DATA_MASK_111,new t(Bt.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),tc=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Fe;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var x=this.bitMatrix.getHeight(),i=0,o=x-7,n=x-1;n>=o;n--)i=this.copyBit(8,n,i);for(var r=x-8;r<x;r++)i=this.copyBit(r,8,i);if(this.parsedFormatInfo=Mi.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Fe},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return p0.getVersionForNumber(r);for(var n=0,x=e-11,i=5;i>=0;i--)for(var o=e-9;o>=x;o--)n=this.copyBit(o,i,n);var s=p0.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=x;i--)n=this.copyBit(o,i,n);if(s=p0.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new Fe},t.prototype.copyBit=function(e,r,n){var x=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return x?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=jx.values.get(e.getDataMask()),x=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,x);for(var i=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),u=0,B=0,C=0,p=x-1;p>0;p-=2){p===6&&p--;for(var m=0;m<x;m++)for(var w=o?x-1-m:m,b=0;b<2;b++)i.get(p-b,w)||(C++,B<<=1,this.bitMatrix.get(p-b,w)&&(B|=1),C===8&&(s[u++]=B,C=0,B=0));o=!o}if(u!==r.getTotalCodewords())throw new Fe;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=jx.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var x=r+1,i=e.getHeight();x<i;x++)e.get(r,x)!==e.get(x,r)&&(e.flip(x,r),e.flip(r,x))},t}(),Vx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rc=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var x,i,o,s;if(e.length!==r.getTotalCodewords())throw new Me;var u=r.getECBlocksForLevel(n),B=0,C=u.getECBlocks();try{for(var p=Vx(C),m=p.next();!m.done;m=p.next()){var w=m.value;B+=w.getCount()}}catch(c){x={error:c}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(x)throw x.error}}var b=new Array(B),R=0;try{for(var L=Vx(C),X=L.next();!X.done;X=L.next())for(var w=X.value,k=0;k<w.getCount();k++){var J=w.getDataCodewords(),re=u.getECCodewordsPerBlock()+J;b[R++]=new t(J,new Uint8Array(re))}}catch(c){o={error:c}}finally{try{X&&!X.done&&(s=L.return)&&s.call(L)}finally{if(o)throw o.error}}for(var Z=b[0].codewords.length,ce=b.length-1;ce>=0;){var ue=b[ce].codewords.length;if(ue===Z)break;ce--}ce++;for(var D=Z-u.getECCodewordsPerBlock(),Se=0,k=0;k<D;k++)for(var Ie=0;Ie<R;Ie++)b[Ie].codewords[k]=e[Se++];for(var Ie=ce;Ie<R;Ie++)b[Ie].codewords[D]=e[Se++];for(var ke=b[0].codewords.length,k=D;k<ke;k++)for(var Ie=0;Ie<R;Ie++){var h=Ie<ce?k:k+1;b[Ie].codewords[h]=e[Se++]}return b},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Ut;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Ut||(Ut={}));var rt=function(){function t(e,r,n,x){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=x,t.FOR_BITS.set(x,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Me;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Ut.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Ut.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Ut.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Ut.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Ut.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Ut.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Ut.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Ut.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Ut.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Ut.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),nc=function(){function t(){}return t.decode=function(e,r,n,x){var i=new Pi(e),o=new Ue,s=new Array,u=-1,B=-1;try{var C=null,p=!1,m=void 0;do{if(i.available()<4)m=rt.TERMINATOR;else{var w=i.readBits(4);m=rt.forBits(w)}switch(m){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:p=!0;break;case rt.STRUCTURED_APPEND:if(i.available()<16)throw new Fe;u=i.readBits(8),B=i.readBits(8);break;case rt.ECI:var b=t.parseECIValue(i);if(C=ht.getCharacterSetECIByValue(b),C===null)throw new Fe;break;case rt.HANZI:var R=i.readBits(4),L=i.readBits(m.getCharacterCountBits(r));R===t.GB2312_SUBSET&&t.decodeHanziSegment(i,o,L);break;default:var X=i.readBits(m.getCharacterCountBits(r));switch(m){case rt.NUMERIC:t.decodeNumericSegment(i,o,X);break;case rt.ALPHANUMERIC:t.decodeAlphanumericSegment(i,o,X,p);break;case rt.BYTE:t.decodeByteSegment(i,o,X,C,s,x);break;case rt.KANJI:t.decodeKanjiSegment(i,o,X);break;default:throw new Fe}break}}while(m!==rt.TERMINATOR)}catch{throw new Fe}return new Lr(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),u,B)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Fe;for(var x=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,x[i]=s>>8&255,x[i+1]=s&255,i+=2,n--}try{r.append(jt.decode(x,Qe.GB2312))}catch(u){throw new Fe(u)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Fe;for(var x=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,x[i]=s>>8,x[i+1]=s,i+=2,n--}try{r.append(jt.decode(x,Qe.SHIFT_JIS))}catch(u){throw new Fe(u)}},t.decodeByteSegment=function(e,r,n,x,i,o){if(8*n>e.available())throw new Fe;for(var s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);var B;x===null?B=Qe.guessEncoding(s,o):B=x.getName();try{r.append(jt.decode(s,B))}catch(C){throw new Fe(C)}i.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Fe;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,x){for(var i=r.length();n>1;){if(e.available()<11)throw new Fe;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Fe;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(x)for(var s=i;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Fe;var x=e.readBits(10);if(x>=1e3)throw new Fe;r.append(t.toAlphaNumericChar(Math.floor(x/100))),r.append(t.toAlphaNumericChar(Math.floor(x/10)%10)),r.append(t.toAlphaNumericChar(x%10)),n-=3}if(n===2){if(e.available()<7)throw new Fe;var i=e.readBits(7);if(i>=100)throw new Fe;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new Fe;var o=e.readBits(4);if(o>=10)throw new Fe;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var x=e.readBits(16);return(r&31)<<16&4294967295|x}throw new Fe},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Ni=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),Gx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xc=function(){function t(){this.rsDecoder=new kr(r0.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(n0.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new tc(e),x=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){x=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,r);return i.setOther(new Ni(!0)),i}catch(o){throw x!==null?x:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,x,i,o,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),B=e.readCodewords(),C=rc.getDataBlocks(B,s,u),p=0;try{for(var m=Gx(C),w=m.next();!w.done;w=m.next()){var b=w.value;p+=b.getNumDataCodewords()}}catch(ce){n={error:ce}}finally{try{w&&!w.done&&(x=m.return)&&x.call(m)}finally{if(n)throw n.error}}var R=new Uint8Array(p),L=0;try{for(var X=Gx(C),k=X.next();!k.done;k=X.next()){var b=k.value,J=b.getCodewords(),re=b.getNumDataCodewords();this.correctErrors(J,re);for(var Z=0;Z<re;Z++)R[L++]=J[Z]}}catch(ce){i={error:ce}}finally{try{k&&!k.done&&(o=X.return)&&o.call(X)}finally{if(i)throw i.error}}return nc.decode(R,s,u,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new gt}for(var x=0;x<r;x++)e[x]=n[x]},t}(),ic=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oc=function(t){ic(e,t);function e(r,n,x){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=x,i}return e.prototype.aboutEquals=function(r,n,x){if(Math.abs(n-this.getY())<=r&&Math.abs(x-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,x){var i=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+x)/2;return new e(i,o,s)},e}(be),ac=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sc=function(){function t(e,r,n,x,i,o,s){this.image=e,this.startX=r,this.startY=n,this.width=x,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,x=e+n,i=this.startY+r/2,o=new Int32Array(3),s=this.image,u=0;u<r;u++){var B=i+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var C=e;C<x&&!s.get(C,B);)C++;for(var p=0;C<x;){if(s.get(C,B))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var m=this.handlePossibleCenter(o,B,C);if(m!==null)return m}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;C++}if(this.foundPatternCross(o)){var m=this.handlePossibleCenter(o,B,x);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,x=0;x<3;x++)if(Math.abs(r-e[x])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,x){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(r,u)&&s[1]<=n;)s[1]++,u++;if(u===o||s[1]>n)return NaN;for(;u<o&&!i.get(r,u)&&s[2]<=n;)s[2]++,u++;if(s[2]>n)return NaN;var B=s[0]+s[1]+s[2];return 5*Math.abs(B-x)>=2*x?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var x,i,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(u)){var B=(e[0]+e[1]+e[2])/3;try{for(var C=ac(this.possibleCenters),p=C.next();!p.done;p=C.next()){var m=p.value;if(m.aboutEquals(B,u,s))return m.combineEstimate(u,s,B)}}catch(b){x={error:b}}finally{try{p&&!p.done&&(i=C.return)&&i.call(C)}finally{if(x)throw x.error}}var w=new oc(s,u,B);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},t}(),Ec=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cc=function(t){Ec(e,t);function e(r,n,x,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=x,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,x){if(Math.abs(n-this.getY())<=r&&Math.abs(x-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,x){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+r)/i,u=(this.count*this.estimatedModuleSize+x)/i;return new e(o,s,u,i)},e}(be),lc=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),V0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uc=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(nt.TRY_HARDER)!==void 0,n=e!=null&&e.get(nt.PURE_BARCODE)!==void 0,x=this.image,i=x.getHeight(),o=x.getWidth(),s=Math.floor(3*i/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var u=!1,B=new Int32Array(5),C=s-1;C<i&&!u;C+=s){B[0]=0,B[1]=0,B[2]=0,B[3]=0,B[4]=0;for(var p=0,m=0;m<o;m++)if(x.get(m,C))(p&1)===1&&p++,B[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(B)){var w=this.handlePossibleCenter(B,C,m,n);if(w===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>B[2]&&(C+=b-B[2]-s,m=o-1)}else{B[0]=B[2],B[1]=B[3],B[2]=B[4],B[3]=1,B[4]=0,p=3;continue}p=0,B[0]=0,B[1]=0,B[2]=0,B[3]=0,B[4]=0}else B[0]=B[2],B[1]=B[3],B[2]=B[4],B[3]=1,B[4]=0,p=3;else B[++p]++;else B[p]++;if(t.foundPatternCross(B)){var w=this.handlePossibleCenter(B,C,o,n);w===!0&&(s=B[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var R=this.selectBestPatterns();return be.orderBestPatterns(R),new lc(R)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var x=e[n];if(x===0)return!1;r+=x}if(r<7)return!1;var i=r/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,x){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)i[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||r<o||i[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var u=s.getHeight(),B=s.getWidth();for(o=1;e+o<u&&r+o<B&&s.get(r+o,e+o);)i[2]++,o++;if(e+o>=u||r+o>=B)return!1;for(;e+o<u&&r+o<B&&!s.get(r+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=u||r+o>=B||i[3]>=n)return!1;for(;e+o<u&&r+o<B&&s.get(r+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var C=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(C-x)<2*x&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,x){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(r,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(r,u);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(r,u)&&s[3]<n;)s[3]++,u++;if(u===o||s[3]>=n)return NaN;for(;u<o&&i.get(r,u)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var B=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(B-x)>=2*x?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,x){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(u,r);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,r)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(u,r)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(u,r);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(u,r)&&s[3]<n;)s[3]++,u++;if(u===o||s[3]>=n)return NaN;for(;u<o&&i.get(u,r)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var B=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(B-x)>=x?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,x){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!x||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var u=i/7,B=!1,C=this.possibleCenters,p=0,m=C.length;p<m;p++){var w=C[p];if(w.aboutEquals(u,s,o)){C[p]=w.combineEstimate(s,o,u),B=!0;break}}if(!B){var b=new cc(o,s,u);C.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var x=null;try{for(var i=V0(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(x==null)x=s;else return this.hasSkipped=!0,Math.floor((Math.abs(x.getX()-s.getX())-Math.abs(x.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,x,i=0,o=0,s=this.possibleCenters.length;try{for(var u=V0(this.possibleCenters),B=u.next();!B.done;B=u.next()){var C=B.value;C.getCount()>=t.CENTER_QUORUM&&(i++,o+=C.getEstimatedModuleSize())}}catch(R){e={error:R}}finally{try{B&&!B.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(i<3)return!1;var p=o/s,m=0;try{for(var w=V0(this.possibleCenters),b=w.next();!b.done;b=w.next()){var C=b.value;m+=Math.abs(C.getEstimatedModuleSize()-p)}}catch(R){n={error:R}}finally{try{b&&!b.done&&(x=w.return)&&x.call(w)}finally{if(n)throw n.error}}return m<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,x,i=this.possibleCenters.length;if(i<3)throw new le;var o=this.possibleCenters,s;if(i>3){var u=0,B=0;try{for(var C=V0(this.possibleCenters),p=C.next();!p.done;p=C.next()){var m=p.value,w=m.getEstimatedModuleSize();u+=w,B+=w*w}}catch(Z){e={error:Z}}finally{try{p&&!p.done&&(r=C.return)&&r.call(C)}finally{if(e)throw e.error}}s=u/i;var b=Math.sqrt(B/i-s*s);o.sort(function(Z,ce){var ue=Math.abs(ce.getEstimatedModuleSize()-s),D=Math.abs(Z.getEstimatedModuleSize()-s);return ue<D?-1:ue>D?1:0});for(var R=Math.max(.2*s,b),L=0;L<o.length&&o.length>3;L++){var X=o[L];Math.abs(X.getEstimatedModuleSize()-s)>R&&(o.splice(L,1),L--)}}if(o.length>3){var u=0;try{for(var k=V0(o),J=k.next();!J.done;J=k.next()){var re=J.value;u+=re.getEstimatedModuleSize()}}catch(ce){n={error:ce}}finally{try{J&&!J.done&&(x=k.return)&&x.call(k)}finally{if(n)throw n.error}}s=u/o.length,o.sort(function(ce,ue){if(ue.getCount()===ce.getCount()){var D=Math.abs(ue.getEstimatedModuleSize()-s),Se=Math.abs(ce.getEstimatedModuleSize()-s);return D<Se?1:D>Se?-1:0}else return ue.getCount()-ce.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),hc=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(nt.NEED_RESULT_POINT_CALLBACK);var r=new uc(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),x=e.getBottomLeft(),i=this.calculateModuleSize(r,n,x);if(i<1)throw new le("No pattern found in proccess finder.");var o=t.computeDimension(r,n,x,i),s=p0.getProvisionalVersionForDimension(o),u=s.getDimensionForVersion()-7,B=null;if(s.getAlignmentPatternCenters().length>0)for(var C=n.getX()-r.getX()+x.getX(),p=n.getY()-r.getY()+x.getY(),m=1-3/u,w=Math.floor(r.getX()+m*(C-r.getX())),b=Math.floor(r.getY()+m*(p-r.getY())),R=4;R<=16;R<<=1)try{B=this.findAlignmentInRegion(i,w,b,R);break}catch(J){if(!(J instanceof le))throw J}var L=t.createTransform(r,n,x,B,o),X=t.sampleGrid(this.image,L,o),k;return B===null?k=[x,r,n]:k=[x,r,n,B],new bn(X,k)},t.createTransform=function(e,r,n,x,i){var o=i-3.5,s,u,B,C;return x!==null?(s=x.getX(),u=x.getY(),B=o-3,C=B):(s=r.getX()-e.getX()+n.getX(),u=r.getY()-e.getY()+n.getY(),B=o,C=o),bi.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,B,C,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,u,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var x=In.getInstance();return x.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,x){var i=He.round(be.distance(e,r)/x),o=He.round(be.distance(e,n)/x),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new le("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?x/7:isNaN(x)?n/7:(n+x)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,x){var i=this.sizeOfBlackWhiteBlackRun(e,r,n,x),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(r-(x-r)*o);return o=1,u<0?(o=r/(r-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(u-r),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,r,s,u),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,x){var i=Math.abs(x-r)>Math.abs(n-e);if(i){var o=e;e=r,r=o,o=n,n=x,x=o}for(var s=Math.abs(n-e),u=Math.abs(x-r),B=-s/2,C=e<n?1:-1,p=r<x?1:-1,m=0,w=n+C,b=e,R=r;b!==w;b+=C){var L=i?R:b,X=i?b:R;if(m===1===this.image.get(L,X)){if(m===2)return He.distance(b,R,e,r);m++}if(B+=u,B>0){if(R===x)break;R+=p,B-=s}}return m===2?He.distance(n+C,x,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,x){var i=Math.floor(x*e),o=Math.max(0,r-i),s=Math.min(this.image.getWidth()-1,r+i);if(s-o<e*3)throw new le("Alignment top exceeds estimated module size.");var u=Math.max(0,n-i),B=Math.min(this.image.getHeight()-1,n+i);if(B-u<e*3)throw new le("Alignment bottom exceeds estimated module size.");var C=new sc(this.image,o,u,s-o,B-u,e,this.resultPointCallback);return C.find()},t}(),hn=function(){function t(){this.decoder=new xc}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,x;if(r!=null&&r.get(nt.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),x=t.NO_POINTS}else{var o=new hc(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),x=o.getPoints()}n.getOther()instanceof Ni&&n.getOther().applyMirroredCorrection(x);var s=new Ft(n.getText(),n.getRawBytes(),void 0,x,Pe.QR_CODE,void 0),u=n.getByteSegments();u!==null&&s.putMetadata(_t.BYTE_SEGMENTS,u);var B=n.getECLevel();return B!==null&&s.putMetadata(_t.ERROR_CORRECTION_LEVEL,B),n.hasStructuredAppend()&&(s.putMetadata(_t.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(_t.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new le;var x=this.moduleSize(r,e),i=r[1],o=n[1],s=r[0],u=n[0];if(s>=u||i>=o)throw new le;if(o-i!==u-s&&(u=s+(o-i),u>=e.getWidth()))throw new le;var B=Math.round((u-s+1)/x),C=Math.round((o-i+1)/x);if(B<=0||C<=0)throw new le;if(C!==B)throw new le;var p=Math.floor(x/2);i+=p,s+=p;var m=s+Math.floor((B-1)*x)-u;if(m>0){if(m>p)throw new le;s-=m}var w=i+Math.floor((C-1)*x)-o;if(w>0){if(w>p)throw new le;i-=w}for(var b=new n0(B,C),R=0;R<C;R++)for(var L=i+Math.floor(R*x),X=0;X<B;X++)e.get(s+Math.floor(X*x),L)&&b.set(X,R);return b},t.moduleSize=function(e,r){for(var n=r.getHeight(),x=r.getWidth(),i=e[0],o=e[1],s=!0,u=0;i<x&&o<n;){if(s!==r.get(i,o)){if(++u===5)break;s=!s}i++,o++}if(i===x||o===n)throw new le;return(i-e[0])/7},t.NO_POINTS=new Array,t}(),fc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return He.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var x=new Int32Array(e.length),i=0;try{for(var o=fc(e),s=o.next();!s.done;s=o.next()){var u=s.value;x[i++]=u}}catch(B){r={error:B}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return x},t.getCodeword=function(e){var r=ft.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),Ac=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Bc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dc=function(){function t(){}return t.detectMultiple=function(e,r,n){var x=e.getBlackMatrix(),i=t.detect(n,x);return i.length||(x=x.clone(),x.rotate180(),i=t.detect(n,x)),new Ac(x,i)},t.detect=function(e,r){for(var n,x,i=new Array,o=0,s=0,u=!1;o<r.getHeight();){var B=t.findVertices(r,o,s);if(B[0]==null&&B[3]==null){if(!u)break;u=!1,s=0;try{for(var C=(n=void 0,Bc(i)),p=C.next();!p.done;p=C.next()){var m=p.value;m[1]!=null&&(o=Math.trunc(Math.max(o,m[1].getY()))),m[3]!=null&&(o=Math.max(o,Math.trunc(m[3].getY())))}}catch(w){n={error:w}}finally{try{p&&!p.done&&(x=C.return)&&x.call(C)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(u=!0,i.push(B),!e)break;B[2]!=null?(s=Math.trunc(B[2].getX()),o=Math.trunc(B[2].getY())):(s=Math.trunc(B[4].getX()),o=Math.trunc(B[4].getY()))}return i},t.findVertices=function(e,r,n){var x=e.getHeight(),i=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,x,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,x,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var x=0;x<n.length;x++)e[n[x]]=r[x]},t.findRowsWithPattern=function(e,r,n,x,i,o){for(var s=new Array(4),u=!1,B=new Int32Array(o.length);x<r;x+=t.ROW_STEP){var C=t.findGuardPattern(e,i,x,n,!1,o,B);if(C!=null){for(;x>0;){var p=t.findGuardPattern(e,i,--x,n,!1,o,B);if(p!=null)C=p;else{x++;break}}s[0]=new be(C[0],x),s[1]=new be(C[1],x),u=!0;break}}var m=x+1;if(u){for(var w=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);m<r;m++){var C=t.findGuardPattern(e,p[0],m,n,!1,o,B);if(C!=null&&Math.abs(p[0]-C[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-C[1])<t.MAX_PATTERN_DRIFT)p=C,w=0;else{if(w>t.SKIPPED_ROW_COUNT_MAX)break;w++}}m-=w+1,s[2]=new be(p[0],m),s[3]=new be(p[1],m)}return m-x<t.BARCODE_MIN_HEIGHT&&ft.fill(s,null),s},t.findGuardPattern=function(e,r,n,x,i,o,s){ft.fillWithin(s,0,s.length,0);for(var u=r,B=0;e.get(u,n)&&u>0&&B++<t.MAX_PIXEL_DRIFT;)u--;for(var C=u,p=0,m=o.length,w=i;C<x;C++){var b=e.get(C,n);if(b!==w)s[p]++;else{if(p===m-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,C]);u+=s[0]+s[1],et.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,w=!w}}return p===m-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,C-1]):null},t.patternMatchVariance=function(e,r,n){for(var x=e.length,i=0,o=0,s=0;s<x;s++)i+=e[s],o+=r[s];if(i<o)return 1/0;var u=i/o;n*=u;for(var B=0,C=0;C<x;C++){var p=e[C],m=r[C]*u,w=p>m?p-m:m-p;if(w>n)return 1/0;B+=w}return B/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),gc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v0=function(){function t(e,r){if(r.length===0)throw new Me;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var x=1;x<n&&r[x]===0;)x++;x===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-x),et.arraycopy(r,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var x=0;try{for(var i=gc(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;x=this.field.add(x,s)}}catch(p){r={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return x}for(var u=this.coefficients[0],B=this.coefficients.length,C=1;C<B;C++)u=this.field.add(this.field.multiply(e,u),this.coefficients[C]);return u},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Me("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var x=r;r=n,n=x}var i=new Int32Array(n.length),o=n.length-r.length;et.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(r[s-o],n[s]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Me("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Me("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,x=e.coefficients,i=x.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var u=r[s],B=0;B<i;B++)o[s+B]=this.field.add(o[s+B],this.field.multiply(u,x[B]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),x=0;x<r;x++)n[x]=this.field.multiply(this.coefficients[x],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Me;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,x=new Int32Array(n+e),i=0;i<n;i++)x[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,x)},t.prototype.toString=function(){for(var e=new Ue,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),vc=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Me;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Ti;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),Cc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pc=function(t){Cc(e,t);function e(r,n){var x=t.call(this)||this;x.modulus=r,x.expTable=new Int32Array(r),x.logTable=new Int32Array(r);for(var i=1,o=0;o<r;o++)x.expTable[o]=i,i=i*n%r;for(var o=0;o<r-1;o++)x.logTable[x.expTable[o]]=o;return x.zero=new v0(x,new Int32Array([0])),x.one=new v0(x,new Int32Array([1])),x}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Me;if(n===0)return this.zero;var x=new Int32Array(r+1);return x[0]=n,new v0(this,x)},e.PDF417_GF=new e(Ge.NUMBER_OF_CODEWORDS,3),e}(vc),_c=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dc=function(){function t(){this.field=pc.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var x,i,o=new v0(this.field,e),s=new Int32Array(r),u=!1,B=r;B>0;B--){var C=o.evaluateAt(this.field.exp(B));s[r-B]=C,C!==0&&(u=!0)}if(!u)return 0;var p=this.field.getOne();if(n!=null)try{for(var m=_c(n),w=m.next();!w.done;w=m.next()){var b=w.value,R=this.field.exp(e.length-1-b),L=new v0(this.field,new Int32Array([this.field.subtract(0,R),1]));p=p.multiply(L)}}catch(D){x={error:D}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(x)throw x.error}}for(var X=new v0(this.field,s),k=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),X,r),J=k[0],re=k[1],Z=this.findErrorLocations(J),ce=this.findErrorMagnitudes(re,J,Z),B=0;B<Z.length;B++){var ue=e.length-1-this.field.log(Z[B]);if(ue<0)throw gt.getChecksumInstance();e[ue]=this.field.subtract(e[ue],ce[B])}return Z.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var x=e;e=r,r=x}for(var i=e,o=r,s=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(n/2);){var B=i,C=s;if(i=o,s=u,i.isZero())throw gt.getChecksumInstance();o=B;for(var p=this.field.getZero(),m=i.getCoefficient(i.getDegree()),w=this.field.inverse(m);o.getDegree()>=i.getDegree()&&!o.isZero();){var b=o.getDegree()-i.getDegree(),R=this.field.multiply(o.getCoefficient(o.getDegree()),w);p=p.add(this.field.buildMonomial(b,R)),o=o.subtract(i.multiplyByMonomial(b,R))}u=p.multiply(s).subtract(C).negative()}var L=u.getCoefficient(0);if(L===0)throw gt.getChecksumInstance();var X=this.field.inverse(L),k=u.multiply(X),J=o.multiply(X);return[k,J]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),x=0,i=1;i<this.field.getSize()&&x<r;i++)e.evaluateAt(i)===0&&(n[x]=this.field.inverse(i),x++);if(x!==r)throw gt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var x=r.getDegree(),i=new Int32Array(x),o=1;o<=x;o++)i[x-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new v0(this.field,i),u=n.length,B=new Int32Array(u),o=0;o<u;o++){var C=this.field.inverse(n[o]),p=this.field.subtract(0,e.evaluateAt(C)),m=this.field.inverse(s.evaluateAt(C));B[o]=this.field.multiply(p,m)}return B},t}(),fn=function(){function t(e,r,n,x,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,x,i)}return t.prototype.constructor_1=function(e,r,n,x,i){var o=r==null||n==null,s=x==null||i==null;if(o&&s)throw new le;o?(r=new be(0,x.getY()),n=new be(0,i.getY())):s&&(x=new be(e.getWidth()-1,r.getY()),i=new be(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=x,this.bottomRight=i,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(x.getX(),i.getX())),this.minY=Math.trunc(Math.min(r.getY(),x.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var x=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,B=Math.trunc(u.getY()-e);B<0&&(B=0);var C=new be(u.getX(),B);n?x=C:o=C}if(r>0){var p=n?this.bottomLeft:this.bottomRight,m=Math.trunc(p.getY()+r);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var w=new be(p.getX(),m);n?i=w:s=w}return new t(this.image,x,i,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),mc=function(){function t(e,r,n,x){this.columnCount=e,this.errorCorrectionLevel=x,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Rn=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function x(o,s,u,B,C,p){if(o==="%%")return"%";if(r[++n]!==void 0){o=B?parseInt(B.substr(1)):void 0;var m=C?parseInt(C.substr(1)):void 0,w;switch(p){case"s":w=r[n];break;case"c":w=r[n][0];break;case"f":w=parseFloat(r[n]).toFixed(o);break;case"p":w=parseFloat(r[n]).toPrecision(o);break;case"e":w=parseFloat(r[n]).toExponential(o);break;case"x":w=parseInt(r[n]).toString(m||16);break;case"d":w=parseFloat(parseInt(r[n],m||10).toPrecision(o)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(m);for(var b=parseInt(u),R=u&&u[0]+""=="0"?"0":" ";w.length<b;)w=s!==void 0?w+R:R+w;return w}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,x)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Fc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(){function t(e){this.boundingBox=new fn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var x=this.imageRowToCodewordIndex(e)-n;if(x>=0&&(r=this.codewords[x],r!=null)||(x=this.imageRowToCodewordIndex(e)+n,x<this.codewords.length&&(r=this.codewords[x],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Rn,x=0;try{for(var i=Fc(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",x++);continue}n.format("%3d: %3d|%3d%n",x++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),yc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wc=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),x,i=[],o;try{for(;(e===void 0||e-- >0)&&!(x=n.next()).done;)i.push(x.value)}catch(s){o={error:s}}finally{try{x&&!x.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},X0=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,x=new Array,i=function(p,m){var w={getKey:function(){return p},getValue:function(){return m}};w.getValue()>n?(n=w.getValue(),x=[],x.push(w.getKey())):w.getValue()===n&&x.push(w.getKey())};try{for(var o=yc(this.values.entries()),s=o.next();!s.done;s=o.next()){var u=wc(s.value,2),B=u[0],C=u[1];i(B,C)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Ge.toIntArray(x)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Sc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$r=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hx=function(t){Sc(e,t);function e(r,n){var x=t.call(this,r)||this;return x._isLeft=n,x}return e.prototype.setRowNumbers=function(){var r,n;try{for(var x=$r(this.getCodewords()),i=x.next();!i.done;i=x.next()){var o=i.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var x=this.getBoundingBox(),i=this._isLeft?x.getTopLeft():x.getTopRight(),o=this._isLeft?x.getBottomLeft():x.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),B=-1,C=1,p=0,m=s;m<u;m++)if(n[m]!=null){var w=n[m],b=w.getRowNumber()-B;if(b===0)p++;else if(b===1)C=Math.max(C,p),p=1,B=w.getRowNumber();else if(b<0||w.getRowNumber()>=r.getRowCount()||b>m)n[m]=null;else{var R=void 0;C>2?R=(C-2)*b:R=b;for(var L=R>=m,X=1;X<=R&&!L;X++)L=n[m-X]!=null;L?n[m]=null:(B=w.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var r,n,x=this.getBarcodeMetadata();if(x==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(x);var i=new Int32Array(x.getRowCount());try{for(var o=$r(this.getCodewords()),s=o.next();!s.done;s=o.next()){var u=s.value;if(u!=null){var B=u.getRowNumber();if(B>=i.length)continue;i[B]++}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),x=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(x.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.getCodewords(),B=-1,C=o;C<s;C++)if(u[C]!=null){var p=u[C];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-B;m===0||(m===1?B=p.getRowNumber():p.getRowNumber()>=r.getRowCount()?u[C]=null:B=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,x=this.getCodewords(),i=new X0,o=new X0,s=new X0,u=new X0;try{for(var B=$r(x),C=B.next();!C.done;C=B.next()){var p=C.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var m=p.getValue()%30,w=p.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(m*3+1);break;case 1:u.setValue(m/3),s.setValue(m%3);break;case 2:i.setValue(m+1);break}}}}catch(R){r={error:R}}finally{try{C&&!C.done&&(n=B.return)&&n.call(B)}finally{if(r)throw r.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Ge.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Ge.MAX_ROWS_IN_BARCODE)return null;var b=new mc(i.getValue()[0],o.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(x,b),b},e.prototype.removeIncorrectCodewords=function(r,n){for(var x=0;x<r.length;x++){var i=r[x];if(r[x]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){r[x]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[x]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[x]=null);break;case 2:o+1!==n.getColumnCount()&&(r[x]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Li),Tc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bc=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ge.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),x=0;x<n.length;x++)n[x]!=null&&(n[x].hasValidRowNumber()||this.adjustRowNumbers(r,x,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var x=1;x<=this.barcodeColumnCount;x++){var i=this.detectionResultColumns[x].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[x].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var x=r[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=t.adjustRowNumberIfValid(x,i,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var x=r[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=t.adjustRowNumberIfValid(x,i,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var x,i;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var B=new Array(14);B[2]=s[r],B[3]=u[r],r>0&&(B[0]=n[r-1],B[4]=s[r-1],B[5]=u[r-1]),r>1&&(B[8]=n[r-2],B[10]=s[r-2],B[11]=u[r-2]),r<n.length-1&&(B[1]=n[r+1],B[6]=s[r+1],B[7]=u[r+1]),r<n.length-2&&(B[9]=n[r+2],B[12]=s[r+2],B[13]=u[r+2]);try{for(var C=Tc(B),p=C.next();!p.done;p=C.next()){var m=p.value;if(t.adjustRowNumber(o,m))return}}catch(w){x={error:w}}finally{try{p&&!p.done&&(i=C.return)&&i.call(C)}finally{if(x)throw x.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Rn,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var x=0;x<this.barcodeColumnCount+2;x++){if(this.detectionResultColumns[x]==null){r.format("    |   ");continue}var i=this.detectionResultColumns[x].getCodewords()[n];if(i==null){r.format("    |   ");continue}r.format(" %3d|%3d",i.getRowNumber(),i.getValue())}r.format("%n")}return r.toString()},t}(),Ic=function(){function t(e,r,n,x){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(x)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Oc=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ge.SYMBOL_TABLE.length;e++)for(var r=Ge.SYMBOL_TABLE[e],n=r&1,x=0;x<Ge.BARS_IN_MODULE;x++){for(var i=0;(r&1)===n;)i+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ge.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ge.BARS_IN_MODULE-x-1]=Math.fround(i/Ge.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=He.sum(e),n=new Int32Array(Ge.BARS_IN_MODULE),x=0,i=0,o=0;o<Ge.MODULES_IN_CODEWORD;o++){var s=r/(2*Ge.MODULES_IN_CODEWORD)+o*r/Ge.MODULES_IN_CODEWORD;i+e[x]<=s&&(i+=e[x],x++),n[x]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Ge.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var x=0;x<e[n];x++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=He.sum(e),n=new Array(Ge.BARS_IN_MODULE);if(r>1)for(var x=0;x<n.length;x++)n[x]=Math.fround(e[x]/r);var i=sn.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var u=0,B=t.RATIOS_TABLE[s],C=0;C<Ge.BARS_IN_MODULE;C++){var p=Math.fround(B[C]-n[C]);if(u+=Math.fround(p*p),u>=i)break}u<i&&(i=u,o=Ge.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ge.SYMBOL_TABLE.length).map(function(e){return new Array(Ge.BARS_IN_MODULE)}),t}(),Rc=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Wx=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),Pc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mc=function(t){Pc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Pt),Nc=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new Mc;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new Sn;if(n===0)return;for(var x=0;x<n;x++)this.write(e[r+x])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),Lc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kc=function(t){Lc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Pt),Uc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jc=function(t){Uc(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Me("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,x=n<<1;if(x-r<0&&(x=r),x<0){if(r<0)throw new kc;x=at.MAX_VALUE}this.buf=ft.copyOfUint8Array(this.buf,x)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,x){if(n<0||n>r.length||x<0||n+x-r.length>0)throw new Sn;this.ensureCapacity(this.count+x),et.arraycopy(r,n,this.buf,this.count,x),this.count+=x},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ft.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Nc),$e;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($e||($e={}));function ki(){if(typeof window!="undefined")return window.BigInt||null;if(typeof global!="undefined")return global.BigInt||null;if(typeof self!="undefined")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var fr;function a0(t){if(typeof fr=="undefined"&&(fr=ki()),fr===null)throw new Error("BigInt is not supported!");return fr(t)}function Vc(){var t=[];t[0]=a0(1);var e=a0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var Gc=function(){function t(){}return t.decode=function(e,r){var n=new Ue(""),x=ht.ISO8859_1;n.enableDecoding(x);for(var i=1,o=e[i++],s=new Rc;i<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(o,e,x,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:ht.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Fe;default:i--,i=t.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw Fe.getFormatInstance()}if(n.length()===0)throw Fe.getFormatInstance();var u=new Lr(null,n.toString(),null,r);return u.setOther(s),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Fe.getFormatInstance();for(var x=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)x[i]=e[r];n.setSegmentIndex(at.parseInt(t.decodeBase900toBase10(x,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ue;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new Ue;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var B=new Ue;r=t.textCompaction(e,r+1,B),n.setSender(B.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var C=new Ue;r=t.textCompaction(e,r+1,C),n.setAddressee(C.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ue;r=t.numericCompaction(e,r+1,p),n.setSegmentCount(at.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new Ue;r=t.numericCompaction(e,r+1,m),n.setTimestamp(Wx.parseLong(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new Ue;r=t.numericCompaction(e,r+1,w),n.setChecksum(at.parseInt(w.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new Ue;r=t.numericCompaction(e,r+1,b),n.setFileSize(Wx.parseLong(b.toString()));break;default:throw Fe.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Fe.getFormatInstance()}if(s!==-1){var R=r-s;n.isLastSegment()&&R--,n.setOptionalData(ft.copyOfRange(e,s,s+R))}return r},t.textCompaction=function(e,r,n){for(var x=new Int32Array((e[0]-r)*2),i=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)x[o]=u/30,x[o+1]=u%30,o+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:x[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],i[o]=u,o++;break}}return t.decodeTextCompaction(x,i,o,n),r},t.decodeTextCompaction=function(e,r,n,x){for(var i=$e.ALPHA,o=$e.ALPHA,s=0;s<n;){var u=e[s],B="";switch(i){case $e.ALPHA:if(u<26)B=String.fromCharCode(65+u);else switch(u){case 26:B=" ";break;case t.LL:i=$e.LOWER;break;case t.ML:i=$e.MIXED;break;case t.PS:o=i,i=$e.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break;case $e.LOWER:if(u<26)B=String.fromCharCode(97+u);else switch(u){case 26:B=" ";break;case t.AS:o=i,i=$e.ALPHA_SHIFT;break;case t.ML:i=$e.MIXED;break;case t.PS:o=i,i=$e.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break;case $e.MIXED:if(u<t.PL)B=t.MIXED_CHARS[u];else switch(u){case t.PL:i=$e.PUNCT;break;case 26:B=" ";break;case t.LL:i=$e.LOWER;break;case t.AL:i=$e.ALPHA;break;case t.PS:o=i,i=$e.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break;case $e.PUNCT:if(u<t.PAL)B=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=$e.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break;case $e.ALPHA_SHIFT:if(i=o,u<26)B=String.fromCharCode(65+u);else switch(u){case 26:B=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break;case $e.PUNCT_SHIFT:if(i=o,u<t.PAL)B=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=$e.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=$e.ALPHA;break}break}B!==""&&x.append(B),s++}},t.byteCompaction=function(e,r,n,x,i){var o=new jc,s=0,u=0,B=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var C=new Int32Array(6),p=r[x++];x<r[0]&&!B;)switch(C[s++]=p,u=900*u+p,p=r[x++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:x--,B=!0;break;default:if(s%5===0&&s>0){for(var m=0;m<6;++m)o.write(Number(a0(u)>>a0(8*(5-m))));u=0,s=0}break}x===r[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(C[s++]=p);for(var w=0;w<s;w++)o.write(C[w]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;x<r[0]&&!B;){var b=r[x++];if(b<t.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+b;else switch(b){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:x--,B=!0;break}if(s%5===0&&s>0){for(var m=0;m<6;++m)o.write(Number(a0(u)>>a0(8*(5-m))));u=0,s=0}}break}return i.append(jt.decode(o.toByteArray(),n)),x},t.numericCompaction=function(e,r,n){for(var x=0,i=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var s=e[r++];if(r===e[0]&&(i=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[x]=s,x++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0;break}(x%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&x>0&&(n.append(t.decodeBase900toBase10(o,x)),x=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=a0(0),x=0;x<r;x++)n+=t.EXP900[r-x-1]*a0(e[x]);var i=n.toString();if(i.charAt(0)!=="1")throw new Fe;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ki()?Vc():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),G0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hc=function(){function t(){}return t.decode=function(e,r,n,x,i,o,s){for(var u=new fn(e,r,n,x,i),B=null,C=null,p,m=!0;;m=!1){if(r!=null&&(B=t.getRowIndicatorColumn(e,u,r,!0,o,s)),x!=null&&(C=t.getRowIndicatorColumn(e,u,x,!1,o,s)),p=t.merge(B,C),p==null)throw le.getNotFoundInstance();var w=p.getBoundingBox();if(m&&w!=null&&(w.getMinY()<u.getMinY()||w.getMaxY()>u.getMaxY()))u=w;else break}p.setBoundingBox(u);var b=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,B),p.setDetectionResultColumn(b,C);for(var R=B!=null,L=1;L<=b;L++){var X=R?L:b-L;if(p.getDetectionResultColumn(X)===void 0){var k=void 0;X===0||X===b?k=new Hx(u,X===0):k=new Li(u),p.setDetectionResultColumn(X,k);for(var J=-1,re=J,Z=u.getMinY();Z<=u.getMaxY();Z++){if(J=t.getStartColumn(p,X,Z,R),J<0||J>u.getMaxX()){if(re===-1)continue;J=re}var ce=t.detectCodeword(e,u.getMinX(),u.getMaxX(),R,J,Z,o,s);ce!=null&&(k.setCodeword(Z,ce),re=J,o=Math.min(o,ce.getWidth()),s=Math.max(s,ce.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var x=fn.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new bc(n,x)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var x=e.getRowHeights();if(x==null)return null;var i=t.getMax(x),o=0;try{for(var s=G0(x),u=s.next();!u.done;u=s.next()){var B=u.value;if(o+=i-B,B>0)break}}catch(w){r={error:w}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var C=e.getCodewords(),p=0;o>0&&C[p]==null;p++)o--;for(var m=0,p=x.length-1;p>=0&&(m+=i-x[p],!(x[p]>0));p--);for(var p=C.length-1;m>0&&C[p]==null;p--)m--;return e.getBoundingBox().addMissingRows(o,m,e.isLeft())},t.getMax=function(e){var r,n,x=-1;try{for(var i=G0(e),o=i.next();!o.done;o=i.next()){var s=o.value;x=Math.max(x,s)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return x},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var x;return r==null||(x=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==x.getColumnCount()&&n.getErrorCorrectionLevel()!==x.getErrorCorrectionLevel()&&n.getRowCount()!==x.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,x,i,o){for(var s=new Hx(r,x),u=0;u<2;u++)for(var B=u===0?1:-1,C=Math.trunc(Math.trunc(n.getX())),p=Math.trunc(Math.trunc(n.getY()));p<=r.getMaxY()&&p>=r.getMinY();p+=B){var m=t.detectCodeword(e,0,e.getWidth(),x,C,p,i,o);m!=null&&(s.setCodeword(p,m),x?C=m.getStartX():C=m.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],x=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(x.length===0){if(i<1||i>Ge.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();n.setValue(i)}else x[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,x=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var B=r[s][u+1].getValue(),C=s*e.getBarcodeColumnCount()+u;B.length===0?n.push(C):B.length===1?x[C]=B[0]:(o.push(C),i.push(B))}for(var p=new Array(i.length),m=0;m<p.length;m++)p[m]=i[m];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),x,Ge.toIntArray(n),Ge.toIntArray(o),p)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,x,i){for(var o=new Int32Array(x.length),s=100;s-- >0;){for(var u=0;u<o.length;u++)r[x[u]]=i[u][o[u]];try{return t.decodeCodewords(r,e,n)}catch(C){var B=C instanceof gt;if(!B)throw C}if(o.length===0)throw gt.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<i[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw gt.getChecksumInstance()}throw gt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,x,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var u=0;u<o[s].length;u++)o[s][u]=new X0;var B=0;try{for(var C=G0(e.getDetectionResultColumns()),p=C.next();!p.done;p=C.next()){var m=p.value;if(m!=null)try{for(var w=(x=void 0,G0(m.getCodewords())),b=w.next();!b.done;b=w.next()){var R=b.value;if(R!=null){var L=R.getRowNumber();if(L>=0){if(L>=o.length)continue;o[L][B].setValue(R.getValue())}}}}catch(X){x={error:X}}finally{try{b&&!b.done&&(i=w.return)&&i.call(w)}finally{if(x)throw x.error}}B++}}catch(X){r={error:X}}finally{try{p&&!p.done&&(n=C.return)&&n.call(C)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,x){var i,o,s=x?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodeword(n)),u!=null)return x?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(r).getCodewordNearby(n),u!=null)return x?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),u!=null)return x?u.getEndX():u.getStartX();for(var B=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var C=(i=void 0,G0(e.getDetectionResultColumn(r).getCodewords())),p=C.next();!p.done;p=C.next()){var m=p.value;if(m!=null)return(x?m.getEndX():m.getStartX())+s*B*(m.getEndX()-m.getStartX())}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}B++}return x?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,x,i,o,s,u){i=t.adjustCodewordStartColumn(e,r,n,x,i,o);var B=t.getModuleBitCount(e,r,n,x,i,o);if(B==null)return null;var C,p=He.sum(B);if(x)C=i+p;else{for(var m=0;m<B.length/2;m++){var w=B[m];B[m]=B[B.length-1-m],B[B.length-1-m]=w}C=i,i=C-p}if(!t.checkCodewordSkew(p,s,u))return null;var b=Oc.getDecodedValue(B),R=Ge.getCodeword(b);return R===-1?null:new Ic(i,C,t.getCodewordBucketNumber(b),R)},t.getModuleBitCount=function(e,r,n,x,i,o){for(var s=i,u=new Int32Array(8),B=0,C=x?1:-1,p=x;(x?s<n:s>=r)&&B<u.length;)e.get(s,o)===p?(u[B]++,s+=C):(B++,p=!p);return B===u.length||s===(x?n:r)&&B===u.length-1?u:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,x,i,o){for(var s=i,u=x?-1:1,B=0;B<2;B++){for(;(x?s>=r:s<n)&&x===e.get(s,o);){if(Math.abs(i-s)>t.CODEWORD_SKEW_SIZE)return i;s+=u}u=-u,x=!x}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Fe.getFormatInstance();var x=1<<r+1,i=t.correctErrors(e,n,x);t.verifyCodewordCount(e,x);var o=Gc.decode(e,""+r);return o.setErrorsCorrected(i),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw gt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Fe.getFormatInstance();var n=e[0];if(n>e.length)throw Fe.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Fe.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,x=r.length-1;!((e&1)!==n&&(n=e&1,x--,x<0));)r[x]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Rn,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var x=0;x<e[n].length;x++){var i=e[n][x];i.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Dc,t}(),Wc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},An=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw le.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Fe||n instanceof gt?le.getNotFoundInstance():n}},t.decode=function(e,r,n){var x,i,o=new Array,s=dc.detectMultiple(e,r,n);try{for(var u=Wc(s.getPoints()),B=u.next();!B.done;B=u.next()){var C=B.value,p=Hc.decode(s.getBits(),C[4],C[5],C[6],C[7],t.getMinCodewordWidth(C),t.getMaxCodewordWidth(C)),m=new Ft(p.getText(),p.getRawBytes(),void 0,C,Pe.PDF_417);m.putMetadata(_t.ERROR_CORRECTION_LEVEL,p.getECLevel());var w=p.getOther();w!=null&&m.putMetadata(_t.PDF417_EXTRA_METADATA,w),o.push(m)}}catch(b){x={error:b}}finally{try{B&&!B.done&&(i=u.return)&&i.call(u)}finally{if(x)throw x.error}}return o.map(function(b){return b})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?at.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Xc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xx=function(t){Xc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Pt),Yx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ui=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(nt.TRY_HARDER)!==void 0,n=e==null?null:e.get(nt.POSSIBLE_FORMATS),x=new Array;if(n!=null){var i=n.some(function(o){return o===Pe.UPC_A||o===Pe.UPC_E||o===Pe.EAN_13||o===Pe.EAN_8||o===Pe.CODABAR||o===Pe.CODE_39||o===Pe.CODE_93||o===Pe.CODE_128||o===Pe.ITF||o===Pe.RSS_14||o===Pe.RSS_EXPANDED});i&&!r&&x.push(new W0(e)),n.includes(Pe.QR_CODE)&&x.push(new hn),n.includes(Pe.DATA_MATRIX)&&x.push(new un),n.includes(Pe.AZTEC)&&x.push(new cn),n.includes(Pe.PDF_417)&&x.push(new An),i&&r&&x.push(new W0(e))}x.length===0&&(r||x.push(new W0(e)),x.push(new hn),x.push(new un),x.push(new cn),x.push(new An),r&&x.push(new W0(e))),this.readers=x},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=Yx(this.readers),x=n.next();!x.done;x=n.next()){var i=x.value;i.reset()}}catch(o){e={error:o}}finally{try{x&&!x.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new Xx("No readers where selected, nothing can be read.");try{for(var x=Yx(this.readers),i=x.next();!i.done;i=x.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof Xx)continue}}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}throw new le("No MultiFormat Readers were able to detect the code.")},t}(),Yc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Yc(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var x=this,i=new Ui;return i.setHints(r),x=t.call(this,i,n)||this,x}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(P0);var zc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){zc(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new An,r)||this}return e})(P0);var Kc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Kc(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new hn,r)||this}return e})(P0);var Bn;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Bn||(Bn={}));var Ar=Bn,Zc=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new E0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],x=this.field,i=r.length;i<=e;i++){var o=n.multiply(new E0(x,Int32Array.from([1,x.exp(i-1+x.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Me("No error correction bytes");var n=e.length-r;if(n<=0)throw new Me("No data bytes provided");var x=this.buildGenerator(r),i=new Int32Array(n);et.arraycopy(e,0,i,0,n);var o=new E0(this.field,i);o=o.multiplyByMonomial(r,1);for(var s=o.divide(x)[1],u=s.getCoefficients(),B=r-u.length,C=0;C<B;C++)e[n+C]=0;et.arraycopy(u,0,e,n+B,u.length)},t}(),Y0=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),x=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],u=0;u<x-1;u++){var B=s[u];B===s[u+1]&&B===n[o+1][u]&&B===n[o+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),x=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<x;s++){var u=n[o];s+6<x&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(t.isWhiteHorizontal(u,s-4,s)||t.isWhiteHorizontal(u,s+7,s+11))&&r++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var x=r;x<n;x++)if(e[x]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,x){n=Math.max(n,0),x=Math.min(x,e.length);for(var i=n;i<x;i++)if(e[i][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),x=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],u=0;u<x;u++)s[u]===1&&r++;var B=e.getHeight()*e.getWidth(),C=Math.floor(Math.abs(r*2-B)*10/B);return C*t.N4},t.getDataMaskBit=function(e,r,n){var x,i;switch(e){case 0:x=n+r&1;break;case 1:x=n&1;break;case 2:x=r%3;break;case 3:x=(n+r)%3;break;case 4:x=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:i=n*r,x=(i&1)+i%3;break;case 6:i=n*r,x=(i&1)+i%3&1;break;case 7:i=n*r,x=i%3+(n+r&1)&1;break;default:throw new Me("Invalid mask pattern: "+e)}return x===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,x=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<x;s++){for(var u=0,B=-1,C=0;C<i;C++){var p=r?o[s][C]:o[C][s];p===B?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,B=p)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),Jc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$c=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),x=0;x!==r;x++)n[x]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var x=Jc(this.bytes),i=x.next();!i.done;i=x.next()){var o=i.value;ft.fill(o,e)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,x=this.height;n<x;++n)for(var i=this.bytes[n],o=r.bytes[n],s=0,u=this.width;s<u;++s)if(i[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new Ue,r=0,n=this.height;r<n;++r){for(var x=this.bytes[r],i=0,o=this.width;i<o;++i)switch(x[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),dn=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ue;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),qc=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tt=function(t){qc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Pt),zx=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,x,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,x,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,x,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var x=new Rt;t.makeTypeInfoBits(e,r,x);for(var i=0,o=x.getSize();i<o;++i){var s=x.get(x.getSize()-1-i),u=t.TYPE_INFO_COORDINATES[i],B=u[0],C=u[1];if(n.setBoolean(B,C,s),i<8){var p=n.getWidth()-i-1,m=8;n.setBoolean(p,m,s)}else{var p=8,m=n.getHeight()-7+(i-8);n.setBoolean(p,m,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Rt;t.makeVersionInfoBits(e,n);for(var x=6*3-1,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(x);x--,r.setBoolean(i,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,i,s)}}},t.embedDataBits=function(e,r,n){for(var x=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var B=o-u;if(!!t.isEmpty(n.get(B,s))){var C=void 0;x<e.getSize()?(C=e.get(x),++x):C=!1,r!==255&&Y0.getDataMaskBit(r,B,s)&&(C=!C),n.setBoolean(B,s,C)}}s+=i}i=-i,s+=i,o-=2}if(x!==e.getSize())throw new tt("Not all bits consumed: "+x+"/"+e.getSize())},t.findMSBSet=function(e){return 32-at.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Me("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!dn.isValidMaskPattern(r))throw new tt("Invalid mask pattern");var x=e.getBits()<<3|r;n.appendBits(x,5);var i=t.calculateBCHCode(x,t.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Rt;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new tt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new tt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new tt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var x=0;x<8;++x){if(!t.isEmpty(n.get(e+x,r)))throw new tt;n.setNumber(e+x,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var x=0;x<7;++x){if(!t.isEmpty(n.get(e,r+x)))throw new tt;n.setNumber(e,r+x,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var x=0;x<5;++x)for(var i=t.POSITION_ADJUSTMENT_PATTERN[x],o=0;o<5;++o)n.setNumber(e+o,r+x,i[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var x=0;x<7;++x)for(var i=t.POSITION_DETECTION_PATTERN[x],o=0;o<7;++o)n.setNumber(e+o,r+x,i[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var x=7;t.embedVerticalSeparationPattern(x,0,e),t.embedVerticalSeparationPattern(e.getHeight()-x-1,0,e),t.embedVerticalSeparationPattern(x,e.getHeight()-x,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,x=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=x.length;i!==o;i++){var s=x[i];if(s>=0)for(var u=0;u!==o;u++){var B=x[u];B>=0&&t.isEmpty(r.get(B,s))&&t.embedPositionAdjustmentPattern(B-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Qc=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Kx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Y0.applyMaskPenaltyRule1(e)+Y0.applyMaskPenaltyRule2(e)+Y0.applyMaskPenaltyRule3(e)+Y0.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var x=t.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(Ar.CHARACTER_SET)!==void 0;i&&(x=n.get(Ar.CHARACTER_SET).toString());var o=this.chooseMode(e,x),s=new Rt;if(o===rt.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==x)){var u=ht.getCharacterSetECIByName(x);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(o,s);var B=new Rt;this.appendBytes(e,o,B,x);var C;if(n!==null&&n.get(Ar.QR_VERSION)!==void 0){var p=Number.parseInt(n.get(Ar.QR_VERSION).toString(),10);C=p0.getVersionForNumber(p);var m=this.calculateBitsNeeded(o,s,B,C);if(!this.willFit(m,C,r))throw new tt("Data too big for requested version")}else C=this.recommendVersion(r,o,s,B);var w=new Rt;w.appendBitArray(s);var b=o===rt.BYTE?B.getSizeInBytes():e.length;this.appendLengthInfo(b,C,o,w),w.appendBitArray(B);var R=C.getECBlocksForLevel(r),L=C.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(L,w);var X=this.interleaveWithECBytes(w,C.getTotalCodewords(),L,R.getNumBlocks()),k=new dn;k.setECLevel(r),k.setMode(o),k.setVersion(C);var J=C.getDimensionForVersion(),re=new $c(J,J),Z=this.chooseMaskPattern(X,r,C,re);return k.setMaskPattern(Z),zx.buildMatrix(X,r,C,Z,re),k.setMatrix(re),k},t.recommendVersion=function(e,r,n,x){var i=this.calculateBitsNeeded(r,n,x,p0.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(r,n,x,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,x){return r.getSize()+e.getCharacterCountBits(x)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),ht.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return rt.KANJI;for(var n=!1,x=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)x=!0;else return rt.BYTE}return x?rt.ALPHANUMERIC:n?rt.NUMERIC:rt.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=jt.encode(e,ht.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var x=0;x<n;x+=2){var i=r[x]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,x){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<dn.NUM_MASK_PATTERNS;s++){zx.buildMatrix(e,r,n,s,x);var u=this.calculateMaskPenalty(x);u<i&&(i=u,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var x=p0.getVersionForNumber(n);if(t.willFit(e,x,r))return x}throw new tt("Data too big")},t.willFit=function(e,r,n){var x=r.getTotalCodewords(),i=r.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=x-o,u=(e+7)/8;return s>=u},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new tt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var x=0;x<4&&r.getSize()<n;++x)r.appendBit(!1);var i=r.getSize()&7;if(i>0)for(var x=i;x<8;x++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),x=0;x<o;++x)r.appendBits((x&1)===0?236:17,8);if(r.getSize()!==n)throw new tt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,x,i,o){if(x>=n)throw new tt("Block ID too large");var s=e%n,u=n-s,B=Math.floor(e/n),C=B+1,p=Math.floor(r/n),m=p+1,w=B-p,b=C-m;if(w!==b)throw new tt("EC bytes mismatch");if(n!==u+s)throw new tt("RS blocks mismatch");if(e!==(p+w)*u+(m+b)*s)throw new tt("Total bytes mismatch");x<u?(i[0]=p,o[0]=w):(i[0]=m,o[0]=b)},t.interleaveWithECBytes=function(e,r,n,x){var i,o,s,u;if(e.getSizeInBytes()!==n)throw new tt("Number of bits and data bytes does not match");for(var B=0,C=0,p=0,m=new Array,w=0;w<x;++w){var b=new Int32Array(1),R=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,x,w,b,R);var L=b[0],X=new Uint8Array(L);e.toBytes(8*B,X,0,L);var k=t.generateECBytes(X,R[0]);m.push(new Qc(X,k)),C=Math.max(C,L),p=Math.max(p,k.length),B+=b[0]}if(n!==B)throw new tt("Data bytes does not match offset");for(var J=new Rt,w=0;w<C;++w)try{for(var re=(i=void 0,Kx(m)),Z=re.next();!Z.done;Z=re.next()){var ce=Z.value,X=ce.getDataBytes();w<X.length&&J.appendBits(X[w],8)}}catch(Ie){i={error:Ie}}finally{try{Z&&!Z.done&&(o=re.return)&&o.call(re)}finally{if(i)throw i.error}}for(var w=0;w<p;++w)try{for(var ue=(s=void 0,Kx(m)),D=ue.next();!D.done;D=ue.next()){var ce=D.value,k=ce.getErrorCorrectionBytes();w<k.length&&J.appendBits(k[w],8)}}catch(Ie){s={error:Ie}}finally{try{D&&!D.done&&(u=ue.return)&&u.call(ue)}finally{if(s)throw s.error}}if(r!==J.getSizeInBytes())throw new tt("Interleaving error: "+r+" and "+J.getSizeInBytes()+" differ.");return J},t.generateECBytes=function(e,r){for(var n=e.length,x=new Int32Array(n+r),i=0;i<n;i++)x[i]=e[i]&255;new Zc(r0.QR_CODE_FIELD_256).encode(x,r);for(var o=new Uint8Array(r),i=0;i<r;i++)o[i]=x[n+i];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,x){var i=n.getCharacterCountBits(r);if(e>=1<<i)throw new tt(e+" is bigger than "+((1<<i)-1));x.appendBits(e,i)},t.appendBytes=function(e,r,n,x){switch(r){case rt.NUMERIC:t.appendNumericBytes(e,n);break;case rt.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case rt.BYTE:t.append8BitBytes(e,n,x);break;case rt.KANJI:t.appendKanjiBytes(e,n);break;default:throw new tt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,x=0;x<n;){var i=t.getDigit(e.charAt(x));if(x+2<n){var o=t.getDigit(e.charAt(x+1)),s=t.getDigit(e.charAt(x+2));r.appendBits(i*100+o*10+s,10),x+=3}else if(x+1<n){var o=t.getDigit(e.charAt(x+1));r.appendBits(i*10+o,7),x+=2}else r.appendBits(i,4),x++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,x=0;x<n;){var i=t.getAlphanumericCode(e.charCodeAt(x));if(i===-1)throw new tt;if(x+1<n){var o=t.getAlphanumericCode(e.charCodeAt(x+1));if(o===-1)throw new tt;r.appendBits(i*45+o,11),x+=2}else r.appendBits(i,6),x++}},t.append8BitBytes=function(e,r,n){var x;try{x=jt.encode(e,n)}catch(u){throw new tt(u)}for(var i=0,o=x.length;i!==o;i++){var s=x[i];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=jt.encode(e,ht.SJIS)}catch(p){throw new tt(p)}for(var x=n.length,i=0;i<x;i+=2){var o=n[i]&255,s=n[i+1]&255,u=o<<8&4294967295|s,B=-1;if(u>=33088&&u<=40956?B=u-33088:u>=57408&&u<=60351&&(B=u-49472),B===-1)throw new tt("Invalid byte sequence");var C=(B>>8)*192+(B&255);r.appendBits(C,13)}},t.appendECI=function(e,r){r.appendBits(rt.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=ht.UTF8.getName(),t})();var el=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){el(e,t);function e(r,n,x,i,o,s,u,B){var C=t.call(this,s,u)||this;if(C.yuvData=r,C.dataWidth=n,C.dataHeight=x,C.left=i,C.top=o,i+s>n||o+u>x)throw new Me("Crop rectangle does not fit within image data.");return B&&C.reverseHorizontal(s,u),C}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Me("Requested row is outside the image: "+r);var x=this.getWidth();(n==null||n.length<x)&&(n=new Uint8ClampedArray(x));var i=(r+this.top)*this.dataWidth+this.left;return et.arraycopy(this.yuvData,i,n,0,x),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var x=r*n,i=new Uint8ClampedArray(x),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return et.arraycopy(this.yuvData,o,i,0,x),i;for(var s=0;s<n;s++){var u=s*r;et.arraycopy(this.yuvData,o,i,u,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,x,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,x,i,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,x=new Int32Array(r*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var u=s*r,B=0;B<r;B++){var C=i[o+B*e.THUMBNAIL_SCALE_FACTOR]&255;x[u+B]=4278190080|C*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return x},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var x=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+r/2,u=o,B=o+r-1;u<s;u++,B--){var C=x[u];x[u]=x[B],x[B]=C}},e.prototype.invert=function(){return new Tn(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Nr);var tl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){tl(e,t);function e(r,n,x,i,o,s,u){var B=t.call(this,n,x)||this;if(B.dataWidth=i,B.dataHeight=o,B.left=s,B.top=u,r.BYTES_PER_ELEMENT===4){for(var C=n*x,p=new Uint8ClampedArray(C),m=0;m<C;m++){var w=r[m],b=w>>16&255,R=w>>7&510,L=w&255;p[m]=(b+R+L)/4&255}B.luminances=p}else B.luminances=r;if(i===void 0&&(B.dataWidth=n),o===void 0&&(B.dataHeight=x),s===void 0&&(B.left=0),u===void 0&&(B.top=0),B.left+n>B.dataWidth||B.top+x>B.dataHeight)throw new Me("Crop rectangle does not fit within image data.");return B}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Me("Requested row is outside the image: "+r);var x=this.getWidth();(n==null||n.length<x)&&(n=new Uint8ClampedArray(x));var i=(r+this.top)*this.dataWidth+this.left;return et.arraycopy(this.luminances,i,n,0,x),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var x=r*n,i=new Uint8ClampedArray(x),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return et.arraycopy(this.luminances,o,i,0,x),i;for(var s=0;s<n;s++){var u=s*r;et.arraycopy(this.luminances,o,i,u,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,x,i){return new e(this.luminances,x,i,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Tn(this)},e})(Nr);var rl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nl=function(t){rl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(ht),xl=function(){function t(){}return t.ISO_8859_1=ht.ISO8859_1,t}(),gn,il=301,ol=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=il);return{LOG:t,ALOG:e}};gn=ol([],[]),gn.LOG;gn.ALOG;var Zx;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Zx||(Zx={}));var Jx=129,ji=230,al=231,sl=235,El=236,cl=237,ll=238,ul=239,hl=240,qr=254,fl=254,$x="[)>05",qx="[)>06",Qx="",Je=0,pt=1,St=2,lt=3,dt=4,Dt=5,Al=function(){function t(){}return t.prototype.getEncodingMode=function(){return Je},t.prototype.encode=function(e){var r=Xt.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),x=Xt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(x!==this.getEncodingMode())switch(x){case Dt:e.writeCodeword(al),e.signalEncoderChange(Dt);return;case pt:e.writeCodeword(ji),e.signalEncoderChange(pt);return;case lt:e.writeCodeword(ll),e.signalEncoderChange(lt);break;case St:e.writeCodeword(ul),e.signalEncoderChange(St);break;case dt:e.writeCodeword(hl),e.signalEncoderChange(dt);break;default:throw new Error("Illegal mode: "+x)}else Xt.isExtendedASCII(n)?(e.writeCodeword(sl),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Xt.isDigit(e)&&Xt.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),Bl=function(){function t(){}return t.prototype.getEncodingMode=function(){return Dt},t.prototype.encode=function(e){var r=new Ue;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var x=Xt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(x!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}var i=r.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(i<=249)r.setCharAt(0,Qe.getCharAt(i));else if(i<=1555)r.setCharAt(0,Qe.getCharAt(Math.floor(i/250)+249)),r.insert(1,Qe.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var B=0,n=r.length();B<n;B++)e.writeCodeword(this.randomize255State(r.charAt(B).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,x=e+n;return x<=255?x:x-256},t}(),Pn=function(){function t(){}return t.prototype.getEncodingMode=function(){return pt},t.prototype.encodeMaximal=function(e){for(var r=new Ue,n=0,x=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(x=e.pos,i=r.length())}if(i!==r.length()){var s=Math.floor(r.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var B=e.getSymbolInfo().getDataCapacity()-u,C=Math.floor(r.length()%3);(C===2&&B!==2||C===1&&(n>3||B!==1))&&(e.pos=x)}r.length()>0&&e.writeCodeword(ji),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Ue;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var x=this.encodeChar(n,r),i=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new Ue;for(r.length()%3===2&&s!==2&&(x=this.backtrackOneCharacter(e,r,u,x));r.length()%3===1&&(x>3||s!==1);)x=this.backtrackOneCharacter(e,r,u,x);break}var B=r.length();if(B%3===0){var C=Xt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(C!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,x){var i=r.length(),o=r.toString().substring(0,i-x);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return x=this.encodeChar(s,n),e.resetSymbolInfo(),x},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),x=r.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(x===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(qr)}else if(o===1&&x===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(qr),e.pos--}else if(x===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(qr)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Je)},t.prototype.encodeChar=function(e,r){if(e===" ".charCodeAt(0))return r.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return r.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return r.append(e-65+14),1;if(e<" ".charCodeAt(0))return r.append(0),r.append(e),2;if(e<="/".charCodeAt(0))return r.append(1),r.append(e-33),2;if(e<="@".charCodeAt(0))return r.append(1),r.append(e-58+15),2;if(e<="_".charCodeAt(0))return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append(1+"");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,x=r%256,i=new Ue;return i.append(n),i.append(x),i.toString()},t}(),dl=function(){function t(){}return t.prototype.getEncodingMode=function(){return dt},t.prototype.encode=function(e){for(var r=new Ue;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var x=r.length();if(x>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var i=r.toString().substring(4);r.setLengthToZero(),r.append(i);var o=Xt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}}r.append(Qe.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var x=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>x&&(e.updateSymbolInfo(e.getCodewordCount()+1),x=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=x&&x<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),u=!e.hasMoreCharacters(),B=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var x=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();x>=3&&(B=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}B?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(Je)}},t.prototype.encodeChar=function(e,r){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?r.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?r.append(Qe.getCharAt(e-64)):Xt.illegalCharacter(Qe.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),x=r>=2?e.charAt(1).charCodeAt(0):0,i=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(x<<12)+(i<<6)+o,u=s>>16&255,B=s>>8&255,C=s&255,p=new Ue;return p.append(u),r>=2&&p.append(B),r>=3&&p.append(C),p.toString()},t}(),gl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xe=function(){function t(e,r,n,x,i,o,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=x,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=u}return t.lookup=function(e,r,n,x,i){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),x===void 0&&(x=null),i===void 0&&(i=!0);try{for(var u=vl(pl),B=u.next();!B.done;B=u.next()){var C=B.value;if(!(r===1&&C.rectangular)&&!(r===2&&!C.rectangular)&&!(n!=null&&(C.getSymbolWidth()<n.getWidth()||C.getSymbolHeight()<n.getHeight()))&&!(x!=null&&(C.getSymbolWidth()>x.getWidth()||C.getSymbolHeight()>x.getHeight()))&&e<=C.dataCapacity)return C}}catch(p){o={error:p}}finally{try{B&&!B.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),Cl=function(t){gl(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Xe),pl=[new Xe(!1,3,5,8,8,1),new Xe(!1,5,7,10,10,1),new Xe(!0,5,7,16,6,1),new Xe(!1,8,10,12,12,1),new Xe(!0,10,11,14,6,2),new Xe(!1,12,12,14,14,1),new Xe(!0,16,14,24,10,1),new Xe(!1,18,14,16,16,1),new Xe(!1,22,18,18,18,1),new Xe(!0,22,18,16,10,2),new Xe(!1,30,20,20,20,1),new Xe(!0,32,24,16,14,2),new Xe(!1,36,24,22,22,1),new Xe(!1,44,28,24,24,1),new Xe(!0,49,28,22,14,2),new Xe(!1,62,36,14,14,4),new Xe(!1,86,42,16,16,4),new Xe(!1,114,48,18,18,4),new Xe(!1,144,56,20,20,4),new Xe(!1,174,68,22,22,4),new Xe(!1,204,84,24,24,4,102,42),new Xe(!1,280,112,14,14,16,140,56),new Xe(!1,368,144,16,16,16,92,36),new Xe(!1,456,192,18,18,16,114,48),new Xe(!1,576,224,20,20,16,144,56),new Xe(!1,696,272,22,22,16,174,68),new Xe(!1,816,336,24,24,16,136,56),new Xe(!1,1050,408,18,18,36,175,68),new Xe(!1,1304,496,20,20,36,163,62),new Cl],_l=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ue,x=0,i=r.length;x<i;x++){var o=String.fromCharCode(r[x]&255);if(o==="?"&&e.charAt(x)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Ue,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Xe.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),Dl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ml=function(t){Dl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return lt},e.prototype.encode=function(r){for(var n=new Ue;r.hasMoreCharacters();){var x=r.getCurrentChar();r.pos++,this.encodeChar(x,n);var i=n.length();if(i%3===0){this.writeNextTriplet(r,n);var o=Xt.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Je);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case"*".charCodeAt(0):n.append(1);break;case">".charCodeAt(0):n.append(2);break;case" ".charCodeAt(0):n.append(3);break;default:r>="0".charCodeAt(0)&&r<="9".charCodeAt(0)?n.append(r-48+4):r>="A".charCodeAt(0)&&r<="Z".charCodeAt(0)?n.append(r-65+14):Xt.illegalCharacter(Qe.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var x=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),i=n.length();r.pos-=i,(r.getRemainingCharacters()>1||x>1||r.getRemainingCharacters()!==x)&&r.writeCodeword(fl),r.getNewEncoding()<0&&r.signalEncoderChange(Je)},e}(Pn),Fl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yl=function(t){Fl(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return St},e.prototype.encodeChar=function(r,n){if(r===" ".charCodeAt(0))return n.append(3),1;if(r>="0".charCodeAt(0)&&r<="9".charCodeAt(0))return n.append(r-48+4),1;if(r>="a".charCodeAt(0)&&r<="z".charCodeAt(0))return n.append(r-97+14),1;if(r<" ".charCodeAt(0))return n.append(0),n.append(r),2;if(r<="/".charCodeAt(0))return n.append(1),n.append(r-33),2;if(r<="@".charCodeAt(0))return n.append(1),n.append(r-58+15),2;if(r>="[".charCodeAt(0)&&r<="_".charCodeAt(0))return n.append(1),n.append(r-91+22),2;if(r==="`".charCodeAt(0))return n.append(2),n.append(0),2;if(r<="Z".charCodeAt(0))return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append(1+"");var x=2;return x+=this.encodeChar(r-128,n),x},e}(Pn),wl=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=Jx+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,x,i){r===void 0&&(r=0),n===void 0&&(n=null),x===void 0&&(x=null),i===void 0&&(i=!1);var o=new Pn,s=[new Al,o,new yl,new ml,new dl,new Bl],u=new _l(e);u.setSymbolShape(r),u.setSizeConstraints(n,x),e.startsWith($x)&&e.endsWith(Qx)?(u.writeCodeword(El),u.setSkipAtEnd(2),u.pos+=$x.length):e.startsWith(qx)&&e.endsWith(Qx)&&(u.writeCodeword(cl),u.setSkipAtEnd(2),u.pos+=qx.length);var B=Je;for(i&&(o.encodeMaximal(u),B=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[B].encode(u),u.getNewEncoding()>=0&&(B=u.getNewEncoding(),u.resetEncoderSignal());var C=u.getCodewordCount();u.updateSymbolInfo();var p=u.getSymbolInfo().getDataCapacity();C<p&&B!==Je&&B!==Dt&&B!==dt&&u.writeCodeword("\xFE");var m=u.getCodewords();for(m.length()<p&&m.append(Jx);m.length()<p;)m.append(this.randomize253State(m.length()+1));return u.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var x=this.lookAheadTestIntern(e,r,n);if(n===lt&&x===lt){for(var i=Math.min(r+3,e.length),o=r;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Je}else if(n===dt&&x===dt){for(var i=Math.min(r+4,e.length),o=r;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Je}return x},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var x;n===Je?x=[0,1,1,1,1,1.25]:(x=[1,2,2,2,2,2.25],x[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(r+i===e.length){ft.fill(o,0),ft.fill(s,0);var u=this.findMinimums(x,s,at.MAX_VALUE,o),B=this.getMinimumCount(o);if(s[Je]===u)return Je;if(B===1){if(o[Dt]>0)return Dt;if(o[dt]>0)return dt;if(o[St]>0)return St;if(o[lt]>0)return lt}return pt}var C=e.charCodeAt(r+i);if(i++,this.isDigit(C)?x[Je]+=.5:this.isExtendedASCII(C)?(x[Je]=Math.ceil(x[Je]),x[Je]+=2):(x[Je]=Math.ceil(x[Je]),x[Je]++),this.isNativeC40(C)?x[pt]+=2/3:this.isExtendedASCII(C)?x[pt]+=8/3:x[pt]+=4/3,this.isNativeText(C)?x[St]+=2/3:this.isExtendedASCII(C)?x[St]+=8/3:x[St]+=4/3,this.isNativeX12(C)?x[lt]+=2/3:this.isExtendedASCII(C)?x[lt]+=13/3:x[lt]+=10/3,this.isNativeEDIFACT(C)?x[dt]+=3/4:this.isExtendedASCII(C)?x[dt]+=17/4:x[dt]+=13/4,this.isSpecialB256(C)?x[Dt]+=4:x[Dt]++,i>=4){if(ft.fill(o,0),ft.fill(s,0),this.findMinimums(x,s,at.MAX_VALUE,o),s[Je]<this.min(s[Dt],s[pt],s[St],s[lt],s[dt]))return Je;if(s[Dt]<s[Je]||s[Dt]+1<this.min(s[pt],s[St],s[lt],s[dt]))return Dt;if(s[dt]+1<this.min(s[Dt],s[pt],s[St],s[lt],s[Je]))return dt;if(s[St]+1<this.min(s[Dt],s[pt],s[dt],s[lt],s[Je]))return St;if(s[lt]+1<this.min(s[Dt],s[pt],s[dt],s[St],s[Je]))return lt;if(s[pt]+1<this.min(s[Je],s[Dt],s[dt],s[St])){if(s[pt]<s[lt])return pt;if(s[pt]===s[lt]){for(var p=r+i+1;p<e.length;){var m=e.charCodeAt(p);if(this.isX12TermSep(m))return lt;if(!this.isNativeX12(m))break;p++}return pt}}}}},t.min=function(e,r,n,x,i){var o=Math.min(e,Math.min(r,Math.min(n,x)));return i===void 0?o:Math.min(o,i)},t.findMinimums=function(e,r,n,x){for(var i=0;i<6;i++){var o=r[i]=Math.ceil(e[i]);n>o&&(n=o,ft.fill(x,0)),n===o&&(x[i]=x[i]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,x=r;x<n&&this.isDigit(e.charCodeAt(x));)x++;return x-r},t.illegalCharacter=function(e){var r=at.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),Xt=wl,Qr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ei=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return jt.encode(e,this.charset)!=null}catch{return!1}},t}(),Sl=function(){function t(e,r,n){var x,i,o,s,u,B;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(Se){return new ei(nl.forName(Se))}),this.encoders=[];var C=[];C.push(new ei(xl.ISO_8859_1));for(var p=r!=null&&r.name.startsWith("UTF"),m=0;m<e.length;m++){var w=!1;try{for(var b=(x=void 0,Qr(C)),R=b.next();!R.done;R=b.next()){var L=R.value,X=e.charAt(m),k=X.charCodeAt(0);if(k===n||L.canEncode(X)){w=!0;break}}}catch(Se){x={error:Se}}finally{try{R&&!R.done&&(i=b.return)&&i.call(b)}finally{if(x)throw x.error}}if(!w)try{for(var J=(o=void 0,Qr(this.ENCODERS)),re=J.next();!re.done;re=J.next()){var L=re.value;if(L.canEncode(e.charAt(m))){C.push(L),w=!0;break}}}catch(Se){o={error:Se}}finally{try{re&&!re.done&&(s=J.return)&&s.call(J)}finally{if(o)throw o.error}}w||(p=!0)}if(C.length===1&&!p)this.encoders=[C[0]];else{this.encoders=[];var Z=0;try{for(var ce=Qr(C),ue=ce.next();!ue.done;ue=ce.next()){var L=ue.value;this.encoders[Z++]=L}}catch(Se){u={error:Se}}finally{try{ue&&!ue.done&&(B=ce.return)&&B.call(ce)}finally{if(u)throw u.error}}}var D=-1;if(r!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&r.name===this.encoders[m].name){D=m;break}}this.priorityEncoderIndex=D}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return jt.encode(Qe.getCharAt(e),this.encoders[r].name)},t}(),Tl=3,bl=function(){function t(e,r,n){this.fnc1=n;var x=new Sl(e,r,n);if(x.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,x,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Ue,x=e;x<r;x++){if(this.isECI(x))throw new Error("value at "+x+" is not a character but an ECI");n.append(this.charAt(x))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,x,i,o){var s=e.charAt(x).charCodeAt(0),u=0,B=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(u=r.getPriorityEncoderIndex(),B=u+1);for(var C=u;C<B;C++)(s===o||r.canEncode(s,C))&&this.addEdge(n,x+1,new ti(s,r,C,i,o))},t.prototype.encodeMinimally=function(e,r,n){var x=e.length,i=new ti[x+1][r.length()];this.addEdges(e,r,i,0,null,n);for(var o=1;o<=x;o++){for(var s=0;s<r.length();s++)i[o][s]!=null&&o<x&&this.addEdges(e,r,i,o,i[o][s],n);for(var s=0;s<r.length();s++)i[o-1][s]=null}for(var u=-1,B=at.MAX_VALUE,s=0;s<r.length();s++)if(i[x][s]!=null){var C=i[x][s];C.cachedTotalSize<B&&(B=C.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],m=i[x][u];m!=null;){if(m.isFNC1())p.unshift(1e3);else for(var w=r.encode(m.c,m.encoderIndex),o=w.length-1;o>=0;o--)p.unshift(w[o]&255);var b=m.previous===null?0:m.previous.encoderIndex;b!==m.encoderIndex&&p.unshift(256+r.getECIValue(m.encoderIndex)),m=m.previous}for(var R=[],o=0;o<R.length;o++)R[o]=p[o];return R},t}(),ti=function(){function t(e,r,n,x,i){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=x,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=x===null?0:x.encoderIndex;s!==n&&(o+=Tl),x!=null&&(o+=x.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),Il=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();globalThis&&globalThis.__values;var Ol=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),x,i=[],o;try{for(;(e===void 0||e-- >0)&&!(x=n.next()).done;)i.push(x.value)}catch(s){o={error:s}}finally{try{x&&!x.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};globalThis&&globalThis.__spread;var ri;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(ri||(ri={}));(function(t){Il(e,t);function e(r,n,x,i,o){var s=t.call(this,r,n,x)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(bl);var Rl=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),Pl=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vi=function(t){Pl(e,t);function e(r,n,x){var i=t.call(this,r)||this;return i.value=n,i.bitCount=x,i}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+at.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(Rl),Ml=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,x){n.__proto__=x}||function(n,x){for(var i in x)x.hasOwnProperty(i)&&(n[i]=x[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Ml(e,t);function e(r,n,x){var i=t.call(this,r,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=x,i}return e.prototype.appendTo=function(r,n){for(var x=0;x<this.binaryShiftByteCount;x++)(x===0||x===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):x===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+x],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Vi);var K0=0,Sr=1,I0=2,Gi=3,z0=4;new Vi(null,0,0);var Nl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ll(t){var e,r;try{for(var n=Nl(t),x=n.next();!x.done;x=n.next()){var i=x.value;ft.fill(i,-1)}}catch(o){e={error:o}}finally{try{x&&!x.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[K0][z0]=0,t[Sr][z0]=0,t[Sr][K0]=28,t[Gi][z0]=0,t[I0][z0]=0,t[I0][K0]=15,t}Ll(ft.createInt32Array(6,6));globalThis&&globalThis.__values;function kl(t){var e=Qe.getCharCode(" "),r=Qe.getCharCode("."),n=Qe.getCharCode(",");t[K0][e]=1;for(var x=Qe.getCharCode("Z"),i=Qe.getCharCode("A"),o=i;o<=x;o++)t[K0][o]=o-i+2;t[Sr][e]=1;for(var s=Qe.getCharCode("z"),u=Qe.getCharCode("a"),o=u;o<=s;o++)t[Sr][o]=o-u+2;t[I0][e]=1;for(var B=Qe.getCharCode("9"),C=Qe.getCharCode("0"),o=C;o<=B;o++)t[I0][o]=o-C+2;t[I0][n]=12,t[I0][r]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],m=0;m<p.length;m++)t[Gi][Qe.getCharCode(p[m])]=m;for(var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<w.length;m++)Qe.getCharCode(w[m])>0&&(t[z0][Qe.getCharCode(w[m])]=m);return t}kl(ft.createInt32Array(5,256));globalThis&&globalThis.__values;globalThis&&globalThis.__values;class Ul{constructor(){zt(this,"reader");zt(this,"canvas");zt(this,"settings")}async init(){this.reader||(this.reader=new Ui),this.canvas||(this.canvas=document.createElement("canvas"))}async detect(e){const r=Date.now();typeof e=="string"&&(e=await this.loadImageFromDataURL(e));const n=this.createBinaryBitmap(e),x=[];let i,o=0;try{i=this.reader.decode(n),o=Date.now()-r}catch(u){console.log(u)}return i&&x.push(this.wrapResult(i)),{elapsedTime:o,results:x}}loadImageFromDataURL(e){return new Promise(async function(r,n){try{const x=new Image;x.src=e,x.onload=function(){r(x)}}catch(x){n(x)}})}wrapResult(e){const r=this.getRectFromPoints(e.getResultPoints());let n="";e.getRawBytes()&&(n=this.getBinary(e.getRawBytes()));const x=Pe[e.getBarcodeFormat()],i=r.top;let o=r.bottom;return o===i&&(o=i+2),{barcodeFormat:x,barcodeText:e.getText(),barcodeBytes:n,x1:r.left,x2:r.right,x3:r.right,x4:r.left,y1:i,y2:i,y3:o,y4:o}}getBinary(e){let r="";for(let n=0;n<e.length;n++){const x=e[n];r=r+_n(x.toString())}return r}getRectFromPoints(e){return Tr(this.convertResultPointsToPoints(e))}convertResultPointsToPoints(e){const r=[];for(let n=0;n<e.length;n++){const x=e[n],i={x:x.getX(),y:x.getY()};r.push(i)}return r}createBinaryBitmap(e){const r=this.canvas.getContext("2d");let n,x;e instanceof HTMLVideoElement?(n=e.videoWidth,x=e.videoHeight):(n=e.naturalWidth,x=e.naturalHeight),this.canvas.width=n,this.canvas.height=x,r.drawImage(e,0,0,n,x);const i=new Si(this.canvas),o=new wi(i);return new yi(o)}getSupportedSettings(){return[]}async setSupportedSettings(e){this.settings=e}}class Mn{constructor(){zt(this,"engine","Dynamsoft");zt(this,"reader")}static async createInstance(e){const r=new Mn;return r.setEngine(e),await r.init(),r}setEngine(e){this.engine=e}getEngine(){return this.engine}async init(){this.engine==="Dynamsoft"?this.reader=new Es:this.engine==="ZBar"?this.reader=new cs:this.reader=new Ul,await this.reader.init()}detect(e){return this.reader.detect(e)}static getEngines(){return["Dynamsoft","ZXing","ZBar"]}getSupportedSettings(){return this.reader.getSupportedSettings()}async setSupportedSettings(e){return this.reader.setSupportedSettings(e)}}const en=[],ni=[];function jl(t,e){if(t===e)return 0;const r=t;t.length>e.length&&(t=e,e=r);let n=t.length,x=e.length;for(;n>0&&t.charCodeAt(~-n)===e.charCodeAt(~-x);)n--,x--;let i=0;for(;i<n&&t.charCodeAt(i)===e.charCodeAt(i);)i++;if(n-=i,x-=i,n===0)return x;let o,s,u,B,C=0,p=0;for(;C<n;)ni[C]=t.charCodeAt(i+C),en[C]=++C;for(;p<x;)for(o=e.charCodeAt(i+p),u=p++,s=p,C=0;C<n;C++)B=o===ni[C]?u:u+1,u=en[C],s=en[C]=u>s?B>s?s+1:B:B>u?u+1:B;return s}const vn=t=>t.lastIndexOf(".")!=-1?t.substring(0,t.lastIndexOf(".")):t,iu=async t=>new Promise(function(e,r){const n=new FileReader;n.onload=function(x){e(x.target.result)},n.onerror=function(){r("oops, something went wrong.")},n.readAsDataURL(t)}),ou=async t=>new Promise(function(e,r){const n=new FileReader;n.onload=function(x){e(x.target.result)},n.onerror=function(){r("oops, something went wrong.")},n.readAsText(t)}),au=async(t,e)=>{const r=t.info.name,n=[];let x=0,i=0,o=0,s=0,u=0,B=0;for(let b=0;b<t.info.images.length;b++){const R=t.info.images[b];let L="",X=[];const k=await s0.getItem(r+":groundTruth:"+vn(R)+".txt");k&&(X=JSON.parse(k),L=Vl(X));let J="",re="",Z="",ce="",ue="";const D=await s0.getItem(r+":detectionResult:"+vn(R)+"-"+e+".json");if(D){const Ie=JSON.parse(D);J=Gl(Ie),Z=Hl(Ie),re=Ie.elapsedTime.toString(),s=s+Ie.elapsedTime;const ke=Wl(Ie.results,X);ke.correct===ke.groundTruth?ce="true":ce="false",u=u+1,ue=ke.misdetected.toString(),x=x+X.length,i=i+ke.correct,o=o+ke.misdetected}ce==="true"&&(B=B+1);const Se={number:b+1,filename:R,groundTruth:L,detectedText:J,time:re,barcodeFormat:Z,correct:ce,misdetected:ue};n.push(Se)}const C=parseFloat((i/x*100).toFixed(2)),p=parseFloat(((x-o)/x*100).toFixed(2)),m={fileNumber:t.info.images.length,correctFilesNumber:B,barcodeNumber:x,accuracy:C,precision:p,averageTime:parseFloat((s/u).toFixed(2))};return{name:e,metrics:m,rows:n}},Vl=t=>{let e="";for(let r=0;r<t.length;r++){const n=t[r];e=e+n.text,r!=t.length-1&&(e=e+", ")}return e},Gl=t=>{let e="";for(let r=0;r<t.results.length;r++){const n=t.results[r];e=e+n.barcodeText,r!=t.results.length-1&&(e=e+", ")}return e},Hl=t=>{let e="";for(let r=0;r<t.results.length;r++){const n=t.results[r];e=e+n.barcodeFormat,r!=t.results.length-1&&(e=e+", ")}return e},Wl=(t,e)=>{const r=e.length,n=t.length;let x=0,i=0;for(let o=0;o<t.length;o++){const s=t[o];for(let u=0;u<e.length;u++){const B=e[u],C=Kl(s),p=zl(B);if(Zl(C,p)>0){B.text?Xl(B,s)?i=i+1:x=x+1:i=i+1;continue}}}return{groundTruth:r,detected:n,misdetected:x,correct:i}};function Xl(t,e){if(t.value_attrib.Mode==="binary"){const r=jl(t.text,e.barcodeBytes)/4;return 1-r/Math.max(t.text.length,e.barcodeBytes.length)>=.85}else{let r=t.text,n=e.barcodeText;return e.barcodeFormat.toLowerCase().indexOf("upc")!=-1&&t.attrib.Type.toLowerCase().indexOf("ean")!=-1&&n!=r&&(n="0"+n),e.barcodeFormat.toLowerCase().indexOf("ean")!=-1&&t.attrib.Type.toLowerCase().indexOf("upc")!=-1&&n!=r&&(n=n.substring(1,n.length)),n=Yl(n),n=xi(n),r=xi(r),r===n}}function Yl(t){return t=t.replaceAll("{GS}",""),t}function xi(t){return t=t.replaceAll("\r",""),t=t.replaceAll(`
`,""),t=t.replaceAll("	",""),t}function zl(t){const e={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},n={x:t.x3,y:t.y3},x={x:t.x4,y:t.y4};return[e,r,n,x]}function Kl(t){const e={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},n={x:t.x3,y:t.y3},x={x:t.x4,y:t.y4};return[e,r,n,x]}function Zl(t,e){const r=Tr(t),n=Tr(e);return Jl(r,n)}function Jl(t,e){const r=Math.max(t.left,e.left),n=Math.min(t.right,e.right),x=Math.max(t.top,e.top),i=Math.min(t.bottom,e.bottom);if(r>=n||i<=x)return 0;const o=t.width*t.height,s=e.width*e.height,u=(i-x)*(n-r);return u/(o+s-u)}function Tr(t){if(t[0]){let e,r,n,x;return e=t[0].x,r=t[0].y,n=0,x=0,t.forEach(o=>{e=Math.min(o.x,e),r=Math.min(o.y,r),n=Math.max(o.x,n),x=Math.max(o.y,x)}),{left:e,top:r,right:n,bottom:x,width:n-e,height:x-r}}else throw new Error("Invalid number of points")}const su=async t=>{for(let n=0;n<t.info.images.length;n++){const x=t.info.images[n];s0.removeItem(t.info.name+":image:"+x),s0.removeItem(t.info.name+":groundTruth:"+vn(x)+".txt")}const e=await s0.getItem(t.info.name+":detectionResultFileNamesList");if(e)for(let n=0;n<e.length;n++){const x=e[n];s0.removeItem(t.info.name+":detectionResult:"+x)}const r=Mn.getEngines();for(let n=0;n<r.length;n++){const x=r[n];s0.removeItem(t.info.name+":settings:"+x)}t.info.images=[]};function Eu(t){const e=t.split(",")[0].split(":")[1].split(";")[0],r=atob(t.split(",")[1]),n=[];for(let x=0;x<r.length;x++)n.push(r.charCodeAt(x));return new Blob([new Uint8Array(n)],{type:e})}function cu(t){return new Promise(function(e,r){const n=new FileReader;n.onload=function(x){x.target&&(typeof x.target.result=="string"?e(x.target.result):r(""))},n.readAsDataURL(t)})}const lu=async(t,e,r)=>{const n=await s0.getItem(t+":settings:"+e),x=[];for(let i=0;i<r.length;i++){const o=r[i];let s="";if(n)for(let B=0;B<n.length;B++){const C=n[B];C.name===o&&(s=C.value)}const u={name:o,value:s};x.push(u)}return x};function uu(t){return new Promise(function(e){setTimeout(e,t)})}export{cu as B,tu as Q,xu as a,Mn as b,po as c,_o as d,or as e,ar as f,vn as g,au as h,ou as i,iu as j,Eu as k,s0 as l,lu as m,nu as n,Kl as o,zl as p,Zl as q,su as r,uu as s,Xl as t,ru as u};
