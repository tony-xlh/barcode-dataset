import{_ as k,q as j,r,u as F,o as O,t as h,O as I,B as s,I as T,ad as V,P as q,Q as M,y as A,R as S,a4 as Q,z as G,A as H}from"./index.964f4e7c.js";import{b as J,x as R,D as K,i as W}from"./DynamsoftButton.d8f08664.js";const X=u=>(G("data-v-70f90106"),u=u(),H(),u),Y={class:"q-pa-md",style:{width:"100%"}},Z=X(()=>s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1)),$={class:"row",style:{"padding-bottom":"20px"}},ee=["value"],te={style:{"padding-left":"10px"}},ae={id:"results"},ne=j({__name:"LiveScanner",setup(u){const i=r(""),f=r([]),w=F(),l=r(""),d=r(!1),v=r(),E=r("");let p=!1,c,n,m;O(async()=>{E.value=w.currentRoute.value.params.name;const a=await J(w.currentRoute.value.params.name);f.value=a,i.value=a[0].displayName,D()});const b=async a=>{var t;let e=(t=g(a))==null?void 0:t.settings;if(e){if(i.value==="Dynamsoft"){let o=!1;for(let _=0;_<e.length;_++){const x=e[_];x.name==="template"&&x.value&&(o=!0)}o===!1&&e.push({name:"template",value:"speed"})}console.log(e),await c.setSupportedSettings(e)}},g=a=>{let e;a?e=a:e=i.value;for(const t of f.value)if(t.displayName===e)return t},N=async()=>{if(y(),n){n.isOpen()===!1?(l.value="Starting...",await n.open(!0),d.value=!0,l.value=""):(n.close(!0),d.value=!1);return}d.value=!1},U=async()=>{await C(i.value),B()},D=async()=>{var a;l.value="Initializing Camera...",R.defaultUIElementURL="https://cdn.jsdelivr.net/npm/dynamsoft-camera-enhancer@3.3.4/dist/dce.ui.html",n=await R.createInstance(),n.on("played",U),await n.setUIElement(R.defaultUIElementURL),(a=document.getElementById("enhancerUIContainer"))==null||a.appendChild(n.getUIElement()),document.getElementsByClassName("dce-btn-close")[0].remove(),l.value=""},B=async()=>{y(),m=setInterval(L,200)},y=()=>{clearInterval(m),p=!1},C=async a=>{const e=g(a);if(e){let t=!1;c?c.getEngine()!=e.engine&&(t=!0):t=!0,t&&(l.value="Initializing Barcode Reader...",c=await W.createInstance(e.engine),l.value=""),await b(a)}},L=async()=>{const a=g();if(n&&p===!1&&a){p=!0;const e=n.getFrame(),t=await c.detect(e);l.value=t.elapsedTime+"ms",c.getEngine()===a.engine&&z(t),p=!1}},z=a=>{if(a.results.length>0){let e="";for(let t=0;t<a.results.length;t++){const o=a.results[t];e=e+(t+1)+". "+o.barcodeFormat+": "+o.barcodeText,o.confidence&&(e=e+", confidence: "+o.confidence),e=e+`
`}v.value=e}},P=async a=>{console.log(a),m&&n.isOpen()&&(await C(a),y(),B()),v.value=""};return(a,e)=>(h(),I("div",Y,[Z,s("div",$,[T(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=t=>P(t)),e[1]||(e[1]=t=>i.value=t)],style:{"min-width":"200px"}},[(h(!0),I(q,null,M(f.value,t=>(h(),I("option",{value:t.displayName,key:t.displayName},S(t.displayName),9,ee))),128))],512),[[V,i.value]])]),s("div",null,[A(K,{label:d.value?"Stop Scanning":"Start Scanning",onClick:N},null,8,["label"]),s("span",te,S(l.value),1)]),s("div",ae,[s("pre",null,""+S(v.value)+`
      `,1)]),s("div",null,[s("div",{id:"enhancerUIContainer",style:{width:"100%",height:"500px"},class:Q(d.value?"":"hidden")},null,2)])]))}});var oe=k(ne,[["__scopeId","data-v-70f90106"]]);export{oe as default};
