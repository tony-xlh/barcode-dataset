import{Q as X,b as V,c as R,a as B}from"./QList.3cf7eacf.js";import{Q as f}from"./QBtn.cbdbc53d.js";import{Q as Y}from"./QSeparator.3af25817.js";import{Q as Z}from"./QPage.38dc38ef.js";import{Q as ee,b as te,c as P,C as z}from"./ClosePopup.a7b6b062.js";import{Q as ae}from"./QCardActions.ea9f9ef7.js";import{_ as se,m as oe,r as v,u as ne,b as le,s as d,O as c,x as t,v as l,P as g,A as i,R as x,S as ie,Q as b,C as m,ad as $,ah as J,U as M,y as ue,z as re}from"./index.0dc541ea.js";import{i as Q,b as de,D as A,m as ce,n as pe,l as fe}from"./DynamsoftButton.81da8042.js";import"./scroll.801f8825.js";const O=S=>(ue("data-v-1915b9c0"),S=S(),re(),S),ve={class:"full"},me={class:"header"},_e={class:"text-h6 fontOswald"},ge={class:"container"},Se=O(()=>i("label",null,"Engine: ",-1)),ye=["onUpdate:modelValue"],he=["value"],Ce=O(()=>i("label",null,"Display Name: ",-1)),ke=["onUpdate:modelValue"],xe={class:"text-grey-8 q-gutter-xs"},be=O(()=>i("div",{class:"text-h6"},"Settings",-1)),Qe={for:"'settings-' + setting.name"},we={key:0},Ve=["id","onUpdate:modelValue"],Oe={key:1},De=["onUpdate:modelValue"],Ie=["value"],Ne=oe({__name:"SettingsPage",setup(S){const y=v(""),D=ne(),u=v([]),h=v([]),w=v(!1),_=v([]),I=v({});let C=-1;le(async()=>{y.value=D.currentRoute.value.params.name,h.value=Q.getEngines(),console.log(y.value);const s=await de(D.currentRoute.value.params.name);u.value=s});const L=()=>{const s=u.value,n={engine:h.value[0],displayName:h.value[0],settings:[]};s.push(n),u.value=s},j=s=>{ce(u.value,s)},q=s=>{pe(u.value,s)},E=s=>{const n=u.value;n.splice(s,1),u.value=n},F=async()=>{const s=JSON.parse(JSON.stringify(u.value));await fe.setItem(y.value+":settings",s),alert("Saved")},T=()=>{C!=-1&&(u.value[C].settings=JSON.parse(JSON.stringify(_.value)))},G=async(s,n)=>{var U;C=s,_.value;const e=Q.getSupportedSettings(n),o=Q.getDefaultSettings(n),a=u.value[C].settings,N=[];for(let r=a.length-1;r>=0;r--){const k=a[r];let p=!1;for(const W of e)if(k.name===W.name){p=!0;break}p===!1&&a.splice(r,1)}for(const r of e){let k=!1;r.type==="select"&&N.push(r.name);for(const p of a)if(p.name===r.name){k=!0;break}if(!k){const p=(U=o[r.name])!=null?U:"";a.push({name:r.name,value:p,type:r.type})}}_.value=a,K(N,n),w.value=!0},H=s=>I.value[s],K=async(s,n)=>{const e={};for(const o of s){const a=await Q.getSettingOptions(n,o,_.value);e[o]=a}I.value=e};return(s,n)=>(d(),c(g,null,[t(Z,null,{default:l(()=>[i("div",ve,[i("div",me,[i("div",_e,x(y.value),1)]),i("div",ge,[t(X,{bordered:"",class:"rounded-borders"},{default:l(()=>[t(V,{header:""},{default:l(()=>[ie("Barcode Reader Configuration")]),_:1}),(d(!0),c(g,null,b(u.value,(e,o)=>(d(),c("div",{key:o},[t(R,null,{default:l(()=>[t(B,{top:""},{default:l(()=>[t(V,null,{default:l(()=>[Se,m(i("select",{"onUpdate:modelValue":a=>e.engine=a},[(d(!0),c(g,null,b(h.value,a=>(d(),c("option",{key:"config-"+a,value:a},x(a),9,he))),128))],8,ye),[[$,e.engine]])]),_:2},1024),t(V,{lines:"1"},{default:l(()=>[Ce,m(i("input",{type:"text","onUpdate:modelValue":a=>e.displayName=a},null,8,ke),[[J,e.displayName]])]),_:2},1024)]),_:2},1024),t(B,{top:"",side:""},{default:l(()=>[i("div",xe,[t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"arrow_upward",onClick:a=>j(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"arrow_downward",onClick:a=>q(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:a=>E(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"settings",onClick:a=>G(o,e.engine)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),t(Y,{spaced:""})]))),128)),t(R,null,{default:l(()=>[t(A,{label:"Add Configuration",onClick:L}),t(A,{style:{"margin-left":"10px"},label:"Save",onClick:F})]),_:1})]),_:1})])])]),_:1}),t(ee,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=e=>w.value=e)},{default:l(()=>[t(te,null,{default:l(()=>[t(P,null,{default:l(()=>[be]),_:1}),t(P,{class:"q-pt-none"},{default:l(()=>[(d(!0),c(g,null,b(_.value,e=>(d(),c("div",{key:e.name},[i("div",null,[i("label",Qe,x(e.name+":"),1)]),e.type==="string"?(d(),c("div",we,[m(i("textarea",{id:"settings-"+e.name,"onUpdate:modelValue":o=>e.value=o},null,8,Ve),[[J,e.value]])])):M("",!0),e.type==="select"?(d(),c("div",Oe,[m(i("select",{"onUpdate:modelValue":o=>e.value=o},[(d(!0),c(g,null,b(H(e.name),o=>(d(),c("option",{key:"engine-"+o,value:o},x(o),9,Ie))),128))],8,De),[[$,e.value]])])):M("",!0)]))),128))]),_:1}),t(ae,{align:"right"},{default:l(()=>[m(t(f,{flat:"",color:"primary",label:"Save",onClick:n[0]||(n[0]=e=>T())},null,512),[[z]]),m(t(f,{flat:"",color:"primary",label:"Close"},null,512),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var Le=se(Ne,[["__scopeId","data-v-1915b9c0"]]);export{Le as default};
