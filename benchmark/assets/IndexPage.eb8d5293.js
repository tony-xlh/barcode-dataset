var Ne=Object.defineProperty;var Ae=(e,x,b)=>x in e?Ne(e,x,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[x]=b;var ue=(e,x,b)=>(Ae(e,typeof x!="symbol"?x+"":x,b),b);import{Q as De}from"./QPage.392445e4.js";import{a as je,u as Oe,b as Be,c as Le,v as me,d as ze,e as qe,f as Qe,g as Ue,h as Ze,i as He,j as Ke,k as $e,l as Je,r as ge,s as We,m as ve,p as he,n as Ye,Q as we,o as ke,q as se,t as ye,C as ne}from"./ClosePopup.1337a5fb.js";import{u as Ge,a as Xe,b as et,c as tt,f as xe,d as at,Q as nt,e as lt,J as ot}from"./jszip.min.24b72d94.js";import{r as O,w as Z,b as te,M as st,c as B,a as fe,o as Te,h as ae,N as it,g as Ie,G as pe,F as be,E as Me,T as rt,J as ut,_ as ct,q as dt,u as ft,t as X,O as ie,y as C,x as z,B as N,P as Se,Q as mt,R as le,I as oe,v as Ce,S as ee,U as ce,z as gt,A as vt}from"./index.22cabd8b.js";import{u as ht,a as wt}from"./use-form.1e9e85c9.js";import{c as Fe,h as kt}from"./QIcon.9035bf35.js";import{Q as G}from"./QBtn.125fab7c.js";import{g as yt}from"./scroll.14f13af5.js";import{l as D,D as de,r as xt,B as pt,g as bt,a as Mt}from"./DynamsoftButton.897c339d.js";const Re={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},re={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ee=Object.keys(re);Ee.forEach(e=>{re[e].regex=new RegExp(re[e].pattern)});const St=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ee.join("")+"])|(.)","g"),_e=/[.*+?^${}()|[\]\\]/g,I=String.fromCharCode(1),Ct={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Rt(e,x,b,g){let v,y,A,M,F,h;const R=O(null),d=O(j());function K(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}Z(()=>e.type+e.autogrow,L),Z(()=>e.mask,o=>{if(o!==void 0)U(d.value,!0);else{const l=T(d.value);L(),e.modelValue!==l&&x("update:modelValue",l)}}),Z(()=>e.fillMask+e.reverseFillMask,()=>{R.value===!0&&U(d.value,!0)}),Z(()=>e.unmaskedValue,()=>{R.value===!0&&U(d.value)});function j(){if(L(),R.value===!0){const o=V(T(e.modelValue));return e.fillMask!==!1?J(o):o}return e.modelValue}function Q(o){if(o<v.length)return v.slice(-o);let l="",u=v;const s=u.indexOf(I);if(s>-1){for(let m=o-u.length;m>0;m--)l+=I;u=u.slice(0,s)+l+u.slice(s)}return u}function L(){if(R.value=e.mask!==void 0&&e.mask.length>0&&K(),R.value===!1){M=void 0,v="",y="";return}const o=Re[e.mask]===void 0?e.mask:Re[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",u=l.replace(_e,"\\$&"),s=[],m=[],t=[];let i=e.reverseFillMask===!0,n="",r="";o.replace(St,(k,a,c,_,p)=>{if(_!==void 0){const S=re[_];t.push(S),r=S.negate,i===!0&&(m.push("(?:"+r+"+)?("+S.pattern+"+)?(?:"+r+"+)?("+S.pattern+"+)?"),i=!1),m.push("(?:"+r+"+)?("+S.pattern+")?")}else if(c!==void 0)n="\\"+(c==="\\"?"":c),t.push(c),s.push("([^"+n+"]+)?"+n+"?");else{const S=a!==void 0?a:p;n=S==="\\"?"\\\\\\\\":S.replace(_e,"\\\\$&"),t.push(S),s.push("([^"+n+"]+)?"+n+"?")}});const w=new RegExp("^"+s.join("")+"("+(n===""?".":"[^"+n+"]")+"+)?"+(n===""?"":"["+n+"]*")+"$"),P=m.length-1,f=m.map((k,a)=>a===0&&e.reverseFillMask===!0?new RegExp("^"+u+"*"+k):a===P?new RegExp("^"+k+"("+(r===""?".":r)+"+)?"+(e.reverseFillMask===!0?"$":u+"*")):new RegExp("^"+k));A=t,M=k=>{const a=w.exec(e.reverseFillMask===!0?k:k.slice(0,t.length+1));a!==null&&(k=a.slice(1).join(""));const c=[],_=f.length;for(let p=0,S=k;p<_;p++){const H=f[p].exec(S);if(H===null)break;S=S.slice(H.shift().length),c.push(...H)}return c.length>0?c.join(""):k},v=t.map(k=>typeof k=="string"?k:I).join(""),y=v.split(I).join(l)}function U(o,l,u){const s=g.value,m=s.selectionEnd,t=s.value.length-m,i=T(o);l===!0&&L();const n=V(i),r=e.fillMask!==!1?J(n):n,w=d.value!==r;s.value!==r&&(s.value=r),w===!0&&(d.value=r),document.activeElement===s&&te(()=>{if(r===y){const f=e.reverseFillMask===!0?y.length:0;s.setSelectionRange(f,f,"forward");return}if(u==="insertFromPaste"&&e.reverseFillMask!==!0){const f=s.selectionEnd;let k=m-1;for(let a=F;a<=k&&a<f;a++)v[a]!==I&&k++;E.right(s,k);return}if(["deleteContentBackward","deleteContentForward"].indexOf(u)>-1){const f=e.reverseFillMask===!0?m===0?r.length>n.length?1:0:Math.max(0,r.length-(r===y?0:Math.min(n.length,t)+1))+1:m;s.setSelectionRange(f,f,"forward");return}if(e.reverseFillMask===!0)if(w===!0){const f=Math.max(0,r.length-(r===y?0:Math.min(n.length,t+1)));f===1&&m===1?s.setSelectionRange(f,f,"forward"):E.rightReverse(s,f)}else{const f=r.length-t;s.setSelectionRange(f,f,"backward")}else if(w===!0){const f=Math.max(0,v.indexOf(I),Math.min(n.length,m)-1);E.right(s,f)}else{const f=m-1;E.right(s,f)}});const P=e.unmaskedValue===!0?T(r):r;String(e.modelValue)!==P&&b(P,!0)}function W(o,l,u){const s=V(T(o.value));l=Math.max(0,v.indexOf(I),Math.min(s.length,l)),F=l,o.setSelectionRange(l,u,"forward")}const E={left(o,l){const u=v.slice(l-1).indexOf(I)===-1;let s=Math.max(0,l-1);for(;s>=0;s--)if(v[s]===I){l=s,u===!0&&l++;break}if(s<0&&v[l]!==void 0&&v[l]!==I)return E.right(o,0);l>=0&&o.setSelectionRange(l,l,"backward")},right(o,l){const u=o.value.length;let s=Math.min(u,l+1);for(;s<=u;s++)if(v[s]===I){l=s;break}else v[s-1]===I&&(l=s);if(s>u&&v[l-1]!==void 0&&v[l-1]!==I)return E.left(o,u);o.setSelectionRange(l,l,"forward")},leftReverse(o,l){const u=Q(o.value.length);let s=Math.max(0,l-1);for(;s>=0;s--)if(u[s-1]===I){l=s;break}else if(u[s]===I&&(l=s,s===0))break;if(s<0&&u[l]!==void 0&&u[l]!==I)return E.rightReverse(o,0);l>=0&&o.setSelectionRange(l,l,"backward")},rightReverse(o,l){const u=o.value.length,s=Q(u),m=s.slice(0,l+1).indexOf(I)===-1;let t=Math.min(u,l+1);for(;t<=u;t++)if(s[t-1]===I){l=t,l>0&&m===!0&&l--;break}if(t>u&&s[l-1]!==void 0&&s[l-1]!==I)return E.leftReverse(o,u);o.setSelectionRange(l,l,"forward")}};function Y(o){x("click",o),h=void 0}function $(o){if(x("keydown",o),st(o)===!0)return;const l=g.value,u=l.selectionStart,s=l.selectionEnd;if(o.shiftKey||(h=void 0),o.keyCode===37||o.keyCode===39){o.shiftKey&&h===void 0&&(h=l.selectionDirection==="forward"?u:s);const m=E[(o.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(o.preventDefault(),m(l,h===u?s:u),o.shiftKey){const t=l.selectionStart;l.setSelectionRange(Math.min(h,t),Math.max(h,t),"forward")}}else o.keyCode===8&&e.reverseFillMask!==!0&&u===s?(E.left(l,u),l.setSelectionRange(l.selectionStart,s,"backward")):o.keyCode===46&&e.reverseFillMask===!0&&u===s&&(E.rightReverse(l,s),l.setSelectionRange(u,l.selectionEnd,"forward"))}function V(o){if(o==null||o==="")return"";if(e.reverseFillMask===!0)return q(o);const l=A;let u=0,s="";for(let m=0;m<l.length;m++){const t=o[u],i=l[m];if(typeof i=="string")s+=i,t===i&&u++;else if(t!==void 0&&i.regex.test(t))s+=i.transform!==void 0?i.transform(t):t,u++;else return s}return s}function q(o){const l=A,u=v.indexOf(I);let s=o.length-1,m="";for(let t=l.length-1;t>=0&&s>-1;t--){const i=l[t];let n=o[s];if(typeof i=="string")m=i+m,n===i&&s--;else if(n!==void 0&&i.regex.test(n))do m=(i.transform!==void 0?i.transform(n):n)+m,s--,n=o[s];while(u===t&&n!==void 0&&i.regex.test(n));else return m}return m}function T(o){return typeof o!="string"||M===void 0?typeof o=="number"?M(""+o):o:M(o)}function J(o){return y.length-o.length<=0?o:e.reverseFillMask===!0&&o.length>0?y.slice(0,-o.length)+o:o+y.slice(o.length)}return{innerValue:d,hasMask:R,moveCursorForPaste:W,updateMaskValue:U,onMaskedKeydown:$,onMaskedClick:Y}}function _t(e,x){function b(){const g=e.modelValue;try{const v="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(g)===g&&("length"in g?Array.from(g):[g]).forEach(y=>{v.items.add(y)}),{files:v.files}}catch{return{files:void 0}}}return x===!0?B(()=>{if(e.type==="file")return b()}):B(b)}var Pt=Fe({name:"QInput",inheritAttrs:!1,props:{...Ge,...Ct,...ht,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Xe,"paste","change","keydown","click","animationend"],setup(e,{emit:x,attrs:b}){const{proxy:g}=Ie(),{$q:v}=g,y={};let A=NaN,M,F,h=null,R;const d=O(null),K=wt(e),{innerValue:j,hasMask:Q,moveCursorForPaste:L,updateMaskValue:U,onMaskedKeydown:W,onMaskedClick:E}=Rt(e,x,n,d),Y=_t(e,!0),$=B(()=>xe(j.value)),V=at(t),q=et(),T=B(()=>e.type==="textarea"||e.autogrow===!0),J=B(()=>T.value===!0||["text","search","url","tel","password"].includes(e.type)),o=B(()=>{const a={...q.splitAttrs.listeners.value,onInput:t,onPaste:m,onChange:w,onBlur:P,onFocus:pe};return a.onCompositionstart=a.onCompositionupdate=a.onCompositionend=V,Q.value===!0&&(a.onKeydown=W,a.onClick=E),e.autogrow===!0&&(a.onAnimationend=i),a}),l=B(()=>{const a={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:K.value,...q.splitAttrs.attributes.value,id:q.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return T.value===!1&&(a.type=e.type),e.autogrow===!0&&(a.rows=1),a});Z(()=>e.type,()=>{d.value&&(d.value.value=e.modelValue)}),Z(()=>e.modelValue,a=>{if(Q.value===!0){if(F===!0&&(F=!1,String(a)===A))return;U(a)}else j.value!==a&&(j.value=a,e.type==="number"&&y.hasOwnProperty("value")===!0&&(M===!0?M=!1:delete y.value));e.autogrow===!0&&te(r)}),Z(()=>e.autogrow,a=>{a===!0?te(r):d.value!==null&&b.rows>0&&(d.value.style.height="auto")}),Z(()=>e.dense,()=>{e.autogrow===!0&&te(r)});function u(){je(()=>{const a=document.activeElement;d.value!==null&&d.value!==a&&(a===null||a.id!==q.targetUid.value)&&d.value.focus({preventScroll:!0})})}function s(){d.value!==null&&d.value.select()}function m(a){if(Q.value===!0&&e.reverseFillMask!==!0){const c=a.target;L(c,c.selectionStart,c.selectionEnd)}x("paste",a)}function t(a){if(!a||!a.target)return;if(e.type==="file"){x("update:modelValue",a.target.files);return}const c=a.target.value;if(a.target.qComposing===!0){y.value=c;return}if(Q.value===!0)U(c,!1,a.inputType);else if(n(c),J.value===!0&&a.target===document.activeElement){const{selectionStart:_,selectionEnd:p}=a.target;_!==void 0&&p!==void 0&&te(()=>{a.target===document.activeElement&&c.indexOf(a.target.value)===0&&a.target.setSelectionRange(_,p)})}e.autogrow===!0&&r()}function i(a){x("animationend",a),r()}function n(a,c){R=()=>{h=null,e.type!=="number"&&y.hasOwnProperty("value")===!0&&delete y.value,e.modelValue!==a&&A!==a&&(A=a,c===!0&&(F=!0),x("update:modelValue",a),te(()=>{A===a&&(A=NaN)})),R=void 0},e.type==="number"&&(M=!0,y.value=a),e.debounce!==void 0?(h!==null&&clearTimeout(h),y.value=a,h=setTimeout(R,e.debounce)):R()}function r(){requestAnimationFrame(()=>{const a=d.value;if(a!==null){const c=a.parentNode.style,{scrollTop:_}=a,{overflowY:p,maxHeight:S}=v.platform.is.firefox===!0?{}:window.getComputedStyle(a),H=p!==void 0&&p!=="scroll";H===!0&&(a.style.overflowY="hidden"),c.marginBottom=a.scrollHeight-1+"px",a.style.height="1px",a.style.height=a.scrollHeight+"px",H===!0&&(a.style.overflowY=parseInt(S,10)<a.scrollHeight?"auto":"hidden"),c.marginBottom="",a.scrollTop=_}})}function w(a){V(a),h!==null&&(clearTimeout(h),h=null),R!==void 0&&R(),x("change",a.target.value)}function P(a){a!==void 0&&pe(a),h!==null&&(clearTimeout(h),h=null),R!==void 0&&R(),M=!1,F=!1,delete y.value,e.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=j.value!==void 0?j.value:"")})}function f(){return y.hasOwnProperty("value")===!0?y.value:j.value!==void 0?j.value:""}fe(()=>{P()}),Te(()=>{e.autogrow===!0&&r()}),Object.assign(q,{innerValue:j,fieldClass:B(()=>`q-${T.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:B(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:d,emitValue:n,hasValue:$,floatingLabel:B(()=>$.value===!0&&(e.type!=="number"||isNaN(j.value)===!1)||xe(e.displayValue)),getControl:()=>ae(T.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...l.value,...o.value,...e.type!=="file"?{value:f()}:Y.value}),getShadowControl:()=>ae("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(T.value===!0?"":" text-no-wrap")},[ae("span",{class:"invisible"},f()),ae("span",e.shadowText)])});const k=tt(q);return Object.assign(g,{focus:u,select:s,getNativeElement:()=>d.value}),it(g,"nativeEl",()=>d.value),k}}),Tt=Fe({name:"QTooltip",inheritAttrs:!1,props:{...Oe,...Be,...Le,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:me},self:{type:String,default:"top middle",validator:me},offset:{type:Array,default:()=>[14,14],validator:ze},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...qe],setup(e,{slots:x,emit:b,attrs:g}){let v,y;const A=Ie(),{proxy:{$q:M}}=A,F=O(null),h=O(!1),R=B(()=>he(e.anchor,M.lang.rtl)),d=B(()=>he(e.self,M.lang.rtl)),K=B(()=>e.persistent!==!0),{registerTick:j,removeTick:Q}=Qe(),{registerTimeout:L}=Ue(),{transitionProps:U,transitionStyle:W}=Ze(e),{localScrollTarget:E,changeScrollEvent:Y,unconfigureScrollTarget:$}=He(e,f),{anchorEl:V,canShow:q,anchorEvents:T}=Ke({showing:h,configureAnchorEl:P}),{show:J,hide:o}=$e({showing:h,canShow:q,handleShow:m,handleHide:t,hideOnRouteChange:K,processOnMount:!0});Object.assign(T,{delayShow:r,delayHide:w});const{showPortal:l,hidePortal:u,renderPortal:s}=Je(A,F,a,"tooltip");if(M.platform.is.mobile===!0){const c={anchorEl:V,innerRef:F,onClickOutside(p){return o(p),p.target.classList.contains("q-dialog__backdrop")&&ut(p),!0}},_=B(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);Z(_,p=>{(p===!0?Ye:ge)(c)}),fe(()=>{ge(c)})}function m(c){l(),j(()=>{y=new MutationObserver(()=>n()),y.observe(F.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),n(),f()}),v===void 0&&(v=Z(()=>M.screen.width+"|"+M.screen.height+"|"+e.self+"|"+e.anchor+"|"+M.lang.rtl,n)),L(()=>{l(!0),b("show",c)},e.transitionDuration)}function t(c){Q(),u(),i(),L(()=>{u(!0),b("hide",c)},e.transitionDuration)}function i(){y!==void 0&&(y.disconnect(),y=void 0),v!==void 0&&(v(),v=void 0),$(),be(T,"tooltipTemp")}function n(){const c=F.value;V.value===null||!c||We({el:c,offset:e.offset,anchorEl:V.value,anchorOrigin:R.value,selfOrigin:d.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function r(c){if(M.platform.is.mobile===!0){ve(),document.body.classList.add("non-selectable");const _=V.value,p=["touchmove","touchcancel","touchend","click"].map(S=>[_,S,"delayHide","passiveCapture"]);Me(T,"tooltipTemp",p)}L(()=>{J(c)},e.delay)}function w(c){M.platform.is.mobile===!0&&(be(T,"tooltipTemp"),ve(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),L(()=>{o(c)},e.hideDelay)}function P(){if(e.noParentEvent===!0||V.value===null)return;const c=M.platform.is.mobile===!0?[[V.value,"touchstart","delayShow","passive"]]:[[V.value,"mouseenter","delayShow","passive"],[V.value,"mouseleave","delayHide","passive"]];Me(T,"anchor",c)}function f(){if(V.value!==null||e.scrollTarget!==void 0){E.value=yt(V.value,e.scrollTarget);const c=e.noParentEvent===!0?n:o;Y(E.value,c)}}function k(){return h.value===!0?ae("div",{...g,ref:F,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",g.class],style:[g.style,W.value],role:"tooltip"},kt(x.default)):null}function a(){return ae(rt,U.value,k)}return fe(i),Object.assign(A.proxy,{updatePosition:n}),s}});class Pe{constructor(x,b){ue(this,"info");ue(this,"isRemote",!1);this.info=x,b&&(this.isRemote=b)}}const Ve=e=>(gt("data-v-2036b278"),e=e(),vt(),e),It={class:"full"},Ft={class:"container"},Et={class:"main"},Vt=Ve(()=>N("h2",null,"Barcode Reading Benchmark",-1)),Nt={class:"project-name"},At={class:"flex-container"},Dt={class:"dialogs"},jt=Ve(()=>N("div",{class:"text-h6"},"New project",-1)),Ot={class:"text-h6"},Bt={key:0},Lt={href:"javascript:void();"},zt={class:"absolute-full flex flex-center"},qt={style:{height:"25px"}},Qt=dt({__name:"IndexPage",setup(e){const x=O(!1),b=O(""),g=O([]),v=O(!1),y=ft(),A=O(0),M=O(""),F=O(!1),h=O(""),R=O(""),d=O(null);let K=-1;Te(async()=>{const t=await D.getItem("projects");t&&(g.value=JSON.parse(t)),j()});const j=async()=>{const i=await(await fetch("./dataset/projects.json")).text();if(i)try{const n=JSON.parse(i);console.log(n);const r=g.value;for(let w=0;w<n.length;w++){const P=n[w];let f=!1;for(let k=0;k<g.value.length;k++){const a=g.value[k];if(a.info.name===P){f=!0,a.isRemote=!0;break}}if(f===!1){let k=new Pe({name:P,images:[],creationTimestamp:0},!0);r.push(k)}}g.value=r,console.log(r)}catch(n){console.log(n)}},Q=t=>new Date(t).toLocaleString(),L=()=>{b.value="",x.value=!0},U=()=>{if(W(b.value))alert("Project name duplicated. Please use another name.");else{const t=new Pe({name:b.value,creationTimestamp:Date.now(),images:[]});g.value.push(t),E()}},W=t=>{for(let i=0;i<g.value.length;i++)if(g.value[i].info.name===t)return!0;return!1},E=async()=>{let t=[];g.value.forEach(i=>{t.push(i)}),await D.setItem("projects",JSON.stringify(t))},Y=async t=>{let i=g.value[t];if(i.isRemote){const n=await T(i);n&&(i=n)}await u(i),y.push("/project/"+encodeURIComponent(g.value[t].info.name))},$=async()=>{let t=[];for(let i=0;i<g.value.length;i++){const n=g.value[i];i!=K?t.push(n):(await xt(n),n.isRemote&&(n.info.images=[],t.push(n)))}g.value=t,E()},V=async()=>{F.value===!0?d.value&&(await m(d.value),alert("Imported")):alert("Please download the text results first.")},q=async t=>{K=t;let i=g.value[t];if(d.value=i,console.log("selected:"),console.log(d),i.isRemote){const n=await T(i);n&&(i=n,d.value=i),await D.getItem(i.info.name+":results.zip")?F.value=!0:F.value=!1;let w=0;for(let P=0;P<i.info.images.length;P++){const f=i.info.images[P];await D.getItem(i.info.name+":image:"+f)&&(w=w+1)}l(w-1)}console.log(i),console.log(g),v.value=!0},T=async t=>{if(t.info.images.length===0){const i=t.info.name,r=await(await fetch("./dataset/"+i+"/project_manifest.json")).text();return t=JSON.parse(r),t.isRemote=!0,t}},J=async()=>{var n,r;if(h.value==="Downloading..."){alert("Already downloading.");return}h.value="Downloading...";const t=await fetch("./dataset/"+((n=d.value)==null?void 0:n.info.name)+"/results.zip");h.value="";const i=await t.blob();i.size>0&&(await D.setItem(((r=d.value)==null?void 0:r.info.name)+":results.zip",i),F.value=!0)},o=async()=>{if(d.value){if(h.value==="Downloading..."){alert("Already downloading.");return}h.value="Downloading...";for(let t=0;t<d.value.info.images.length;t++){if(v.value===!1){h.value="";return}const i=d.value.info.images[t];if(!await D.getItem(d.value.info.name+":image:"+i)){const w=await(await fetch("./dataset/"+d.value.info.name+"/"+i)).blob();if(w.size>0){const P=await pt(w);await D.setItem(d.value.info.name+":image:"+i,P)}}l(t)}h.value=""}},l=t=>{d.value&&(A.value=parseFloat(((t+1)/d.value.info.images.length).toFixed(2)),M.value=t+1+"/"+d.value.info.images.length)},u=async t=>{if(t.isRemote){if(!await D.getItem(t.info.name+":results.zip")){R.value="Downloading remote project text result files...";const w=await(await fetch("./dataset/"+t.info.name+"/results.zip")).blob();w.size>0&&await D.setItem(t.info.name+":results.zip",w)}if(!await s(t)){R.value="Importing remote project...",await m(t);let r=[];g.value.forEach(w=>{w.info.name===t.info.name?r.push(t):r.push(w)}),await D.setItem("projects",JSON.stringify(r))}R.value=""}},s=async t=>{const i=t.info.name;return!!await D.getItem(i+":detectionResultFileNamesList")},m=async t=>{var n,r,w,P;const i=await D.getItem(t.info.name+":results.zip");if(i){const f=new ot;await f.loadAsync(i);const k=await((n=f.file("detection_result_filenames.json"))==null?void 0:n.async("string"));if(k){const c=JSON.parse(k);for(let _=0;_<c.length;_++){const p=c[_],S=await((r=f.file(p))==null?void 0:r.async("string"));S&&await D.setItem(t.info.name+":detectionResult:"+p,S)}await D.setItem(t.info.name+":detectionResultFileNamesList",c)}for(let c=0;c<t.info.images.length;c++){const _=t.info.images[c],p=bt(_)+".txt",S=t.info.name+":groundTruth:"+p,H=await((w=f.file(p))==null?void 0:w.async("string"));H&&await D.setItem(S,H)}const a=Mt.getEngines();for(let c=0;c<a.length;c++){const _=a[c],p=await((P=f.file(_+"_settings.json"))==null?void 0:P.async("string"));p&&await D.setItem(t.info.name+":settings:"+_,JSON.parse(p))}return!0}return!1};return(t,i)=>(X(),ie(Se,null,[C(De,null,{default:z(()=>[N("div",It,[N("div",Ft,[N("div",Et,[Vt,(X(!0),ie(Se,null,mt(g.value,(n,r)=>(X(),ie("div",{class:"project-list-item",key:n.info.name},[N("div",Nt,le(n.info.name),1),N("div",At,le(n.isRemote&&n.info.images.length===0?"remote project":Q(n.info.creationTimestamp)),1),C(de,{style:{"margin-right":"1em"},label:"Open",onClick:w=>Y(r)},null,8,["onClick"]),C(de,{style:{color:"black","border-color":"black","background-color":"#fff"},label:"Manage",onClick:w=>q(r)},null,8,["onClick"])]))),128))]),N("div",null,[N("div",null,[C(de,{outline:"",label:"New Project",onClick:L})]),N("div",null,le(R.value),1)])])])]),_:1}),N("div",Dt,[C(we,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=n=>x.value=n)},{default:z(()=>[C(ke,null,{default:z(()=>[C(se,null,{default:z(()=>[jt]),_:1}),C(se,null,{default:z(()=>[C(Pt,{outlined:"",modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=n=>b.value=n),label:"Project Name"},null,8,["modelValue"])]),_:1}),C(ye,{align:"right"},{default:z(()=>[oe(C(G,{flat:"",label:"Cancel",color:"primary"},null,512),[[ne]]),oe(C(G,{flat:"",label:"Okay",color:"primary",onClick:U},null,512),[[ne]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),C(we,{modelValue:v.value,"onUpdate:modelValue":i[2]||(i[2]=n=>v.value=n)},{default:z(()=>[C(ke,{style:{"min-width":"300px"}},{default:z(()=>{var n;return[C(se,null,{default:z(()=>{var r;return[N("div",Ot,"Project: "+le((r=d.value)==null?void 0:r.info.name),1)]}),_:1}),(n=d.value)!=null&&n.isRemote?(X(),Ce(se,{key:0},{default:z(()=>[N("div",null,[ee(" Text results"),F.value?(X(),ie("span",Bt," (downloaded)")):ce("",!0),ee(": "),N("div",null,[C(G,{outline:"",color:"primary",label:"Download",onClick:J})])]),N("div",null,[ee(" Images "),N("a",Lt,[ee(" (help) "),C(Tt,{style:{"font-size":"14px"}},{default:z(()=>[ee(" required if you need to checkout the images or rerun the decoding ")]),_:1})]),ee(": "),C(nt,{size:"25px",value:A.value,color:"blue"},{default:z(()=>[N("div",zt,[C(lt,{color:"white","text-color":"black",label:M.value},null,8,["label"])])]),_:1},8,["value"]),C(G,{outline:"",color:"primary",label:"Download",onClick:o})]),N("div",qt,[N("span",null,le(h.value),1)])]),_:1})):ce("",!0),C(ye,{align:"right"},{default:z(()=>{var r;return[(r=d.value)!=null&&r.isRemote?oe((X(),Ce(G,{key:0,flat:"",color:"primary",label:"Import results",onClick:V},null,512)),[[ne]]):ce("",!0),oe(C(G,{flat:"",color:"primary",label:"Delete",onClick:$},null,512),[[ne]]),oe(C(G,{flat:"",color:"primary",label:"Close"},null,512),[[ne]])]}),_:1})]}),_:1})]),_:1},8,["modelValue"])])],64))}});var ea=ct(Qt,[["__scopeId","data-v-2036b278"]]);export{ea as default};
