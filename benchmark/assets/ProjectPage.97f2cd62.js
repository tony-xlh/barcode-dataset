import{e as vl,c as ze,f as fl,g as ml,h as wt,a as zl,Q as ot,b as gl,i as Ll}from"./QIcon.31e73b1b.js";import{c as h,h as c,g as De,n as Ml,r as $,w as me,a1 as Nl,a6 as Qt,W as hl,a3 as bl,a as Tt,b as Te,o as Ut,l as Yt,J as Ke,a2 as jl,a7 as El,K as Mt,a8 as vt,D as Dl,G as lt,M as Hl,V as Zt,a9 as Ht,aa as el,ab as $l,ac as Ql,N as ft,q as Ul,u as Kl,t as je,v as mt,x as j,B as V,R as re,y as O,S as ye,I as Qe,ad as Wl,O as Nt,Q as Jl,P as Gl,U as Xl}from"./index.964f4e7c.js";import{Q as Vt,u as Yl}from"./use-meta.46a32159.js";import{u as Kt,a as Sl,c as yl,b as wl,f as tl,d as Zl,Q as _l,t as ea,l as ta,e as la,J as ll}from"./projectUtils.2a2e90ed.js";import{Q as Cl,a as bt,b as St,c as yt,d as aa}from"./QSeparator.a97cafe1.js";import{Q as na,a as oa}from"./QBtnDropdown.ec90877e.js";import{Q as ia}from"./QMarkupTable.93c1d399.js";import{g as ua}from"./scroll.0bb0c065.js";import{R as ra,b as sa,Q as Oe}from"./QBtn.f3663afa.js";import{u as kl,a as pl}from"./use-dark.949efd4d.js";import{Q as Pt,i as jt,j as at,k as al,C as nt}from"./ClosePopup.0798505a.js";import{u as ca,a as da}from"./use-form.4ca32c25.js";import{Q as va}from"./QPage.c806f770.js";import{l as Z,b as fa,d as ma,D as Et,g as Ue,e as nl,f as ga,r as ha,s as ba,h as ol,i as Sa,C as ya}from"./DynamsoftButton.d8f08664.js";import"./position-engine.bb7d6431.js";const wa={...vl,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean};function _a(e,l,a){return a<=l?l:Math.min(a,Math.max(l,e))}function il(e,l,a){if(a<=l)return l;const r=a-l+1;let m=l+(e-l)%r;return m<l&&(m=r+m),m===0?0:m}const $t=50,xl=2*$t,ql=xl*Math.PI,Ca=Math.round(ql*1e3)/1e3;var ul=ze({name:"QCircularProgress",props:{...wa,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:l}){const{proxy:{$q:a}}=De(),r=fl(e),m=h(()=>{const R=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-R}deg)`:`rotate3d(0, 0, 1, ${R-90}deg)`}}),u=h(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=h(()=>xl/(1-e.thickness/2)),d=h(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),f=h(()=>_a(e.value,e.min,e.max)),q=h(()=>ql*(1-(f.value-e.min)/(e.max-e.min))),o=h(()=>e.thickness/2*i.value);function S({thickness:R,offset:_,color:z,cls:x,rounded:y}){return c("circle",{class:"q-circular-progress__"+x+(z!==void 0?` text-${z}`:""),style:u.value,fill:"transparent",stroke:"currentColor","stroke-width":R,"stroke-dasharray":Ca,"stroke-dashoffset":_,"stroke-linecap":y,cx:i.value,cy:i.value,r:$t})}return()=>{const R=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&R.push(c("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:$t-o.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&R.push(S({cls:"track",thickness:o.value,offset:0,color:e.trackColor})),R.push(S({cls:"circle",thickness:o.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const _=[c("svg",{class:"q-circular-progress__svg",style:m.value,viewBox:d.value,"aria-hidden":"true"},R)];return e.showValue===!0&&_.push(c("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},l.default!==void 0?l.default():[c("div",f.value)])),c("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:f.value},ml(l.internal,_))}}}),Ee=ze({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const a=De(),r=h(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:r.value},wt(l.default));const m=a.vnode.key,u=(e.props.colsMap!==void 0?e.props.colsMap[m]:null)||e.props.col;if(u===void 0)return;const{row:i}=e.props;return c("td",{class:r.value+u.__tdClass(i),style:u.__tdStyle(i)},wt(l.default))}}}),ka=ze({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const a=h(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>c("tr",{class:a.value},wt(l.default))}}),pa=ze({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const r=De(),{proxy:{$q:m}}=r,u=i=>{a("click",i)};return()=>{if(e.props===void 0)return c("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:u},wt(l.default));let i,d;const f=r.vnode.key;if(f){if(i=e.props.colsMap[f],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const o=i.align==="right"?"unshift":"push";d=zl(l.default,[]),d[o](c(ot,{class:i.__iconClass,name:m.iconSet.table.arrowUp}))}else d=wt(l.default);const q={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:o=>{i.sortable===!0&&e.props.sort(i),u(o)}};return c("th",q,d)}}});function Rl(e,l){return c("div",e,[c("table",{class:"q-table"},l)])}let Ft=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Ft=e.scrollLeft>=0,e.remove()}const qe=1e3,xa=["start","center","end","start-force","center-force","end-force"],Vl=Array.prototype.filter,qa=window.getComputedStyle(document.body).overflowAnchor===void 0?Ml:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Vl.call(a,m=>m.dataset&&m.dataset.qVsAnchor!==void 0).forEach(m=>{delete m.dataset.qVsAnchor});const r=a[l];r&&r.dataset&&(r.dataset.qVsAnchor="")}))};function it(e,l){return e+l}function Dt(e,l,a,r,m,u,i,d){const f=e===window?document.scrollingElement||document.documentElement:e,q=m===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-i-d,scrollMaxSize:0,offsetStart:-i,offsetEnd:-d};if(m===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=f.scrollLeft,o.scrollViewSize+=f.clientWidth),o.scrollMaxSize=f.scrollWidth,u===!0&&(o.scrollStart=(Ft===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=f.scrollTop,o.scrollViewSize+=f.clientHeight),o.scrollMaxSize=f.scrollHeight),a!==null)for(let S=a.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=S[q]);if(r!==null)for(let S=r.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=S[q]);if(l!==e){const S=f.getBoundingClientRect(),R=l.getBoundingClientRect();m===!0?(o.offsetStart+=R.left-S.left,o.offsetEnd-=R.width):(o.offsetStart+=R.top-S.top,o.offsetEnd-=R.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function rl(e,l,a,r){l==="end"&&(l=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(r===!0&&(l=(Ft===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):a===!0?(r===!0&&(l=(Ft===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function gt(e,l,a,r){if(a>=r)return 0;const m=l.length,u=Math.floor(a/qe),i=Math.floor((r-1)/qe)+1;let d=e.slice(u,i).reduce(it,0);return a%qe!==0&&(d-=l.slice(u*qe,a).reduce(it,0)),r%qe!==0&&r!==m&&(d-=l.slice(r,i*qe).reduce(it,0)),d}const Pl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Fl=Object.keys(Pl),Tl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Pl};function Ol({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:a,virtualScrollItemSizeComputed:r}){const m=De(),{props:u,emit:i,proxy:d}=m,{$q:f}=d;let q,o,S,R=[],_;const z=$(0),x=$(0),y=$({}),U=$(null),Q=$(null),X=$(null),L=$({from:0,to:0}),E=h(()=>u.tableColspan!==void 0?u.tableColspan:100);r===void 0&&(r=h(()=>u.virtualScrollItemSize));const de=h(()=>r.value+";"+u.virtualScrollHorizontal),ge=h(()=>de.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);me(ge,()=>{he()}),me(de,we);function we(){_e(o,!0)}function Re(b){_e(b===void 0?o:b)}function se(b,F){const A=l();if(A==null||A.nodeType===8)return;const J=Dt(A,a(),U.value,Q.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);S!==J.scrollViewSize&&he(J.scrollViewSize),Ve(A,J,Math.min(e.value-1,Math.max(0,parseInt(b,10)||0)),0,xa.indexOf(F)>-1?F:o>-1&&b>o?"end":"start")}function ie(){const b=l();if(b==null||b.nodeType===8)return;const F=Dt(b,a(),U.value,Q.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),A=e.value-1,J=F.scrollMaxSize-F.offsetStart-F.offsetEnd-x.value;if(q===F.scrollStart)return;if(F.scrollMaxSize<=0){Ve(b,F,0,0);return}S!==F.scrollViewSize&&he(F.scrollViewSize),ke(L.value.from);const le=Math.floor(F.scrollMaxSize-Math.max(F.scrollViewSize,F.offsetEnd)-Math.min(_[A],F.scrollViewSize/2));if(le>0&&Math.ceil(F.scrollStart)>=le){Ve(b,F,A,F.scrollMaxSize-F.offsetEnd-R.reduce(it,0));return}let D=0,I=F.scrollStart-F.offsetStart,ee=I;if(I<=J&&I+F.scrollViewSize>=z.value)I-=z.value,D=L.value.from,ee=I;else for(let M=0;I>=R[M]&&D<A;M++)I-=R[M],D+=qe;for(;I>0&&D<A;)I-=_[D],I>-F.scrollViewSize?(D++,ee=I):ee=_[D]+I;Ve(b,F,D,ee)}function Ve(b,F,A,J,le){const D=typeof le=="string"&&le.indexOf("-force")>-1,I=D===!0?le.replace("-force",""):le,ee=I!==void 0?I:"start";let M=Math.max(0,A-y.value[ee]),g=M+y.value.total;g>e.value&&(g=e.value,M=Math.max(0,g-y.value.total)),q=F.scrollStart;const v=M!==L.value.from||g!==L.value.to;if(v===!1&&I===void 0){Ie(A);return}const{activeElement:s}=document,P=X.value;v===!0&&P!==null&&P!==s&&P.contains(s)===!0&&(P.addEventListener("focusout",Be),setTimeout(()=>{P!==null&&P.removeEventListener("focusout",Be)})),qa(P,A-M);const K=I!==void 0?_.slice(M,A).reduce(it,0):0;if(v===!0){const ae=g>=L.value.from&&M<=L.value.to?L.value.to:g;L.value={from:M,to:ae},z.value=gt(R,_,0,M),x.value=gt(R,_,g,e.value),requestAnimationFrame(()=>{L.value.to!==g&&q===F.scrollStart&&(L.value={from:L.value.from,to:g},x.value=gt(R,_,g,e.value))})}requestAnimationFrame(()=>{if(q!==F.scrollStart)return;v===!0&&ke(M);const ae=_.slice(M,A).reduce(it,0),ue=ae+F.offsetStart+z.value,be=ue+_[A];let Ce=ue+J;if(I!==void 0){const Le=ae-K,oe=F.scrollStart+Le;Ce=D!==!0&&oe<ue&&be<oe+F.scrollViewSize?oe:I==="end"?be-F.scrollViewSize:ue-(I==="start"?0:Math.round((F.scrollViewSize-_[A])/2))}q=Ce,rl(b,Ce,u.virtualScrollHorizontal,f.lang.rtl),Ie(A)})}function ke(b){const F=X.value;if(F){const A=Vl.call(F.children,M=>M.classList&&M.classList.contains("q-virtual-scroll--skip")===!1),J=A.length,le=u.virtualScrollHorizontal===!0?M=>M.getBoundingClientRect().width:M=>M.offsetHeight;let D=b,I,ee;for(let M=0;M<J;){for(I=le(A[M]),M++;M<J&&A[M].classList.contains("q-virtual-scroll--with-prev")===!0;)I+=le(A[M]),M++;ee=I-_[D],ee!==0&&(_[D]+=ee,R[Math.floor(D/qe)]+=ee),D++}}}function Be(){X.value!==null&&X.value!==void 0&&X.value.focus()}function _e(b,F){const A=1*r.value;(F===!0||Array.isArray(_)===!1)&&(_=[]);const J=_.length;_.length=e.value;for(let D=e.value-1;D>=J;D--)_[D]=A;const le=Math.floor((e.value-1)/qe);R=[];for(let D=0;D<=le;D++){let I=0;const ee=Math.min((D+1)*qe,e.value);for(let M=D*qe;M<ee;M++)I+=_[M];R.push(I)}o=-1,q=void 0,z.value=gt(R,_,0,L.value.from),x.value=gt(R,_,L.value.to,e.value),b>=0?(ke(L.value.from),Te(()=>{se(b)})):Se()}function he(b){if(b===void 0&&typeof window!="undefined"){const I=l();I!=null&&I.nodeType!==8&&(b=Dt(I,a(),U.value,Q.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}S=b;const F=parseFloat(u.virtualScrollSliceRatioBefore)||0,A=parseFloat(u.virtualScrollSliceRatioAfter)||0,J=1+F+A,le=b===void 0||b<=0?1:Math.ceil(b/r.value),D=Math.max(1,le,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/J));y.value={total:Math.ceil(D*J),start:Math.ceil(D*F),center:Math.ceil(D*(.5+F)),end:Math.ceil(D*(1+F)),view:le}}function Pe(b,F){const A=u.virtualScrollHorizontal===!0?"width":"height",J={["--q-virtual-scroll-item-"+A]:r.value+"px"};return[b==="tbody"?c(b,{class:"q-virtual-scroll__padding",key:"before",ref:U},[c("tr",[c("td",{style:{[A]:`${z.value}px`,...J},colspan:E.value})])]):c(b,{class:"q-virtual-scroll__padding",key:"before",ref:U,style:{[A]:`${z.value}px`,...J}}),c(b,{class:"q-virtual-scroll__content",key:"content",ref:X,tabindex:-1},F.flat()),b==="tbody"?c(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q},[c("tr",[c("td",{style:{[A]:`${x.value}px`,...J},colspan:E.value})])]):c(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q,style:{[A]:`${x.value}px`,...J}})]}function Ie(b){o!==b&&(u.onVirtualScroll!==void 0&&i("virtualScroll",{index:b,from:L.value.from,to:L.value.to-1,direction:b<o?"decrease":"increase",ref:d}),o=b)}he();const Se=Nl(ie,f.platform.is.ios===!0?120:35);Qt(()=>{he()});let p=!1;return hl(()=>{p=!0}),bl(()=>{if(p!==!0)return;const b=l();q!==void 0&&b!==void 0&&b!==null&&b.nodeType!==8?rl(b,q,u.virtualScrollHorizontal,f.lang.rtl):se(o)}),Tt(()=>{Se.cancel()}),Object.assign(d,{scrollTo:se,reset:we,refresh:Re}),{virtualScrollSliceRange:L,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:he,onVirtualScrollEvt:Se,localResetVirtualScroll:_e,padVirtualScroll:Pe,scrollTo:se,reset:we,refresh:Re}}const Ra={list:Cl,table:ia},Va=["list","table","__qtable"];var Pa=ze({name:"QVirtualScroll",props:{...Tl,type:{type:String,default:"list",validator:e=>Va.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:a}){let r;const m=$(null),u=h(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:d,padVirtualScroll:f,onVirtualScrollEvt:q}=Ol({virtualScrollLength:u,getVirtualScrollTarget:z,getVirtualScrollEl:_}),o=h(()=>{if(u.value===0)return[];const Q=(X,L)=>({index:i.value.from+L,item:X});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(Q):e.itemsFn(i.value.from,i.value.to-i.value.from).map(Q)}),S=h(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),R=h(()=>e.scrollTarget!==void 0?{}:{tabindex:0});me(u,()=>{d()}),me(()=>e.scrollTarget,()=>{y(),x()});function _(){return m.value.$el||m.value}function z(){return r}function x(){r=ua(_(),e.scrollTarget),r.addEventListener("scroll",q,Yt.passive)}function y(){r!==void 0&&(r.removeEventListener("scroll",q,Yt.passive),r=void 0)}function U(){let Q=f(e.type==="list"?"div":"tbody",o.value.map(l.default));return l.before!==void 0&&(Q=l.before().concat(Q)),gl(l.after,Q)}return Qt(()=>{d()}),Ut(()=>{x()}),bl(()=>{x()}),hl(()=>{y()}),Tt(()=>{y()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Rl({ref:m,class:"q-table__middle "+S.value},U()):c(Ra[e.type],{...a,ref:m,class:[a.class,S.value],...R.value},U)}}}),Fa=ze({name:"QField",inheritAttrs:!1,props:Kt,emits:Sl,setup(){return yl(wl())}});const Ta={xs:8,sm:10,md:14,lg:20,xl:24};var Oa=ze({name:"QChip",props:{...kl,...vl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:a}){const{proxy:{$q:r}}=De(),m=pl(e,r),u=fl(e,Ta),i=h(()=>e.selected===!0||e.icon!==void 0),d=h(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),f=h(()=>e.iconRemove||r.iconSet.chip.remove),q=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),o=h(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(m.value===!0?" q-chip--dark q-dark":"")}),S=h(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},U={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:y,remove:U}});function R(y){y.keyCode===13&&_(y)}function _(y){e.disable||(a("update:selected",!e.selected),a("click",y))}function z(y){(y.keyCode===void 0||y.keyCode===13)&&(Ke(y),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function x(){const y=[];q.value===!0&&y.push(c("div",{class:"q-focus-helper"})),i.value===!0&&y.push(c(ot,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const U=e.label!==void 0?[c("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(c("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ml(l.default,U))),e.iconRight&&y.push(c(ot,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(c(ot,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:f.value,...S.value.remove,onClick:z,onKeyup:z})),y}return()=>{if(e.modelValue===!1)return;const y={class:o.value,style:u.value};return q.value===!0&&Object.assign(y,S.value.chip,{onClick:_,onKeyup:R}),Ll("div",y,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ra,e.ripple]])}}});const sl=e=>["add","add-unique","toggle"].includes(e),Ba=".*+?^${}()|[]\\",Ia=Object.keys(Kt);var Aa=ze({name:"QSelect",inheritAttrs:!1,props:{...Tl,...ca,...Kt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:sl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Sl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:a}){const{proxy:r}=De(),{$q:m}=r,u=$(!1),i=$(!1),d=$(-1),f=$(""),q=$(!1),o=$(!1);let S=null,R,_,z,x=null,y,U,Q,X;const L=$(null),E=$(null),de=$(null),ge=$(null),we=$(null),Re=da(e),se=Zl(n),ie=h(()=>Array.isArray(e.options)?e.options.length:0),Ve=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ke,virtualScrollSliceSizeComputed:Be,localResetVirtualScroll:_e,padVirtualScroll:he,onVirtualScrollEvt:Pe,scrollTo:Ie,setVirtualScrollSize:Se}=Ol({virtualScrollLength:ie,getVirtualScrollTarget:Ot,getVirtualScrollEl:xt,virtualScrollItemSizeComputed:Ve}),p=wl(),b=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,k=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const w=e.mapOptions===!0&&R!==void 0?R:[],N=k.map(G=>Ne(G,w));return e.modelValue===null&&t===!0?N.filter(G=>G!==null):N}return k}),F=h(()=>{const t={};return Ia.forEach(k=>{const w=e[k];w!==void 0&&(t[k]=w)}),t}),A=h(()=>e.optionsDark===null?p.isDark.value:e.optionsDark),J=h(()=>tl(b.value)),le=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||b.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),D=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),I=h(()=>ie.value===0),ee=h(()=>b.value.map(t=>ce.value(t)).join(", ")),M=h(()=>e.displayValue!==void 0?e.displayValue:ee.value),g=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),v=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||b.value.some(g.value))),s=h(()=>p.focused.value===!0?e.tabindex:-1),P=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${p.targetUid.value}_${d.value}`),t}),K=h(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ae=h(()=>b.value.map((t,k)=>({index:k,opt:t,html:g.value(t),selected:!0,removeAtIndex:Ct,toggleOption:Ae,tabindex:s.value}))),ue=h(()=>{if(ie.value===0)return[];const{from:t,to:k}=ke.value;return e.options.slice(t,k).map((w,N)=>{const G=Me.value(w)===!0,W=t+N,ne={clickable:!0,active:!1,activeClass:Le.value,manualFocus:!0,focused:!1,disable:G,tabindex:-1,dense:e.optionsDense,dark:A.value,role:"option",id:`${p.targetUid.value}_${W}`,onClick:()=>{Ae(w)}};return G!==!0&&(Je(w)===!0&&(ne.active=!0),d.value===W&&(ne.focused=!0),ne["aria-selected"]=ne.active===!0?"true":"false",m.platform.is.desktop===!0&&(ne.onMousemove=()=>{u.value===!0&&Fe(W)})),{index:W,opt:w,html:g.value(w),label:ce.value(w),selected:ne.active,focused:ne.focused,toggleOption:Ae,setOptionIndex:Fe,itemProps:ne}})}),be=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:m.iconSet.arrow.dropdown),Ce=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Le=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=h(()=>st(e.optionValue,"value")),ce=h(()=>st(e.optionLabel,"label")),Me=h(()=>st(e.optionDisable,"disable")),We=h(()=>b.value.map(t=>oe.value(t))),_t=h(()=>{const t={onInput:n,onChange:se,onKeydown:He,onKeyup:Ge,onKeypress:dt,onFocus:ct,onClick(k){_===!0&&lt(k)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=se,t});me(b,t=>{R=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&p.innerLoading.value!==!0&&(i.value!==!0&&u.value!==!0||J.value!==!0)&&(z!==!0&&tt(),(i.value===!0||u.value===!0)&&B(""))},{immediate:!0}),me(()=>e.fillInput,tt),me(u,zt),me(ie,Al);function ut(t){return e.emitValue===!0?oe.value(t):t}function rt(t){if(t>-1&&t<b.value.length)if(e.multiple===!0){const k=e.modelValue.slice();a("remove",{index:t,value:k.splice(t,1)[0]}),a("update:modelValue",k)}else a("update:modelValue",null)}function Ct(t){rt(t),p.focus()}function kt(t,k){const w=ut(t);if(e.multiple!==!0){e.fillInput===!0&&T(ce.value(t),!0,!0),a("update:modelValue",w);return}if(b.value.length===0){a("add",{index:0,value:w}),a("update:modelValue",e.multiple===!0?[w]:w);return}if(k===!0&&Je(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const N=e.modelValue.slice();a("add",{index:N.length,value:w}),N.push(w),a("update:modelValue",N)}function Ae(t,k){if(p.editable.value!==!0||t===void 0||Me.value(t)===!0)return;const w=oe.value(t);if(e.multiple!==!0){k!==!0&&(T(e.fillInput===!0?ce.value(t):"",!0,!0),$e()),E.value!==null&&E.value.focus(),(b.value.length===0||vt(oe.value(b.value[0]),w)!==!0)&&a("update:modelValue",e.emitValue===!0?w:t);return}if((_!==!0||q.value===!0)&&p.focus(),ct(),b.value.length===0){const W=e.emitValue===!0?w:t;a("add",{index:0,value:W}),a("update:modelValue",e.multiple===!0?[W]:W);return}const N=e.modelValue.slice(),G=We.value.findIndex(W=>vt(W,w));if(G>-1)a("remove",{index:G,value:N.splice(G,1)[0]});else{if(e.maxValues!==void 0&&N.length>=e.maxValues)return;const W=e.emitValue===!0?w:t;a("add",{index:N.length,value:W}),N.push(W)}a("update:modelValue",N)}function Fe(t){if(m.platform.is.desktop!==!0)return;const k=t>-1&&t<ie.value?t:-1;d.value!==k&&(d.value=k)}function pe(t=1,k){if(u.value===!0){let w=d.value;do w=il(w+t,-1,ie.value-1);while(w!==-1&&w!==d.value&&Me.value(e.options[w])===!0);d.value!==w&&(Fe(w),Ie(w),k!==!0&&e.useInput===!0&&e.fillInput===!0&&C(w>=0?ce.value(e.options[w]):y))}}function Ne(t,k){const w=N=>vt(oe.value(N),t);return e.options.find(w)||k.find(w)||t}function st(t,k){const w=t!==void 0?t:k;return typeof w=="function"?w:N=>N!==null&&typeof N=="object"&&w in N?N[w]:N}function Je(t){const k=oe.value(t);return We.value.find(w=>vt(w,k))!==void 0}function ct(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===ee.value)&&E.value.select()}function pt(t){Dl(t,27)===!0&&u.value===!0&&(lt(t),$e(),tt()),a("keyup",t)}function Ge(t){const{value:k}=t.target;if(t.keyCode!==void 0){pt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),tt(),typeof k=="string"&&k.length>0){const w=k.toLocaleLowerCase(),N=W=>{const ne=e.options.find(fe=>W.value(fe).toLocaleLowerCase()===w);return ne===void 0?!1:(b.value.indexOf(ne)===-1?Ae(ne):$e(),!0)},G=W=>{N(oe)!==!0&&(N(ce)===!0||W===!0||B(k,!0,()=>G(!0)))};G()}else p.clearValue(t)}function dt(t){a("keypress",t)}function He(t){if(a("keydown",t),Hl(t)===!0)return;const k=f.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),w=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||k===!0);if(t.keyCode===27){Mt(t);return}if(t.keyCode===9&&w===!1){Ze();return}if(t.target===void 0||t.target.id!==p.targetUid.value)return;if(t.keyCode===40&&p.innerLoading.value!==!0&&u.value===!1){Ke(t),et();return}if(t.keyCode===8&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?rt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(Ke(t),d.value=-1,pe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Be.value!==void 0&&(Ke(t),d.value=Math.max(-1,Math.min(ie.value,d.value+(t.keyCode===33?-1:1)*Be.value.view)),pe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ke(t),pe(t.keyCode===38?-1:1,e.multiple));const N=ie.value;if((Q===void 0||X<Date.now())&&(Q=""),N>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||Q.length>0)){u.value!==!0&&et(t);const G=t.key.toLocaleLowerCase(),W=Q.length===1&&Q[0]===G;X=Date.now()+1500,W===!1&&(Ke(t),Q+=G);const ne=new RegExp("^"+Q.split("").map(Lt=>Ba.indexOf(Lt)>-1?"\\"+Lt:Lt).join(".*"),"i");let fe=d.value;if(W===!0||fe<0||ne.test(ce.value(e.options[fe]))!==!0)do fe=il(fe+1,-1,N-1);while(fe!==d.value&&(Me.value(e.options[fe])===!0||ne.test(ce.value(e.options[fe]))!==!0));d.value!==fe&&Te(()=>{Fe(fe),Ie(fe),fe>=0&&e.useInput===!0&&e.fillInput===!0&&C(ce.value(e.options[fe]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||Q!=="")&&(t.keyCode!==9||w===!1))){if(t.keyCode!==9&&Ke(t),d.value>-1&&d.value<N){Ae(e.options[d.value]);return}if(k===!0){const G=(W,ne)=>{if(ne){if(sl(ne)!==!0)return}else ne=e.newValueMode;if(W==null)return;T("",e.multiple!==!0,!0),(ne==="toggle"?Ae:kt)(W,ne==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),$e())};if(e.onNewValue!==void 0?a("newValue",f.value,G):G(f.value),e.multiple!==!0)return}u.value===!0?Ze():p.innerLoading.value!==!0&&et()}}function xt(){return _===!0?we.value:de.value!==null&&de.value.contentEl!==null?de.value.contentEl:void 0}function Ot(){return xt()}function Bt(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?ae.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?ae.value.map((t,k)=>c(Oa,{key:"option-"+k,removable:p.editable.value===!0&&Me.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:s.value,onRemove(){t.removeAtIndex(k)}},()=>c("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ce.value(t.opt)}))):[c("span",{[v.value===!0?"innerHTML":"textContent"]:M.value})]}function qt(){if(I.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:f.value}):void 0;const t=l.option!==void 0?l.option:w=>c(yt,{key:w.index,...w.itemProps},()=>c(bt,()=>c(St,()=>c("span",{[w.html===!0?"innerHTML":"textContent"]:w.label}))));let k=he("div",ue.value.map(t));return l["before-options"]!==void 0&&(k=l["before-options"]().concat(k)),gl(l["after-options"],k)}function It(t,k){const w=k===!0?{...P.value,...p.splitAttrs.attributes.value}:void 0,N={ref:k===!0?E:void 0,key:"i_t",class:le.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...w,id:k===!0?p.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,..._t.value};return t!==!0&&_===!0&&(Array.isArray(N.class)===!0?N.class=[...N.class,"no-pointer-events"]:N.class+=" no-pointer-events"),c("input",N)}function n(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(C(t.target.value||""),z=!0,y=f.value,p.focused.value!==!0&&(_!==!0||q.value===!0)&&p.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,B(f.value)},e.inputDebounce)))}function C(t){f.value!==t&&(f.value=t,a("inputValue",t))}function T(t,k,w){z=w!==!0,e.useInput===!0&&(C(t),(k===!0||w!==!0)&&(y=t),k!==!0&&B(t))}function B(t,k,w){if(e.onFilter===void 0||k!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?a("filterAbort"):(p.innerLoading.value=!0,o.value=!0),t!==""&&e.multiple!==!0&&b.value.length>0&&z!==!0&&t===ce.value(b.value[0])&&(t="");const N=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);x!==null&&clearTimeout(x),x=N,a("filter",t,(G,W)=>{(k===!0||p.focused.value===!0)&&x===N&&(clearTimeout(x),typeof G=="function"&&G(),o.value=!1,Te(()=>{p.innerLoading.value=!1,p.editable.value===!0&&(k===!0?u.value===!0&&$e():u.value===!0?zt(!0):u.value=!0),typeof W=="function"&&Te(()=>{W(r)}),typeof w=="function"&&Te(()=>{w(r)})}))},()=>{p.focused.value===!0&&x===N&&(clearTimeout(x),p.innerLoading.value=!1,o.value=!1),u.value===!0&&(u.value=!1)})}function H(){return c(na,{ref:de,class:D.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&I.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:A.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ce.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...K.value,onScrollPassive:Pe,onBeforeShow:Jt,onBeforeHide:te,onShow:Y},qt)}function te(t){Gt(t),Ze()}function Y(){Se()}function xe(t){lt(t),E.value!==null&&E.value.focus(),q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ve(t){lt(t),Te(()=>{q.value=!1})}function Xe(){const t=[c(Fa,{class:`col-auto ${p.fieldClass.value}`,...F.value,for:p.targetUid.value,dark:A.value,square:!0,loading:o.value,itemAligned:!1,filled:!0,stackLabel:f.value.length>0,...p.splitAttrs.listeners.value,onFocus:xe,onBlur:ve},{...l,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(c("div",{ref:we,class:D.value+" scroll",style:e.popupContentStyle,...K.value,onClick:Mt,onScrollPassive:Pe},qt())),c(Pt,{ref:ge,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:U,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Jt,onBeforeHide:Ye,onHide:At,onShow:Il},()=>c("div",{class:"q-select__dialog"+(A.value===!0?" q-select__dialog--dark q-dark":"")+(q.value===!0?" q-select__dialog--focused":"")},t))}function Ye(t){Gt(t),ge.value!==null&&ge.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function At(t){$e(),p.focused.value===!1&&a("blur",t),tt()}function Il(){const t=document.activeElement;(t===null||t.id!==p.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),Se()}function Ze(){i.value!==!0&&(d.value=-1,u.value===!0&&(u.value=!1),p.focused.value===!1&&(x!==null&&(clearTimeout(x),x=null),p.innerLoading.value===!0&&(a("filterAbort"),p.innerLoading.value=!1,o.value=!1)))}function et(t){p.editable.value===!0&&(_===!0?(p.onControlFocusin(t),i.value=!0,Te(()=>{p.focus()})):p.focus(),e.onFilter!==void 0?B(f.value):(I.value!==!0||l["no-option"]!==void 0)&&(u.value=!0))}function $e(){i.value=!1,Ze()}function tt(){e.useInput===!0&&T(e.multiple!==!0&&e.fillInput===!0&&b.value.length>0&&ce.value(b.value[0])||"",!0,!0)}function zt(t){let k=-1;if(t===!0){if(b.value.length>0){const w=oe.value(b.value[0]);k=e.options.findIndex(N=>vt(oe.value(N),w))}_e(k)}Fe(k)}function Al(t,k){u.value===!0&&p.innerLoading.value===!1&&(_e(-1,!0),Te(()=>{u.value===!0&&p.innerLoading.value===!1&&(t>k?_e():zt(!0))}))}function Wt(){i.value===!1&&de.value!==null&&de.value.updatePosition()}function Jt(t){t!==void 0&&lt(t),a("popupShow",t),p.hasPopupOpen=!0,p.onControlFocusin(t)}function Gt(t){t!==void 0&&lt(t),a("popupHide",t),p.hasPopupOpen=!1,p.onControlFocusout(t)}function Xt(){_=m.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||I.value===!1:!0),U=m.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return jl(Xt),El(Wt),Xt(),Tt(()=>{S!==null&&clearTimeout(S)}),Object.assign(r,{showPopup:et,hidePopup:$e,removeAtIndex:rt,add:kt,toggleOption:Ae,getOptionIndex:()=>d.value,setOptionIndex:Fe,moveOptionSelection:pe,filter:B,updateMenuPosition:Wt,updateInputValue:T,isOptionSelected:Je,getEmittingOptionValue:ut,isOptionDisabled:(...t)=>Me.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>ce.value.apply(null,t)}),Object.assign(p,{innerValue:b,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:L,targetRef:E,hasValue:J,showPopup:et,floatingLabel:h(()=>e.hideSelected!==!0&&J.value===!0||typeof f.value=="number"||f.value.length>0||tl(e.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(i.value===!0||I.value!==!0||l["no-option"]!==void 0))return _===!0?Xe():H();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(t){p.onControlFocusin(t)},onFocusout(t){p.onControlFocusout(t,()=>{tt(),Ze()})},onClick(t){if(Mt(t),_!==!0&&u.value===!0){Ze(),E.value!==null&&E.value.focus();return}et(t)}},getControl:t=>{const k=Bt(),w=t===!0||i.value!==!0||_!==!0;if(e.useInput===!0)k.push(It(t,w));else if(p.editable.value===!0){const G=w===!0?P.value:void 0;k.push(c("input",{ref:w===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:w===!0?p.targetUid.value:void 0,value:M.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...G,onKeydown:He,onKeyup:pt,onKeypress:dt})),w===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&k.push(c("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ge}))}if(Re.value!==void 0&&e.disable!==!0&&We.value.length>0){const G=We.value.map(W=>c("option",{value:W,selected:!0}));k.push(c("select",{class:"hidden",name:Re.value,multiple:e.multiple},G))}const N=e.useInput===!0||w!==!0?void 0:p.splitAttrs.attributes.value;return c("div",{class:"q-field__native row items-center",...N,...p.splitAttrs.listeners.value},k)},getInnerAppend:()=>e.loading!==!0&&o.value!==!0&&e.hideDropdownIcon!==!0?[c(ot,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:be.value})]:null}),yl(p)}});let ht=0;const za={fullscreen:Boolean,noRouteFullscreenExit:Boolean},La=["update:fullscreen","fullscreen"];function Ma(){const e=De(),{props:l,emit:a,proxy:r}=e;let m,u,i;const d=$(!1);sa(e)===!0&&me(()=>r.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&o()}),me(()=>l.fullscreen,S=>{d.value!==S&&f()}),me(d,S=>{a("update:fullscreen",S),a("fullscreen",S)});function f(){d.value===!0?o():q()}function q(){d.value!==!0&&(d.value=!0,i=r.$el.parentNode,i.replaceChild(u,r.$el),document.body.appendChild(r.$el),ht++,ht===1&&document.body.classList.add("q-body--fullscreen-mixin"),m={handler:o},Zt.add(m))}function o(){d.value===!0&&(m!==void 0&&(Zt.remove(m),m=void 0),i.replaceChild(r.$el,u),d.value=!1,ht=Math.max(0,ht-1),ht===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Qt(()=>{u=document.createElement("span")}),Ut(()=>{l.fullscreen===!0&&q()}),Tt(o),Object.assign(r,{toggleFullscreen:f,setFullscreen:q,exitFullscreen:o}),{inFullscreen:d,toggleFullscreen:f}}function Na(e,l){return new Date(e)-new Date(l)}const ja={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ea(e,l,a,r){const m=h(()=>{const{sortBy:d}=l.value;return d&&a.value.find(f=>f.name===d)||null}),u=h(()=>e.sortMethod!==void 0?e.sortMethod:(d,f,q)=>{const o=a.value.find(_=>_.name===f);if(o===void 0||o.field===void 0)return d;const S=q===!0?-1:1,R=typeof o.field=="function"?_=>o.field(_):_=>_[o.field];return d.sort((_,z)=>{let x=R(_),y=R(z);return x==null?-1*S:y==null?1*S:o.sort!==void 0?o.sort(x,y,_,z)*S:Ht(x)===!0&&Ht(y)===!0?(x-y)*S:el(x)===!0&&el(y)===!0?Na(x,y)*S:typeof x=="boolean"&&typeof y=="boolean"?(x-y)*S:([x,y]=[x,y].map(U=>(U+"").toLocaleString().toLowerCase()),x<y?-1*S:x===y?0:S)})});function i(d){let f=e.columnSortOrder;if($l(d)===!0)d.sortOrder&&(f=d.sortOrder),d=d.name;else{const S=a.value.find(R=>R.name===d);S!==void 0&&S.sortOrder&&(f=S.sortOrder)}let{sortBy:q,descending:o}=l.value;q!==d?(q=d,o=f==="da"):e.binaryStateSort===!0?o=!o:o===!0?f==="ad"?q=null:o=!1:f==="ad"?o=!0:q=null,r({sortBy:q,descending:o,page:1})}return{columnToSort:m,computedSortMethod:u,sort:i}}const Da={filter:[String,Object],filterMethod:Function};function Ha(e,l){const a=h(()=>e.filterMethod!==void 0?e.filterMethod:(r,m,u,i)=>{const d=m?m.toLowerCase():"";return r.filter(f=>u.some(q=>{const o=i(q,f)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(d)!==-1}))});return me(()=>e.filter,()=>{Te(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function $a(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function cl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Qa={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ua(e,l){const{props:a,emit:r}=e,m=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length>0?a.rowsPerPageOptions[0]:5},a.pagination)),u=h(()=>{const o=a["onUpdate:pagination"]!==void 0?{...m.value,...a.pagination}:m.value;return cl(o)}),i=h(()=>u.value.rowsNumber!==void 0);function d(o){f({pagination:o,filter:a.filter})}function f(o={}){Te(()=>{r("request",{pagination:o.pagination||u.value,filter:o.filter||a.filter,getCellValue:l})})}function q(o,S){const R=cl({...u.value,...o});if($a(u.value,R)===!0){i.value===!0&&S===!0&&d(R);return}if(i.value===!0){d(R);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?r("update:pagination",R):m.value=R}return{innerPagination:m,computedPagination:u,isServerSide:i,requestServerInteraction:f,setPagination:q}}function Ka(e,l,a,r,m,u){const{props:i,emit:d,proxy:{$q:f}}=e,q=h(()=>r.value===!0?a.value.rowsNumber||0:u.value),o=h(()=>{const{page:L,rowsPerPage:E}=a.value;return(L-1)*E}),S=h(()=>{const{page:L,rowsPerPage:E}=a.value;return L*E}),R=h(()=>a.value.page===1),_=h(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/a.value.rowsPerPage))),z=h(()=>S.value===0?!0:a.value.page>=_.value),x=h(()=>(i.rowsPerPageOptions.includes(l.value.rowsPerPage)?i.rowsPerPageOptions:[l.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(E=>({label:E===0?f.lang.table.allRows:""+E,value:E})));me(_,(L,E)=>{if(L===E)return;const de=a.value.page;L&&!de?m({page:1}):L<de&&m({page:L})});function y(){m({page:1})}function U(){const{page:L}=a.value;L>1&&m({page:L-1})}function Q(){const{page:L,rowsPerPage:E}=a.value;S.value>0&&L*E<q.value&&m({page:L+1})}function X(){m({page:_.value})}return i["onUpdate:pagination"]!==void 0&&d("update:pagination",{...a.value}),{firstRowIndex:o,lastRowIndex:S,isFirstPage:R,isLastPage:z,pagesNumber:_,computedRowsPerPageOptions:x,computedRowsNumber:q,firstPage:y,prevPage:U,nextPage:Q,lastPage:X}}const Wa={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Ja=["update:selected","selection"];function Ga(e,l,a,r){const m=h(()=>{const z={};return e.selected.map(r.value).forEach(x=>{z[x]=!0}),z}),u=h(()=>e.selection!=="none"),i=h(()=>e.selection==="single"),d=h(()=>e.selection==="multiple"),f=h(()=>a.value.length>0&&a.value.every(z=>m.value[r.value(z)]===!0)),q=h(()=>f.value!==!0&&a.value.some(z=>m.value[r.value(z)]===!0)),o=h(()=>e.selected.length);function S(z){return m.value[z]===!0}function R(){l("update:selected",[])}function _(z,x,y,U){l("selection",{rows:x,added:y,keys:z,evt:U});const Q=i.value===!0?y===!0?x:[]:y===!0?e.selected.concat(x):e.selected.filter(X=>z.includes(r.value(X))===!1);l("update:selected",Q)}return{hasSelectionMode:u,singleSelection:i,multipleSelection:d,allRowsSelected:f,someRowsSelected:q,rowsSelectedNumber:o,isRowSelected:S,clearSelection:R,updateSelection:_}}function dl(e){return Array.isArray(e)?e.slice():[]}const Xa={expanded:Array},Ya=["update:expanded"];function Za(e,l){const a=$(dl(e.expanded));me(()=>e.expanded,i=>{a.value=dl(i)});function r(i){return a.value.includes(i)}function m(i){e.expanded!==void 0?l("update:expanded",i):a.value=i}function u(i,d){const f=a.value.slice(),q=f.indexOf(i);d===!0?q===-1&&(f.push(i),m(f)):q!==-1&&(f.splice(q,1),m(f))}return{isRowExpanded:r,setExpanded:m,updateExpanded:u}}const en={visibleColumns:Array};function tn(e,l,a){const r=h(()=>{if(e.columns!==void 0)return e.columns;const d=e.rows[0];return d!==void 0?Object.keys(d).map(f=>({name:f,label:f.toUpperCase(),field:f,align:Ht(d[f])?"right":"left",sortable:!0})):[]}),m=h(()=>{const{sortBy:d,descending:f}=l.value;return(e.visibleColumns!==void 0?r.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):r.value).map(o=>{const S=o.align||"right",R=`text-${S}`;return{...o,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:R+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===d?` sorted ${f===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>R+" "+o.classes:_=>R+" "+o.classes(_):()=>R}})}),u=h(()=>{const d={};return m.value.forEach(f=>{d[f.name]=f}),d}),i=h(()=>e.tableColspan!==void 0?e.tableColspan:m.value.length+(a.value===!0?1:0));return{colList:r,computedCols:m,computedColsMap:u,computedColspan:i}}const Rt="q-table__bottom row items-center",Bl={};Fl.forEach(e=>{Bl[e]={}});var ln=ze({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Bl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...kl,...za,...en,...Da,...Qa,...Xa,...Wa,...ja},emits:["request","virtualScroll",...La,...Ya,...Ja],setup(e,{slots:l,emit:a}){const r=De(),{proxy:{$q:m}}=r,u=pl(e,m),{inFullscreen:i,toggleFullscreen:d}=Ma(),f=h(()=>typeof e.rowKey=="function"?e.rowKey:n=>n[e.rowKey]),q=$(null),o=$(null),S=h(()=>e.grid!==!0&&e.virtualScroll===!0),R=h(()=>" q-table__card"+(u.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),_=h(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":R.value)+(u.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),z=h(()=>_.value+(e.loading===!0?" q-table--loading":""));me(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+_.value,()=>{S.value===!0&&o.value!==null&&o.value.reset()});const{innerPagination:x,computedPagination:y,isServerSide:U,requestServerInteraction:Q,setPagination:X}=Ua(r,pe),{computedFilterMethod:L}=Ha(e,X),{isRowExpanded:E,setExpanded:de,updateExpanded:ge}=Za(e,a),we=h(()=>{let n=e.rows;if(U.value===!0||n.length===0)return n;const{sortBy:C,descending:T}=y.value;return e.filter&&(n=L.value(n,e.filter,b.value,pe)),J.value!==null&&(n=le.value(e.rows===n?n.slice():n,C,T)),n}),Re=h(()=>we.value.length),se=h(()=>{let n=we.value;if(U.value===!0)return n;const{rowsPerPage:C}=y.value;return C!==0&&(I.value===0&&e.rows!==n?n.length>ee.value&&(n=n.slice(0,ee.value)):n=n.slice(I.value,ee.value)),n}),{hasSelectionMode:ie,singleSelection:Ve,multipleSelection:ke,allRowsSelected:Be,someRowsSelected:_e,rowsSelectedNumber:he,isRowSelected:Pe,clearSelection:Ie,updateSelection:Se}=Ga(e,a,se,f),{colList:p,computedCols:b,computedColsMap:F,computedColspan:A}=tn(e,y,ie),{columnToSort:J,computedSortMethod:le,sort:D}=Ea(e,y,p,X),{firstRowIndex:I,lastRowIndex:ee,isFirstPage:M,isLastPage:g,pagesNumber:v,computedRowsPerPageOptions:s,computedRowsNumber:P,firstPage:K,prevPage:ae,nextPage:ue,lastPage:be}=Ka(r,x,y,U,X,Re),Ce=h(()=>se.value.length===0),Le=h(()=>{const n={};return Fl.forEach(C=>{n[C]=e[C]}),n.virtualScrollItemSize===void 0&&(n.virtualScrollItemSize=e.dense===!0?28:48),n});function oe(){S.value===!0&&o.value.reset()}function ce(){if(e.grid===!0)return It();const n=e.hideHeader!==!0?ct:null;if(S.value===!0){const T=l["top-row"],B=l["bottom-row"],H={default:te=>ut(te.item,l.body,te.index)};if(T!==void 0){const te=c("tbody",T({cols:b.value}));H.before=n===null?()=>te:()=>[n()].concat(te)}else n!==null&&(H.before=n);return B!==void 0&&(H.after=()=>c("tbody",B({cols:b.value}))),c(Pa,{ref:o,class:e.tableClass,style:e.tableStyle,...Le.value,scrollTarget:e.virtualScrollTarget,items:se.value,type:"__qtable",tableColspan:A.value,onVirtualScroll:We},H)}const C=[rt()];return n!==null&&C.unshift(n()),Rl({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},C)}function Me(n,C){if(o.value!==null){o.value.scrollTo(n,C);return}n=parseInt(n,10);const T=q.value.querySelector(`tbody tr:nth-of-type(${n+1})`);if(T!==null){const B=q.value.querySelector(".q-table__middle.scroll"),H=T.offsetTop-e.virtualScrollStickySizeStart,te=H<B.scrollTop?"decrease":"increase";B.scrollTop=H,a("virtualScroll",{index:n,from:0,to:x.value.rowsPerPage-1,direction:te})}}function We(n){a("virtualScroll",n)}function _t(){return[c(_l,{class:"q-table__linear-progress",color:e.color,dark:u.value,indeterminate:!0,trackColor:"transparent"})]}function ut(n,C,T){const B=f.value(n),H=Pe(B);if(C!==void 0)return C(Ct({key:B,row:n,pageIndex:T,__trClass:H?"selected":""}));const te=l["body-cell"],Y=b.value.map(ve=>{const Xe=l[`body-cell-${ve.name}`],Ye=Xe!==void 0?Xe:te;return Ye!==void 0?Ye(kt({key:B,row:n,pageIndex:T,col:ve})):c("td",{class:ve.__tdClass(n),style:ve.__tdStyle(n)},pe(ve,n))});if(ie.value===!0){const ve=l["body-selection"],Xe=ve!==void 0?ve(Ae({key:B,row:n,pageIndex:T})):[c(Vt,{modelValue:H,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(Ye,At)=>{Se([B],[n],Ye,At)}})];Y.unshift(c("td",{class:"q-table--col-auto-width"},Xe))}const xe={key:B,class:{selected:H}};return e.onRowClick!==void 0&&(xe.class["cursor-pointer"]=!0,xe.onClick=ve=>{a("RowClick",ve,n,T)}),e.onRowDblclick!==void 0&&(xe.class["cursor-pointer"]=!0,xe.onDblclick=ve=>{a("RowDblclick",ve,n,T)}),e.onRowContextmenu!==void 0&&(xe.class["cursor-pointer"]=!0,xe.onContextmenu=ve=>{a("RowContextmenu",ve,n,T)}),c("tr",xe,Y)}function rt(){const n=l.body,C=l["top-row"],T=l["bottom-row"];let B=se.value.map((H,te)=>ut(H,n,te));return C!==void 0&&(B=C({cols:b.value}).concat(B)),T!==void 0&&(B=B.concat(T({cols:b.value}))),c("tbody",B)}function Ct(n){return Fe(n),n.cols=n.cols.map(C=>ft({...C},"value",()=>pe(C,n.row))),n}function kt(n){return Fe(n),ft(n,"value",()=>pe(n.col,n.row)),n}function Ae(n){return Fe(n),n}function Fe(n){Object.assign(n,{cols:b.value,colsMap:F.value,sort:D,rowIndex:I.value+n.pageIndex,color:e.color,dark:u.value,dense:e.dense}),ie.value===!0&&ft(n,"selected",()=>Pe(n.key),(C,T)=>{Se([n.key],[n.row],C,T)}),ft(n,"expand",()=>E(n.key),C=>{ge(n.key,C)})}function pe(n,C){const T=typeof n.field=="function"?n.field(C):C[n.field];return n.format!==void 0?n.format(T,C):T}const Ne=h(()=>({pagination:y.value,pagesNumber:v.value,isFirstPage:M.value,isLastPage:g.value,firstPage:K,prevPage:ae,nextPage:ue,lastPage:be,inFullscreen:i.value,toggleFullscreen:d}));function st(){const n=l.top,C=l["top-left"],T=l["top-right"],B=l["top-selection"],H=ie.value===!0&&B!==void 0&&he.value>0,te="q-table__top relative-position row items-center";if(n!==void 0)return c("div",{class:te},[n(Ne.value)]);let Y;if(H===!0?Y=B(Ne.value).slice():(Y=[],C!==void 0?Y.push(c("div",{class:"q-table__control"},[C(Ne.value)])):e.title&&Y.push(c("div",{class:"q-table__control"},[c("div",{class:["q-table__title",e.titleClass]},e.title)]))),T!==void 0&&(Y.push(c("div",{class:"q-table__separator col"})),Y.push(c("div",{class:"q-table__control"},[T(Ne.value)]))),Y.length!==0)return c("div",{class:te},Y)}const Je=h(()=>_e.value===!0?null:Be.value);function ct(){const n=pt();return e.loading===!0&&l.loading===void 0&&n.push(c("tr",{class:"q-table__progress"},[c("th",{class:"relative-position",colspan:A.value},_t())])),c("thead",n)}function pt(){const n=l.header,C=l["header-cell"];if(n!==void 0)return n(Ge({header:!0})).slice();const T=b.value.map(B=>{const H=l[`header-cell-${B.name}`],te=H!==void 0?H:C,Y=Ge({col:B});return te!==void 0?te(Y):c(pa,{key:B.name,props:Y},()=>B.label)});if(Ve.value===!0&&e.grid!==!0)T.unshift(c("th",{class:"q-table--col-auto-width"}," "));else if(ke.value===!0){const B=l["header-selection"],H=B!==void 0?B(Ge({})):[c(Vt,{color:e.color,modelValue:Je.value,dark:u.value,dense:e.dense,"onUpdate:modelValue":dt})];T.unshift(c("th",{class:"q-table--col-auto-width"},H))}return[c("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},T)]}function Ge(n){return Object.assign(n,{cols:b.value,sort:D,colsMap:F.value,color:e.color,dark:u.value,dense:e.dense}),ke.value===!0&&ft(n,"selected",()=>Je.value,dt),n}function dt(n){_e.value===!0&&(n=!1),Se(se.value.map(f.value),se.value,n)}const He=h(()=>{const n=[e.iconFirstPage||m.iconSet.table.firstPage,e.iconPrevPage||m.iconSet.table.prevPage,e.iconNextPage||m.iconSet.table.nextPage,e.iconLastPage||m.iconSet.table.lastPage];return m.lang.rtl===!0?n.reverse():n});function xt(){if(e.hideBottom===!0)return;if(Ce.value===!0){if(e.hideNoData===!0)return;const T=e.loading===!0?e.loadingLabel||m.lang.table.loading:e.filter?e.noResultsLabel||m.lang.table.noResults:e.noDataLabel||m.lang.table.noData,B=l["no-data"],H=B!==void 0?[B({message:T,icon:m.iconSet.table.warning,filter:e.filter})]:[c(ot,{class:"q-table__bottom-nodata-icon",name:m.iconSet.table.warning}),T];return c("div",{class:Rt+" q-table__bottom--nodata"},H)}const n=l.bottom;if(n!==void 0)return c("div",{class:Rt},[n(Ne.value)]);const C=e.hideSelectedBanner!==!0&&ie.value===!0&&he.value>0?[c("div",{class:"q-table__control"},[c("div",[(e.selectedRowsLabel||m.lang.table.selectedRecords)(he.value)])])]:[];if(e.hidePagination!==!0)return c("div",{class:Rt+" justify-end"},Bt(C));if(C.length>0)return c("div",{class:Rt},C)}function Ot(n){X({page:1,rowsPerPage:n.value})}function Bt(n){let C;const{rowsPerPage:T}=y.value,B=e.paginationLabel||m.lang.table.pagination,H=l.pagination,te=e.rowsPerPageOptions.length>1;if(n.push(c("div",{class:"q-table__separator col"})),te===!0&&n.push(c("div",{class:"q-table__control"},[c("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||m.lang.table.recordsPerPage]),c(Aa,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:T,options:s.value,displayValue:T===0?m.lang.table.allRows:T,dark:u.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Ot})])),H!==void 0)C=H(Ne.value);else if(C=[c("span",T!==0?{class:"q-table__bottom-item"}:{},[T?B(I.value+1,Math.min(ee.value,P.value),P.value):B(1,Re.value,P.value)])],T!==0&&v.value>1){const Y={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(Y.size="sm"),v.value>2&&C.push(c(Oe,{key:"pgFirst",...Y,icon:He.value[0],disable:M.value,onClick:K})),C.push(c(Oe,{key:"pgPrev",...Y,icon:He.value[1],disable:M.value,onClick:ae}),c(Oe,{key:"pgNext",...Y,icon:He.value[2],disable:g.value,onClick:ue})),v.value>2&&C.push(c(Oe,{key:"pgLast",...Y,icon:He.value[3],disable:g.value,onClick:be}))}return n.push(c("div",{class:"q-table__control"},C)),n}function qt(){const n=e.gridHeader===!0?[c("table",{class:"q-table"},[ct()])]:e.loading===!0&&l.loading===void 0?_t():void 0;return c("div",{class:"q-table__middle"},n)}function It(){const n=l.item!==void 0?l.item:C=>{const T=C.cols.map(H=>c("div",{class:"q-table__grid-item-row"},[c("div",{class:"q-table__grid-item-title"},[H.label]),c("div",{class:"q-table__grid-item-value"},[H.value])]));if(ie.value===!0){const H=l["body-selection"],te=H!==void 0?H(C):[c(Vt,{modelValue:C.selected,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(Y,xe)=>{Se([C.key],[C.row],Y,xe)}})];T.unshift(c("div",{class:"q-table__grid-item-row"},te),c(aa,{dark:u.value}))}const B={class:["q-table__grid-item-card"+R.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(B.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(B.onClick=H=>{a("RowClick",H,C.row,C.pageIndex)}),e.onRowDblclick!==void 0&&(B.onDblclick=H=>{a("RowDblclick",H,C.row,C.pageIndex)})),c("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(C.selected===!0?" q-table__grid-item--selected":"")},[c("div",B,T)])};return c("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},se.value.map((C,T)=>n(Ct({key:f.value(C),row:C,pageIndex:T}))))}return Object.assign(r.proxy,{requestServerInteraction:Q,setPagination:X,firstPage:K,prevPage:ae,nextPage:ue,lastPage:be,isRowSelected:Pe,clearSelection:Ie,isRowExpanded:E,setExpanded:de,sort:D,resetVirtualScroll:oe,scrollTo:Me,getCellValue:pe}),Ql(r.proxy,{filteredSortedRows:()=>we.value,computedRows:()=>se.value,computedRowsNumber:()=>P.value}),()=>{const n=[st()],C={ref:q,class:z.value};return e.grid===!0?n.push(qt()):Object.assign(C,{class:[C.class,e.cardClass],style:e.cardStyle}),n.push(ce(),xt()),e.loading===!0&&l.loading!==void 0&&n.push(l.loading()),c("div",C,n)}}});const an={class:"full"},nn={class:"header"},on={class:"text-h6 fontOswald"},un={class:"flex-container"},rn={class:"container"},sn={class:"overview"},cn={class:"statistics"},dn={class:"row"},vn={class:"col-12 col-md statistics-values"},fn=V("div",{class:"statistics-name"},"Total files: ",-1),mn={class:"statistics-value"},gn=V("div",{class:"statistics-name"},"Total barcodes: ",-1),hn={class:"statistics-value"},bn=V("div",{class:"statistics-name"},"Correctly detected files: ",-1),Sn={class:"statistics-value"},yn=V("div",{class:"statistics-name"},"Rate of detected files: ",-1),wn={class:"statistics-value"},_n=V("div",{class:"statistics-name"},"Detected barcodes: ",-1),Cn={class:"statistics-value"},kn=V("div",{class:"statistics-name"},"Misdetected barcodes: ",-1),pn={class:"statistics-value"},xn=V("div",{class:"statistics-name"},"Average time (ms): ",-1),qn={class:"statistics-value"},Rn={class:"col-12 col-md statistics-charts"},Vn={class:"row"},Pn={class:"col statistics-chart"},Fn={class:"col statistics-chart"},Tn={class:"decoding"},On=V("div",null,[V("label",{style:{"font-size":"16px"}},"Engines:")],-1),Bn={class:"row",style:{"padding-bottom":"20px"}},In=["value"],An={class:"row",style:{"align-items":"center"}},zn={key:0,style:{width:"100px"}},Ln={class:"absolute-full flex flex-center"},Mn={style:{"margin-top":"2em","margin-bottom":"2em"}},Nn={class:"filename"},jn={class:"text"},En={class:"text"},Dn={class:"text"},Hn={class:"dialogs"},$n=V("div",{class:"text-h6"},"Add files",-1),Qn=V("label",{for:"imageFiles"},"Image files.",-1),Un=V("label",{for:"detectionResultFiles"},"Detection result files.",-1),Kn=V("label",{for:"imageFiles"},"Ground truth files.",-1),Wn=V("div",{class:"text-h6"},"Export",-1),Jn=V("div",{class:"text-h6"},"Downloading project data...",-1),vo=Ul({__name:"ProjectPage",setup(e){const l=[{name:"number",required:!0,label:"No.",align:"left",field:"number"},{name:"name",required:!0,label:"Filename",align:"left",field:"filename",sortable:!0},{name:"detectedText",required:!0,label:"Detected Text",align:"left",field:"detectedText"},{name:"groundTruth",required:!0,label:"Ground Truth",align:"left",field:"groundTruth"},{name:"barcodeFormat",required:!0,label:"Barcode Format",align:"left",field:"barcodeFormat"},{name:"time",required:!0,label:"Time (ms)",align:"left",field:"time"},{name:"correct",required:!0,label:"Correct",align:"left",field:"correct",sortable:!0},{name:"misdetected",required:!0,label:"Misdetected",align:"left",field:"misdetected",sortable:!0}];let a,r;const m=$([]),u=Kl(),i=$(""),d=$(""),f=$([]),q=$(!1),o=$(!1),S=$(.5),R=$(""),_=$(!1),z=$(!0),x=$({fileNumber:0,correctFilesNumber:0,barcodeNumber:0,accuracy:0,precision:0,averageTime:0}),y=$(!1);let U=!1,Q=[],X=[],L=[],E=[];Ut(async()=>{i.value=u.currentRoute.value.params.name,await de(u.currentRoute.value.params.name);const g=await Z.getItem("projects");if(Yl({title:"Barcode Reading Benchmark - "+i.value}),g){E=JSON.parse(g);for(let v=0;v<E.length;v++)if(E[v].info.name===i.value){r=E[v];break}}if(!r)await M();else if(r.isRemote){const v=await Z.getItem(r.info.name+":results.zip"),s=await ea(r);(!v||!s||r.info.images.length===0)&&await M()}ge()});const de=async g=>{const v=await fa(g);f.value=v,v.length>0&&(d.value=v[0].displayName)},ge=async g=>{if(r){const v=await ma(r,g!=null?g:d.value);x.value=v.metrics,v.rows&&(m.value=v.rows)}},we=async()=>{let g=le();if(_.value===!1&&g){_.value=!0,U=!1,await D(),await I(g);const v=r.info.images.length;S.value=0,R.value="0/"+v;let s=await Z.getItem(i.value+":detectionResultFileNamesList");s||(s=[]);for(let P=0;P<v;P++){if(U){await Z.setItem(i.value+":detectionResultFileNamesList",s);return}const K=r.info.images[P];if(z.value&&await Z.getItem(i.value+":detectionResult:"+Ue(K)+"-"+d.value+".json"))continue;const ae=await Z.getItem(i.value+":image:"+K);if(ae){let ue=await a.detect(ae);console.log(ue);const be=Ue(K)+"-"+d.value+".json";s.indexOf(be)===-1&&s.push(be),await Z.setItem(i.value+":detectionResult:"+Ue(K)+"-"+d.value+".json",JSON.stringify(ue))}S.value=parseFloat(((P+1)/v).toFixed(2)),R.value=P+1+"/"+v}await Z.setItem(i.value+":detectionResultFileNamesList",s),_.value=!1}else U=!0,_.value=!1;ge()},Re=g=>{X=g.target.files},se=g=>{Q=g.target.files},ie=g=>{L=g.target.files},Ve=async()=>{if(r){for(let v=0;v<L.length;v++){const s=L[v],P=await nl(s);await Z.setItem(i.value+":groundTruth:"+s.name,P)}let g=await Z.getItem(i.value+":detectionResultFileNamesList");g||(g=[]);for(let v=0;v<X.length;v++){const s=X[v],P=await nl(s);g.indexOf(s.name)===-1&&g.push(s.name),await Z.setItem(i.value+":detectionResult:"+s.name,P)}for(let v=0;v<Q.length;v++){const s=Q[v],P=await ga(s);await Z.setItem(i.value+":image:"+s.name,P),r.info.images.push(s.name)}await Z.setItem(i.value+":detectionResultFileNamesList",g),ge(),ke(),alert("added"),q.value=!1}},ke=async()=>{let g=[];E.forEach(v=>{g.push(v)}),await Z.setItem("projects",JSON.stringify(g))},Be=()=>{q.value=!0},_e=async()=>{await ha(r),ke(),ge()},he=async()=>{o.value=!0},Pe=async()=>{for(let g=0;g<r.info.images.length;g++){const v=r.info.images[g],s=await Z.getItem(i.value+":image:"+v);if(s){await ba(1e3);const P=ol(s),K=document.createElement("a");K.href=URL.createObjectURL(P),K.download=v,document.body.appendChild(K),K.click(),document.body.removeChild(K)}}},Ie=async()=>{const g=new ll;for(let v=0;v<r.info.images.length;v++){const s=r.info.images[v],P=await Z.getItem(i.value+":image:"+s);if(P){console.log(s);const K=ol(P);g.file(s,K)}}g.generateAsync({type:"blob"}).then(function(v){const s=document.createElement("a");s.href=URL.createObjectURL(v),s.download=i.value+"-images.zip",document.body.appendChild(s),s.click(),document.body.removeChild(s)})},Se=async()=>{const g=new ll;for(let s=0;s<r.info.images.length;s++){const P=r.info.images[s],K=Ue(P)+".txt",ae=await Z.getItem(i.value+":groundTruth:"+Ue(P)+".txt");ae&&g.file(K,ae)}const v=await Z.getItem(i.value+":detectionResultFileNamesList");if(v){for(let s=0;s<v.length;s++){const P=v[s],K=await Z.getItem(i.value+":detectionResult:"+P);K&&g.file(P,K)}g.file("detection_result_filenames.json",JSON.stringify(v))}g.file("project_manifest.json",JSON.stringify(r)),await p(g),g.generateAsync({type:"blob"}).then(function(s){const P=document.createElement("a");P.href=URL.createObjectURL(s),P.download=i.value+"-results.zip",document.body.appendChild(P),P.click(),document.body.removeChild(P)})},p=async g=>{g.file("settings.json",JSON.stringify(f.value))},b=g=>{const v="/project/"+encodeURIComponent(i.value)+"/"+encodeURIComponent(g)+"/"+d.value,s=u.resolve(v);window.open(s.href,"_blank")},F=g=>{ge(g)},A=()=>{const g="/project/"+encodeURIComponent(i.value)+"/comparison";u.push(g)},J=()=>{const g="/project/"+encodeURIComponent(i.value)+"/livescanner",v=u.resolve(g);window.open(v.href,"_blank")},le=g=>{let v;g?v=g:v=d.value;for(const s of f.value)if(s.displayName===v)return s},D=async()=>{let g=le();if(g){let v=!1;a?a.getEngine()!=g.engine&&(v=!0):v=!0,v&&(R.value="Initializing...",a=await Sa.createInstance(g.engine),R.value="")}},I=async g=>{console.log("updateBarcodeReaderSettings"),console.log(g),await a.setSupportedSettings(g.settings)},ee=async()=>{const g=r.info.images.length;for(let v=0;v<g;v++){const s=r.info.images[v],P=await Z.getItem(i.value+":detectionResult:"+Ue(s)+"-"+d.value+".json");if(P){const K=JSON.parse(P),ae=ya(K.results);await Z.setItem(i.value+":groundTruth:"+Ue(s)+".txt",JSON.stringify(ae))}}ge()},M=async()=>{y.value=!0;const g=i.value;try{const s=await(await fetch("./dataset/"+g+"/project_manifest.json")).text(),P=JSON.parse(s);P.isRemote=!0;const ae=await(await fetch("./dataset/"+g+"/results.zip")).blob();ae.size>0&&await Z.setItem(g+":results.zip",ae),await ta(P);let ue,be=await Z.getItem("projects");be?ue=JSON.parse(be):ue=[];let Ce=[],Le=!1;for(let oe=0;oe<ue.length;oe++){const ce=ue[oe];ce.info.name===P.info.name?(Ce.push(P),Le=!0):Ce.push(ce)}Le===!1&&Ce.push(P),await Z.setItem("projects",JSON.stringify(Ce)),r=P,await de(g)}catch(v){console.log(v)}y.value=!1};return(g,v)=>(je(),mt(va,null,{default:j(()=>[V("div",an,[V("div",nn,[V("div",on,re(i.value),1),V("div",un,[O(Et,{style:{"margin-left":"15px"},secondary:"",label:"Go to Comparison Page",onClick:A})]),O(Et,{outline:"",style:{color:"black","border-color":"black","background-color":"#fff"},label:"Export",onClick:he})]),V("div",rn,[V("div",sn,[V("div",cn,[V("div",dn,[V("div",vn,[V("div",null,[fn,V("div",mn,re(x.value.fileNumber),1)]),V("div",null,[gn,V("div",hn,re(x.value.barcodeNumber),1)]),V("div",null,[bn,V("div",Sn,re(x.value.correctFilesNumber),1)]),V("div",null,[yn,V("div",wn,re(x.value.detectedFilesRate)+"%",1)]),V("div",null,[_n,V("div",Cn,re(parseInt((x.value.accuracy/100*x.value.barcodeNumber).toString())),1)]),V("div",null,[kn,V("div",pn,re(parseInt(((1-x.value.precision/100)*x.value.barcodeNumber).toString())),1)]),V("div",null,[xn,V("div",qn,re(x.value.averageTime),1)])]),V("div",Rn,[V("div",Vn,[V("div",Pn,[ye(" Accuracy: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.accuracy,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:j(()=>[ye(re(x.value.accuracy)+"% ",1)]),_:1},8,["value","thickness"])]),V("div",Fn,[ye(" Precision: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.precision,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:j(()=>[ye(re(x.value.precision)+"% ",1)]),_:1},8,["value","thickness"])])])])])]),V("div",Tn,[On,V("div",Bn,[Qe(V("select",{style:{"min-width":"200px",height:"45px"},"onUpdate:modelValue":[v[0]||(v[0]=s=>F(s)),v[1]||(v[1]=s=>d.value=s)]},[(je(!0),Nt(Gl,null,Jl(f.value,s=>(je(),Nt("option",{value:s.displayName,key:s.displayName},re(s.displayName),9,In))),128))],512),[[Wl,d.value]])]),V("div",An,[O(Et,{label:_.value?"Stop Decoding":"Start Decoding",onClick:we},null,8,["label"]),O(Vt,{color:"orange",style:{"padding-left":"10px"},"left-label":"",modelValue:z.value,"onUpdate:modelValue":v[2]||(v[2]=s=>z.value=s),label:"Skip Detected"},null,8,["modelValue"])]),_.value?(je(),Nt("div",zn,[O(_l,{size:"25px",value:S.value,color:"orange"},{default:j(()=>[V("div",Ln,[O(la,{color:"white","text-color":"black",label:R.value},null,8,["label"])])]),_:1},8,["value"])])):Xl("",!0)])]),V("div",Mn,[O(ln,{title:"Images",color:"black","table-header-style":"background:#f5f5f5;",rows:m.value,columns:l,"row-key":"name"},{"top-right":j(()=>[O(oa,{unelevated:"",color:"black",label:"Action"},{default:j(()=>[O(Cl,null,{default:j(()=>[Qe((je(),mt(yt,{clickable:"",onClick:Be},{default:j(()=>[O(bt,null,{default:j(()=>[O(St,null,{default:j(()=>[ye("Add local files")]),_:1})]),_:1})]),_:1})),[[nt]]),Qe((je(),mt(yt,{clickable:"",onClick:_e},{default:j(()=>[O(bt,null,{default:j(()=>[O(St,null,{default:j(()=>[ye("Clear")]),_:1})]),_:1})]),_:1})),[[nt]]),Qe((je(),mt(yt,{clickable:"",onClick:ee},{default:j(()=>[O(bt,null,{default:j(()=>[O(St,null,{default:j(()=>[ye("Convert detected results to ground truth")]),_:1})]),_:1})]),_:1})),[[nt]]),Qe((je(),mt(yt,{clickable:"",onClick:J},{default:j(()=>[O(bt,null,{default:j(()=>[O(St,null,{default:j(()=>[ye("Go to live scanner")]),_:1})]),_:1})]),_:1})),[[nt]])]),_:1})]),_:1})]),body:j(s=>[O(ka,{props:s},{default:j(()=>[O(Ee,{key:"number",props:s},{default:j(()=>[ye(re(s.row.number),1)]),_:2},1032,["props"]),O(Ee,{key:"name",props:s,onClick:P=>b(s.row.filename)},{default:j(()=>[V("div",Nn,re(s.row.filename),1)]),_:2},1032,["props","onClick"]),O(Ee,{key:"detectedText",props:s},{default:j(()=>[V("div",jn,re(s.row.detectedText),1)]),_:2},1032,["props"]),O(Ee,{key:"groundTruth",props:s},{default:j(()=>[V("div",En,re(s.row.groundTruth),1)]),_:2},1032,["props"]),O(Ee,{key:"barcodeFormat",props:s},{default:j(()=>[V("div",Dn,re(s.row.barcodeFormat),1)]),_:2},1032,["props"]),O(Ee,{key:"time",props:s},{default:j(()=>[ye(re(s.row.time),1)]),_:2},1032,["props"]),O(Ee,{key:"correct",props:s},{default:j(()=>[ye(re(s.row.correct),1)]),_:2},1032,["props"]),O(Ee,{key:"misdetected",props:s},{default:j(()=>[ye(re(s.row.misdetected),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])])]),V("div",Hn,[O(Pt,{modelValue:q.value,"onUpdate:modelValue":v[6]||(v[6]=s=>q.value=s)},{default:j(()=>[O(jt,null,{default:j(()=>[O(at,null,{default:j(()=>[$n]),_:1}),O(at,{class:"q-pt-none"},{default:j(()=>[V("div",null,[V("input",{type:"file",id:"imageFiles",multiple:"true",onChange:v[3]||(v[3]=s=>{se(s)}),accept:".jpg,.jpeg,.png,.bmp"},null,32),Qn]),V("div",null,[V("input",{type:"file",id:"detectionResultFiles",multiple:"true",onChange:v[4]||(v[4]=s=>{Re(s)}),accept:".json"},null,32),Un]),V("div",null,[V("input",{type:"file",id:"groundTruthFiles",multiple:"true",onChange:v[5]||(v[5]=s=>{ie(s)}),accept:".txt"},null,32),Kn])]),_:1}),O(al,{align:"right"},{default:j(()=>[O(Oe,{flat:"",color:"primary",label:"Add to project",onClick:Ve}),Qe(O(Oe,{flat:"",color:"primary",label:"Close"},null,512),[[nt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:o.value,"onUpdate:modelValue":v[7]||(v[7]=s=>o.value=s)},{default:j(()=>[O(jt,null,{default:j(()=>[O(at,null,{default:j(()=>[Wn]),_:1}),O(at,{class:"q-pt-none"},{default:j(()=>[V("div",null,[O(Oe,{outline:"",color:"primary",label:"Download images",onClick:Pe})]),V("div",null,[O(Oe,{outline:"",color:"primary",label:"Download images in a zip",onClick:Ie})]),V("div",null,[O(Oe,{outline:"",color:"primary",label:"Download TextResults.zip",onClick:Se})])]),_:1}),O(al,{align:"right"},{default:j(()=>[Qe(O(Oe,{flat:"",color:"primary",label:"Close"},null,512),[[nt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:y.value,"onUpdate:modelValue":v[8]||(v[8]=s=>y.value=s),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:j(()=>[O(jt,{style:{width:"300px"}},{default:j(()=>[O(at,null,{default:j(()=>[Jn]),_:1}),O(at,{class:"q-pt-none"},{default:j(()=>[ye(" Please wait for a while. ")]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{vo as default};
