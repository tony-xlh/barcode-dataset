import{n as fl,c as De,o as vl,p as ml,h as _t,a as Ll,l as rt,b as gl,q as zl,R as Nl,e as jl,Q as ze}from"./QBtn.cbdbc53d.js";import{c as h,h as d,g as Ue,n as Ml,r as $,w as we,a1 as El,a6 as Ut,W as hl,a3 as bl,o as Ft,L as Le,b as Wt,d as Yt,J as Ze,a2 as Dl,a7 as Hl,K as zt,a8 as vt,E as $l,H as ot,M as Ql,V as el,a9 as Ht,aa as tl,ab as Ul,ac as Wl,N as mt,m as Kl,u as Jl,s as $e,t as gt,v as j,A as R,R as ve,x as O,S as ke,C as Je,ad as Gl,O as Nt,Q as Zl,P as Xl,U as Yl}from"./index.0dc541ea.js";import{Q as Vt,u as ea}from"./use-meta.585a7c9f.js";import{u as Kt,a as Sl,c as yl,b as wl,f as ll,d as ta,Q as _l,t as la,l as aa,e as na,J as jt}from"./projectUtils.c6062594.js";import{Q as Cl,a as St,b as yt,c as wt}from"./QList.3cf7eacf.js";import{Q as oa,a as ia}from"./QBtnDropdown.50569eda.js";import{Q as ua}from"./QSeparator.3af25817.js";import{r as $t,Q as ra}from"./rtl.b5cd7b83.js";import{g as sa}from"./scroll.801f8825.js";import{k as pl,l as kl,Q as Pt,b as Mt,c as it,C as ut}from"./ClosePopup.a7b6b062.js";import{u as ca,a as da}from"./position-engine.76c29eee.js";import{Q as al}from"./QCardActions.ea9f9ef7.js";import{Q as fa}from"./QPage.38dc38ef.js";import{l as G,b as va,d as ma,D as Et,g as Ge,e as nl,f as ga,r as ha,s as ba,h as ol,i as Sa,C as ya}from"./DynamsoftButton.81da8042.js";const wa={...fl,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean};function _a(e,l,a){return a<=l?l:Math.min(a,Math.max(l,e))}function il(e,l,a){if(a<=l)return l;const r=a-l+1;let m=l+(e-l)%r;return m<l&&(m=r+m),m===0?0:m}const Qt=50,xl=2*Qt,Rl=xl*Math.PI,Ca=Math.round(Rl*1e3)/1e3;var ul=De({name:"QCircularProgress",props:{...wa,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:l}){const{proxy:{$q:a}}=Ue(),r=vl(e),m=h(()=>{const V=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-V}deg)`:`rotate3d(0, 0, 1, ${V-90}deg)`}}),s=h(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=h(()=>xl/(1-e.thickness/2)),f=h(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),v=h(()=>_a(e.value,e.min,e.max)),q=h(()=>Rl*(1-(v.value-e.min)/(e.max-e.min))),o=h(()=>e.thickness/2*i.value);function S({thickness:V,offset:_,color:z,cls:x,rounded:y}){return d("circle",{class:"q-circular-progress__"+x+(z!==void 0?` text-${z}`:""),style:s.value,fill:"transparent",stroke:"currentColor","stroke-width":V,"stroke-dasharray":Ca,"stroke-dashoffset":_,"stroke-linecap":y,cx:i.value,cy:i.value,r:Qt})}return()=>{const V=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&V.push(d("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Qt-o.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&V.push(S({cls:"track",thickness:o.value,offset:0,color:e.trackColor})),V.push(S({cls:"circle",thickness:o.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const _=[d("svg",{class:"q-circular-progress__svg",style:m.value,viewBox:f.value,"aria-hidden":"true"},V)];return e.showValue===!0&&_.push(d("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},l.default!==void 0?l.default():[d("div",v.value)])),d("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:v.value},ml(l.internal,_))}}}),Qe=De({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const a=Ue(),r=h(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:r.value},_t(l.default));const m=a.vnode.key,s=(e.props.colsMap!==void 0?e.props.colsMap[m]:null)||e.props.col;if(s===void 0)return;const{row:i}=e.props;return d("td",{class:r.value+s.__tdClass(i),style:s.__tdStyle(i)},_t(l.default))}}}),pa=De({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const a=h(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>d("tr",{class:a.value},_t(l.default))}}),ka=De({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const r=Ue(),{proxy:{$q:m}}=r,s=i=>{a("click",i)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:s},_t(l.default));let i,f;const v=r.vnode.key;if(v){if(i=e.props.colsMap[v],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const o=i.align==="right"?"unshift":"push";f=Ll(l.default,[]),f[o](d(rt,{class:i.__iconClass,name:m.iconSet.table.arrowUp}))}else f=_t(l.default);const q={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:o=>{i.sortable===!0&&e.props.sort(i),s(o)}};return d("th",q,f)}}});function ql(e,l){return d("div",e,[d("table",{class:"q-table"},l)])}const Fe=1e3,xa=["start","center","end","start-force","center-force","end-force"],Vl=Array.prototype.filter,Ra=window.getComputedStyle(document.body).overflowAnchor===void 0?Ml:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Vl.call(a,m=>m.dataset&&m.dataset.qVsAnchor!==void 0).forEach(m=>{delete m.dataset.qVsAnchor});const r=a[l];r&&r.dataset&&(r.dataset.qVsAnchor="")}))};function st(e,l){return e+l}function Dt(e,l,a,r,m,s,i,f){const v=e===window?document.scrollingElement||document.documentElement:e,q=m===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-i-f,scrollMaxSize:0,offsetStart:-i,offsetEnd:-f};if(m===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=v.scrollLeft,o.scrollViewSize+=v.clientWidth),o.scrollMaxSize=v.scrollWidth,s===!0&&(o.scrollStart=($t===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=v.scrollTop,o.scrollViewSize+=v.clientHeight),o.scrollMaxSize=v.scrollHeight),a!==null)for(let S=a.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=S[q]);if(r!==null)for(let S=r.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=S[q]);if(l!==e){const S=v.getBoundingClientRect(),V=l.getBoundingClientRect();m===!0?(o.offsetStart+=V.left-S.left,o.offsetEnd-=V.width):(o.offsetStart+=V.top-S.top,o.offsetEnd-=V.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function rl(e,l,a,r){l==="end"&&(l=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(r===!0&&(l=($t===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):a===!0?(r===!0&&(l=($t===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function ht(e,l,a,r){if(a>=r)return 0;const m=l.length,s=Math.floor(a/Fe),i=Math.floor((r-1)/Fe)+1;let f=e.slice(s,i).reduce(st,0);return a%Fe!==0&&(f-=l.slice(s*Fe,a).reduce(st,0)),r%Fe!==0&&r!==m&&(f-=l.slice(r,i*Fe).reduce(st,0)),f}const Pl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Fl=Object.keys(Pl),Tl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Pl};function Ol({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:a,virtualScrollItemSizeComputed:r}){const m=Ue(),{props:s,emit:i,proxy:f}=m,{$q:v}=f;let q,o,S,V=[],_;const z=$(0),x=$(0),y=$({}),K=$(null),Q=$(null),ee=$(null),A=$({from:0,to:0}),E=h(()=>s.tableColspan!==void 0?s.tableColspan:100);r===void 0&&(r=h(()=>s.virtualScrollItemSize));const ce=h(()=>r.value+";"+s.virtualScrollHorizontal),Te=h(()=>ce.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);we(Te,()=>{_e()}),we(ce,ge);function ge(){xe(o,!0)}function Oe(b){xe(b===void 0?o:b)}function me(b,P){const L=l();if(L==null||L.nodeType===8)return;const Z=Dt(L,a(),K.value,Q.value,s.virtualScrollHorizontal,v.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);S!==Z.scrollViewSize&&_e(Z.scrollViewSize),Be(L,Z,Math.min(e.value-1,Math.max(0,parseInt(b,10)||0)),0,xa.indexOf(P)>-1?P:o>-1&&b>o?"end":"start")}function fe(){const b=l();if(b==null||b.nodeType===8)return;const P=Dt(b,a(),K.value,Q.value,s.virtualScrollHorizontal,v.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),L=e.value-1,Z=P.scrollMaxSize-P.offsetStart-P.offsetEnd-x.value;if(q===P.scrollStart)return;if(P.scrollMaxSize<=0){Be(b,P,0,0);return}S!==P.scrollViewSize&&_e(P.scrollViewSize),Ie(A.value.from);const ue=Math.floor(P.scrollMaxSize-Math.max(P.scrollViewSize,P.offsetEnd)-Math.min(_[L],P.scrollViewSize/2));if(ue>0&&Math.ceil(P.scrollStart)>=ue){Be(b,P,L,P.scrollMaxSize-P.offsetEnd-V.reduce(st,0));return}let D=0,I=P.scrollStart-P.offsetStart,ae=I;if(I<=Z&&I+P.scrollViewSize>=z.value)I-=z.value,D=A.value.from,ae=I;else for(let M=0;I>=V[M]&&D<L;M++)I-=V[M],D+=Fe;for(;I>0&&D<L;)I-=_[D],I>-P.scrollViewSize?(D++,ae=I):ae=_[D]+I;Be(b,P,D,ae)}function Be(b,P,L,Z,ue){const D=typeof ue=="string"&&ue.indexOf("-force")>-1,I=D===!0?ue.replace("-force",""):ue,ae=I!==void 0?I:"start";let M=Math.max(0,L-y.value[ae]),re=M+y.value.total;re>e.value&&(re=e.value,M=Math.max(0,re-y.value.total)),q=P.scrollStart;const pe=M!==A.value.from||re!==A.value.to;if(pe===!1&&I===void 0){je(L);return}const{activeElement:Me}=document,he=ee.value;pe===!0&&he!==null&&he!==Me&&he.contains(Me)===!0&&(he.addEventListener("focusout",Ne),setTimeout(()=>{he!==null&&he.removeEventListener("focusout",Ne)})),Ra(he,L-M);const qe=I!==void 0?_.slice(M,L).reduce(st,0):0;if(pe===!0){const g=re>=A.value.from&&M<=A.value.to?A.value.to:re;A.value={from:M,to:g},z.value=ht(V,_,0,M),x.value=ht(V,_,re,e.value),requestAnimationFrame(()=>{A.value.to!==re&&q===P.scrollStart&&(A.value={from:A.value.from,to:re},x.value=ht(V,_,re,e.value))})}requestAnimationFrame(()=>{if(q!==P.scrollStart)return;pe===!0&&Ie(M);const g=_.slice(M,L).reduce(st,0),c=g+P.offsetStart+z.value,u=c+_[L];let F=c+Z;if(I!==void 0){const W=g-qe,U=P.scrollStart+W;F=D!==!0&&U<c&&u<U+P.scrollViewSize?U:I==="end"?u-P.scrollViewSize:c-(I==="start"?0:Math.round((P.scrollViewSize-_[L])/2))}q=F,rl(b,F,s.virtualScrollHorizontal,v.lang.rtl),je(L)})}function Ie(b){const P=ee.value;if(P){const L=Vl.call(P.children,M=>M.classList&&M.classList.contains("q-virtual-scroll--skip")===!1),Z=L.length,ue=s.virtualScrollHorizontal===!0?M=>M.getBoundingClientRect().width:M=>M.offsetHeight;let D=b,I,ae;for(let M=0;M<Z;){for(I=ue(L[M]),M++;M<Z&&L[M].classList.contains("q-virtual-scroll--with-prev")===!0;)I+=ue(L[M]),M++;ae=I-_[D],ae!==0&&(_[D]+=ae,V[Math.floor(D/Fe)]+=ae),D++}}}function Ne(){ee.value!==null&&ee.value!==void 0&&ee.value.focus()}function xe(b,P){const L=1*r.value;(P===!0||Array.isArray(_)===!1)&&(_=[]);const Z=_.length;_.length=e.value;for(let D=e.value-1;D>=Z;D--)_[D]=L;const ue=Math.floor((e.value-1)/Fe);V=[];for(let D=0;D<=ue;D++){let I=0;const ae=Math.min((D+1)*Fe,e.value);for(let M=D*Fe;M<ae;M++)I+=_[M];V.push(I)}o=-1,q=void 0,z.value=ht(V,_,0,A.value.from),x.value=ht(V,_,A.value.to,e.value),b>=0?(Ie(A.value.from),Le(()=>{me(b)})):Ce()}function _e(b){if(b===void 0&&typeof window!="undefined"){const I=l();I!=null&&I.nodeType!==8&&(b=Dt(I,a(),K.value,Q.value,s.virtualScrollHorizontal,v.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}S=b;const P=parseFloat(s.virtualScrollSliceRatioBefore)||0,L=parseFloat(s.virtualScrollSliceRatioAfter)||0,Z=1+P+L,ue=b===void 0||b<=0?1:Math.ceil(b/r.value),D=Math.max(1,ue,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/Z));y.value={total:Math.ceil(D*Z),start:Math.ceil(D*P),center:Math.ceil(D*(.5+P)),end:Math.ceil(D*(1+P)),view:ue}}function Re(b,P){const L=s.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+L]:r.value+"px"};return[b==="tbody"?d(b,{class:"q-virtual-scroll__padding",key:"before",ref:K},[d("tr",[d("td",{style:{[L]:`${z.value}px`,...Z},colspan:E.value})])]):d(b,{class:"q-virtual-scroll__padding",key:"before",ref:K,style:{[L]:`${z.value}px`,...Z}}),d(b,{class:"q-virtual-scroll__content",key:"content",ref:ee,tabindex:-1},P.flat()),b==="tbody"?d(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q},[d("tr",[d("td",{style:{[L]:`${x.value}px`,...Z},colspan:E.value})])]):d(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q,style:{[L]:`${x.value}px`,...Z}})]}function je(b){o!==b&&(s.onVirtualScroll!==void 0&&i("virtualScroll",{index:b,from:A.value.from,to:A.value.to-1,direction:b<o?"decrease":"increase",ref:f}),o=b)}_e();const Ce=El(fe,v.platform.is.ios===!0?120:35);Ut(()=>{_e()});let k=!1;return hl(()=>{k=!0}),bl(()=>{if(k!==!0)return;const b=l();q!==void 0&&b!==void 0&&b!==null&&b.nodeType!==8?rl(b,q,s.virtualScrollHorizontal,v.lang.rtl):me(o)}),Ft(()=>{Ce.cancel()}),Object.assign(f,{scrollTo:me,reset:ge,refresh:Oe}),{virtualScrollSliceRange:A,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:_e,onVirtualScrollEvt:Ce,localResetVirtualScroll:xe,padVirtualScroll:Re,scrollTo:me,reset:ge,refresh:Oe}}const qa={list:Cl,table:ra},Va=["list","table","__qtable"];var Pa=De({name:"QVirtualScroll",props:{...Tl,type:{type:String,default:"list",validator:e=>Va.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:a}){let r;const m=$(null),s=h(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:f,padVirtualScroll:v,onVirtualScrollEvt:q}=Ol({virtualScrollLength:s,getVirtualScrollTarget:z,getVirtualScrollEl:_}),o=h(()=>{if(s.value===0)return[];const Q=(ee,A)=>({index:i.value.from+A,item:ee});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(Q):e.itemsFn(i.value.from,i.value.to-i.value.from).map(Q)}),S=h(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),V=h(()=>e.scrollTarget!==void 0?{}:{tabindex:0});we(s,()=>{f()}),we(()=>e.scrollTarget,()=>{y(),x()});function _(){return m.value.$el||m.value}function z(){return r}function x(){r=sa(_(),e.scrollTarget),r.addEventListener("scroll",q,Yt.passive)}function y(){r!==void 0&&(r.removeEventListener("scroll",q,Yt.passive),r=void 0)}function K(){let Q=v(e.type==="list"?"div":"tbody",o.value.map(l.default));return l.before!==void 0&&(Q=l.before().concat(Q)),gl(l.after,Q)}return Ut(()=>{f()}),Wt(()=>{x()}),bl(()=>{x()}),hl(()=>{y()}),Ft(()=>{y()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ql({ref:m,class:"q-table__middle "+S.value},K()):d(qa[e.type],{...a,ref:m,class:[a.class,S.value],...V.value},K)}}}),Fa=De({name:"QField",inheritAttrs:!1,props:Kt,emits:Sl,setup(){return yl(wl())}});const Ta={xs:8,sm:10,md:14,lg:20,xl:24};var Oa=De({name:"QChip",props:{...pl,...fl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:a}){const{proxy:{$q:r}}=Ue(),m=kl(e,r),s=vl(e,Ta),i=h(()=>e.selected===!0||e.icon!==void 0),f=h(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),v=h(()=>e.iconRemove||r.iconSet.chip.remove),q=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),o=h(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(m.value===!0?" q-chip--dark q-dark":"")}),S=h(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},K={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:y,remove:K}});function V(y){y.keyCode===13&&_(y)}function _(y){e.disable||(a("update:selected",!e.selected),a("click",y))}function z(y){(y.keyCode===void 0||y.keyCode===13)&&(Ze(y),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function x(){const y=[];q.value===!0&&y.push(d("div",{class:"q-focus-helper"})),i.value===!0&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const K=e.label!==void 0?[d("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(d("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ml(l.default,K))),e.iconRight&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...S.value.remove,onClick:z,onKeyup:z})),y}return()=>{if(e.modelValue===!1)return;const y={class:o.value,style:s.value};return q.value===!0&&Object.assign(y,S.value.chip,{onClick:_,onKeyup:V}),zl("div",y,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Nl,e.ripple]])}}});const sl=e=>["add","add-unique","toggle"].includes(e),Ba=".*+?^${}()|[]\\",Ia=Object.keys(Kt);var Aa=De({name:"QSelect",inheritAttrs:!1,props:{...Tl,...ca,...Kt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:sl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Sl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:a}){const{proxy:r}=Ue(),{$q:m}=r,s=$(!1),i=$(!1),f=$(-1),v=$(""),q=$(!1),o=$(!1);let S=null,V,_,z,x=null,y,K,Q,ee;const A=$(null),E=$(null),ce=$(null),Te=$(null),ge=$(null),Oe=da(e),me=ta(n),fe=h(()=>Array.isArray(e.options)?e.options.length:0),Be=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ie,virtualScrollSliceSizeComputed:Ne,localResetVirtualScroll:xe,padVirtualScroll:_e,onVirtualScrollEvt:Re,scrollTo:je,setVirtualScrollSize:Ce}=Ol({virtualScrollLength:fe,getVirtualScrollTarget:Tt,getVirtualScrollEl:xt,virtualScrollItemSizeComputed:Be}),k=wl(),b=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,p=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const w=e.mapOptions===!0&&V!==void 0?V:[],N=p.map(te=>He(te,w));return e.modelValue===null&&t===!0?N.filter(te=>te!==null):N}return p}),P=h(()=>{const t={};return Ia.forEach(p=>{const w=e[p];w!==void 0&&(t[p]=w)}),t}),L=h(()=>e.optionsDark===null?k.isDark.value:e.optionsDark),Z=h(()=>ll(b.value)),ue=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||b.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),D=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),I=h(()=>fe.value===0),ae=h(()=>b.value.map(t=>X.value(t)).join(", ")),M=h(()=>e.displayValue!==void 0?e.displayValue:ae.value),re=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),pe=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||b.value.some(re.value))),Me=h(()=>k.focused.value===!0?e.tabindex:-1),he=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${k.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${k.targetUid.value}_${f.value}`),t}),qe=h(()=>({id:`${k.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),g=h(()=>b.value.map((t,p)=>({index:p,opt:t,html:re.value(t),selected:!0,removeAtIndex:Ct,toggleOption:Ee,tabindex:Me.value}))),c=h(()=>{if(fe.value===0)return[];const{from:t,to:p}=Ie.value;return e.options.slice(t,p).map((w,N)=>{const te=de.value(w)===!0,J=t+N,se={clickable:!0,active:!1,activeClass:W.value,manualFocus:!0,focused:!1,disable:te,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option",id:`${k.targetUid.value}_${J}`,onClick:()=>{Ee(w)}};return te!==!0&&(Xe(w)===!0&&(se.active=!0),f.value===J&&(se.focused=!0),se["aria-selected"]=se.active===!0?"true":"false",m.platform.is.desktop===!0&&(se.onMousemove=()=>{s.value===!0&&Ae(J)})),{index:J,opt:w,html:re.value(w),label:X.value(w),selected:se.active,focused:se.focused,toggleOption:Ee,setOptionIndex:Ae,itemProps:se}})}),u=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:m.iconSet.arrow.dropdown),F=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),W=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),U=h(()=>ct(e.optionValue,"value")),X=h(()=>ct(e.optionLabel,"label")),de=h(()=>ct(e.optionDisable,"disable")),Y=h(()=>b.value.map(t=>U.value(t))),ne=h(()=>{const t={onInput:n,onChange:me,onKeydown:We,onKeyup:Ye,onKeypress:ft,onFocus:dt,onClick(p){_===!0&&ot(p)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=me,t});we(b,t=>{V=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&k.innerLoading.value!==!0&&(i.value!==!0&&s.value!==!0||Z.value!==!0)&&(z!==!0&&nt(),(i.value===!0||s.value===!0)&&B(""))},{immediate:!0}),we(()=>e.fillInput,nt),we(s,At),we(fe,Al);function ie(t){return e.emitValue===!0?U.value(t):t}function Se(t){if(t>-1&&t<b.value.length)if(e.multiple===!0){const p=e.modelValue.slice();a("remove",{index:t,value:p.splice(t,1)[0]}),a("update:modelValue",p)}else a("update:modelValue",null)}function Ct(t){Se(t),k.focus()}function pt(t,p){const w=ie(t);if(e.multiple!==!0){e.fillInput===!0&&T(X.value(t),!0,!0),a("update:modelValue",w);return}if(b.value.length===0){a("add",{index:0,value:w}),a("update:modelValue",e.multiple===!0?[w]:w);return}if(p===!0&&Xe(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const N=e.modelValue.slice();a("add",{index:N.length,value:w}),N.push(w),a("update:modelValue",N)}function Ee(t,p){if(k.editable.value!==!0||t===void 0||de.value(t)===!0)return;const w=U.value(t);if(e.multiple!==!0){p!==!0&&(T(e.fillInput===!0?X.value(t):"",!0,!0),Ke()),E.value!==null&&E.value.focus(),(b.value.length===0||vt(U.value(b.value[0]),w)!==!0)&&a("update:modelValue",e.emitValue===!0?w:t);return}if((_!==!0||q.value===!0)&&k.focus(),dt(),b.value.length===0){const J=e.emitValue===!0?w:t;a("add",{index:0,value:J}),a("update:modelValue",e.multiple===!0?[J]:J);return}const N=e.modelValue.slice(),te=Y.value.findIndex(J=>vt(J,w));if(te>-1)a("remove",{index:te,value:N.splice(te,1)[0]});else{if(e.maxValues!==void 0&&N.length>=e.maxValues)return;const J=e.emitValue===!0?w:t;a("add",{index:N.length,value:J}),N.push(J)}a("update:modelValue",N)}function Ae(t){if(m.platform.is.desktop!==!0)return;const p=t>-1&&t<fe.value?t:-1;f.value!==p&&(f.value=p)}function Ve(t=1,p){if(s.value===!0){let w=f.value;do w=il(w+t,-1,fe.value-1);while(w!==-1&&w!==f.value&&de.value(e.options[w])===!0);f.value!==w&&(Ae(w),je(w),p!==!0&&e.useInput===!0&&e.fillInput===!0&&C(w>=0?X.value(e.options[w]):y))}}function He(t,p){const w=N=>vt(U.value(N),t);return e.options.find(w)||p.find(w)||t}function ct(t,p){const w=t!==void 0?t:p;return typeof w=="function"?w:N=>N!==null&&typeof N=="object"&&w in N?N[w]:N}function Xe(t){const p=U.value(t);return Y.value.find(w=>vt(w,p))!==void 0}function dt(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===ae.value)&&E.value.select()}function kt(t){$l(t,27)===!0&&s.value===!0&&(ot(t),Ke(),nt()),a("keyup",t)}function Ye(t){const{value:p}=t.target;if(t.keyCode!==void 0){kt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),nt(),typeof p=="string"&&p.length>0){const w=p.toLocaleLowerCase(),N=J=>{const se=e.options.find(ye=>J.value(ye).toLocaleLowerCase()===w);return se===void 0?!1:(b.value.indexOf(se)===-1?Ee(se):Ke(),!0)},te=J=>{N(U)!==!0&&(N(X)===!0||J===!0||B(p,!0,()=>te(!0)))};te()}else k.clearValue(t)}function ft(t){a("keypress",t)}function We(t){if(a("keydown",t),Ql(t)===!0)return;const p=v.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),w=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||p===!0);if(t.keyCode===27){zt(t);return}if(t.keyCode===9&&w===!1){lt();return}if(t.target===void 0||t.target.id!==k.targetUid.value)return;if(t.keyCode===40&&k.innerLoading.value!==!0&&s.value===!1){Ze(t),at();return}if(t.keyCode===8&&e.hideSelected!==!0&&v.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Se(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof v.value!="string"||v.value.length===0)&&(Ze(t),f.value=-1,Ve(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Ne.value!==void 0&&(Ze(t),f.value=Math.max(-1,Math.min(fe.value,f.value+(t.keyCode===33?-1:1)*Ne.value.view)),Ve(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ze(t),Ve(t.keyCode===38?-1:1,e.multiple));const N=fe.value;if((Q===void 0||ee<Date.now())&&(Q=""),N>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||Q.length>0)){s.value!==!0&&at(t);const te=t.key.toLocaleLowerCase(),J=Q.length===1&&Q[0]===te;ee=Date.now()+1500,J===!1&&(Ze(t),Q+=te);const se=new RegExp("^"+Q.split("").map(Lt=>Ba.indexOf(Lt)>-1?"\\"+Lt:Lt).join(".*"),"i");let ye=f.value;if(J===!0||ye<0||se.test(X.value(e.options[ye]))!==!0)do ye=il(ye+1,-1,N-1);while(ye!==f.value&&(de.value(e.options[ye])===!0||se.test(X.value(e.options[ye]))!==!0));f.value!==ye&&Le(()=>{Ae(ye),je(ye),ye>=0&&e.useInput===!0&&e.fillInput===!0&&C(X.value(e.options[ye]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||Q!=="")&&(t.keyCode!==9||w===!1))){if(t.keyCode!==9&&Ze(t),f.value>-1&&f.value<N){Ee(e.options[f.value]);return}if(p===!0){const te=(J,se)=>{if(se){if(sl(se)!==!0)return}else se=e.newValueMode;if(J==null)return;T("",e.multiple!==!0,!0),(se==="toggle"?Ee:pt)(J,se==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),Ke())};if(e.onNewValue!==void 0?a("newValue",v.value,te):te(v.value),e.multiple!==!0)return}s.value===!0?lt():k.innerLoading.value!==!0&&at()}}function xt(){return _===!0?ge.value:ce.value!==null&&ce.value.contentEl!==null?ce.value.contentEl:void 0}function Tt(){return xt()}function Ot(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?g.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?g.value.map((t,p)=>d(Oa,{key:"option-"+p,removable:k.editable.value===!0&&de.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Me.value,onRemove(){t.removeAtIndex(p)}},()=>d("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:X.value(t.opt)}))):[d("span",{[pe.value===!0?"innerHTML":"textContent"]:M.value})]}function Rt(){if(I.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:v.value}):void 0;const t=l.option!==void 0?l.option:w=>d(wt,{key:w.index,...w.itemProps},()=>d(St,()=>d(yt,()=>d("span",{[w.html===!0?"innerHTML":"textContent"]:w.label}))));let p=_e("div",c.value.map(t));return l["before-options"]!==void 0&&(p=l["before-options"]().concat(p)),gl(l["after-options"],p)}function Bt(t,p){const w=p===!0?{...he.value,...k.splitAttrs.attributes.value}:void 0,N={ref:p===!0?E:void 0,key:"i_t",class:ue.value,style:e.inputStyle,value:v.value!==void 0?v.value:"",type:"search",...w,id:p===!0?k.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ne.value};return t!==!0&&_===!0&&(Array.isArray(N.class)===!0?N.class=[...N.class,"no-pointer-events"]:N.class+=" no-pointer-events"),d("input",N)}function n(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(C(t.target.value||""),z=!0,y=v.value,k.focused.value!==!0&&(_!==!0||q.value===!0)&&k.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,B(v.value)},e.inputDebounce)))}function C(t){v.value!==t&&(v.value=t,a("inputValue",t))}function T(t,p,w){z=w!==!0,e.useInput===!0&&(C(t),(p===!0||w!==!0)&&(y=t),p!==!0&&B(t))}function B(t,p,w){if(e.onFilter===void 0||p!==!0&&k.focused.value!==!0)return;k.innerLoading.value===!0?a("filterAbort"):(k.innerLoading.value=!0,o.value=!0),t!==""&&e.multiple!==!0&&b.value.length>0&&z!==!0&&t===X.value(b.value[0])&&(t="");const N=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);x!==null&&clearTimeout(x),x=N,a("filter",t,(te,J)=>{(p===!0||k.focused.value===!0)&&x===N&&(clearTimeout(x),typeof te=="function"&&te(),o.value=!1,Le(()=>{k.innerLoading.value=!1,k.editable.value===!0&&(p===!0?s.value===!0&&Ke():s.value===!0?At(!0):s.value=!0),typeof J=="function"&&Le(()=>{J(r)}),typeof w=="function"&&Le(()=>{w(r)})}))},()=>{k.focused.value===!0&&x===N&&(clearTimeout(x),k.innerLoading.value=!1,o.value=!1),s.value===!0&&(s.value=!1)})}function H(){return d(oa,{ref:ce,class:D.value,style:e.popupContentStyle,modelValue:s.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&I.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:F.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...qe.value,onScrollPassive:Re,onBeforeShow:Gt,onBeforeHide:oe,onShow:le},Rt)}function oe(t){Zt(t),lt()}function le(){Ce()}function Pe(t){ot(t),E.value!==null&&E.value.focus(),q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function be(t){ot(t),Le(()=>{q.value=!1})}function et(){const t=[d(Fa,{class:`col-auto ${k.fieldClass.value}`,...P.value,for:k.targetUid.value,dark:L.value,square:!0,loading:o.value,itemAligned:!1,filled:!0,stackLabel:v.value.length>0,...k.splitAttrs.listeners.value,onFocus:Pe,onBlur:be},{...l,rawControl:()=>k.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&t.push(d("div",{ref:ge,class:D.value+" scroll",style:e.popupContentStyle,...qe.value,onClick:zt,onScrollPassive:Re},Rt())),d(Pt,{ref:Te,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:K,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Gt,onBeforeHide:tt,onHide:It,onShow:Il},()=>d("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(q.value===!0?" q-select__dialog--focused":"")},t))}function tt(t){Zt(t),Te.value!==null&&Te.value.__updateRefocusTarget(k.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),k.focused.value=!1}function It(t){Ke(),k.focused.value===!1&&a("blur",t),nt()}function Il(){const t=document.activeElement;(t===null||t.id!==k.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),Ce()}function lt(){i.value!==!0&&(f.value=-1,s.value===!0&&(s.value=!1),k.focused.value===!1&&(x!==null&&(clearTimeout(x),x=null),k.innerLoading.value===!0&&(a("filterAbort"),k.innerLoading.value=!1,o.value=!1)))}function at(t){k.editable.value===!0&&(_===!0?(k.onControlFocusin(t),i.value=!0,Le(()=>{k.focus()})):k.focus(),e.onFilter!==void 0?B(v.value):(I.value!==!0||l["no-option"]!==void 0)&&(s.value=!0))}function Ke(){i.value=!1,lt()}function nt(){e.useInput===!0&&T(e.multiple!==!0&&e.fillInput===!0&&b.value.length>0&&X.value(b.value[0])||"",!0,!0)}function At(t){let p=-1;if(t===!0){if(b.value.length>0){const w=U.value(b.value[0]);p=e.options.findIndex(N=>vt(U.value(N),w))}xe(p)}Ae(p)}function Al(t,p){s.value===!0&&k.innerLoading.value===!1&&(xe(-1,!0),Le(()=>{s.value===!0&&k.innerLoading.value===!1&&(t>p?xe():At(!0))}))}function Jt(){i.value===!1&&ce.value!==null&&ce.value.updatePosition()}function Gt(t){t!==void 0&&ot(t),a("popupShow",t),k.hasPopupOpen=!0,k.onControlFocusin(t)}function Zt(t){t!==void 0&&ot(t),a("popupHide",t),k.hasPopupOpen=!1,k.onControlFocusout(t)}function Xt(){_=m.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||I.value===!1:!0),K=m.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return Dl(Xt),Hl(Jt),Xt(),Ft(()=>{S!==null&&clearTimeout(S)}),Object.assign(r,{showPopup:at,hidePopup:Ke,removeAtIndex:Se,add:pt,toggleOption:Ee,getOptionIndex:()=>f.value,setOptionIndex:Ae,moveOptionSelection:Ve,filter:B,updateMenuPosition:Jt,updateInputValue:T,isOptionSelected:Xe,getEmittingOptionValue:ie,isOptionDisabled:(...t)=>de.value.apply(null,t)===!0,getOptionValue:(...t)=>U.value.apply(null,t),getOptionLabel:(...t)=>X.value.apply(null,t)}),Object.assign(k,{innerValue:b,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:A,targetRef:E,hasValue:Z,showPopup:at,floatingLabel:h(()=>e.hideSelected!==!0&&Z.value===!0||typeof v.value=="number"||v.value.length>0||ll(e.displayValue)),getControlChild:()=>{if(k.editable.value!==!1&&(i.value===!0||I.value!==!0||l["no-option"]!==void 0))return _===!0?et():H();k.hasPopupOpen===!0&&(k.hasPopupOpen=!1)},controlEvents:{onFocusin(t){k.onControlFocusin(t)},onFocusout(t){k.onControlFocusout(t,()=>{nt(),lt()})},onClick(t){if(zt(t),_!==!0&&s.value===!0){lt(),E.value!==null&&E.value.focus();return}at(t)}},getControl:t=>{const p=Ot(),w=t===!0||i.value!==!0||_!==!0;if(e.useInput===!0)p.push(Bt(t,w));else if(k.editable.value===!0){const te=w===!0?he.value:void 0;p.push(d("input",{ref:w===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:w===!0?k.targetUid.value:void 0,value:M.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...te,onKeydown:We,onKeyup:kt,onKeypress:ft})),w===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&p.push(d("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ye}))}if(Oe.value!==void 0&&e.disable!==!0&&Y.value.length>0){const te=Y.value.map(J=>d("option",{value:J,selected:!0}));p.push(d("select",{class:"hidden",name:Oe.value,multiple:e.multiple},te))}const N=e.useInput===!0||w!==!0?void 0:k.splitAttrs.attributes.value;return d("div",{class:"q-field__native row items-center",...N,...k.splitAttrs.listeners.value},p)},getInnerAppend:()=>e.loading!==!0&&o.value!==!0&&e.hideDropdownIcon!==!0?[d(rt,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:u.value})]:null}),yl(k)}});let bt=0;const La={fullscreen:Boolean,noRouteFullscreenExit:Boolean},za=["update:fullscreen","fullscreen"];function Na(){const e=Ue(),{props:l,emit:a,proxy:r}=e;let m,s,i;const f=$(!1);jl(e)===!0&&we(()=>r.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&o()}),we(()=>l.fullscreen,S=>{f.value!==S&&v()}),we(f,S=>{a("update:fullscreen",S),a("fullscreen",S)});function v(){f.value===!0?o():q()}function q(){f.value!==!0&&(f.value=!0,i=r.$el.parentNode,i.replaceChild(s,r.$el),document.body.appendChild(r.$el),bt++,bt===1&&document.body.classList.add("q-body--fullscreen-mixin"),m={handler:o},el.add(m))}function o(){f.value===!0&&(m!==void 0&&(el.remove(m),m=void 0),i.replaceChild(r.$el,s),f.value=!1,bt=Math.max(0,bt-1),bt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Ut(()=>{s=document.createElement("span")}),Wt(()=>{l.fullscreen===!0&&q()}),Ft(o),Object.assign(r,{toggleFullscreen:v,setFullscreen:q,exitFullscreen:o}),{inFullscreen:f,toggleFullscreen:v}}function ja(e,l){return new Date(e)-new Date(l)}const Ma={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ea(e,l,a,r){const m=h(()=>{const{sortBy:f}=l.value;return f&&a.value.find(v=>v.name===f)||null}),s=h(()=>e.sortMethod!==void 0?e.sortMethod:(f,v,q)=>{const o=a.value.find(_=>_.name===v);if(o===void 0||o.field===void 0)return f;const S=q===!0?-1:1,V=typeof o.field=="function"?_=>o.field(_):_=>_[o.field];return f.sort((_,z)=>{let x=V(_),y=V(z);return x==null?-1*S:y==null?1*S:o.sort!==void 0?o.sort(x,y,_,z)*S:Ht(x)===!0&&Ht(y)===!0?(x-y)*S:tl(x)===!0&&tl(y)===!0?ja(x,y)*S:typeof x=="boolean"&&typeof y=="boolean"?(x-y)*S:([x,y]=[x,y].map(K=>(K+"").toLocaleString().toLowerCase()),x<y?-1*S:x===y?0:S)})});function i(f){let v=e.columnSortOrder;if(Ul(f)===!0)f.sortOrder&&(v=f.sortOrder),f=f.name;else{const S=a.value.find(V=>V.name===f);S!==void 0&&S.sortOrder&&(v=S.sortOrder)}let{sortBy:q,descending:o}=l.value;q!==f?(q=f,o=v==="da"):e.binaryStateSort===!0?o=!o:o===!0?v==="ad"?q=null:o=!1:v==="ad"?o=!0:q=null,r({sortBy:q,descending:o,page:1})}return{columnToSort:m,computedSortMethod:s,sort:i}}const Da={filter:[String,Object],filterMethod:Function};function Ha(e,l){const a=h(()=>e.filterMethod!==void 0?e.filterMethod:(r,m,s,i)=>{const f=m?m.toLowerCase():"";return r.filter(v=>s.some(q=>{const o=i(q,v)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(f)!==-1}))});return we(()=>e.filter,()=>{Le(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function $a(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function cl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Qa={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ua(e,l){const{props:a,emit:r}=e,m=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length>0?a.rowsPerPageOptions[0]:5},a.pagination)),s=h(()=>{const o=a["onUpdate:pagination"]!==void 0?{...m.value,...a.pagination}:m.value;return cl(o)}),i=h(()=>s.value.rowsNumber!==void 0);function f(o){v({pagination:o,filter:a.filter})}function v(o={}){Le(()=>{r("request",{pagination:o.pagination||s.value,filter:o.filter||a.filter,getCellValue:l})})}function q(o,S){const V=cl({...s.value,...o});if($a(s.value,V)===!0){i.value===!0&&S===!0&&f(V);return}if(i.value===!0){f(V);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?r("update:pagination",V):m.value=V}return{innerPagination:m,computedPagination:s,isServerSide:i,requestServerInteraction:v,setPagination:q}}function Wa(e,l,a,r,m,s){const{props:i,emit:f,proxy:{$q:v}}=e,q=h(()=>r.value===!0?a.value.rowsNumber||0:s.value),o=h(()=>{const{page:A,rowsPerPage:E}=a.value;return(A-1)*E}),S=h(()=>{const{page:A,rowsPerPage:E}=a.value;return A*E}),V=h(()=>a.value.page===1),_=h(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/a.value.rowsPerPage))),z=h(()=>S.value===0?!0:a.value.page>=_.value),x=h(()=>(i.rowsPerPageOptions.includes(l.value.rowsPerPage)?i.rowsPerPageOptions:[l.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(E=>({label:E===0?v.lang.table.allRows:""+E,value:E})));we(_,(A,E)=>{if(A===E)return;const ce=a.value.page;A&&!ce?m({page:1}):A<ce&&m({page:A})});function y(){m({page:1})}function K(){const{page:A}=a.value;A>1&&m({page:A-1})}function Q(){const{page:A,rowsPerPage:E}=a.value;S.value>0&&A*E<q.value&&m({page:A+1})}function ee(){m({page:_.value})}return i["onUpdate:pagination"]!==void 0&&f("update:pagination",{...a.value}),{firstRowIndex:o,lastRowIndex:S,isFirstPage:V,isLastPage:z,pagesNumber:_,computedRowsPerPageOptions:x,computedRowsNumber:q,firstPage:y,prevPage:K,nextPage:Q,lastPage:ee}}const Ka={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Ja=["update:selected","selection"];function Ga(e,l,a,r){const m=h(()=>{const z={};return e.selected.map(r.value).forEach(x=>{z[x]=!0}),z}),s=h(()=>e.selection!=="none"),i=h(()=>e.selection==="single"),f=h(()=>e.selection==="multiple"),v=h(()=>a.value.length>0&&a.value.every(z=>m.value[r.value(z)]===!0)),q=h(()=>v.value!==!0&&a.value.some(z=>m.value[r.value(z)]===!0)),o=h(()=>e.selected.length);function S(z){return m.value[z]===!0}function V(){l("update:selected",[])}function _(z,x,y,K){l("selection",{rows:x,added:y,keys:z,evt:K});const Q=i.value===!0?y===!0?x:[]:y===!0?e.selected.concat(x):e.selected.filter(ee=>z.includes(r.value(ee))===!1);l("update:selected",Q)}return{hasSelectionMode:s,singleSelection:i,multipleSelection:f,allRowsSelected:v,someRowsSelected:q,rowsSelectedNumber:o,isRowSelected:S,clearSelection:V,updateSelection:_}}function dl(e){return Array.isArray(e)?e.slice():[]}const Za={expanded:Array},Xa=["update:expanded"];function Ya(e,l){const a=$(dl(e.expanded));we(()=>e.expanded,i=>{a.value=dl(i)});function r(i){return a.value.includes(i)}function m(i){e.expanded!==void 0?l("update:expanded",i):a.value=i}function s(i,f){const v=a.value.slice(),q=v.indexOf(i);f===!0?q===-1&&(v.push(i),m(v)):q!==-1&&(v.splice(q,1),m(v))}return{isRowExpanded:r,setExpanded:m,updateExpanded:s}}const en={visibleColumns:Array};function tn(e,l,a){const r=h(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(v=>({name:v,label:v.toUpperCase(),field:v,align:Ht(f[v])?"right":"left",sortable:!0})):[]}),m=h(()=>{const{sortBy:f,descending:v}=l.value;return(e.visibleColumns!==void 0?r.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):r.value).map(o=>{const S=o.align||"right",V=`text-${S}`;return{...o,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:V+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===f?` sorted ${v===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>V+" "+o.classes:_=>V+" "+o.classes(_):()=>V}})}),s=h(()=>{const f={};return m.value.forEach(v=>{f[v.name]=v}),f}),i=h(()=>e.tableColspan!==void 0?e.tableColspan:m.value.length+(a.value===!0?1:0));return{colList:r,computedCols:m,computedColsMap:s,computedColspan:i}}const qt="q-table__bottom row items-center",Bl={};Fl.forEach(e=>{Bl[e]={}});var ln=De({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Bl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...pl,...La,...en,...Da,...Qa,...Za,...Ka,...Ma},emits:["request","virtualScroll",...za,...Xa,...Ja],setup(e,{slots:l,emit:a}){const r=Ue(),{proxy:{$q:m}}=r,s=kl(e,m),{inFullscreen:i,toggleFullscreen:f}=Na(),v=h(()=>typeof e.rowKey=="function"?e.rowKey:n=>n[e.rowKey]),q=$(null),o=$(null),S=h(()=>e.grid!==!0&&e.virtualScroll===!0),V=h(()=>" q-table__card"+(s.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),_=h(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":V.value)+(s.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),z=h(()=>_.value+(e.loading===!0?" q-table--loading":""));we(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+_.value,()=>{S.value===!0&&o.value!==null&&o.value.reset()});const{innerPagination:x,computedPagination:y,isServerSide:K,requestServerInteraction:Q,setPagination:ee}=Ua(r,Ve),{computedFilterMethod:A}=Ha(e,ee),{isRowExpanded:E,setExpanded:ce,updateExpanded:Te}=Ya(e,a),ge=h(()=>{let n=e.rows;if(K.value===!0||n.length===0)return n;const{sortBy:C,descending:T}=y.value;return e.filter&&(n=A.value(n,e.filter,b.value,Ve)),Z.value!==null&&(n=ue.value(e.rows===n?n.slice():n,C,T)),n}),Oe=h(()=>ge.value.length),me=h(()=>{let n=ge.value;if(K.value===!0)return n;const{rowsPerPage:C}=y.value;return C!==0&&(I.value===0&&e.rows!==n?n.length>ae.value&&(n=n.slice(0,ae.value)):n=n.slice(I.value,ae.value)),n}),{hasSelectionMode:fe,singleSelection:Be,multipleSelection:Ie,allRowsSelected:Ne,someRowsSelected:xe,rowsSelectedNumber:_e,isRowSelected:Re,clearSelection:je,updateSelection:Ce}=Ga(e,a,me,v),{colList:k,computedCols:b,computedColsMap:P,computedColspan:L}=tn(e,y,fe),{columnToSort:Z,computedSortMethod:ue,sort:D}=Ea(e,y,k,ee),{firstRowIndex:I,lastRowIndex:ae,isFirstPage:M,isLastPage:re,pagesNumber:pe,computedRowsPerPageOptions:Me,computedRowsNumber:he,firstPage:qe,prevPage:g,nextPage:c,lastPage:u}=Wa(r,x,y,K,ee,Oe),F=h(()=>me.value.length===0),W=h(()=>{const n={};return Fl.forEach(C=>{n[C]=e[C]}),n.virtualScrollItemSize===void 0&&(n.virtualScrollItemSize=e.dense===!0?28:48),n});function U(){S.value===!0&&o.value.reset()}function X(){if(e.grid===!0)return Bt();const n=e.hideHeader!==!0?dt:null;if(S.value===!0){const T=l["top-row"],B=l["bottom-row"],H={default:oe=>ie(oe.item,l.body,oe.index)};if(T!==void 0){const oe=d("tbody",T({cols:b.value}));H.before=n===null?()=>oe:()=>[n()].concat(oe)}else n!==null&&(H.before=n);return B!==void 0&&(H.after=()=>d("tbody",B({cols:b.value}))),d(Pa,{ref:o,class:e.tableClass,style:e.tableStyle,...W.value,scrollTarget:e.virtualScrollTarget,items:me.value,type:"__qtable",tableColspan:L.value,onVirtualScroll:Y},H)}const C=[Se()];return n!==null&&C.unshift(n()),ql({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},C)}function de(n,C){if(o.value!==null){o.value.scrollTo(n,C);return}n=parseInt(n,10);const T=q.value.querySelector(`tbody tr:nth-of-type(${n+1})`);if(T!==null){const B=q.value.querySelector(".q-table__middle.scroll"),H=T.offsetTop-e.virtualScrollStickySizeStart,oe=H<B.scrollTop?"decrease":"increase";B.scrollTop=H,a("virtualScroll",{index:n,from:0,to:x.value.rowsPerPage-1,direction:oe})}}function Y(n){a("virtualScroll",n)}function ne(){return[d(_l,{class:"q-table__linear-progress",color:e.color,dark:s.value,indeterminate:!0,trackColor:"transparent"})]}function ie(n,C,T){const B=v.value(n),H=Re(B);if(C!==void 0)return C(Ct({key:B,row:n,pageIndex:T,__trClass:H?"selected":""}));const oe=l["body-cell"],le=b.value.map(be=>{const et=l[`body-cell-${be.name}`],tt=et!==void 0?et:oe;return tt!==void 0?tt(pt({key:B,row:n,pageIndex:T,col:be})):d("td",{class:be.__tdClass(n),style:be.__tdStyle(n)},Ve(be,n))});if(fe.value===!0){const be=l["body-selection"],et=be!==void 0?be(Ee({key:B,row:n,pageIndex:T})):[d(Vt,{modelValue:H,color:e.color,dark:s.value,dense:e.dense,"onUpdate:modelValue":(tt,It)=>{Ce([B],[n],tt,It)}})];le.unshift(d("td",{class:"q-table--col-auto-width"},et))}const Pe={key:B,class:{selected:H}};return e.onRowClick!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onClick=be=>{a("RowClick",be,n,T)}),e.onRowDblclick!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onDblclick=be=>{a("RowDblclick",be,n,T)}),e.onRowContextmenu!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onContextmenu=be=>{a("RowContextmenu",be,n,T)}),d("tr",Pe,le)}function Se(){const n=l.body,C=l["top-row"],T=l["bottom-row"];let B=me.value.map((H,oe)=>ie(H,n,oe));return C!==void 0&&(B=C({cols:b.value}).concat(B)),T!==void 0&&(B=B.concat(T({cols:b.value}))),d("tbody",B)}function Ct(n){return Ae(n),n.cols=n.cols.map(C=>mt({...C},"value",()=>Ve(C,n.row))),n}function pt(n){return Ae(n),mt(n,"value",()=>Ve(n.col,n.row)),n}function Ee(n){return Ae(n),n}function Ae(n){Object.assign(n,{cols:b.value,colsMap:P.value,sort:D,rowIndex:I.value+n.pageIndex,color:e.color,dark:s.value,dense:e.dense}),fe.value===!0&&mt(n,"selected",()=>Re(n.key),(C,T)=>{Ce([n.key],[n.row],C,T)}),mt(n,"expand",()=>E(n.key),C=>{Te(n.key,C)})}function Ve(n,C){const T=typeof n.field=="function"?n.field(C):C[n.field];return n.format!==void 0?n.format(T,C):T}const He=h(()=>({pagination:y.value,pagesNumber:pe.value,isFirstPage:M.value,isLastPage:re.value,firstPage:qe,prevPage:g,nextPage:c,lastPage:u,inFullscreen:i.value,toggleFullscreen:f}));function ct(){const n=l.top,C=l["top-left"],T=l["top-right"],B=l["top-selection"],H=fe.value===!0&&B!==void 0&&_e.value>0,oe="q-table__top relative-position row items-center";if(n!==void 0)return d("div",{class:oe},[n(He.value)]);let le;if(H===!0?le=B(He.value).slice():(le=[],C!==void 0?le.push(d("div",{class:"q-table__control"},[C(He.value)])):e.title&&le.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),T!==void 0&&(le.push(d("div",{class:"q-table__separator col"})),le.push(d("div",{class:"q-table__control"},[T(He.value)]))),le.length!==0)return d("div",{class:oe},le)}const Xe=h(()=>xe.value===!0?null:Ne.value);function dt(){const n=kt();return e.loading===!0&&l.loading===void 0&&n.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:L.value},ne())])),d("thead",n)}function kt(){const n=l.header,C=l["header-cell"];if(n!==void 0)return n(Ye({header:!0})).slice();const T=b.value.map(B=>{const H=l[`header-cell-${B.name}`],oe=H!==void 0?H:C,le=Ye({col:B});return oe!==void 0?oe(le):d(ka,{key:B.name,props:le},()=>B.label)});if(Be.value===!0&&e.grid!==!0)T.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(Ie.value===!0){const B=l["header-selection"],H=B!==void 0?B(Ye({})):[d(Vt,{color:e.color,modelValue:Xe.value,dark:s.value,dense:e.dense,"onUpdate:modelValue":ft})];T.unshift(d("th",{class:"q-table--col-auto-width"},H))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},T)]}function Ye(n){return Object.assign(n,{cols:b.value,sort:D,colsMap:P.value,color:e.color,dark:s.value,dense:e.dense}),Ie.value===!0&&mt(n,"selected",()=>Xe.value,ft),n}function ft(n){xe.value===!0&&(n=!1),Ce(me.value.map(v.value),me.value,n)}const We=h(()=>{const n=[e.iconFirstPage||m.iconSet.table.firstPage,e.iconPrevPage||m.iconSet.table.prevPage,e.iconNextPage||m.iconSet.table.nextPage,e.iconLastPage||m.iconSet.table.lastPage];return m.lang.rtl===!0?n.reverse():n});function xt(){if(e.hideBottom===!0)return;if(F.value===!0){if(e.hideNoData===!0)return;const T=e.loading===!0?e.loadingLabel||m.lang.table.loading:e.filter?e.noResultsLabel||m.lang.table.noResults:e.noDataLabel||m.lang.table.noData,B=l["no-data"],H=B!==void 0?[B({message:T,icon:m.iconSet.table.warning,filter:e.filter})]:[d(rt,{class:"q-table__bottom-nodata-icon",name:m.iconSet.table.warning}),T];return d("div",{class:qt+" q-table__bottom--nodata"},H)}const n=l.bottom;if(n!==void 0)return d("div",{class:qt},[n(He.value)]);const C=e.hideSelectedBanner!==!0&&fe.value===!0&&_e.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||m.lang.table.selectedRecords)(_e.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:qt+" justify-end"},Ot(C));if(C.length>0)return d("div",{class:qt},C)}function Tt(n){ee({page:1,rowsPerPage:n.value})}function Ot(n){let C;const{rowsPerPage:T}=y.value,B=e.paginationLabel||m.lang.table.pagination,H=l.pagination,oe=e.rowsPerPageOptions.length>1;if(n.push(d("div",{class:"q-table__separator col"})),oe===!0&&n.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||m.lang.table.recordsPerPage]),d(Aa,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:T,options:Me.value,displayValue:T===0?m.lang.table.allRows:T,dark:s.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Tt})])),H!==void 0)C=H(He.value);else if(C=[d("span",T!==0?{class:"q-table__bottom-item"}:{},[T?B(I.value+1,Math.min(ae.value,he.value),he.value):B(1,Oe.value,he.value)])],T!==0&&pe.value>1){const le={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(le.size="sm"),pe.value>2&&C.push(d(ze,{key:"pgFirst",...le,icon:We.value[0],disable:M.value,onClick:qe})),C.push(d(ze,{key:"pgPrev",...le,icon:We.value[1],disable:M.value,onClick:g}),d(ze,{key:"pgNext",...le,icon:We.value[2],disable:re.value,onClick:c})),pe.value>2&&C.push(d(ze,{key:"pgLast",...le,icon:We.value[3],disable:re.value,onClick:u}))}return n.push(d("div",{class:"q-table__control"},C)),n}function Rt(){const n=e.gridHeader===!0?[d("table",{class:"q-table"},[dt()])]:e.loading===!0&&l.loading===void 0?ne():void 0;return d("div",{class:"q-table__middle"},n)}function Bt(){const n=l.item!==void 0?l.item:C=>{const T=C.cols.map(H=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[H.label]),d("div",{class:"q-table__grid-item-value"},[H.value])]));if(fe.value===!0){const H=l["body-selection"],oe=H!==void 0?H(C):[d(Vt,{modelValue:C.selected,color:e.color,dark:s.value,dense:e.dense,"onUpdate:modelValue":(le,Pe)=>{Ce([C.key],[C.row],le,Pe)}})];T.unshift(d("div",{class:"q-table__grid-item-row"},oe),d(ua,{dark:s.value}))}const B={class:["q-table__grid-item-card"+V.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(B.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(B.onClick=H=>{a("RowClick",H,C.row,C.pageIndex)}),e.onRowDblclick!==void 0&&(B.onDblclick=H=>{a("RowDblclick",H,C.row,C.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(C.selected===!0?" q-table__grid-item--selected":"")},[d("div",B,T)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},me.value.map((C,T)=>n(Ct({key:v.value(C),row:C,pageIndex:T}))))}return Object.assign(r.proxy,{requestServerInteraction:Q,setPagination:ee,firstPage:qe,prevPage:g,nextPage:c,lastPage:u,isRowSelected:Re,clearSelection:je,isRowExpanded:E,setExpanded:ce,sort:D,resetVirtualScroll:U,scrollTo:de,getCellValue:Ve}),Wl(r.proxy,{filteredSortedRows:()=>ge.value,computedRows:()=>me.value,computedRowsNumber:()=>he.value}),()=>{const n=[ct()],C={ref:q,class:z.value};return e.grid===!0?n.push(Rt()):Object.assign(C,{class:[C.class,e.cardClass],style:e.cardStyle}),n.push(X(),xt()),e.loading===!0&&l.loading!==void 0&&n.push(l.loading()),d("div",C,n)}}});const an={class:"full"},nn={class:"header"},on={class:"text-h6 fontOswald"},un={class:"flex-container"},rn={class:"container"},sn={class:"overview"},cn={class:"statistics"},dn={class:"row"},fn={class:"col-12 col-md statistics-values"},vn=R("div",{class:"statistics-name"},"Total files: ",-1),mn={class:"statistics-value"},gn=R("div",{class:"statistics-name"},"Total barcodes: ",-1),hn={class:"statistics-value"},bn=R("div",{class:"statistics-name"},"Correctly detected files: ",-1),Sn={class:"statistics-value"},yn=R("div",{class:"statistics-name"},"Rate of detected files: ",-1),wn={class:"statistics-value"},_n=R("div",{class:"statistics-name"},"Detected barcodes: ",-1),Cn={class:"statistics-value"},pn=R("div",{class:"statistics-name"},"Misdetected barcodes: ",-1),kn={class:"statistics-value"},xn=R("div",{class:"statistics-name"},"Average time (ms): ",-1),Rn={class:"statistics-value"},qn={class:"col-12 col-md statistics-charts"},Vn={class:"row"},Pn={class:"col statistics-chart"},Fn={class:"col statistics-chart"},Tn={class:"decoding"},On=R("div",null,[R("label",{style:{"font-size":"16px"}},"Engines:")],-1),Bn={class:"row",style:{"padding-bottom":"20px"}},In=["value"],An={class:"row",style:{"align-items":"center"}},Ln={key:0,style:{width:"100px"}},zn={class:"absolute-full flex flex-center"},Nn={style:{"margin-top":"2em","margin-bottom":"2em"}},jn={class:"filename"},Mn={class:"text"},En={class:"text"},Dn={class:"text"},Hn={class:"dialogs"},$n=R("div",{class:"text-h6"},"Add files",-1),Qn=R("label",{for:"imageFiles"},"Image files.",-1),Un=R("label",{for:"detectionResultFiles"},"Detection result files.",-1),Wn=R("label",{for:"imageFiles"},"Ground truth files.",-1),Kn=R("label",{for:"zipFile"},"Zip with images and text results.",-1),Jn=R("div",{class:"text-h6"},"Export",-1),Gn=R("div",{class:"text-h6"},"Downloading project data...",-1),fo=Kl({__name:"ProjectPage",setup(e){const l=[{name:"number",required:!0,label:"No.",align:"left",field:"number"},{name:"name",required:!0,label:"Filename",align:"left",field:"filename",sortable:!0},{name:"detectedText",required:!0,label:"Detected Text",align:"left",field:"detectedText"},{name:"groundTruth",required:!0,label:"Ground Truth",align:"left",field:"groundTruth"},{name:"barcodeFormat",required:!0,label:"Barcode Format",align:"left",field:"barcodeFormat"},{name:"time",required:!0,label:"Time (ms)",align:"left",field:"time"},{name:"correct",required:!0,label:"Correct",align:"left",field:"correct",sortable:!0},{name:"misdetected",required:!0,label:"Misdetected",align:"left",field:"misdetected",sortable:!0}];let a,r;const m=$([]),s=Jl(),i=$(""),f=$(""),v=$([]),q=$(!1),o=$(!1),S=$(.5),V=$(""),_=$(!1),z=$(!0),x=$({fileNumber:0,correctFilesNumber:0,barcodeNumber:0,accuracy:0,precision:0,averageTime:0}),y=$(!1);let K=!1,Q=[],ee=[],A=[],E,ce=[];Wt(async()=>{i.value=s.currentRoute.value.params.name,await Te(s.currentRoute.value.params.name);const g=await G.getItem("projects");if(ea({title:"Barcode Reading Benchmark - "+i.value}),g){ce=JSON.parse(g);for(let c=0;c<ce.length;c++)if(ce[c].info.name===i.value){r=ce[c];break}}if(!r)await qe();else if(r.isRemote){const c=await G.getItem(r.info.name+":results.zip"),u=await la(r);(!c||!u||r.info.images.length===0)&&await qe()}ge()});const Te=async g=>{const c=await va(g);v.value=c,c.length>0&&(f.value=c[0].displayName)},ge=async g=>{if(r){const c=await ma(r,g!=null?g:f.value);x.value=c.metrics,c.rows&&(m.value=c.rows)}},Oe=async()=>{let g=re();if(_.value===!1&&g){_.value=!0,K=!1,await pe(),await Me(g);const c=r.info.images.length;S.value=0,V.value="0/"+c;let u=await G.getItem(i.value+":detectionResultFileNamesList");u||(u=[]);for(let F=0;F<c;F++){if(K){await G.setItem(i.value+":detectionResultFileNamesList",u);return}const W=r.info.images[F];if(z.value&&await G.getItem(i.value+":detectionResult:"+Ge(W)+"-"+f.value+".json"))continue;const U=await G.getItem(i.value+":image:"+W);if(U){let X=await a.detect(U);console.log(X);const de=Ge(W)+"-"+f.value+".json";u.indexOf(de)===-1&&u.push(de),await G.setItem(i.value+":detectionResult:"+Ge(W)+"-"+f.value+".json",JSON.stringify(X))}S.value=parseFloat(((F+1)/c).toFixed(2)),V.value=F+1+"/"+c}await G.setItem(i.value+":detectionResultFileNamesList",u),_.value=!1}else K=!0,_.value=!1;ge()},me=g=>{ee=g.target.files},fe=g=>{Q=g.target.files},Be=g=>{A=g.target.files},Ie=g=>{E=g.target.files[0]},Ne=async()=>{if(r){for(let c=0;c<A.length;c++){const u=A[c],F=await nl(u);await G.setItem(i.value+":groundTruth:"+u.name,F)}let g=await G.getItem(i.value+":detectionResultFileNamesList");g||(g=[]);for(let c=0;c<ee.length;c++){const u=ee[c],F=await nl(u);g.indexOf(u.name)===-1&&g.push(u.name),await G.setItem(i.value+":detectionResult:"+u.name,F)}for(let c=0;c<Q.length;c++){const u=Q[c],F=await ga(u);await G.setItem(i.value+":image:"+u.name,F),r.info.images.push(u.name)}await G.setItem(i.value+":detectionResultFileNamesList",g),await xe(),ge(),Re(),alert("added"),q.value=!1}},xe=async()=>{if(r&&E){const g=await E.arrayBuffer(),c=new jt;await c.loadAsync(g);const u=c.files,F=Object.keys(u),W=[],U=[],X=[];for(let Y=0;Y<F.length;Y++){const ne=F[Y],ie=ne.toLowerCase(),Se=u[ne];Se.dir===!1&&(ie.endsWith(".jpg")||ie.endsWith(".jpeg")||ie.endsWith(".png")||ie.endsWith(".bmp")?U.push(Se):ie.endsWith(".txt")?W.push(Se):ie.endsWith(".json")&&X.push(Se))}for(let Y=0;Y<W.length;Y++){const ne=W[Y],ie=await ne.async("string");await G.setItem(i.value+":groundTruth:"+ne.name,ie)}let de=await G.getItem(i.value+":detectionResultFileNamesList");de||(de=[]);for(let Y=0;Y<X.length;Y++){const ne=X[Y],ie=await ne.async("string");de.indexOf(ne.name)===-1&&de.push(ne.name),await G.setItem(i.value+":detectionResult:"+ne.name,ie)}for(let Y=0;Y<U.length;Y++){const ne=U[Y],ie=await ne.async("base64"),Se=_e(ie,ne.name);await G.setItem(i.value+":image:"+ne.name,Se),r.info.images.push(ne.name)}await G.setItem(i.value+":detectionResultFileNamesList",de)}},_e=(g,c)=>{const u=c.toLowerCase();return u.endsWith(".jpg")||u.endsWith(".jpeg")?"data:image/jpeg;base64,"+g:u.endsWith(".bmp")?"data:image/bmp;base64,"+g:u.endsWith(".bmp")?"data:image/png;base64,"+g:"data:image/jpeg;base64,"+g},Re=async()=>{let g=[];ce.forEach(c=>{g.push(c)}),await G.setItem("projects",JSON.stringify(g))},je=()=>{Ce(),q.value=!0},Ce=()=>{E=void 0,Q=[],ee=[],A=[]},k=async()=>{await ha(r),Re(),ge()},b=async()=>{o.value=!0},P=async()=>{for(let g=0;g<r.info.images.length;g++){const c=r.info.images[g],u=await G.getItem(i.value+":image:"+c);if(u){await ba(1e3);const F=ol(u),W=document.createElement("a");W.href=URL.createObjectURL(F),W.download=c,document.body.appendChild(W),W.click(),document.body.removeChild(W)}}},L=async()=>{const g=new jt;for(let c=0;c<r.info.images.length;c++){const u=r.info.images[c],F=await G.getItem(i.value+":image:"+u);if(F){console.log(u);const W=ol(F);g.file(u,W)}}g.generateAsync({type:"blob"}).then(function(c){const u=document.createElement("a");u.href=URL.createObjectURL(c),u.download=i.value+"-images.zip",document.body.appendChild(u),u.click(),document.body.removeChild(u)})},Z=async()=>{const g=new jt;for(let u=0;u<r.info.images.length;u++){const F=r.info.images[u],W=Ge(F)+".txt",U=await G.getItem(i.value+":groundTruth:"+Ge(F)+".txt");U&&g.file(W,U)}const c=await G.getItem(i.value+":detectionResultFileNamesList");if(c){for(let u=0;u<c.length;u++){const F=c[u],W=await G.getItem(i.value+":detectionResult:"+F);W&&g.file(F,W)}g.file("detection_result_filenames.json",JSON.stringify(c))}g.file("project_manifest.json",JSON.stringify(r)),await ue(g),g.generateAsync({type:"blob"}).then(function(u){const F=document.createElement("a");F.href=URL.createObjectURL(u),F.download=i.value+"-results.zip",document.body.appendChild(F),F.click(),document.body.removeChild(F)})},ue=async g=>{g.file("settings.json",JSON.stringify(v.value))},D=g=>{const c="/project/"+encodeURIComponent(i.value)+"/"+encodeURIComponent(g)+"/"+f.value,u=s.resolve(c);window.open(u.href,"_blank")},I=g=>{ge(g)},ae=()=>{const g="/project/"+encodeURIComponent(i.value)+"/comparison";s.push(g)},M=()=>{const g="/project/"+encodeURIComponent(i.value)+"/livescanner",c=s.resolve(g);window.open(c.href,"_blank")},re=g=>{let c;g?c=g:c=f.value;for(const u of v.value)if(u.displayName===c)return u},pe=async()=>{let g=re();if(g){let c=!1;a?a.getEngine()!=g.engine&&(c=!0):c=!0,c&&(V.value="Initializing...",a=await Sa.createInstance(g.engine),V.value="")}},Me=async g=>{console.log("updateBarcodeReaderSettings"),console.log(g),await a.setSupportedSettings(g.settings)},he=async()=>{const g=r.info.images.length;for(let c=0;c<g;c++){const u=r.info.images[c],F=await G.getItem(i.value+":detectionResult:"+Ge(u)+"-"+f.value+".json");if(F){const W=JSON.parse(F),U=ya(W.results);await G.setItem(i.value+":groundTruth:"+Ge(u)+".txt",JSON.stringify(U))}}ge()},qe=async()=>{y.value=!0;const g=i.value;try{const u=await(await fetch("./dataset/"+g+"/project_manifest.json")).text(),F=JSON.parse(u);F.isRemote=!0;const U=await(await fetch("./dataset/"+g+"/results.zip")).blob();U.size>0&&await G.setItem(g+":results.zip",U),await aa(F);let X,de=await G.getItem("projects");de?X=JSON.parse(de):X=[];let Y=[],ne=!1;for(let ie=0;ie<X.length;ie++){const Se=X[ie];Se.info.name===F.info.name?(Y.push(F),ne=!0):Y.push(Se)}ne===!1&&Y.push(F),await G.setItem("projects",JSON.stringify(Y)),r=F,await Te(g)}catch(c){console.log(c)}y.value=!1};return(g,c)=>($e(),gt(fa,null,{default:j(()=>[R("div",an,[R("div",nn,[R("div",on,ve(i.value),1),R("div",un,[O(Et,{style:{"margin-left":"15px"},secondary:"",label:"Go to Comparison Page",onClick:ae})]),O(Et,{outline:"",style:{color:"black","border-color":"black","background-color":"#fff"},label:"Export",onClick:b})]),R("div",rn,[R("div",sn,[R("div",cn,[R("div",dn,[R("div",fn,[R("div",null,[vn,R("div",mn,ve(x.value.fileNumber),1)]),R("div",null,[gn,R("div",hn,ve(x.value.barcodeNumber),1)]),R("div",null,[bn,R("div",Sn,ve(x.value.correctFilesNumber),1)]),R("div",null,[yn,R("div",wn,ve(x.value.detectedFilesRate)+"%",1)]),R("div",null,[_n,R("div",Cn,ve(parseInt((x.value.accuracy/100*x.value.barcodeNumber).toString())),1)]),R("div",null,[pn,R("div",kn,ve(parseInt(((1-x.value.precision/100)*x.value.barcodeNumber).toString())),1)]),R("div",null,[xn,R("div",Rn,ve(x.value.averageTime),1)])]),R("div",qn,[R("div",Vn,[R("div",Pn,[ke(" Reading Rate: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.accuracy,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:j(()=>[ke(ve(x.value.accuracy)+"% ",1)]),_:1},8,["value","thickness"])]),R("div",Fn,[ke(" Precision: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.precision,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:j(()=>[ke(ve(x.value.precision)+"% ",1)]),_:1},8,["value","thickness"])])])])])]),R("div",Tn,[On,R("div",Bn,[Je(R("select",{style:{"min-width":"200px",height:"45px"},"onUpdate:modelValue":[c[0]||(c[0]=u=>I(u)),c[1]||(c[1]=u=>f.value=u)]},[($e(!0),Nt(Xl,null,Zl(v.value,u=>($e(),Nt("option",{value:u.displayName,key:u.displayName},ve(u.displayName),9,In))),128))],512),[[Gl,f.value]])]),R("div",An,[O(Et,{label:_.value?"Stop Decoding":"Start Decoding",onClick:Oe},null,8,["label"]),O(Vt,{color:"orange",style:{"padding-left":"10px"},"left-label":"",modelValue:z.value,"onUpdate:modelValue":c[2]||(c[2]=u=>z.value=u),label:"Skip Detected"},null,8,["modelValue"])]),_.value?($e(),Nt("div",Ln,[O(_l,{size:"25px",value:S.value,color:"orange"},{default:j(()=>[R("div",zn,[O(na,{color:"white","text-color":"black",label:V.value},null,8,["label"])])]),_:1},8,["value"])])):Yl("",!0)])]),R("div",Nn,[O(ln,{title:"Images",color:"black","table-header-style":"background:#f5f5f5;",rows:m.value,columns:l,"row-key":"name"},{"top-right":j(()=>[O(ia,{unelevated:"",color:"black",label:"Action"},{default:j(()=>[O(Cl,null,{default:j(()=>[Je(($e(),gt(wt,{clickable:"",onClick:je},{default:j(()=>[O(St,null,{default:j(()=>[O(yt,null,{default:j(()=>[ke("Add local files")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:k},{default:j(()=>[O(St,null,{default:j(()=>[O(yt,null,{default:j(()=>[ke("Clear")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:he},{default:j(()=>[O(St,null,{default:j(()=>[O(yt,null,{default:j(()=>[ke("Convert detected results to ground truth")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:M},{default:j(()=>[O(St,null,{default:j(()=>[O(yt,null,{default:j(()=>[ke("Go to live scanner")]),_:1})]),_:1})]),_:1})),[[ut]])]),_:1})]),_:1})]),body:j(u=>[O(pa,{props:u},{default:j(()=>[O(Qe,{key:"number",props:u},{default:j(()=>[ke(ve(u.row.number),1)]),_:2},1032,["props"]),O(Qe,{key:"name",props:u,onClick:F=>D(u.row.filename)},{default:j(()=>[R("div",jn,ve(u.row.filename),1)]),_:2},1032,["props","onClick"]),O(Qe,{key:"detectedText",props:u},{default:j(()=>[R("div",Mn,ve(u.row.detectedText),1)]),_:2},1032,["props"]),O(Qe,{key:"groundTruth",props:u},{default:j(()=>[R("div",En,ve(u.row.groundTruth),1)]),_:2},1032,["props"]),O(Qe,{key:"barcodeFormat",props:u},{default:j(()=>[R("div",Dn,ve(u.row.barcodeFormat),1)]),_:2},1032,["props"]),O(Qe,{key:"time",props:u},{default:j(()=>[ke(ve(u.row.time),1)]),_:2},1032,["props"]),O(Qe,{key:"correct",props:u},{default:j(()=>[ke(ve(u.row.correct),1)]),_:2},1032,["props"]),O(Qe,{key:"misdetected",props:u},{default:j(()=>[ke(ve(u.row.misdetected),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])])]),R("div",Hn,[O(Pt,{modelValue:q.value,"onUpdate:modelValue":c[7]||(c[7]=u=>q.value=u)},{default:j(()=>[O(Mt,null,{default:j(()=>[O(it,null,{default:j(()=>[$n]),_:1}),O(it,{class:"q-pt-none"},{default:j(()=>[R("div",null,[R("input",{type:"file",id:"imageFiles",multiple:"true",onChange:c[3]||(c[3]=u=>{fe(u)}),accept:".jpg,.jpeg,.png,.bmp"},null,32),Qn]),R("div",null,[R("input",{type:"file",id:"detectionResultFiles",multiple:"true",onChange:c[4]||(c[4]=u=>{me(u)}),accept:".json"},null,32),Un]),R("div",null,[R("input",{type:"file",id:"groundTruthFiles",multiple:"true",onChange:c[5]||(c[5]=u=>{Be(u)}),accept:".txt"},null,32),Wn]),R("div",null,[R("input",{type:"file",id:"zipFile",onChange:c[6]||(c[6]=u=>{Ie(u)}),accept:".zip"},null,32),Kn])]),_:1}),O(al,{align:"right"},{default:j(()=>[O(ze,{flat:"",color:"primary",label:"Add to project",onClick:Ne}),Je(O(ze,{flat:"",color:"primary",label:"Close"},null,512),[[ut]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:o.value,"onUpdate:modelValue":c[8]||(c[8]=u=>o.value=u)},{default:j(()=>[O(Mt,null,{default:j(()=>[O(it,null,{default:j(()=>[Jn]),_:1}),O(it,{class:"q-pt-none"},{default:j(()=>[R("div",null,[O(ze,{outline:"",color:"primary",label:"Download images",onClick:P})]),R("div",null,[O(ze,{outline:"",color:"primary",label:"Download images in a zip",onClick:L})]),R("div",null,[O(ze,{outline:"",color:"primary",label:"Download TextResults.zip",onClick:Z})])]),_:1}),O(al,{align:"right"},{default:j(()=>[Je(O(ze,{flat:"",color:"primary",label:"Close"},null,512),[[ut]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:y.value,"onUpdate:modelValue":c[9]||(c[9]=u=>y.value=u),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:j(()=>[O(Mt,{style:{width:"300px"}},{default:j(()=>[O(it,null,{default:j(()=>[Gn]),_:1}),O(it,{class:"q-pt-none"},{default:j(()=>[ke(" Please wait for a while. ")]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{fo as default};
