import{_ as k,m as j,r,u as F,b as O,s as h,O as I,A as s,C as T,ad as V,P as M,Q as q,x as A,R as S,a5 as Q,y as G,z as H}from"./index.e4c56f4b.js";import{b as J,x as R,D as K,i as W}from"./DynamsoftButton.3f171a36.js";const X=u=>(G("data-v-70f90106"),u=u(),H(),u),Y={class:"q-pa-md",style:{width:"100%"}},Z=X(()=>s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1)),$={class:"row",style:{"padding-bottom":"20px"}},ee=["value"],ae={style:{"padding-left":"10px"}},te={id:"results"},ne=j({__name:"LiveScanner",setup(u){const i=r(""),f=r([]),w=F(),l=r(""),d=r(!1),v=r(),E=r("");let p=!1,c,n,m;O(async()=>{E.value=w.currentRoute.value.params.name;const t=await J(w.currentRoute.value.params.name);f.value=t,i.value=t[0].displayName,D()});const b=async t=>{var a;let e=(a=g(t))==null?void 0:a.settings;if(e){if(i.value==="Dynamsoft"){let o=!1;for(let _=0;_<e.length;_++){const B=e[_];B.name==="template"&&B.value&&(o=!0)}o===!1&&e.push({name:"template",value:"speed"})}console.log(e),await c.setSupportedSettings(e)}},g=t=>{let e;t?e=t:e=i.value;for(const a of f.value)if(a.displayName===e)return a},N=async()=>{if(y(),n){n.isOpen()===!1?(l.value="Starting...",await n.open(!0),d.value=!0,l.value=""):(n.close(!0),d.value=!1);return}d.value=!1},U=async()=>{await x(i.value),C()},D=async()=>{var t;l.value="Initializing Camera...",R.defaultUIElementURL="https://cdn.jsdelivr.net/npm/dynamsoft-camera-enhancer@3.3.4/dist/dce.ui.html",n=await R.createInstance(),n.on("played",U),await n.setUIElement(R.defaultUIElementURL),(t=document.getElementById("enhancerUIContainer"))==null||t.appendChild(n.getUIElement()),document.getElementsByClassName("dce-btn-close")[0].remove(),l.value=""},C=async()=>{y(),m=setInterval(L,200)},y=()=>{clearInterval(m),p=!1},x=async t=>{const e=g(t);if(e){let a=!1;c?c.getEngine()!=e.engine&&(a=!0):a=!0,a&&(l.value="Initializing Barcode Reader...",c=await W.createInstance(e.engine),l.value=""),await b(t)}},L=async()=>{const t=g();if(n&&p===!1&&t){p=!0;const e=n.getFrame(),a=await c.detect(e);l.value=a.elapsedTime+"ms",c.getEngine()===t.engine&&z(a),p=!1}},z=t=>{if(t.results.length>0){let e="";for(let a=0;a<t.results.length;a++){const o=t.results[a];e=e+(a+1)+". "+o.barcodeFormat+": "+o.barcodeText,o.confidence&&(e=e+", confidence: "+o.confidence),e=e+`
`}v.value=e}},P=async t=>{console.log(t),m&&n.isOpen()&&(await x(t),y(),C()),v.value=""};return(t,e)=>(h(),I("div",Y,[Z,s("div",$,[T(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=a=>P(a)),e[1]||(e[1]=a=>i.value=a)],style:{"min-width":"200px"}},[(h(!0),I(M,null,q(f.value,a=>(h(),I("option",{value:a.displayName,key:a.displayName},S(a.displayName),9,ee))),128))],512),[[V,i.value]])]),s("div",null,[A(K,{label:d.value?"Stop Scanning":"Start Scanning",onClick:N},null,8,["label"]),s("span",ae,S(l.value),1)]),s("div",te,[s("pre",null,""+S(v.value)+`
      `,1)]),s("div",null,[s("div",{id:"enhancerUIContainer",style:{width:"100%",height:"500px"},class:Q(d.value?"":"hidden")},null,2)])]))}});var oe=k(ne,[["__scopeId","data-v-70f90106"]]);export{oe as default};
