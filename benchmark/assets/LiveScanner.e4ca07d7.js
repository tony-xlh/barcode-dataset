import{_ as k,s as j,r,u as F,d as T,v as h,P as S,C as s,E as V,ae as M,R as O,S as q,z as A,U as I,a6 as G,A as H,B as J}from"./index.42a38d1c.js";import{b as K,x as R,D as Q,i as W}from"./DynamsoftButton.3c1befe6.js";const X=u=>(H("data-v-70f90106"),u=u(),J(),u),Y={class:"q-pa-md",style:{width:"100%"}},Z=X(()=>s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1)),$={class:"row",style:{"padding-bottom":"20px"}},ee=["value"],ae={style:{"padding-left":"10px"}},te={id:"results"},ne=j({__name:"LiveScanner",setup(u){const i=r(""),f=r([]),w=F(),l=r(""),d=r(!1),v=r(),E=r("");let p=!1,c,n,m;T(async()=>{E.value=w.currentRoute.value.params.name;const t=await K(w.currentRoute.value.params.name);f.value=t,i.value=t[0].displayName,D()});const U=async t=>{var a;let e=(a=g(t))==null?void 0:a.settings;if(e){if(i.value==="Dynamsoft"){let o=!1;for(let y=0;y<e.length;y++){const x=e[y];x.name==="template"&&x.value&&(o=!0)}o===!1&&e.push({name:"template",value:"speed"})}console.log(e),await c.setSupportedSettings(e)}},g=t=>{let e;t?e=t:e=i.value;for(const a of f.value)if(a.displayName===e)return a},b=async()=>{if(_(),n){n.isOpen()===!1?(l.value="Starting...",await n.open(!0),d.value=!0,l.value=""):(n.close(!0),d.value=!1);return}d.value=!1},N=async()=>{await B(i.value),C()},D=async()=>{var t;l.value="Initializing Camera...",R.defaultUIElementURL="https://cdn.jsdelivr.net/npm/dynamsoft-camera-enhancer@3.3.4/dist/dce.ui.html",n=await R.createInstance(),n.on("played",N),await n.setUIElement(R.defaultUIElementURL),(t=document.getElementById("enhancerUIContainer"))==null||t.appendChild(n.getUIElement()),document.getElementsByClassName("dce-btn-close")[0].remove(),l.value=""},C=async()=>{_(),m=setInterval(L,200)},_=()=>{clearInterval(m),p=!1},B=async t=>{const e=g(t);if(e){let a=!1;c?c.getEngine()!=e.engine&&(a=!0):a=!0,a&&(l.value="Initializing Barcode Reader...",c=await W.createInstance(e.engine),l.value=""),await U(t)}},L=async()=>{const t=g();if(n&&p===!1&&t){p=!0;const e=n.getFrame(),a=await c.detect(e);l.value=a.elapsedTime+"ms",c.getEngine()===t.engine&&z(a),p=!1}},z=t=>{if(t.results.length>0){let e="";for(let a=0;a<t.results.length;a++){const o=t.results[a];e=e+(a+1)+". "+o.barcodeFormat+": "+o.barcodeText,o.confidence&&(e=e+", confidence: "+o.confidence),e=e+`
`}v.value=e}},P=async t=>{console.log(t),m&&n.isOpen()&&(await B(t),_(),C()),v.value=""};return(t,e)=>(h(),S("div",Y,[Z,s("div",$,[V(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=a=>P(a)),e[1]||(e[1]=a=>i.value=a)],style:{"min-width":"200px"}},[(h(!0),S(O,null,q(f.value,a=>(h(),S("option",{value:a.displayName,key:a.displayName},I(a.displayName),9,ee))),128))],512),[[M,i.value]])]),s("div",null,[A(Q,{label:d.value?"Stop Scanning":"Start Scanning",onClick:b},null,8,["label"]),s("span",ae,I(l.value),1)]),s("div",te,[s("pre",null,""+I(v.value)+`
      `,1)]),s("div",null,[s("div",{id:"enhancerUIContainer",style:{width:"100%",height:"500px"},class:G(d.value?"":"hidden")},null,2)])]))}});var oe=k(ne,[["__scopeId","data-v-70f90106"]]);export{oe as default};
