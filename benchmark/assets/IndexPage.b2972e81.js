var Ae=Object.defineProperty;var De=(e,p,S)=>p in e?Ae(e,p,{enumerable:!0,configurable:!0,writable:!0,value:S}):e[p]=S;var ue=(e,p,S)=>(De(e,typeof p!="symbol"?p+"":p,S),S);import{Q as je}from"./QPage.d6723a47.js";import{a as Oe,u as Le,b as Be,c as ze,d as Ue,e as qe,f as Qe,g as Ze,h as He,Q as ge,i as ve,j as se,k as he,C as X}from"./ClosePopup.f5dbd6f3.js";import{u as Ke,a as $e,b as Je,c as We,f as we,d as Ye,Q as Ge,e as Xe,J as et}from"./jszip.min.7058cc34.js";import{r as O,w as H,b as ne,M as tt,c as L,a as fe,o as Ie,h as le,N as at,g as Fe,G as ke,F as ye,E as xe,T as nt,J as lt,_ as ot,q as st,u as it,t as ee,O as ie,y as C,x as z,B as I,P as pe,Q as rt,R as oe,I as te,v as be,S as ae,U as ce,z as ut,A as ct}from"./index.7a0cf8c5.js";import{u as dt,a as ft}from"./use-form.a91a71b5.js";import{c as Ee,h as mt}from"./QIcon.f5f0471c.js";import{Q as W}from"./QBtn.b1ca35f6.js";import{u as gt,v as Se,a as vt,b as ht,c as wt,r as Me,s as kt,d as Ce,p as _e,e as yt}from"./position-engine.aa14dc1a.js";import{g as xt}from"./scroll.fe70ef14.js";import{l as D,D as de,r as pt,B as bt,g as St}from"./DynamsoftButton.7a9edb77.js";import"./use-dark.ecbc65be.js";const Re={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},re={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ve=Object.keys(re);Ve.forEach(e=>{re[e].regex=new RegExp(re[e].pattern)});const Mt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ve.join("")+"])|(.)","g"),Pe=/[.*+?^${}()|[\]\\]/g,T=String.fromCharCode(1),Ct={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function _t(e,p,S,v){let h,y,A,_,F,w;const R=O(null),u=O(j());function $(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}H(()=>e.type+e.autogrow,B),H(()=>e.mask,o=>{if(o!==void 0)Q(u.value,!0);else{const l=N(u.value);B(),e.modelValue!==l&&p("update:modelValue",l)}}),H(()=>e.fillMask+e.reverseFillMask,()=>{R.value===!0&&Q(u.value,!0)}),H(()=>e.unmaskedValue,()=>{R.value===!0&&Q(u.value)});function j(){if(B(),R.value===!0){const o=V(N(e.modelValue));return e.fillMask!==!1?K(o):o}return e.modelValue}function q(o){if(o<h.length)return h.slice(-o);let l="",r=h;const s=r.indexOf(T);if(s>-1){for(let g=o-r.length;g>0;g--)l+=T;r=r.slice(0,s)+l+r.slice(s)}return r}function B(){if(R.value=e.mask!==void 0&&e.mask.length>0&&$(),R.value===!1){_=void 0,h="",y="";return}const o=Re[e.mask]===void 0?e.mask:Re[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",r=l.replace(Pe,"\\$&"),s=[],g=[],f=[];let n=e.reverseFillMask===!0,a="",i="";o.replace(Mt,(k,t,c,P,b)=>{if(P!==void 0){const M=re[P];f.push(M),i=M.negate,n===!0&&(g.push("(?:"+i+"+)?("+M.pattern+"+)?(?:"+i+"+)?("+M.pattern+"+)?"),n=!1),g.push("(?:"+i+"+)?("+M.pattern+")?")}else if(c!==void 0)a="\\"+(c==="\\"?"":c),f.push(c),s.push("([^"+a+"]+)?"+a+"?");else{const M=t!==void 0?t:b;a=M==="\\"?"\\\\\\\\":M.replace(Pe,"\\\\$&"),f.push(M),s.push("([^"+a+"]+)?"+a+"?")}});const m=new RegExp("^"+s.join("")+"("+(a===""?".":"[^"+a+"]")+"+)?"+(a===""?"":"["+a+"]*")+"$"),x=g.length-1,d=g.map((k,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+r+"*"+k):t===x?new RegExp("^"+k+"("+(i===""?".":i)+"+)?"+(e.reverseFillMask===!0?"$":r+"*")):new RegExp("^"+k));A=f,_=k=>{const t=m.exec(e.reverseFillMask===!0?k:k.slice(0,f.length+1));t!==null&&(k=t.slice(1).join(""));const c=[],P=d.length;for(let b=0,M=k;b<P;b++){const Z=d[b].exec(M);if(Z===null)break;M=M.slice(Z.shift().length),c.push(...Z)}return c.length>0?c.join(""):k},h=f.map(k=>typeof k=="string"?k:T).join(""),y=h.split(T).join(l)}function Q(o,l,r){const s=v.value,g=s.selectionEnd,f=s.value.length-g,n=N(o);l===!0&&B();const a=V(n),i=e.fillMask!==!1?K(a):a,m=u.value!==i;s.value!==i&&(s.value=i),m===!0&&(u.value=i),document.activeElement===s&&ne(()=>{if(i===y){const d=e.reverseFillMask===!0?y.length:0;s.setSelectionRange(d,d,"forward");return}if(r==="insertFromPaste"&&e.reverseFillMask!==!0){const d=s.selectionEnd;let k=g-1;for(let t=F;t<=k&&t<d;t++)h[t]!==T&&k++;E.right(s,k);return}if(["deleteContentBackward","deleteContentForward"].indexOf(r)>-1){const d=e.reverseFillMask===!0?g===0?i.length>a.length?1:0:Math.max(0,i.length-(i===y?0:Math.min(a.length,f)+1))+1:g;s.setSelectionRange(d,d,"forward");return}if(e.reverseFillMask===!0)if(m===!0){const d=Math.max(0,i.length-(i===y?0:Math.min(a.length,f+1)));d===1&&g===1?s.setSelectionRange(d,d,"forward"):E.rightReverse(s,d)}else{const d=i.length-f;s.setSelectionRange(d,d,"backward")}else if(m===!0){const d=Math.max(0,h.indexOf(T),Math.min(a.length,g)-1);E.right(s,d)}else{const d=g-1;E.right(s,d)}});const x=e.unmaskedValue===!0?N(i):i;String(e.modelValue)!==x&&S(x,!0)}function Y(o,l,r){const s=V(N(o.value));l=Math.max(0,h.indexOf(T),Math.min(s.length,l)),F=l,o.setSelectionRange(l,r,"forward")}const E={left(o,l){const r=h.slice(l-1).indexOf(T)===-1;let s=Math.max(0,l-1);for(;s>=0;s--)if(h[s]===T){l=s,r===!0&&l++;break}if(s<0&&h[l]!==void 0&&h[l]!==T)return E.right(o,0);l>=0&&o.setSelectionRange(l,l,"backward")},right(o,l){const r=o.value.length;let s=Math.min(r,l+1);for(;s<=r;s++)if(h[s]===T){l=s;break}else h[s-1]===T&&(l=s);if(s>r&&h[l-1]!==void 0&&h[l-1]!==T)return E.left(o,r);o.setSelectionRange(l,l,"forward")},leftReverse(o,l){const r=q(o.value.length);let s=Math.max(0,l-1);for(;s>=0;s--)if(r[s-1]===T){l=s;break}else if(r[s]===T&&(l=s,s===0))break;if(s<0&&r[l]!==void 0&&r[l]!==T)return E.rightReverse(o,0);l>=0&&o.setSelectionRange(l,l,"backward")},rightReverse(o,l){const r=o.value.length,s=q(r),g=s.slice(0,l+1).indexOf(T)===-1;let f=Math.min(r,l+1);for(;f<=r;f++)if(s[f-1]===T){l=f,l>0&&g===!0&&l--;break}if(f>r&&s[l-1]!==void 0&&s[l-1]!==T)return E.leftReverse(o,r);o.setSelectionRange(l,l,"forward")}};function G(o){p("click",o),w=void 0}function J(o){if(p("keydown",o),tt(o)===!0)return;const l=v.value,r=l.selectionStart,s=l.selectionEnd;if(o.shiftKey||(w=void 0),o.keyCode===37||o.keyCode===39){o.shiftKey&&w===void 0&&(w=l.selectionDirection==="forward"?r:s);const g=E[(o.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(o.preventDefault(),g(l,w===r?s:r),o.shiftKey){const f=l.selectionStart;l.setSelectionRange(Math.min(w,f),Math.max(w,f),"forward")}}else o.keyCode===8&&e.reverseFillMask!==!0&&r===s?(E.left(l,r),l.setSelectionRange(l.selectionStart,s,"backward")):o.keyCode===46&&e.reverseFillMask===!0&&r===s&&(E.rightReverse(l,s),l.setSelectionRange(r,l.selectionEnd,"forward"))}function V(o){if(o==null||o==="")return"";if(e.reverseFillMask===!0)return U(o);const l=A;let r=0,s="";for(let g=0;g<l.length;g++){const f=o[r],n=l[g];if(typeof n=="string")s+=n,f===n&&r++;else if(f!==void 0&&n.regex.test(f))s+=n.transform!==void 0?n.transform(f):f,r++;else return s}return s}function U(o){const l=A,r=h.indexOf(T);let s=o.length-1,g="";for(let f=l.length-1;f>=0&&s>-1;f--){const n=l[f];let a=o[s];if(typeof n=="string")g=n+g,a===n&&s--;else if(a!==void 0&&n.regex.test(a))do g=(n.transform!==void 0?n.transform(a):a)+g,s--,a=o[s];while(r===f&&a!==void 0&&n.regex.test(a));else return g}return g}function N(o){return typeof o!="string"||_===void 0?typeof o=="number"?_(""+o):o:_(o)}function K(o){return y.length-o.length<=0?o:e.reverseFillMask===!0&&o.length>0?y.slice(0,-o.length)+o:o+y.slice(o.length)}return{innerValue:u,hasMask:R,moveCursorForPaste:Y,updateMaskValue:Q,onMaskedKeydown:J,onMaskedClick:G}}function Rt(e,p){function S(){const v=e.modelValue;try{const h="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(v)===v&&("length"in v?Array.from(v):[v]).forEach(y=>{h.items.add(y)}),{files:h.files}}catch{return{files:void 0}}}return p===!0?L(()=>{if(e.type==="file")return S()}):L(S)}var Pt=Ee({name:"QInput",inheritAttrs:!1,props:{...Ke,...Ct,...dt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...$e,"paste","change","keydown","click","animationend"],setup(e,{emit:p,attrs:S}){const{proxy:v}=Fe(),{$q:h}=v,y={};let A=NaN,_,F,w=null,R;const u=O(null),$=ft(e),{innerValue:j,hasMask:q,moveCursorForPaste:B,updateMaskValue:Q,onMaskedKeydown:Y,onMaskedClick:E}=_t(e,p,a,u),G=Rt(e,!0),J=L(()=>we(j.value)),V=Ye(f),U=Je(),N=L(()=>e.type==="textarea"||e.autogrow===!0),K=L(()=>N.value===!0||["text","search","url","tel","password"].includes(e.type)),o=L(()=>{const t={...U.splitAttrs.listeners.value,onInput:f,onPaste:g,onChange:m,onBlur:x,onFocus:ke};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=V,q.value===!0&&(t.onKeydown=Y,t.onClick=E),e.autogrow===!0&&(t.onAnimationend=n),t}),l=L(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:$.value,...U.splitAttrs.attributes.value,id:U.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return N.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});H(()=>e.type,()=>{u.value&&(u.value.value=e.modelValue)}),H(()=>e.modelValue,t=>{if(q.value===!0){if(F===!0&&(F=!1,String(t)===A))return;Q(t)}else j.value!==t&&(j.value=t,e.type==="number"&&y.hasOwnProperty("value")===!0&&(_===!0?_=!1:delete y.value));e.autogrow===!0&&ne(i)}),H(()=>e.autogrow,t=>{t===!0?ne(i):u.value!==null&&S.rows>0&&(u.value.style.height="auto")}),H(()=>e.dense,()=>{e.autogrow===!0&&ne(i)});function r(){Oe(()=>{const t=document.activeElement;u.value!==null&&u.value!==t&&(t===null||t.id!==U.targetUid.value)&&u.value.focus({preventScroll:!0})})}function s(){u.value!==null&&u.value.select()}function g(t){if(q.value===!0&&e.reverseFillMask!==!0){const c=t.target;B(c,c.selectionStart,c.selectionEnd)}p("paste",t)}function f(t){if(!t||!t.target)return;if(e.type==="file"){p("update:modelValue",t.target.files);return}const c=t.target.value;if(t.target.qComposing===!0){y.value=c;return}if(q.value===!0)Q(c,!1,t.inputType);else if(a(c),K.value===!0&&t.target===document.activeElement){const{selectionStart:P,selectionEnd:b}=t.target;P!==void 0&&b!==void 0&&ne(()=>{t.target===document.activeElement&&c.indexOf(t.target.value)===0&&t.target.setSelectionRange(P,b)})}e.autogrow===!0&&i()}function n(t){p("animationend",t),i()}function a(t,c){R=()=>{w=null,e.type!=="number"&&y.hasOwnProperty("value")===!0&&delete y.value,e.modelValue!==t&&A!==t&&(A=t,c===!0&&(F=!0),p("update:modelValue",t),ne(()=>{A===t&&(A=NaN)})),R=void 0},e.type==="number"&&(_=!0,y.value=t),e.debounce!==void 0?(w!==null&&clearTimeout(w),y.value=t,w=setTimeout(R,e.debounce)):R()}function i(){requestAnimationFrame(()=>{const t=u.value;if(t!==null){const c=t.parentNode.style,{scrollTop:P}=t,{overflowY:b,maxHeight:M}=h.platform.is.firefox===!0?{}:window.getComputedStyle(t),Z=b!==void 0&&b!=="scroll";Z===!0&&(t.style.overflowY="hidden"),c.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",Z===!0&&(t.style.overflowY=parseInt(M,10)<t.scrollHeight?"auto":"hidden"),c.marginBottom="",t.scrollTop=P}})}function m(t){V(t),w!==null&&(clearTimeout(w),w=null),R!==void 0&&R(),p("change",t.target.value)}function x(t){t!==void 0&&ke(t),w!==null&&(clearTimeout(w),w=null),R!==void 0&&R(),_=!1,F=!1,delete y.value,e.type!=="file"&&setTimeout(()=>{u.value!==null&&(u.value.value=j.value!==void 0?j.value:"")})}function d(){return y.hasOwnProperty("value")===!0?y.value:j.value!==void 0?j.value:""}fe(()=>{x()}),Ie(()=>{e.autogrow===!0&&i()}),Object.assign(U,{innerValue:j,fieldClass:L(()=>`q-${N.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:L(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:u,emitValue:a,hasValue:J,floatingLabel:L(()=>J.value===!0&&(e.type!=="number"||isNaN(j.value)===!1)||we(e.displayValue)),getControl:()=>le(N.value===!0?"textarea":"input",{ref:u,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...l.value,...o.value,...e.type!=="file"?{value:d()}:G.value}),getShadowControl:()=>le("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(N.value===!0?"":" text-no-wrap")},[le("span",{class:"invisible"},d()),le("span",e.shadowText)])});const k=We(U);return Object.assign(v,{focus:r,select:s,getNativeElement:()=>u.value}),at(v,"nativeEl",()=>u.value),k}}),Tt=Ee({name:"QTooltip",inheritAttrs:!1,props:{...gt,...Le,...Be,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Se},self:{type:String,default:"top middle",validator:Se},offset:{type:Array,default:()=>[14,14],validator:vt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ze],setup(e,{slots:p,emit:S,attrs:v}){let h,y;const A=Fe(),{proxy:{$q:_}}=A,F=O(null),w=O(!1),R=L(()=>_e(e.anchor,_.lang.rtl)),u=L(()=>_e(e.self,_.lang.rtl)),$=L(()=>e.persistent!==!0),{registerTick:j,removeTick:q}=Ue(),{registerTimeout:B}=qe(),{transitionProps:Q,transitionStyle:Y}=Qe(e),{localScrollTarget:E,changeScrollEvent:G,unconfigureScrollTarget:J}=ht(e,d),{anchorEl:V,canShow:U,anchorEvents:N}=wt({showing:w,configureAnchorEl:x}),{show:K,hide:o}=Ze({showing:w,canShow:U,handleShow:g,handleHide:f,hideOnRouteChange:$,processOnMount:!0});Object.assign(N,{delayShow:i,delayHide:m});const{showPortal:l,hidePortal:r,renderPortal:s}=He(A,F,t,"tooltip");if(_.platform.is.mobile===!0){const c={anchorEl:V,innerRef:F,onClickOutside(b){return o(b),b.target.classList.contains("q-dialog__backdrop")&&lt(b),!0}},P=L(()=>e.modelValue===null&&e.persistent!==!0&&w.value===!0);H(P,b=>{(b===!0?yt:Me)(c)}),fe(()=>{Me(c)})}function g(c){l(),j(()=>{y=new MutationObserver(()=>a()),y.observe(F.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),a(),d()}),h===void 0&&(h=H(()=>_.screen.width+"|"+_.screen.height+"|"+e.self+"|"+e.anchor+"|"+_.lang.rtl,a)),B(()=>{l(!0),S("show",c)},e.transitionDuration)}function f(c){q(),r(),n(),B(()=>{r(!0),S("hide",c)},e.transitionDuration)}function n(){y!==void 0&&(y.disconnect(),y=void 0),h!==void 0&&(h(),h=void 0),J(),ye(N,"tooltipTemp")}function a(){const c=F.value;V.value===null||!c||kt({el:c,offset:e.offset,anchorEl:V.value,anchorOrigin:R.value,selfOrigin:u.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function i(c){if(_.platform.is.mobile===!0){Ce(),document.body.classList.add("non-selectable");const P=V.value,b=["touchmove","touchcancel","touchend","click"].map(M=>[P,M,"delayHide","passiveCapture"]);xe(N,"tooltipTemp",b)}B(()=>{K(c)},e.delay)}function m(c){_.platform.is.mobile===!0&&(ye(N,"tooltipTemp"),Ce(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),B(()=>{o(c)},e.hideDelay)}function x(){if(e.noParentEvent===!0||V.value===null)return;const c=_.platform.is.mobile===!0?[[V.value,"touchstart","delayShow","passive"]]:[[V.value,"mouseenter","delayShow","passive"],[V.value,"mouseleave","delayHide","passive"]];xe(N,"anchor",c)}function d(){if(V.value!==null||e.scrollTarget!==void 0){E.value=xt(V.value,e.scrollTarget);const c=e.noParentEvent===!0?a:o;G(E.value,c)}}function k(){return w.value===!0?le("div",{...v,ref:F,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",v.class],style:[v.style,Y.value],role:"tooltip"},mt(p.default)):null}function t(){return le(nt,Q.value,k)}return fe(n),Object.assign(A.proxy,{updatePosition:a}),s}});class Te{constructor(p,S){ue(this,"info");ue(this,"isRemote",!1);this.info=p,S&&(this.isRemote=S)}}const Ne=e=>(ut("data-v-57757c91"),e=e(),ct(),e),It={class:"full"},Ft={class:"container"},Et={class:"main"},Vt=Ne(()=>I("h2",null,"Barcode Reading Benchmark",-1)),Nt={class:"project-name"},At={class:"flex-container"},Dt={class:"buttons"},jt={class:"dialogs"},Ot=Ne(()=>I("div",{class:"text-h6"},"New project",-1)),Lt={class:"text-h6"},Bt={key:0},zt={href:"javascript:void();"},Ut={class:"absolute-full flex flex-center"},qt={style:{height:"25px"}},Qt=st({__name:"IndexPage",setup(e){const p=O(!1),S=O(""),v=O([]),h=O(!1),y=it(),A=O(0),_=O(""),F=O(!1),w=O(""),R=O(""),u=O(null);let $=-1;Ie(async()=>{const n=await D.getItem("projects");n&&(v.value=JSON.parse(n)),j()});const j=async()=>{const a=await(await fetch("./dataset/projects.json")).text();if(a)try{const i=JSON.parse(a);console.log(i);const m=v.value;for(let x=0;x<i.length;x++){const d=i[x];let k=!1;for(let t=0;t<v.value.length;t++){const c=v.value[t];if(c.info.name===d){k=!0,c.isRemote=!0;break}}if(k===!1){let t=new Te({name:d,images:[],creationTimestamp:0},!0);m.push(t)}}v.value=m,console.log(m)}catch(i){console.log(i)}},q=n=>new Date(n).toLocaleString(),B=()=>{S.value="",p.value=!0},Q=()=>{if(Y(S.value))alert("Project name duplicated. Please use another name.");else{const n=new Te({name:S.value,creationTimestamp:Date.now(),images:[]});v.value.push(n),E()}},Y=n=>{for(let a=0;a<v.value.length;a++)if(v.value[a].info.name===n)return!0;return!1},E=async()=>{let n=[];v.value.forEach(a=>{n.push(a)}),await D.setItem("projects",JSON.stringify(n))},G=async n=>{if(R.value!=""){alert("Please wait for the current operation.");return}let a=v.value[n];if(a.isRemote){const i=await K(a);i&&(a=i)}await s(a),y.push("/project/"+encodeURIComponent(v.value[n].info.name))},J=async()=>{let n=[];for(let a=0;a<v.value.length;a++){const i=v.value[a];a!=$?n.push(i):(await pt(i),i.isRemote&&(i.info.images=[],n.push(i)))}v.value=n,E()},V=()=>{if(u.value){const n="/project/"+encodeURIComponent(u.value.info.name)+"/settings",a=y.resolve(n);window.open(a.href,"_blank")}},U=async()=>{F.value===!0?u.value&&(await f(u.value),alert("Imported")):alert("Please download the text results first.")},N=async n=>{$=n;let a=v.value[n];if(u.value=a,console.log("selected:"),console.log(u),a.isRemote){const i=await K(a);i&&(a=i,u.value=a),await D.getItem(a.info.name+":results.zip")?F.value=!0:F.value=!1;let x=0;for(let d=0;d<a.info.images.length;d++){const k=a.info.images[d];await D.getItem(a.info.name+":image:"+k)&&(x=x+1)}r(x-1)}console.log(a),console.log(v),h.value=!0},K=async n=>{if(n.info.images.length===0){const a=n.info.name,m=await(await fetch("./dataset/"+a+"/project_manifest.json")).text();return n=JSON.parse(m),n.isRemote=!0,n}},o=async()=>{var i,m;if(w.value==="Downloading..."){alert("Already downloading.");return}w.value="Downloading...";const n=await fetch("./dataset/"+((i=u.value)==null?void 0:i.info.name)+"/results.zip");w.value="";const a=await n.blob();a.size>0&&(await D.setItem(((m=u.value)==null?void 0:m.info.name)+":results.zip",a),F.value=!0)},l=async()=>{if(u.value){if(w.value==="Downloading..."){alert("Already downloading.");return}w.value="Downloading...";for(let n=0;n<u.value.info.images.length;n++){if(h.value===!1){w.value="";return}const a=u.value.info.images[n];if(!await D.getItem(u.value.info.name+":image:"+a)){const x=await(await fetch("./dataset/"+u.value.info.name+"/"+a)).blob();if(x.size>0){const d=await bt(x);await D.setItem(u.value.info.name+":image:"+a,d)}}r(n)}w.value=""}},r=n=>{u.value&&(A.value=parseFloat(((n+1)/u.value.info.images.length).toFixed(2)),_.value=n+1+"/"+u.value.info.images.length)},s=async n=>{if(n.isRemote){if(!await D.getItem(n.info.name+":results.zip")){R.value="Downloading remote project text result files...";const x=await(await fetch("./dataset/"+n.info.name+"/results.zip")).blob();x.size>0&&await D.setItem(n.info.name+":results.zip",x)}if(!await g(n)){R.value="Importing remote project...",await f(n);let m=[];v.value.forEach(x=>{x.info.name===n.info.name?m.push(n):m.push(x)}),await D.setItem("projects",JSON.stringify(m))}R.value=""}},g=async n=>{const a=n.info.name;return!!await D.getItem(a+":detectionResultFileNamesList")},f=async n=>{var i,m,x,d;const a=await D.getItem(n.info.name+":results.zip");if(a){const k=new et;await k.loadAsync(a);const t=await((i=k.file("detection_result_filenames.json"))==null?void 0:i.async("string"));if(t){const P=JSON.parse(t);for(let b=0;b<P.length;b++){const M=P[b],Z=await((m=k.file(M))==null?void 0:m.async("string"));Z&&await D.setItem(n.info.name+":detectionResult:"+M,Z)}await D.setItem(n.info.name+":detectionResultFileNamesList",P)}for(let P=0;P<n.info.images.length;P++){const b=n.info.images[P],M=St(b)+".txt",Z=n.info.name+":groundTruth:"+M,me=await((x=k.file(M))==null?void 0:x.async("string"));me&&await D.setItem(Z,me)}const c=await((d=k.file("settings.json"))==null?void 0:d.async("string"));return c&&await D.setItem(n.info.name+":settings",JSON.parse(c)),!0}return!1};return(n,a)=>(ee(),ie(pe,null,[C(je,null,{default:z(()=>[I("div",It,[I("div",Ft,[I("div",Et,[Vt,(ee(!0),ie(pe,null,rt(v.value,(i,m)=>(ee(),ie("div",{class:"project-list-item",key:i.info.name},[I("div",Nt,oe(i.info.name),1),I("div",At,oe(i.isRemote&&i.info.images.length===0?"remote project":q(i.info.creationTimestamp)),1),I("div",Dt,[C(de,{label:"Open",onClick:x=>G(m)},null,8,["onClick"]),C(de,{style:{"margin-left":"5px",color:"black","border-color":"black","background-color":"#fff"},label:"Manage",onClick:x=>N(m)},null,8,["onClick"])])]))),128))]),I("div",null,[I("div",null,[C(de,{outline:"",label:"New Project",onClick:B})]),I("div",null,oe(R.value),1)])])])]),_:1}),I("div",jt,[C(ge,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=i=>p.value=i)},{default:z(()=>[C(ve,null,{default:z(()=>[C(se,null,{default:z(()=>[Ot]),_:1}),C(se,null,{default:z(()=>[C(Pt,{outlined:"",modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=i=>S.value=i),label:"Project Name"},null,8,["modelValue"])]),_:1}),C(he,{align:"right"},{default:z(()=>[te(C(W,{flat:"",label:"Cancel",color:"primary"},null,512),[[X]]),te(C(W,{flat:"",label:"Okay",color:"primary",onClick:Q},null,512),[[X]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),C(ge,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=i=>h.value=i)},{default:z(()=>[C(ve,{style:{"min-width":"300px"}},{default:z(()=>{var i;return[C(se,null,{default:z(()=>{var m;return[I("div",Lt,"Project: "+oe((m=u.value)==null?void 0:m.info.name),1)]}),_:1}),(i=u.value)!=null&&i.isRemote?(ee(),be(se,{key:0},{default:z(()=>[I("div",null,[ae(" Text results"),F.value?(ee(),ie("span",Bt," (downloaded)")):ce("",!0),ae(": "),I("div",null,[C(W,{outline:"",color:"primary",label:"Download",onClick:o})])]),I("div",null,[ae(" Images "),I("a",zt,[ae(" (help) "),C(Tt,{style:{"font-size":"14px"}},{default:z(()=>[ae(" required if you need to checkout the images or rerun the decoding ")]),_:1})]),ae(": "),C(Ge,{size:"25px",value:A.value,color:"blue"},{default:z(()=>[I("div",Ut,[C(Xe,{color:"white","text-color":"black",label:_.value},null,8,["label"])])]),_:1},8,["value"]),C(W,{outline:"",color:"primary",label:"Download",onClick:l})]),I("div",qt,[I("span",null,oe(w.value),1)])]),_:1})):ce("",!0),C(he,{align:"right"},{default:z(()=>{var m;return[te(C(W,{flat:"",color:"primary",label:"Settings",onClick:V},null,512),[[X]]),(m=u.value)!=null&&m.isRemote?te((ee(),be(W,{key:0,flat:"",color:"primary",label:"Import results",onClick:U},null,512)),[[X]]):ce("",!0),te(C(W,{flat:"",color:"primary",label:"Delete",onClick:J},null,512),[[X]]),te(C(W,{flat:"",color:"primary",label:"Close"},null,512),[[X]])]}),_:1})]}),_:1})]),_:1},8,["modelValue"])])],64))}});var na=ot(Qt,[["__scopeId","data-v-57757c91"]]);export{na as default};
