import{c as E,h as F,i as re,t as U,l as ce,Q as M,w as de}from"./QBtn.cbdbc53d.js";import{c as i,h as d,r as y,w as C,I as fe,T as ve,o as ge,g as J,J as he,b as me,H as be}from"./index.0dc541ea.js";import{b as we,v as $,c as Be,d as Se,e as qe,r as L,s as ye,p as z,g as Ce,h as ke}from"./position-engine.76c29eee.js";import{u as Pe,k as xe,d as N,e as Oe,l as Te,f as Ae,g as De,h as He,i as Me,j as Ee,m as Fe,n as Re,o as G,q as Qe,a as _e,s as je}from"./ClosePopup.a7b6b062.js";import{g as Ie}from"./scroll.801f8825.js";var Ve=E({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const o=i(()=>{const u=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${u.length>0?" "+u:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>d("div",{class:o.value},F(s.default))}}),Ke=E({name:"QMenu",inheritAttrs:!1,props:{...we,...Pe,...xe,...N,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:$},self:{type:String,validator:$},offset:{type:Array,validator:Be},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Oe,"click","escapeKey"],setup(e,{slots:s,emit:o,attrs:u}){let a=null,l,f,g;const B=J(),{proxy:h}=B,{$q:r}=h,c=y(null),v=y(!1),k=i(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),P=Te(e,r),{registerTick:x,removeTick:O}=Ae(),{registerTimeout:S}=De(),{transitionProps:q,transitionStyle:b}=He(e),{localScrollTarget:n,changeScrollEvent:X,unconfigureScrollTarget:Y}=Se(e,K),{anchorEl:m,canShow:Z}=qe({showing:v}),{hide:R}=Me({showing:v,canShow:Z,handleShow:oe,handleHide:ae,hideOnRouteChange:k,processOnMount:!0}),{showPortal:Q,hidePortal:_,renderPortal:p}=Ee(B,c,ue,"menu"),T={anchorEl:m,innerRef:c,onClickOutside(t){if(e.persistent!==!0&&v.value===!0)return R(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&he(t),!0}},j=i(()=>z(e.anchor||(e.cover===!0?"center middle":"bottom start"),r.lang.rtl)),ee=i(()=>e.cover===!0?j.value:z(e.self||"top start",r.lang.rtl)),te=i(()=>(e.square===!0?" q-menu--square":"")+(P.value===!0?" q-menu--dark q-dark":"")),ne=i(()=>e.autoClose===!0?{onClick:le}:{}),I=i(()=>v.value===!0&&e.persistent!==!0);C(I,t=>{t===!0?(Qe(D),Ce(T)):(G(D),L(T))});function A(){_e(()=>{let t=c.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function oe(t){if(a=e.noRefocus===!1?document.activeElement:null,Fe(W),Q(),K(),l=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const H=fe(t);if(H.left!==void 0){const{top:se,left:ie}=m.value.getBoundingClientRect();l={left:H.left-ie,top:H.top-se}}}f===void 0&&(f=C(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,w)),e.noFocus!==!0&&document.activeElement.blur(),x(()=>{w(),e.noFocus!==!0&&A()}),S(()=>{r.platform.is.ios===!0&&(g=e.autoClose,c.value.click()),w(),Q(!0),o("show",t)},e.transitionDuration)}function ae(t){O(),_(),V(!0),a!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),S(()=>{_(!0),o("hide",t)},e.transitionDuration)}function V(t){l=void 0,f!==void 0&&(f(),f=void 0),(t===!0||v.value===!0)&&(Re(W),Y(),L(T),G(D)),t!==!0&&(a=null)}function K(){(m.value!==null||e.scrollTarget!==void 0)&&(n.value=Ie(m.value,e.scrollTarget),X(n.value,w))}function le(t){g!==!0?(je(h,t),o("click",t)):g=!1}function W(t){I.value===!0&&e.noFocus!==!0&&re(c.value,t.target)!==!0&&A()}function D(t){o("escapeKey"),R(t)}function w(){const t=c.value;t===null||m.value===null||ye({el:t,offset:e.offset,anchorEl:m.value,anchorOrigin:j.value,selfOrigin:ee.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ue(){return d(ve,q.value,()=>v.value===!0?d("div",{role:"menu",...u,ref:c,tabindex:-1,class:["q-menu q-position-engine scroll"+te.value,u.class],style:[u.style,b.value],...ne.value},F(s.default)):null)}return ge(V),Object.assign(h,{focus:A,updatePosition:w}),p}});const We=Object.keys(U),$e=e=>We.reduce((s,o)=>{const u=e[o];return u!==void 0&&(s[o]=u),s},{});var Ne=E({name:"QBtnDropdown",props:{...U,...N,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:s,emit:o}){const{proxy:u}=J(),a=y(e.modelValue),l=y(null),f=ke(),g=i(()=>{const n={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":f,"aria-label":e.toggleAriaLabel||u.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),B=i(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),h=i(()=>de(e)),r=i(()=>$e(e));C(()=>e.modelValue,n=>{l.value!==null&&l.value[n?"show":"hide"]()}),C(()=>e.split,b);function c(n){a.value=!0,o("beforeShow",n)}function v(n){o("show",n),o("update:modelValue",!0)}function k(n){a.value=!1,o("beforeHide",n)}function P(n){o("hide",n),o("update:modelValue",!1)}function x(n){o("click",n)}function O(n){be(n),b(),o("click",n)}function S(n){l.value!==null&&l.value.toggle(n)}function q(n){l.value!==null&&l.value.show(n)}function b(n){l.value!==null&&l.value.hide(n)}return Object.assign(u,{show:q,hide:b,toggle:S}),me(()=>{e.modelValue===!0&&q()}),()=>{const n=[d(ce,{class:B.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&n.push(d(Ke,{ref:l,id:f,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:c,onShow:v,onBeforeHide:k,onHide:P},s.default)),e.split===!1?d(M,{class:"q-btn-dropdown q-btn-dropdown--simple",...r.value,...g.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:x},{default:()=>F(s.label,[]).concat(n),loading:s.loading}):d(Ve,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...h.value,glossy:e.glossy,stretch:e.stretch},()=>[d(M,{class:"q-btn-dropdown--current",...r.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:O},{default:s.label,loading:s.loading}),d(M,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...g.value,...h.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>n)])}}});export{Ke as Q,Ne as a};
