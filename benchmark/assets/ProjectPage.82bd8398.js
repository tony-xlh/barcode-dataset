import{e as fl,f as vl,c as rt,R as Ll,a as zl,Q as ze}from"./QBtn.59d7652d.js";import{c as De,i as ml,h as _t,a as jl,b as gl,j as Nl}from"./dom.39abbeda.js";import{b as Ml,n as Yt}from"./format.a33550d6.js";import{c as g,h as d,g as Ue,f as El,r as $,w as we,a3 as Dl,a7 as Ut,Q as hl,a5 as bl,o as Ft,n as Le,d as Wt,j as el,U as Ze,a4 as Hl,a8 as $l,Z as zt,a9 as vt,W as Ql,I as ot,G as Ul,P as tl,aa as Ht,ab as ll,ac as Wl,ad as Kl,H as mt,s as Jl,u as Gl,v as $e,x as gt,y as N,A as R,N as ve,z as O,O as ke,E as Je,ae as Zl,J as jt,M as Xl,L as Yl,K as ea}from"./index.c9d13e01.js";import{Q as Vt,u as ta}from"./use-meta.eb4133b6.js";import{u as Kt,a as Sl,c as yl,b as wl,f as al,d as la,Q as _l,t as aa,l as na,e as oa,J as Nt}from"./projectUtils.0a904e34.js";import{Q as Cl,a as ia,b as St,c as yt,d as wt}from"./QMenu.fbc5a94f.js";import{Q as ua}from"./QBtnDropdown.6c4b0624.js";import{Q as ra}from"./QSeparator.2f04d1e9.js";import{Q as sa}from"./QMarkupTable.b3a6b8a9.js";import{r as $t}from"./rtl.b51694b1.js";import{g as ca}from"./scroll.7c67c206.js";import{y as pl,z as kl,u as da,a as fa,Q as Pt,c as Mt,d as it,C as ut}from"./ClosePopup.3e6b497e.js";import{Q as nl}from"./QCardActions.8083bab6.js";import{Q as va}from"./QPage.c667d47f.js";import{l as G,b as ma,d as ga,D as Et,g as Ge,e as ol,f as ha,r as ba,s as Sa,h as il,i as ya,C as wa}from"./DynamsoftButton.fc334862.js";import"./patterns.5b28f170.js";const _a={...fl,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Qt=50,xl=2*Qt,Rl=xl*Math.PI,Ca=Math.round(Rl*1e3)/1e3;var ul=De({name:"QCircularProgress",props:{..._a,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:o}){const{proxy:{$q:a}}=Ue(),s=vl(e),h=g(()=>{const V=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-V}deg)`:`rotate3d(0, 0, 1, ${V-90}deg)`}}),r=g(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=g(()=>xl/(1-e.thickness/2)),f=g(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),v=g(()=>Ml(e.value,e.min,e.max)),q=g(()=>Rl*(1-(v.value-e.min)/(e.max-e.min))),n=g(()=>e.thickness/2*i.value);function S({thickness:V,offset:_,color:z,cls:x,rounded:y}){return d("circle",{class:"q-circular-progress__"+x+(z!==void 0?` text-${z}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":V,"stroke-dasharray":Ca,"stroke-dashoffset":_,"stroke-linecap":y,cx:i.value,cy:i.value,r:Qt})}return()=>{const V=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&V.push(d("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Qt-n.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&V.push(S({cls:"track",thickness:n.value,offset:0,color:e.trackColor})),V.push(S({cls:"circle",thickness:n.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const _=[d("svg",{class:"q-circular-progress__svg",style:h.value,viewBox:f.value,"aria-hidden":"true"},V)];return e.showValue===!0&&_.push(d("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},o.default!==void 0?o.default():[d("div",v.value)])),d("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:s.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:v.value},ml(o.internal,_))}}}),Qe=De({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const a=Ue(),s=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:s.value},_t(o.default));const h=a.vnode.key,r=(e.props.colsMap!==void 0?e.props.colsMap[h]:null)||e.props.col;if(r===void 0)return;const{row:i}=e.props;return d("td",{class:s.value+r.__tdClass(i),style:r.__tdStyle(i)},_t(o.default))}}}),pa=De({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const a=g(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>d("tr",{class:a.value},_t(o.default))}}),ka=De({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:a}){const s=Ue(),{proxy:{$q:h}}=s,r=i=>{a("click",i)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:r},_t(o.default));let i,f;const v=s.vnode.key;if(v){if(i=e.props.colsMap[v],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const n=i.align==="right"?"unshift":"push";f=jl(o.default,[]),f[n](d(rt,{class:i.__iconClass,name:h.iconSet.table.arrowUp}))}else f=_t(o.default);const q={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:n=>{i.sortable===!0&&e.props.sort(i),r(n)}};return d("th",q,f)}}});function ql(e,o){return d("div",e,[d("table",{class:"q-table"},o)])}const Fe=1e3,xa=["start","center","end","start-force","center-force","end-force"],Vl=Array.prototype.filter,Ra=window.getComputedStyle(document.body).overflowAnchor===void 0?El:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Vl.call(a,h=>h.dataset&&h.dataset.qVsAnchor!==void 0).forEach(h=>{delete h.dataset.qVsAnchor});const s=a[o];s&&s.dataset&&(s.dataset.qVsAnchor="")}))};function st(e,o){return e+o}function Dt(e,o,a,s,h,r,i,f){const v=e===window?document.scrollingElement||document.documentElement:e,q=h===!0?"offsetWidth":"offsetHeight",n={scrollStart:0,scrollViewSize:-i-f,scrollMaxSize:0,offsetStart:-i,offsetEnd:-f};if(h===!0?(e===window?(n.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n.scrollViewSize+=document.documentElement.clientWidth):(n.scrollStart=v.scrollLeft,n.scrollViewSize+=v.clientWidth),n.scrollMaxSize=v.scrollWidth,r===!0&&(n.scrollStart=($t===!0?n.scrollMaxSize-n.scrollViewSize:0)-n.scrollStart)):(e===window?(n.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,n.scrollViewSize+=document.documentElement.clientHeight):(n.scrollStart=v.scrollTop,n.scrollViewSize+=v.clientHeight),n.scrollMaxSize=v.scrollHeight),a!==null)for(let S=a.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(n.offsetStart+=S[q]);if(s!==null)for(let S=s.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(n.offsetEnd+=S[q]);if(o!==e){const S=v.getBoundingClientRect(),V=o.getBoundingClientRect();h===!0?(n.offsetStart+=V.left-S.left,n.offsetEnd-=V.width):(n.offsetStart+=V.top-S.top,n.offsetEnd-=V.height),e!==window&&(n.offsetStart+=n.scrollStart),n.offsetEnd+=n.scrollMaxSize-n.offsetStart}return n}function rl(e,o,a,s){o==="end"&&(o=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(s===!0&&(o=($t===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):a===!0?(s===!0&&(o=($t===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function ht(e,o,a,s){if(a>=s)return 0;const h=o.length,r=Math.floor(a/Fe),i=Math.floor((s-1)/Fe)+1;let f=e.slice(r,i).reduce(st,0);return a%Fe!==0&&(f-=o.slice(r*Fe,a).reduce(st,0)),s%Fe!==0&&s!==h&&(f-=o.slice(s,i*Fe).reduce(st,0)),f}const Pl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Fl=Object.keys(Pl),Tl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Pl};function Ol({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:a,virtualScrollItemSizeComputed:s}){const h=Ue(),{props:r,emit:i,proxy:f}=h,{$q:v}=f;let q,n,S,V=[],_;const z=$(0),x=$(0),y=$({}),K=$(null),Q=$(null),ee=$(null),A=$({from:0,to:0}),E=g(()=>r.tableColspan!==void 0?r.tableColspan:100);s===void 0&&(s=g(()=>r.virtualScrollItemSize));const ce=g(()=>s.value+";"+r.virtualScrollHorizontal),Te=g(()=>ce.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);we(Te,()=>{_e()}),we(ce,ge);function ge(){xe(n,!0)}function Oe(b){xe(b===void 0?n:b)}function me(b,P){const L=o();if(L==null||L.nodeType===8)return;const Z=Dt(L,a(),K.value,Q.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);S!==Z.scrollViewSize&&_e(Z.scrollViewSize),Be(L,Z,Math.min(e.value-1,Math.max(0,parseInt(b,10)||0)),0,xa.indexOf(P)>-1?P:n>-1&&b>n?"end":"start")}function fe(){const b=o();if(b==null||b.nodeType===8)return;const P=Dt(b,a(),K.value,Q.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),L=e.value-1,Z=P.scrollMaxSize-P.offsetStart-P.offsetEnd-x.value;if(q===P.scrollStart)return;if(P.scrollMaxSize<=0){Be(b,P,0,0);return}S!==P.scrollViewSize&&_e(P.scrollViewSize),Ie(A.value.from);const ue=Math.floor(P.scrollMaxSize-Math.max(P.scrollViewSize,P.offsetEnd)-Math.min(_[L],P.scrollViewSize/2));if(ue>0&&Math.ceil(P.scrollStart)>=ue){Be(b,P,L,P.scrollMaxSize-P.offsetEnd-V.reduce(st,0));return}let D=0,I=P.scrollStart-P.offsetStart,ae=I;if(I<=Z&&I+P.scrollViewSize>=z.value)I-=z.value,D=A.value.from,ae=I;else for(let M=0;I>=V[M]&&D<L;M++)I-=V[M],D+=Fe;for(;I>0&&D<L;)I-=_[D],I>-P.scrollViewSize?(D++,ae=I):ae=_[D]+I;Be(b,P,D,ae)}function Be(b,P,L,Z,ue){const D=typeof ue=="string"&&ue.indexOf("-force")>-1,I=D===!0?ue.replace("-force",""):ue,ae=I!==void 0?I:"start";let M=Math.max(0,L-y.value[ae]),re=M+y.value.total;re>e.value&&(re=e.value,M=Math.max(0,re-y.value.total)),q=P.scrollStart;const pe=M!==A.value.from||re!==A.value.to;if(pe===!1&&I===void 0){Ne(L);return}const{activeElement:Me}=document,he=ee.value;pe===!0&&he!==null&&he!==Me&&he.contains(Me)===!0&&(he.addEventListener("focusout",je),setTimeout(()=>{he!==null&&he.removeEventListener("focusout",je)})),Ra(he,L-M);const qe=I!==void 0?_.slice(M,L).reduce(st,0):0;if(pe===!0){const m=re>=A.value.from&&M<=A.value.to?A.value.to:re;A.value={from:M,to:m},z.value=ht(V,_,0,M),x.value=ht(V,_,re,e.value),requestAnimationFrame(()=>{A.value.to!==re&&q===P.scrollStart&&(A.value={from:A.value.from,to:re},x.value=ht(V,_,re,e.value))})}requestAnimationFrame(()=>{if(q!==P.scrollStart)return;pe===!0&&Ie(M);const m=_.slice(M,L).reduce(st,0),c=m+P.offsetStart+z.value,u=c+_[L];let F=c+Z;if(I!==void 0){const W=m-qe,U=P.scrollStart+W;F=D!==!0&&U<c&&u<U+P.scrollViewSize?U:I==="end"?u-P.scrollViewSize:c-(I==="start"?0:Math.round((P.scrollViewSize-_[L])/2))}q=F,rl(b,F,r.virtualScrollHorizontal,v.lang.rtl),Ne(L)})}function Ie(b){const P=ee.value;if(P){const L=Vl.call(P.children,M=>M.classList&&M.classList.contains("q-virtual-scroll--skip")===!1),Z=L.length,ue=r.virtualScrollHorizontal===!0?M=>M.getBoundingClientRect().width:M=>M.offsetHeight;let D=b,I,ae;for(let M=0;M<Z;){for(I=ue(L[M]),M++;M<Z&&L[M].classList.contains("q-virtual-scroll--with-prev")===!0;)I+=ue(L[M]),M++;ae=I-_[D],ae!==0&&(_[D]+=ae,V[Math.floor(D/Fe)]+=ae),D++}}}function je(){ee.value!==null&&ee.value!==void 0&&ee.value.focus()}function xe(b,P){const L=1*s.value;(P===!0||Array.isArray(_)===!1)&&(_=[]);const Z=_.length;_.length=e.value;for(let D=e.value-1;D>=Z;D--)_[D]=L;const ue=Math.floor((e.value-1)/Fe);V=[];for(let D=0;D<=ue;D++){let I=0;const ae=Math.min((D+1)*Fe,e.value);for(let M=D*Fe;M<ae;M++)I+=_[M];V.push(I)}n=-1,q=void 0,z.value=ht(V,_,0,A.value.from),x.value=ht(V,_,A.value.to,e.value),b>=0?(Ie(A.value.from),Le(()=>{me(b)})):Ce()}function _e(b){if(b===void 0&&typeof window!="undefined"){const I=o();I!=null&&I.nodeType!==8&&(b=Dt(I,a(),K.value,Q.value,r.virtualScrollHorizontal,v.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}S=b;const P=parseFloat(r.virtualScrollSliceRatioBefore)||0,L=parseFloat(r.virtualScrollSliceRatioAfter)||0,Z=1+P+L,ue=b===void 0||b<=0?1:Math.ceil(b/s.value),D=Math.max(1,ue,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/Z));y.value={total:Math.ceil(D*Z),start:Math.ceil(D*P),center:Math.ceil(D*(.5+P)),end:Math.ceil(D*(1+P)),view:ue}}function Re(b,P){const L=r.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+L]:s.value+"px"};return[b==="tbody"?d(b,{class:"q-virtual-scroll__padding",key:"before",ref:K},[d("tr",[d("td",{style:{[L]:`${z.value}px`,...Z},colspan:E.value})])]):d(b,{class:"q-virtual-scroll__padding",key:"before",ref:K,style:{[L]:`${z.value}px`,...Z}}),d(b,{class:"q-virtual-scroll__content",key:"content",ref:ee,tabindex:-1},P.flat()),b==="tbody"?d(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q},[d("tr",[d("td",{style:{[L]:`${x.value}px`,...Z},colspan:E.value})])]):d(b,{class:"q-virtual-scroll__padding",key:"after",ref:Q,style:{[L]:`${x.value}px`,...Z}})]}function Ne(b){n!==b&&(r.onVirtualScroll!==void 0&&i("virtualScroll",{index:b,from:A.value.from,to:A.value.to-1,direction:b<n?"decrease":"increase",ref:f}),n=b)}_e();const Ce=Dl(fe,v.platform.is.ios===!0?120:35);Ut(()=>{_e()});let k=!1;return hl(()=>{k=!0}),bl(()=>{if(k!==!0)return;const b=o();q!==void 0&&b!==void 0&&b!==null&&b.nodeType!==8?rl(b,q,r.virtualScrollHorizontal,v.lang.rtl):me(n)}),Ft(()=>{Ce.cancel()}),Object.assign(f,{scrollTo:me,reset:ge,refresh:Oe}),{virtualScrollSliceRange:A,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:_e,onVirtualScrollEvt:Ce,localResetVirtualScroll:xe,padVirtualScroll:Re,scrollTo:me,reset:ge,refresh:Oe}}const qa={list:Cl,table:sa},Va=["list","table","__qtable"];var Pa=De({name:"QVirtualScroll",props:{...Tl,type:{type:String,default:"list",validator:e=>Va.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:o,attrs:a}){let s;const h=$(null),r=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:f,padVirtualScroll:v,onVirtualScrollEvt:q}=Ol({virtualScrollLength:r,getVirtualScrollTarget:z,getVirtualScrollEl:_}),n=g(()=>{if(r.value===0)return[];const Q=(ee,A)=>({index:i.value.from+A,item:ee});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(Q):e.itemsFn(i.value.from,i.value.to-i.value.from).map(Q)}),S=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),V=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});we(r,()=>{f()}),we(()=>e.scrollTarget,()=>{y(),x()});function _(){return h.value.$el||h.value}function z(){return s}function x(){s=ca(_(),e.scrollTarget),s.addEventListener("scroll",q,el.passive)}function y(){s!==void 0&&(s.removeEventListener("scroll",q,el.passive),s=void 0)}function K(){let Q=v(e.type==="list"?"div":"tbody",n.value.map(o.default));return o.before!==void 0&&(Q=o.before().concat(Q)),gl(o.after,Q)}return Ut(()=>{f()}),Wt(()=>{x()}),bl(()=>{x()}),hl(()=>{y()}),Ft(()=>{y()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ql({ref:h,class:"q-table__middle "+S.value},K()):d(qa[e.type],{...a,ref:h,class:[a.class,S.value],...V.value},K)}}}),Fa=De({name:"QField",inheritAttrs:!1,props:Kt,emits:Sl,setup(){return yl(wl())}});const Ta={xs:8,sm:10,md:14,lg:20,xl:24};var Oa=De({name:"QChip",props:{...pl,...fl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:a}){const{proxy:{$q:s}}=Ue(),h=kl(e,s),r=vl(e,Ta),i=g(()=>e.selected===!0||e.icon!==void 0),f=g(()=>e.selected===!0?e.iconSelected||s.iconSet.chip.selected:e.icon),v=g(()=>e.iconRemove||s.iconSet.chip.remove),q=g(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),n=g(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(h.value===!0?" q-chip--dark q-dark":"")}),S=g(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},K={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||s.lang.label.remove};return{chip:y,remove:K}});function V(y){y.keyCode===13&&_(y)}function _(y){e.disable||(a("update:selected",!e.selected),a("click",y))}function z(y){(y.keyCode===void 0||y.keyCode===13)&&(Ze(y),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function x(){const y=[];q.value===!0&&y.push(d("div",{class:"q-focus-helper"})),i.value===!0&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const K=e.label!==void 0?[d("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(d("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ml(o.default,K))),e.iconRight&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(d(rt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...S.value.remove,onClick:z,onKeyup:z})),y}return()=>{if(e.modelValue===!1)return;const y={class:n.value,style:r.value};return q.value===!0&&Object.assign(y,S.value.chip,{onClick:_,onKeyup:V}),Nl("div",y,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ll,e.ripple]])}}});const sl=e=>["add","add-unique","toggle"].includes(e),Ba=".*+?^${}()|[]\\",Ia=Object.keys(Kt);var Aa=De({name:"QSelect",inheritAttrs:!1,props:{...Tl,...da,...Kt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:sl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Sl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:a}){const{proxy:s}=Ue(),{$q:h}=s,r=$(!1),i=$(!1),f=$(-1),v=$(""),q=$(!1),n=$(!1);let S=null,V,_,z,x=null,y,K,Q,ee;const A=$(null),E=$(null),ce=$(null),Te=$(null),ge=$(null),Oe=fa(e),me=la(l),fe=g(()=>Array.isArray(e.options)?e.options.length:0),Be=g(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ie,virtualScrollSliceSizeComputed:je,localResetVirtualScroll:xe,padVirtualScroll:_e,onVirtualScrollEvt:Re,scrollTo:Ne,setVirtualScrollSize:Ce}=Ol({virtualScrollLength:fe,getVirtualScrollTarget:Tt,getVirtualScrollEl:xt,virtualScrollItemSizeComputed:Be}),k=wl(),b=g(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,p=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const w=e.mapOptions===!0&&V!==void 0?V:[],j=p.map(te=>He(te,w));return e.modelValue===null&&t===!0?j.filter(te=>te!==null):j}return p}),P=g(()=>{const t={};return Ia.forEach(p=>{const w=e[p];w!==void 0&&(t[p]=w)}),t}),L=g(()=>e.optionsDark===null?k.isDark.value:e.optionsDark),Z=g(()=>al(b.value)),ue=g(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||b.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),D=g(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),I=g(()=>fe.value===0),ae=g(()=>b.value.map(t=>X.value(t)).join(", ")),M=g(()=>e.displayValue!==void 0?e.displayValue:ae.value),re=g(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),pe=g(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||b.value.some(re.value))),Me=g(()=>k.focused.value===!0?e.tabindex:-1),he=g(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${k.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${k.targetUid.value}_${f.value}`),t}),qe=g(()=>({id:`${k.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),m=g(()=>b.value.map((t,p)=>({index:p,opt:t,html:re.value(t),selected:!0,removeAtIndex:Ct,toggleOption:Ee,tabindex:Me.value}))),c=g(()=>{if(fe.value===0)return[];const{from:t,to:p}=Ie.value;return e.options.slice(t,p).map((w,j)=>{const te=de.value(w)===!0,J=t+j,se={clickable:!0,active:!1,activeClass:W.value,manualFocus:!0,focused:!1,disable:te,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option",id:`${k.targetUid.value}_${J}`,onClick:()=>{Ee(w)}};return te!==!0&&(Xe(w)===!0&&(se.active=!0),f.value===J&&(se.focused=!0),se["aria-selected"]=se.active===!0?"true":"false",h.platform.is.desktop===!0&&(se.onMousemove=()=>{r.value===!0&&Ae(J)})),{index:J,opt:w,html:re.value(w),label:X.value(w),selected:se.active,focused:se.focused,toggleOption:Ee,setOptionIndex:Ae,itemProps:se}})}),u=g(()=>e.dropdownIcon!==void 0?e.dropdownIcon:h.iconSet.arrow.dropdown),F=g(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),W=g(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),U=g(()=>ct(e.optionValue,"value")),X=g(()=>ct(e.optionLabel,"label")),de=g(()=>ct(e.optionDisable,"disable")),Y=g(()=>b.value.map(t=>U.value(t))),ne=g(()=>{const t={onInput:l,onChange:me,onKeydown:We,onKeyup:Ye,onKeypress:ft,onFocus:dt,onClick(p){_===!0&&ot(p)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=me,t});we(b,t=>{V=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&k.innerLoading.value!==!0&&(i.value!==!0&&r.value!==!0||Z.value!==!0)&&(z!==!0&&nt(),(i.value===!0||r.value===!0)&&B(""))},{immediate:!0}),we(()=>e.fillInput,nt),we(r,At),we(fe,Al);function ie(t){return e.emitValue===!0?U.value(t):t}function Se(t){if(t>-1&&t<b.value.length)if(e.multiple===!0){const p=e.modelValue.slice();a("remove",{index:t,value:p.splice(t,1)[0]}),a("update:modelValue",p)}else a("update:modelValue",null)}function Ct(t){Se(t),k.focus()}function pt(t,p){const w=ie(t);if(e.multiple!==!0){e.fillInput===!0&&T(X.value(t),!0,!0),a("update:modelValue",w);return}if(b.value.length===0){a("add",{index:0,value:w}),a("update:modelValue",e.multiple===!0?[w]:w);return}if(p===!0&&Xe(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const j=e.modelValue.slice();a("add",{index:j.length,value:w}),j.push(w),a("update:modelValue",j)}function Ee(t,p){if(k.editable.value!==!0||t===void 0||de.value(t)===!0)return;const w=U.value(t);if(e.multiple!==!0){p!==!0&&(T(e.fillInput===!0?X.value(t):"",!0,!0),Ke()),E.value!==null&&E.value.focus(),(b.value.length===0||vt(U.value(b.value[0]),w)!==!0)&&a("update:modelValue",e.emitValue===!0?w:t);return}if((_!==!0||q.value===!0)&&k.focus(),dt(),b.value.length===0){const J=e.emitValue===!0?w:t;a("add",{index:0,value:J}),a("update:modelValue",e.multiple===!0?[J]:J);return}const j=e.modelValue.slice(),te=Y.value.findIndex(J=>vt(J,w));if(te>-1)a("remove",{index:te,value:j.splice(te,1)[0]});else{if(e.maxValues!==void 0&&j.length>=e.maxValues)return;const J=e.emitValue===!0?w:t;a("add",{index:j.length,value:J}),j.push(J)}a("update:modelValue",j)}function Ae(t){if(h.platform.is.desktop!==!0)return;const p=t>-1&&t<fe.value?t:-1;f.value!==p&&(f.value=p)}function Ve(t=1,p){if(r.value===!0){let w=f.value;do w=Yt(w+t,-1,fe.value-1);while(w!==-1&&w!==f.value&&de.value(e.options[w])===!0);f.value!==w&&(Ae(w),Ne(w),p!==!0&&e.useInput===!0&&e.fillInput===!0&&C(w>=0?X.value(e.options[w]):y))}}function He(t,p){const w=j=>vt(U.value(j),t);return e.options.find(w)||p.find(w)||t}function ct(t,p){const w=t!==void 0?t:p;return typeof w=="function"?w:j=>j!==null&&typeof j=="object"&&w in j?j[w]:j}function Xe(t){const p=U.value(t);return Y.value.find(w=>vt(w,p))!==void 0}function dt(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===ae.value)&&E.value.select()}function kt(t){Ql(t,27)===!0&&r.value===!0&&(ot(t),Ke(),nt()),a("keyup",t)}function Ye(t){const{value:p}=t.target;if(t.keyCode!==void 0){kt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),nt(),typeof p=="string"&&p.length>0){const w=p.toLocaleLowerCase(),j=J=>{const se=e.options.find(ye=>J.value(ye).toLocaleLowerCase()===w);return se===void 0?!1:(b.value.indexOf(se)===-1?Ee(se):Ke(),!0)},te=J=>{j(U)!==!0&&(j(X)===!0||J===!0||B(p,!0,()=>te(!0)))};te()}else k.clearValue(t)}function ft(t){a("keypress",t)}function We(t){if(a("keydown",t),Ul(t)===!0)return;const p=v.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),w=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||p===!0);if(t.keyCode===27){zt(t);return}if(t.keyCode===9&&w===!1){lt();return}if(t.target===void 0||t.target.id!==k.targetUid.value)return;if(t.keyCode===40&&k.innerLoading.value!==!0&&r.value===!1){Ze(t),at();return}if(t.keyCode===8&&e.hideSelected!==!0&&v.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Se(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof v.value!="string"||v.value.length===0)&&(Ze(t),f.value=-1,Ve(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&je.value!==void 0&&(Ze(t),f.value=Math.max(-1,Math.min(fe.value,f.value+(t.keyCode===33?-1:1)*je.value.view)),Ve(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ze(t),Ve(t.keyCode===38?-1:1,e.multiple));const j=fe.value;if((Q===void 0||ee<Date.now())&&(Q=""),j>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||Q.length>0)){r.value!==!0&&at(t);const te=t.key.toLocaleLowerCase(),J=Q.length===1&&Q[0]===te;ee=Date.now()+1500,J===!1&&(Ze(t),Q+=te);const se=new RegExp("^"+Q.split("").map(Lt=>Ba.indexOf(Lt)>-1?"\\"+Lt:Lt).join(".*"),"i");let ye=f.value;if(J===!0||ye<0||se.test(X.value(e.options[ye]))!==!0)do ye=Yt(ye+1,-1,j-1);while(ye!==f.value&&(de.value(e.options[ye])===!0||se.test(X.value(e.options[ye]))!==!0));f.value!==ye&&Le(()=>{Ae(ye),Ne(ye),ye>=0&&e.useInput===!0&&e.fillInput===!0&&C(X.value(e.options[ye]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||Q!=="")&&(t.keyCode!==9||w===!1))){if(t.keyCode!==9&&Ze(t),f.value>-1&&f.value<j){Ee(e.options[f.value]);return}if(p===!0){const te=(J,se)=>{if(se){if(sl(se)!==!0)return}else se=e.newValueMode;if(J==null)return;T("",e.multiple!==!0,!0),(se==="toggle"?Ee:pt)(J,se==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),Ke())};if(e.onNewValue!==void 0?a("newValue",v.value,te):te(v.value),e.multiple!==!0)return}r.value===!0?lt():k.innerLoading.value!==!0&&at()}}function xt(){return _===!0?ge.value:ce.value!==null&&ce.value.contentEl!==null?ce.value.contentEl:void 0}function Tt(){return xt()}function Ot(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?m.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?m.value.map((t,p)=>d(Oa,{key:"option-"+p,removable:k.editable.value===!0&&de.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Me.value,onRemove(){t.removeAtIndex(p)}},()=>d("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:X.value(t.opt)}))):[d("span",{[pe.value===!0?"innerHTML":"textContent"]:M.value})]}function Rt(){if(I.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:v.value}):void 0;const t=o.option!==void 0?o.option:w=>d(wt,{key:w.index,...w.itemProps},()=>d(St,()=>d(yt,()=>d("span",{[w.html===!0?"innerHTML":"textContent"]:w.label}))));let p=_e("div",c.value.map(t));return o["before-options"]!==void 0&&(p=o["before-options"]().concat(p)),gl(o["after-options"],p)}function Bt(t,p){const w=p===!0?{...he.value,...k.splitAttrs.attributes.value}:void 0,j={ref:p===!0?E:void 0,key:"i_t",class:ue.value,style:e.inputStyle,value:v.value!==void 0?v.value:"",type:"search",...w,id:p===!0?k.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ne.value};return t!==!0&&_===!0&&(Array.isArray(j.class)===!0?j.class=[...j.class,"no-pointer-events"]:j.class+=" no-pointer-events"),d("input",j)}function l(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(C(t.target.value||""),z=!0,y=v.value,k.focused.value!==!0&&(_!==!0||q.value===!0)&&k.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,B(v.value)},e.inputDebounce)))}function C(t){v.value!==t&&(v.value=t,a("inputValue",t))}function T(t,p,w){z=w!==!0,e.useInput===!0&&(C(t),(p===!0||w!==!0)&&(y=t),p!==!0&&B(t))}function B(t,p,w){if(e.onFilter===void 0||p!==!0&&k.focused.value!==!0)return;k.innerLoading.value===!0?a("filterAbort"):(k.innerLoading.value=!0,n.value=!0),t!==""&&e.multiple!==!0&&b.value.length>0&&z!==!0&&t===X.value(b.value[0])&&(t="");const j=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);x!==null&&clearTimeout(x),x=j,a("filter",t,(te,J)=>{(p===!0||k.focused.value===!0)&&x===j&&(clearTimeout(x),typeof te=="function"&&te(),n.value=!1,Le(()=>{k.innerLoading.value=!1,k.editable.value===!0&&(p===!0?r.value===!0&&Ke():r.value===!0?At(!0):r.value=!0),typeof J=="function"&&Le(()=>{J(s)}),typeof w=="function"&&Le(()=>{w(s)})}))},()=>{k.focused.value===!0&&x===j&&(clearTimeout(x),k.innerLoading.value=!1,n.value=!1),r.value===!0&&(r.value=!1)})}function H(){return d(ia,{ref:ce,class:D.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&I.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:F.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...qe.value,onScrollPassive:Re,onBeforeShow:Gt,onBeforeHide:oe,onShow:le},Rt)}function oe(t){Zt(t),lt()}function le(){Ce()}function Pe(t){ot(t),E.value!==null&&E.value.focus(),q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function be(t){ot(t),Le(()=>{q.value=!1})}function et(){const t=[d(Fa,{class:`col-auto ${k.fieldClass.value}`,...P.value,for:k.targetUid.value,dark:L.value,square:!0,loading:n.value,itemAligned:!1,filled:!0,stackLabel:v.value.length>0,...k.splitAttrs.listeners.value,onFocus:Pe,onBlur:be},{...o,rawControl:()=>k.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(d("div",{ref:ge,class:D.value+" scroll",style:e.popupContentStyle,...qe.value,onClick:zt,onScrollPassive:Re},Rt())),d(Pt,{ref:Te,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:K,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Gt,onBeforeHide:tt,onHide:It,onShow:Il},()=>d("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(q.value===!0?" q-select__dialog--focused":"")},t))}function tt(t){Zt(t),Te.value!==null&&Te.value.__updateRefocusTarget(k.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),k.focused.value=!1}function It(t){Ke(),k.focused.value===!1&&a("blur",t),nt()}function Il(){const t=document.activeElement;(t===null||t.id!==k.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),Ce()}function lt(){i.value!==!0&&(f.value=-1,r.value===!0&&(r.value=!1),k.focused.value===!1&&(x!==null&&(clearTimeout(x),x=null),k.innerLoading.value===!0&&(a("filterAbort"),k.innerLoading.value=!1,n.value=!1)))}function at(t){k.editable.value===!0&&(_===!0?(k.onControlFocusin(t),i.value=!0,Le(()=>{k.focus()})):k.focus(),e.onFilter!==void 0?B(v.value):(I.value!==!0||o["no-option"]!==void 0)&&(r.value=!0))}function Ke(){i.value=!1,lt()}function nt(){e.useInput===!0&&T(e.multiple!==!0&&e.fillInput===!0&&b.value.length>0&&X.value(b.value[0])||"",!0,!0)}function At(t){let p=-1;if(t===!0){if(b.value.length>0){const w=U.value(b.value[0]);p=e.options.findIndex(j=>vt(U.value(j),w))}xe(p)}Ae(p)}function Al(t,p){r.value===!0&&k.innerLoading.value===!1&&(xe(-1,!0),Le(()=>{r.value===!0&&k.innerLoading.value===!1&&(t>p?xe():At(!0))}))}function Jt(){i.value===!1&&ce.value!==null&&ce.value.updatePosition()}function Gt(t){t!==void 0&&ot(t),a("popupShow",t),k.hasPopupOpen=!0,k.onControlFocusin(t)}function Zt(t){t!==void 0&&ot(t),a("popupHide",t),k.hasPopupOpen=!1,k.onControlFocusout(t)}function Xt(){_=h.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||I.value===!1:!0),K=h.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return Hl(Xt),$l(Jt),Xt(),Ft(()=>{S!==null&&clearTimeout(S)}),Object.assign(s,{showPopup:at,hidePopup:Ke,removeAtIndex:Se,add:pt,toggleOption:Ee,getOptionIndex:()=>f.value,setOptionIndex:Ae,moveOptionSelection:Ve,filter:B,updateMenuPosition:Jt,updateInputValue:T,isOptionSelected:Xe,getEmittingOptionValue:ie,isOptionDisabled:(...t)=>de.value.apply(null,t)===!0,getOptionValue:(...t)=>U.value.apply(null,t),getOptionLabel:(...t)=>X.value.apply(null,t)}),Object.assign(k,{innerValue:b,fieldClass:g(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:A,targetRef:E,hasValue:Z,showPopup:at,floatingLabel:g(()=>e.hideSelected!==!0&&Z.value===!0||typeof v.value=="number"||v.value.length>0||al(e.displayValue)),getControlChild:()=>{if(k.editable.value!==!1&&(i.value===!0||I.value!==!0||o["no-option"]!==void 0))return _===!0?et():H();k.hasPopupOpen===!0&&(k.hasPopupOpen=!1)},controlEvents:{onFocusin(t){k.onControlFocusin(t)},onFocusout(t){k.onControlFocusout(t,()=>{nt(),lt()})},onClick(t){if(zt(t),_!==!0&&r.value===!0){lt(),E.value!==null&&E.value.focus();return}at(t)}},getControl:t=>{const p=Ot(),w=t===!0||i.value!==!0||_!==!0;if(e.useInput===!0)p.push(Bt(t,w));else if(k.editable.value===!0){const te=w===!0?he.value:void 0;p.push(d("input",{ref:w===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:w===!0?k.targetUid.value:void 0,value:M.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...te,onKeydown:We,onKeyup:kt,onKeypress:ft})),w===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&p.push(d("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ye}))}if(Oe.value!==void 0&&e.disable!==!0&&Y.value.length>0){const te=Y.value.map(J=>d("option",{value:J,selected:!0}));p.push(d("select",{class:"hidden",name:Oe.value,multiple:e.multiple},te))}const j=e.useInput===!0||w!==!0?void 0:k.splitAttrs.attributes.value;return d("div",{class:"q-field__native row items-center",...j,...k.splitAttrs.listeners.value},p)},getInnerAppend:()=>e.loading!==!0&&n.value!==!0&&e.hideDropdownIcon!==!0?[d(rt,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:u.value})]:null}),yl(k)}});let bt=0;const La={fullscreen:Boolean,noRouteFullscreenExit:Boolean},za=["update:fullscreen","fullscreen"];function ja(){const e=Ue(),{props:o,emit:a,proxy:s}=e;let h,r,i;const f=$(!1);zl(e)===!0&&we(()=>s.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&n()}),we(()=>o.fullscreen,S=>{f.value!==S&&v()}),we(f,S=>{a("update:fullscreen",S),a("fullscreen",S)});function v(){f.value===!0?n():q()}function q(){f.value!==!0&&(f.value=!0,i=s.$el.parentNode,i.replaceChild(r,s.$el),document.body.appendChild(s.$el),bt++,bt===1&&document.body.classList.add("q-body--fullscreen-mixin"),h={handler:n},tl.add(h))}function n(){f.value===!0&&(h!==void 0&&(tl.remove(h),h=void 0),i.replaceChild(s.$el,r),f.value=!1,bt=Math.max(0,bt-1),bt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),s.$el.scrollIntoView!==void 0&&setTimeout(()=>{s.$el.scrollIntoView()})))}return Ut(()=>{r=document.createElement("span")}),Wt(()=>{o.fullscreen===!0&&q()}),Ft(n),Object.assign(s,{toggleFullscreen:v,setFullscreen:q,exitFullscreen:n}),{inFullscreen:f,toggleFullscreen:v}}function Na(e,o){return new Date(e)-new Date(o)}const Ma={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ea(e,o,a,s){const h=g(()=>{const{sortBy:f}=o.value;return f&&a.value.find(v=>v.name===f)||null}),r=g(()=>e.sortMethod!==void 0?e.sortMethod:(f,v,q)=>{const n=a.value.find(_=>_.name===v);if(n===void 0||n.field===void 0)return f;const S=q===!0?-1:1,V=typeof n.field=="function"?_=>n.field(_):_=>_[n.field];return f.sort((_,z)=>{let x=V(_),y=V(z);return x==null?-1*S:y==null?1*S:n.sort!==void 0?n.sort(x,y,_,z)*S:Ht(x)===!0&&Ht(y)===!0?(x-y)*S:ll(x)===!0&&ll(y)===!0?Na(x,y)*S:typeof x=="boolean"&&typeof y=="boolean"?(x-y)*S:([x,y]=[x,y].map(K=>(K+"").toLocaleString().toLowerCase()),x<y?-1*S:x===y?0:S)})});function i(f){let v=e.columnSortOrder;if(Wl(f)===!0)f.sortOrder&&(v=f.sortOrder),f=f.name;else{const S=a.value.find(V=>V.name===f);S!==void 0&&S.sortOrder&&(v=S.sortOrder)}let{sortBy:q,descending:n}=o.value;q!==f?(q=f,n=v==="da"):e.binaryStateSort===!0?n=!n:n===!0?v==="ad"?q=null:n=!1:v==="ad"?n=!0:q=null,s({sortBy:q,descending:n,page:1})}return{columnToSort:h,computedSortMethod:r,sort:i}}const Da={filter:[String,Object],filterMethod:Function};function Ha(e,o){const a=g(()=>e.filterMethod!==void 0?e.filterMethod:(s,h,r,i)=>{const f=h?h.toLowerCase():"";return s.filter(v=>r.some(q=>{const n=i(q,v)+"";return(n==="undefined"||n==="null"?"":n.toLowerCase()).indexOf(f)!==-1}))});return we(()=>e.filter,()=>{Le(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function $a(e,o){for(const a in o)if(o[a]!==e[a])return!1;return!0}function cl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Qa={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ua(e,o){const{props:a,emit:s}=e,h=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length>0?a.rowsPerPageOptions[0]:5},a.pagination)),r=g(()=>{const n=a["onUpdate:pagination"]!==void 0?{...h.value,...a.pagination}:h.value;return cl(n)}),i=g(()=>r.value.rowsNumber!==void 0);function f(n){v({pagination:n,filter:a.filter})}function v(n={}){Le(()=>{s("request",{pagination:n.pagination||r.value,filter:n.filter||a.filter,getCellValue:o})})}function q(n,S){const V=cl({...r.value,...n});if($a(r.value,V)===!0){i.value===!0&&S===!0&&f(V);return}if(i.value===!0){f(V);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?s("update:pagination",V):h.value=V}return{innerPagination:h,computedPagination:r,isServerSide:i,requestServerInteraction:v,setPagination:q}}function Wa(e,o,a,s,h,r){const{props:i,emit:f,proxy:{$q:v}}=e,q=g(()=>s.value===!0?a.value.rowsNumber||0:r.value),n=g(()=>{const{page:A,rowsPerPage:E}=a.value;return(A-1)*E}),S=g(()=>{const{page:A,rowsPerPage:E}=a.value;return A*E}),V=g(()=>a.value.page===1),_=g(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/a.value.rowsPerPage))),z=g(()=>S.value===0?!0:a.value.page>=_.value),x=g(()=>(i.rowsPerPageOptions.includes(o.value.rowsPerPage)?i.rowsPerPageOptions:[o.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(E=>({label:E===0?v.lang.table.allRows:""+E,value:E})));we(_,(A,E)=>{if(A===E)return;const ce=a.value.page;A&&!ce?h({page:1}):A<ce&&h({page:A})});function y(){h({page:1})}function K(){const{page:A}=a.value;A>1&&h({page:A-1})}function Q(){const{page:A,rowsPerPage:E}=a.value;S.value>0&&A*E<q.value&&h({page:A+1})}function ee(){h({page:_.value})}return i["onUpdate:pagination"]!==void 0&&f("update:pagination",{...a.value}),{firstRowIndex:n,lastRowIndex:S,isFirstPage:V,isLastPage:z,pagesNumber:_,computedRowsPerPageOptions:x,computedRowsNumber:q,firstPage:y,prevPage:K,nextPage:Q,lastPage:ee}}const Ka={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Ja=["update:selected","selection"];function Ga(e,o,a,s){const h=g(()=>{const z={};return e.selected.map(s.value).forEach(x=>{z[x]=!0}),z}),r=g(()=>e.selection!=="none"),i=g(()=>e.selection==="single"),f=g(()=>e.selection==="multiple"),v=g(()=>a.value.length>0&&a.value.every(z=>h.value[s.value(z)]===!0)),q=g(()=>v.value!==!0&&a.value.some(z=>h.value[s.value(z)]===!0)),n=g(()=>e.selected.length);function S(z){return h.value[z]===!0}function V(){o("update:selected",[])}function _(z,x,y,K){o("selection",{rows:x,added:y,keys:z,evt:K});const Q=i.value===!0?y===!0?x:[]:y===!0?e.selected.concat(x):e.selected.filter(ee=>z.includes(s.value(ee))===!1);o("update:selected",Q)}return{hasSelectionMode:r,singleSelection:i,multipleSelection:f,allRowsSelected:v,someRowsSelected:q,rowsSelectedNumber:n,isRowSelected:S,clearSelection:V,updateSelection:_}}function dl(e){return Array.isArray(e)?e.slice():[]}const Za={expanded:Array},Xa=["update:expanded"];function Ya(e,o){const a=$(dl(e.expanded));we(()=>e.expanded,i=>{a.value=dl(i)});function s(i){return a.value.includes(i)}function h(i){e.expanded!==void 0?o("update:expanded",i):a.value=i}function r(i,f){const v=a.value.slice(),q=v.indexOf(i);f===!0?q===-1&&(v.push(i),h(v)):q!==-1&&(v.splice(q,1),h(v))}return{isRowExpanded:s,setExpanded:h,updateExpanded:r}}const en={visibleColumns:Array};function tn(e,o,a){const s=g(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(v=>({name:v,label:v.toUpperCase(),field:v,align:Ht(f[v])?"right":"left",sortable:!0})):[]}),h=g(()=>{const{sortBy:f,descending:v}=o.value;return(e.visibleColumns!==void 0?s.value.filter(n=>n.required===!0||e.visibleColumns.includes(n.name)===!0):s.value).map(n=>{const S=n.align||"right",V=`text-${S}`;return{...n,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:V+(n.headerClasses!==void 0?" "+n.headerClasses:"")+(n.sortable===!0?" sortable":"")+(n.name===f?` sorted ${v===!0?"sort-desc":""}`:""),__tdStyle:n.style!==void 0?typeof n.style!="function"?()=>n.style:n.style:()=>null,__tdClass:n.classes!==void 0?typeof n.classes!="function"?()=>V+" "+n.classes:_=>V+" "+n.classes(_):()=>V}})}),r=g(()=>{const f={};return h.value.forEach(v=>{f[v.name]=v}),f}),i=g(()=>e.tableColspan!==void 0?e.tableColspan:h.value.length+(a.value===!0?1:0));return{colList:s,computedCols:h,computedColsMap:r,computedColspan:i}}const qt="q-table__bottom row items-center",Bl={};Fl.forEach(e=>{Bl[e]={}});var ln=De({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Bl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...pl,...La,...en,...Da,...Qa,...Za,...Ka,...Ma},emits:["request","virtualScroll",...za,...Xa,...Ja],setup(e,{slots:o,emit:a}){const s=Ue(),{proxy:{$q:h}}=s,r=kl(e,h),{inFullscreen:i,toggleFullscreen:f}=ja(),v=g(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),q=$(null),n=$(null),S=g(()=>e.grid!==!0&&e.virtualScroll===!0),V=g(()=>" q-table__card"+(r.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),_=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":V.value)+(r.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),z=g(()=>_.value+(e.loading===!0?" q-table--loading":""));we(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+_.value,()=>{S.value===!0&&n.value!==null&&n.value.reset()});const{innerPagination:x,computedPagination:y,isServerSide:K,requestServerInteraction:Q,setPagination:ee}=Ua(s,Ve),{computedFilterMethod:A}=Ha(e,ee),{isRowExpanded:E,setExpanded:ce,updateExpanded:Te}=Ya(e,a),ge=g(()=>{let l=e.rows;if(K.value===!0||l.length===0)return l;const{sortBy:C,descending:T}=y.value;return e.filter&&(l=A.value(l,e.filter,b.value,Ve)),Z.value!==null&&(l=ue.value(e.rows===l?l.slice():l,C,T)),l}),Oe=g(()=>ge.value.length),me=g(()=>{let l=ge.value;if(K.value===!0)return l;const{rowsPerPage:C}=y.value;return C!==0&&(I.value===0&&e.rows!==l?l.length>ae.value&&(l=l.slice(0,ae.value)):l=l.slice(I.value,ae.value)),l}),{hasSelectionMode:fe,singleSelection:Be,multipleSelection:Ie,allRowsSelected:je,someRowsSelected:xe,rowsSelectedNumber:_e,isRowSelected:Re,clearSelection:Ne,updateSelection:Ce}=Ga(e,a,me,v),{colList:k,computedCols:b,computedColsMap:P,computedColspan:L}=tn(e,y,fe),{columnToSort:Z,computedSortMethod:ue,sort:D}=Ea(e,y,k,ee),{firstRowIndex:I,lastRowIndex:ae,isFirstPage:M,isLastPage:re,pagesNumber:pe,computedRowsPerPageOptions:Me,computedRowsNumber:he,firstPage:qe,prevPage:m,nextPage:c,lastPage:u}=Wa(s,x,y,K,ee,Oe),F=g(()=>me.value.length===0),W=g(()=>{const l={};return Fl.forEach(C=>{l[C]=e[C]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function U(){S.value===!0&&n.value.reset()}function X(){if(e.grid===!0)return Bt();const l=e.hideHeader!==!0?dt:null;if(S.value===!0){const T=o["top-row"],B=o["bottom-row"],H={default:oe=>ie(oe.item,o.body,oe.index)};if(T!==void 0){const oe=d("tbody",T({cols:b.value}));H.before=l===null?()=>oe:()=>[l()].concat(oe)}else l!==null&&(H.before=l);return B!==void 0&&(H.after=()=>d("tbody",B({cols:b.value}))),d(Pa,{ref:n,class:e.tableClass,style:e.tableStyle,...W.value,scrollTarget:e.virtualScrollTarget,items:me.value,type:"__qtable",tableColspan:L.value,onVirtualScroll:Y},H)}const C=[Se()];return l!==null&&C.unshift(l()),ql({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},C)}function de(l,C){if(n.value!==null){n.value.scrollTo(l,C);return}l=parseInt(l,10);const T=q.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(T!==null){const B=q.value.querySelector(".q-table__middle.scroll"),H=T.offsetTop-e.virtualScrollStickySizeStart,oe=H<B.scrollTop?"decrease":"increase";B.scrollTop=H,a("virtualScroll",{index:l,from:0,to:x.value.rowsPerPage-1,direction:oe})}}function Y(l){a("virtualScroll",l)}function ne(){return[d(_l,{class:"q-table__linear-progress",color:e.color,dark:r.value,indeterminate:!0,trackColor:"transparent"})]}function ie(l,C,T){const B=v.value(l),H=Re(B);if(C!==void 0)return C(Ct({key:B,row:l,pageIndex:T,__trClass:H?"selected":""}));const oe=o["body-cell"],le=b.value.map(be=>{const et=o[`body-cell-${be.name}`],tt=et!==void 0?et:oe;return tt!==void 0?tt(pt({key:B,row:l,pageIndex:T,col:be})):d("td",{class:be.__tdClass(l),style:be.__tdStyle(l)},Ve(be,l))});if(fe.value===!0){const be=o["body-selection"],et=be!==void 0?be(Ee({key:B,row:l,pageIndex:T})):[d(Vt,{modelValue:H,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(tt,It)=>{Ce([B],[l],tt,It)}})];le.unshift(d("td",{class:"q-table--col-auto-width"},et))}const Pe={key:B,class:{selected:H}};return e.onRowClick!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onClick=be=>{a("RowClick",be,l,T)}),e.onRowDblclick!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onDblclick=be=>{a("RowDblclick",be,l,T)}),e.onRowContextmenu!==void 0&&(Pe.class["cursor-pointer"]=!0,Pe.onContextmenu=be=>{a("RowContextmenu",be,l,T)}),d("tr",Pe,le)}function Se(){const l=o.body,C=o["top-row"],T=o["bottom-row"];let B=me.value.map((H,oe)=>ie(H,l,oe));return C!==void 0&&(B=C({cols:b.value}).concat(B)),T!==void 0&&(B=B.concat(T({cols:b.value}))),d("tbody",B)}function Ct(l){return Ae(l),l.cols=l.cols.map(C=>mt({...C},"value",()=>Ve(C,l.row))),l}function pt(l){return Ae(l),mt(l,"value",()=>Ve(l.col,l.row)),l}function Ee(l){return Ae(l),l}function Ae(l){Object.assign(l,{cols:b.value,colsMap:P.value,sort:D,rowIndex:I.value+l.pageIndex,color:e.color,dark:r.value,dense:e.dense}),fe.value===!0&&mt(l,"selected",()=>Re(l.key),(C,T)=>{Ce([l.key],[l.row],C,T)}),mt(l,"expand",()=>E(l.key),C=>{Te(l.key,C)})}function Ve(l,C){const T=typeof l.field=="function"?l.field(C):C[l.field];return l.format!==void 0?l.format(T,C):T}const He=g(()=>({pagination:y.value,pagesNumber:pe.value,isFirstPage:M.value,isLastPage:re.value,firstPage:qe,prevPage:m,nextPage:c,lastPage:u,inFullscreen:i.value,toggleFullscreen:f}));function ct(){const l=o.top,C=o["top-left"],T=o["top-right"],B=o["top-selection"],H=fe.value===!0&&B!==void 0&&_e.value>0,oe="q-table__top relative-position row items-center";if(l!==void 0)return d("div",{class:oe},[l(He.value)]);let le;if(H===!0?le=B(He.value).slice():(le=[],C!==void 0?le.push(d("div",{class:"q-table__control"},[C(He.value)])):e.title&&le.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),T!==void 0&&(le.push(d("div",{class:"q-table__separator col"})),le.push(d("div",{class:"q-table__control"},[T(He.value)]))),le.length!==0)return d("div",{class:oe},le)}const Xe=g(()=>xe.value===!0?null:je.value);function dt(){const l=kt();return e.loading===!0&&o.loading===void 0&&l.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:L.value},ne())])),d("thead",l)}function kt(){const l=o.header,C=o["header-cell"];if(l!==void 0)return l(Ye({header:!0})).slice();const T=b.value.map(B=>{const H=o[`header-cell-${B.name}`],oe=H!==void 0?H:C,le=Ye({col:B});return oe!==void 0?oe(le):d(ka,{key:B.name,props:le},()=>B.label)});if(Be.value===!0&&e.grid!==!0)T.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(Ie.value===!0){const B=o["header-selection"],H=B!==void 0?B(Ye({})):[d(Vt,{color:e.color,modelValue:Xe.value,dark:r.value,dense:e.dense,"onUpdate:modelValue":ft})];T.unshift(d("th",{class:"q-table--col-auto-width"},H))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},T)]}function Ye(l){return Object.assign(l,{cols:b.value,sort:D,colsMap:P.value,color:e.color,dark:r.value,dense:e.dense}),Ie.value===!0&&mt(l,"selected",()=>Xe.value,ft),l}function ft(l){xe.value===!0&&(l=!1),Ce(me.value.map(v.value),me.value,l)}const We=g(()=>{const l=[e.iconFirstPage||h.iconSet.table.firstPage,e.iconPrevPage||h.iconSet.table.prevPage,e.iconNextPage||h.iconSet.table.nextPage,e.iconLastPage||h.iconSet.table.lastPage];return h.lang.rtl===!0?l.reverse():l});function xt(){if(e.hideBottom===!0)return;if(F.value===!0){if(e.hideNoData===!0)return;const T=e.loading===!0?e.loadingLabel||h.lang.table.loading:e.filter?e.noResultsLabel||h.lang.table.noResults:e.noDataLabel||h.lang.table.noData,B=o["no-data"],H=B!==void 0?[B({message:T,icon:h.iconSet.table.warning,filter:e.filter})]:[d(rt,{class:"q-table__bottom-nodata-icon",name:h.iconSet.table.warning}),T];return d("div",{class:qt+" q-table__bottom--nodata"},H)}const l=o.bottom;if(l!==void 0)return d("div",{class:qt},[l(He.value)]);const C=e.hideSelectedBanner!==!0&&fe.value===!0&&_e.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||h.lang.table.selectedRecords)(_e.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:qt+" justify-end"},Ot(C));if(C.length>0)return d("div",{class:qt},C)}function Tt(l){ee({page:1,rowsPerPage:l.value})}function Ot(l){let C;const{rowsPerPage:T}=y.value,B=e.paginationLabel||h.lang.table.pagination,H=o.pagination,oe=e.rowsPerPageOptions.length>1;if(l.push(d("div",{class:"q-table__separator col"})),oe===!0&&l.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||h.lang.table.recordsPerPage]),d(Aa,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:T,options:Me.value,displayValue:T===0?h.lang.table.allRows:T,dark:r.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Tt})])),H!==void 0)C=H(He.value);else if(C=[d("span",T!==0?{class:"q-table__bottom-item"}:{},[T?B(I.value+1,Math.min(ae.value,he.value),he.value):B(1,Oe.value,he.value)])],T!==0&&pe.value>1){const le={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(le.size="sm"),pe.value>2&&C.push(d(ze,{key:"pgFirst",...le,icon:We.value[0],disable:M.value,onClick:qe})),C.push(d(ze,{key:"pgPrev",...le,icon:We.value[1],disable:M.value,onClick:m}),d(ze,{key:"pgNext",...le,icon:We.value[2],disable:re.value,onClick:c})),pe.value>2&&C.push(d(ze,{key:"pgLast",...le,icon:We.value[3],disable:re.value,onClick:u}))}return l.push(d("div",{class:"q-table__control"},C)),l}function Rt(){const l=e.gridHeader===!0?[d("table",{class:"q-table"},[dt()])]:e.loading===!0&&o.loading===void 0?ne():void 0;return d("div",{class:"q-table__middle"},l)}function Bt(){const l=o.item!==void 0?o.item:C=>{const T=C.cols.map(H=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[H.label]),d("div",{class:"q-table__grid-item-value"},[H.value])]));if(fe.value===!0){const H=o["body-selection"],oe=H!==void 0?H(C):[d(Vt,{modelValue:C.selected,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(le,Pe)=>{Ce([C.key],[C.row],le,Pe)}})];T.unshift(d("div",{class:"q-table__grid-item-row"},oe),d(ra,{dark:r.value}))}const B={class:["q-table__grid-item-card"+V.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(B.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(B.onClick=H=>{a("RowClick",H,C.row,C.pageIndex)}),e.onRowDblclick!==void 0&&(B.onDblclick=H=>{a("RowDblclick",H,C.row,C.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(C.selected===!0?" q-table__grid-item--selected":"")},[d("div",B,T)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},me.value.map((C,T)=>l(Ct({key:v.value(C),row:C,pageIndex:T}))))}return Object.assign(s.proxy,{requestServerInteraction:Q,setPagination:ee,firstPage:qe,prevPage:m,nextPage:c,lastPage:u,isRowSelected:Re,clearSelection:Ne,isRowExpanded:E,setExpanded:ce,sort:D,resetVirtualScroll:U,scrollTo:de,getCellValue:Ve}),Kl(s.proxy,{filteredSortedRows:()=>ge.value,computedRows:()=>me.value,computedRowsNumber:()=>he.value}),()=>{const l=[ct()],C={ref:q,class:z.value};return e.grid===!0?l.push(Rt()):Object.assign(C,{class:[C.class,e.cardClass],style:e.cardStyle}),l.push(X(),xt()),e.loading===!0&&o.loading!==void 0&&l.push(o.loading()),d("div",C,l)}}});const an={class:"full"},nn={class:"header"},on={class:"text-h6 fontOswald"},un={class:"flex-container"},rn={class:"container"},sn={class:"overview"},cn={class:"statistics"},dn={class:"row"},fn={class:"col-12 col-md statistics-values"},vn=R("div",{class:"statistics-name"},"Total files: ",-1),mn={class:"statistics-value"},gn=R("div",{class:"statistics-name"},"Total barcodes: ",-1),hn={class:"statistics-value"},bn=R("div",{class:"statistics-name"},"Correctly detected files: ",-1),Sn={class:"statistics-value"},yn=R("div",{class:"statistics-name"},"Rate of detected files: ",-1),wn={class:"statistics-value"},_n=R("div",{class:"statistics-name"},"Detected barcodes: ",-1),Cn={class:"statistics-value"},pn=R("div",{class:"statistics-name"},"Misdetected barcodes: ",-1),kn={class:"statistics-value"},xn=R("div",{class:"statistics-name"},"Average time (ms): ",-1),Rn={class:"statistics-value"},qn={class:"col-12 col-md statistics-charts"},Vn={class:"row"},Pn={class:"col statistics-chart"},Fn={class:"col statistics-chart"},Tn={class:"decoding"},On=R("div",null,[R("label",{style:{"font-size":"16px"}},"Engines:")],-1),Bn={class:"row",style:{"padding-bottom":"20px"}},In=["value"],An={class:"row",style:{"align-items":"center"}},Ln={key:0,style:{width:"100px"}},zn={class:"absolute-full flex flex-center"},jn={style:{"margin-top":"2em","margin-bottom":"2em"}},Nn={class:"filename"},Mn={class:"text"},En={class:"text"},Dn={class:"text"},Hn={class:"dialogs"},$n=R("div",{class:"text-h6"},"Add files",-1),Qn=R("label",{for:"imageFiles"},"Image files.",-1),Un=R("label",{for:"detectionResultFiles"},"Detection result files.",-1),Wn=R("label",{for:"imageFiles"},"Ground truth files.",-1),Kn=R("label",{for:"zipFile"},"Zip with images and text results.",-1),Jn=R("div",{class:"text-h6"},"Export",-1),Gn=R("div",{class:"text-h6"},"Downloading project data...",-1),go=Jl({__name:"ProjectPage",setup(e){const o=[{name:"number",required:!0,label:"No.",align:"left",field:"number"},{name:"name",required:!0,label:"Filename",align:"left",field:"filename",sortable:!0},{name:"detectedText",required:!0,label:"Detected Text",align:"left",field:"detectedText"},{name:"groundTruth",required:!0,label:"Ground Truth",align:"left",field:"groundTruth"},{name:"barcodeFormat",required:!0,label:"Barcode Format",align:"left",field:"barcodeFormat"},{name:"time",required:!0,label:"Time (ms)",align:"left",field:"time"},{name:"correct",required:!0,label:"Correct",align:"left",field:"correct",sortable:!0},{name:"misdetected",required:!0,label:"Misdetected",align:"left",field:"misdetected",sortable:!0}];let a,s;const h=$([]),r=Gl(),i=$(""),f=$(""),v=$([]),q=$(!1),n=$(!1),S=$(.5),V=$(""),_=$(!1),z=$(!0),x=$({fileNumber:0,correctFilesNumber:0,barcodeNumber:0,accuracy:0,precision:0,averageTime:0}),y=$(!1);let K=!1,Q=[],ee=[],A=[],E,ce=[];Wt(async()=>{i.value=r.currentRoute.value.params.name,await Te(r.currentRoute.value.params.name);const m=await G.getItem("projects");if(ta({title:"Barcode Reading Benchmark - "+i.value}),m){ce=JSON.parse(m);for(let c=0;c<ce.length;c++)if(ce[c].info.name===i.value){s=ce[c];break}}if(!s)await qe();else if(s.isRemote){const c=await G.getItem(s.info.name+":results.zip"),u=await aa(s);(!c||!u||s.info.images.length===0)&&await qe()}ge()});const Te=async m=>{const c=await ma(m);v.value=c,c.length>0&&(f.value=c[0].displayName)},ge=async m=>{if(s){const c=await ga(s,m!=null?m:f.value);x.value=c.metrics,c.rows&&(h.value=c.rows)}},Oe=async()=>{try{let m=re();if(_.value===!1&&m){_.value=!0,K=!1,await pe(),await Me(m);const c=s.info.images.length;S.value=0,V.value="0/"+c;let u=await G.getItem(i.value+":detectionResultFileNamesList");u||(u=[]);for(let F=0;F<c;F++){if(K){await G.setItem(i.value+":detectionResultFileNamesList",u);return}const W=s.info.images[F];if(z.value&&await G.getItem(i.value+":detectionResult:"+Ge(W)+"-"+f.value+".json"))continue;const U=await G.getItem(i.value+":image:"+W);if(U){let X=await a.detect(U);console.log(X);const de=Ge(W)+"-"+f.value+".json";u.indexOf(de)===-1&&u.push(de),await G.setItem(i.value+":detectionResult:"+Ge(W)+"-"+f.value+".json",JSON.stringify(X))}S.value=parseFloat(((F+1)/c).toFixed(2)),V.value=F+1+"/"+c}await G.setItem(i.value+":detectionResultFileNamesList",u),_.value=!1}else K=!0,_.value=!1;ge()}catch(m){alert(m+`
Please check if the local barcode reading server is running.`)}},me=m=>{ee=m.target.files},fe=m=>{Q=m.target.files},Be=m=>{A=m.target.files},Ie=m=>{E=m.target.files[0]},je=async()=>{if(s){for(let c=0;c<A.length;c++){const u=A[c],F=await ol(u);await G.setItem(i.value+":groundTruth:"+u.name,F)}let m=await G.getItem(i.value+":detectionResultFileNamesList");m||(m=[]);for(let c=0;c<ee.length;c++){const u=ee[c],F=await ol(u);m.indexOf(u.name)===-1&&m.push(u.name),await G.setItem(i.value+":detectionResult:"+u.name,F)}for(let c=0;c<Q.length;c++){const u=Q[c],F=await ha(u);await G.setItem(i.value+":image:"+u.name,F),s.info.images.push(u.name)}await G.setItem(i.value+":detectionResultFileNamesList",m),await xe(),ge(),Re(),alert("added"),q.value=!1}},xe=async()=>{if(s&&E){const m=await E.arrayBuffer(),c=new Nt;await c.loadAsync(m);const u=c.files,F=Object.keys(u),W=[],U=[],X=[];for(let Y=0;Y<F.length;Y++){const ne=F[Y],ie=ne.toLowerCase(),Se=u[ne];Se.dir===!1&&(ie.endsWith(".jpg")||ie.endsWith(".jpeg")||ie.endsWith(".png")||ie.endsWith(".bmp")?U.push(Se):ie.endsWith(".txt")?W.push(Se):ie.endsWith(".json")&&X.push(Se))}for(let Y=0;Y<W.length;Y++){const ne=W[Y],ie=await ne.async("string");await G.setItem(i.value+":groundTruth:"+ne.name,ie)}let de=await G.getItem(i.value+":detectionResultFileNamesList");de||(de=[]);for(let Y=0;Y<X.length;Y++){const ne=X[Y],ie=await ne.async("string");de.indexOf(ne.name)===-1&&de.push(ne.name),await G.setItem(i.value+":detectionResult:"+ne.name,ie)}for(let Y=0;Y<U.length;Y++){const ne=U[Y],ie=await ne.async("base64"),Se=_e(ie,ne.name);await G.setItem(i.value+":image:"+ne.name,Se),s.info.images.push(ne.name)}await G.setItem(i.value+":detectionResultFileNamesList",de)}},_e=(m,c)=>{const u=c.toLowerCase();return u.endsWith(".jpg")||u.endsWith(".jpeg")?"data:image/jpeg;base64,"+m:u.endsWith(".bmp")?"data:image/bmp;base64,"+m:u.endsWith(".bmp")?"data:image/png;base64,"+m:"data:image/jpeg;base64,"+m},Re=async()=>{let m=[];ce.forEach(c=>{m.push(c)}),await G.setItem("projects",JSON.stringify(m))},Ne=()=>{Ce(),q.value=!0},Ce=()=>{E=void 0,Q=[],ee=[],A=[]},k=async()=>{await ba(s),Re(),ge()},b=async()=>{n.value=!0},P=async()=>{for(let m=0;m<s.info.images.length;m++){const c=s.info.images[m],u=await G.getItem(i.value+":image:"+c);if(u){await Sa(1e3);const F=il(u),W=document.createElement("a");W.href=URL.createObjectURL(F),W.download=c,document.body.appendChild(W),W.click(),document.body.removeChild(W)}}},L=async()=>{const m=new Nt;for(let c=0;c<s.info.images.length;c++){const u=s.info.images[c],F=await G.getItem(i.value+":image:"+u);if(F){console.log(u);const W=il(F);m.file(u,W)}}m.generateAsync({type:"blob"}).then(function(c){const u=document.createElement("a");u.href=URL.createObjectURL(c),u.download=i.value+"-images.zip",document.body.appendChild(u),u.click(),document.body.removeChild(u)})},Z=async()=>{const m=new Nt;for(let u=0;u<s.info.images.length;u++){const F=s.info.images[u],W=Ge(F)+".txt",U=await G.getItem(i.value+":groundTruth:"+Ge(F)+".txt");U&&m.file(W,U)}const c=await G.getItem(i.value+":detectionResultFileNamesList");if(c){for(let u=0;u<c.length;u++){const F=c[u],W=await G.getItem(i.value+":detectionResult:"+F);W&&m.file(F,W)}m.file("detection_result_filenames.json",JSON.stringify(c))}m.file("project_manifest.json",JSON.stringify(s)),await ue(m),m.generateAsync({type:"blob"}).then(function(u){const F=document.createElement("a");F.href=URL.createObjectURL(u),F.download=i.value+"-results.zip",document.body.appendChild(F),F.click(),document.body.removeChild(F)})},ue=async m=>{m.file("settings.json",JSON.stringify(v.value))},D=m=>{const c="/project/"+encodeURIComponent(i.value)+"/"+encodeURIComponent(m)+"/"+f.value,u=r.resolve(c);window.open(u.href,"_blank")},I=m=>{ge(m)},ae=()=>{const m="/project/"+encodeURIComponent(i.value)+"/comparison";r.push(m)},M=()=>{const m="/project/"+encodeURIComponent(i.value)+"/livescanner",c=r.resolve(m);window.open(c.href,"_blank")},re=m=>{let c;m?c=m:c=f.value;for(const u of v.value)if(u.displayName===c)return u},pe=async()=>{let m=re();if(m){let c=!1;a?a.getEngine()!=m.engine&&(c=!0):c=!0,c&&(V.value="Initializing...",a=await ya.createInstance(m.engine),V.value="")}},Me=async m=>{console.log("updateBarcodeReaderSettings"),console.log(m),await a.setSupportedSettings(m.settings)},he=async()=>{const m=s.info.images.length;for(let c=0;c<m;c++){const u=s.info.images[c],F=await G.getItem(i.value+":detectionResult:"+Ge(u)+"-"+f.value+".json");if(F){const W=JSON.parse(F),U=wa(W.results);await G.setItem(i.value+":groundTruth:"+Ge(u)+".txt",JSON.stringify(U))}}ge()},qe=async()=>{y.value=!0;const m=i.value;try{const u=await(await fetch("/barcode-dataset/benchmark/dataset/"+m+"/project_manifest.json")).text(),F=JSON.parse(u);F.isRemote=!0;const U=await(await fetch("/barcode-dataset/benchmark/dataset/"+m+"/results.zip")).blob();U.size>0&&await G.setItem(m+":results.zip",U),await na(F);let X,de=await G.getItem("projects");de?X=JSON.parse(de):X=[];let Y=[],ne=!1;for(let ie=0;ie<X.length;ie++){const Se=X[ie];Se.info.name===F.info.name?(Y.push(F),ne=!0):Y.push(Se)}ne===!1&&Y.push(F),await G.setItem("projects",JSON.stringify(Y)),s=F,await Te(m)}catch(c){console.log(c)}y.value=!1};return(m,c)=>($e(),gt(va,null,{default:N(()=>[R("div",an,[R("div",nn,[R("div",on,ve(i.value),1),R("div",un,[O(Et,{style:{"margin-left":"15px"},secondary:"",label:"Go to Comparison Page",onClick:ae})]),O(Et,{outline:"",style:{color:"black","border-color":"black","background-color":"#fff"},label:"Export",onClick:b})]),R("div",rn,[R("div",sn,[R("div",cn,[R("div",dn,[R("div",fn,[R("div",null,[vn,R("div",mn,ve(x.value.fileNumber),1)]),R("div",null,[gn,R("div",hn,ve(x.value.barcodeNumber),1)]),R("div",null,[bn,R("div",Sn,ve(x.value.correctFilesNumber),1)]),R("div",null,[yn,R("div",wn,ve(x.value.detectedFilesRate)+"%",1)]),R("div",null,[_n,R("div",Cn,ve(parseInt((x.value.accuracy/100*x.value.barcodeNumber).toString())),1)]),R("div",null,[pn,R("div",kn,ve(parseInt(((1-x.value.precision/100)*x.value.barcodeNumber).toString())),1)]),R("div",null,[xn,R("div",Rn,ve(x.value.averageTime),1)])]),R("div",qn,[R("div",Vn,[R("div",Pn,[ke(" Reading Rate: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.accuracy,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:N(()=>[ke(ve(x.value.accuracy)+"% ",1)]),_:1},8,["value","thickness"])]),R("div",Fn,[ke(" Precision: "),O(ul,{"show-value":"","font-size":"12px",value:x.value.precision,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:N(()=>[ke(ve(x.value.precision)+"% ",1)]),_:1},8,["value","thickness"])])])])])]),R("div",Tn,[On,R("div",Bn,[Je(R("select",{style:{"min-width":"200px",height:"45px"},"onUpdate:modelValue":[c[0]||(c[0]=u=>I(u)),c[1]||(c[1]=u=>f.value=u)]},[($e(!0),jt(Yl,null,Xl(v.value,u=>($e(),jt("option",{value:u.displayName,key:u.displayName},ve(u.displayName),9,In))),128))],512),[[Zl,f.value]])]),R("div",An,[O(Et,{label:_.value?"Stop Decoding":"Start Decoding",onClick:Oe},null,8,["label"]),O(Vt,{color:"orange",style:{"padding-left":"10px"},"left-label":"",modelValue:z.value,"onUpdate:modelValue":c[2]||(c[2]=u=>z.value=u),label:"Skip Detected"},null,8,["modelValue"])]),_.value?($e(),jt("div",Ln,[O(_l,{size:"25px",value:S.value,color:"orange"},{default:N(()=>[R("div",zn,[O(oa,{color:"white","text-color":"black",label:V.value},null,8,["label"])])]),_:1},8,["value"])])):ea("",!0)])]),R("div",jn,[O(ln,{title:"Images",color:"black","table-header-style":"background:#f5f5f5;",rows:h.value,columns:o,"row-key":"name"},{"top-right":N(()=>[O(ua,{unelevated:"",color:"black",label:"Action"},{default:N(()=>[O(Cl,null,{default:N(()=>[Je(($e(),gt(wt,{clickable:"",onClick:Ne},{default:N(()=>[O(St,null,{default:N(()=>[O(yt,null,{default:N(()=>[ke("Add local files")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:k},{default:N(()=>[O(St,null,{default:N(()=>[O(yt,null,{default:N(()=>[ke("Clear")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:he},{default:N(()=>[O(St,null,{default:N(()=>[O(yt,null,{default:N(()=>[ke("Convert detected results to ground truth")]),_:1})]),_:1})]),_:1})),[[ut]]),Je(($e(),gt(wt,{clickable:"",onClick:M},{default:N(()=>[O(St,null,{default:N(()=>[O(yt,null,{default:N(()=>[ke("Go to live scanner")]),_:1})]),_:1})]),_:1})),[[ut]])]),_:1})]),_:1})]),body:N(u=>[O(pa,{props:u},{default:N(()=>[O(Qe,{key:"number",props:u},{default:N(()=>[ke(ve(u.row.number),1)]),_:2},1032,["props"]),O(Qe,{key:"name",props:u,onClick:F=>D(u.row.filename)},{default:N(()=>[R("div",Nn,ve(u.row.filename),1)]),_:2},1032,["props","onClick"]),O(Qe,{key:"detectedText",props:u},{default:N(()=>[R("div",Mn,ve(u.row.detectedText),1)]),_:2},1032,["props"]),O(Qe,{key:"groundTruth",props:u},{default:N(()=>[R("div",En,ve(u.row.groundTruth),1)]),_:2},1032,["props"]),O(Qe,{key:"barcodeFormat",props:u},{default:N(()=>[R("div",Dn,ve(u.row.barcodeFormat),1)]),_:2},1032,["props"]),O(Qe,{key:"time",props:u},{default:N(()=>[ke(ve(u.row.time),1)]),_:2},1032,["props"]),O(Qe,{key:"correct",props:u},{default:N(()=>[ke(ve(u.row.correct),1)]),_:2},1032,["props"]),O(Qe,{key:"misdetected",props:u},{default:N(()=>[ke(ve(u.row.misdetected),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])])]),R("div",Hn,[O(Pt,{modelValue:q.value,"onUpdate:modelValue":c[7]||(c[7]=u=>q.value=u)},{default:N(()=>[O(Mt,null,{default:N(()=>[O(it,null,{default:N(()=>[$n]),_:1}),O(it,{class:"q-pt-none"},{default:N(()=>[R("div",null,[R("input",{type:"file",id:"imageFiles",multiple:"true",onChange:c[3]||(c[3]=u=>{fe(u)}),accept:".jpg,.jpeg,.png,.bmp"},null,32),Qn]),R("div",null,[R("input",{type:"file",id:"detectionResultFiles",multiple:"true",onChange:c[4]||(c[4]=u=>{me(u)}),accept:".json"},null,32),Un]),R("div",null,[R("input",{type:"file",id:"groundTruthFiles",multiple:"true",onChange:c[5]||(c[5]=u=>{Be(u)}),accept:".txt"},null,32),Wn]),R("div",null,[R("input",{type:"file",id:"zipFile",onChange:c[6]||(c[6]=u=>{Ie(u)}),accept:".zip"},null,32),Kn])]),_:1}),O(nl,{align:"right"},{default:N(()=>[O(ze,{flat:"",color:"primary",label:"Add to project",onClick:je}),Je(O(ze,{flat:"",color:"primary",label:"Close"},null,512),[[ut]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:n.value,"onUpdate:modelValue":c[8]||(c[8]=u=>n.value=u)},{default:N(()=>[O(Mt,null,{default:N(()=>[O(it,null,{default:N(()=>[Jn]),_:1}),O(it,{class:"q-pt-none"},{default:N(()=>[R("div",null,[O(ze,{outline:"",color:"primary",label:"Download images",onClick:P})]),R("div",null,[O(ze,{outline:"",color:"primary",label:"Download images in a zip",onClick:L})]),R("div",null,[O(ze,{outline:"",color:"primary",label:"Download TextResults.zip",onClick:Z})])]),_:1}),O(nl,{align:"right"},{default:N(()=>[Je(O(ze,{flat:"",color:"primary",label:"Close"},null,512),[[ut]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Pt,{modelValue:y.value,"onUpdate:modelValue":c[9]||(c[9]=u=>y.value=u),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:N(()=>[O(Mt,{style:{width:"300px"}},{default:N(()=>[O(it,null,{default:N(()=>[Gn]),_:1}),O(it,{class:"q-pt-none"},{default:N(()=>[ke(" Please wait for a while. ")]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{go as default};
