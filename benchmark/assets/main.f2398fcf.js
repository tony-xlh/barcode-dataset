var L=Object.defineProperty;var T=(t,e,n)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var y=(t,e,n)=>(T(t,typeof e!="symbol"?e+"":e,n),n);import{n as A,b as $}from"./index.69890ff2.js";var E=/^(GTM|G)-[0-9A-Z]+$/;function b(t){if(typeof t!="string"||!E.test(t)){let e=String(t).toUpperCase().replace(/.*-|[^0-9A-Z]/g,""),n=e.length===0?"":` Did you mean 'GTM-${e}' or 'G-${e}'?`;throw new Error(`'${t}' is not a valid GTM-ID (${E}).${n}`)}}function f(t,e="dataLayer"){return t[e]||(t[e]=[]),t[e]}function u(t,e){var c,m,p,h;let n=document,a=n.createElement("script"),r=w=>{var g;(g=e.onReady)==null||g.call(e,{id:t,script:a}),a.removeEventListener("load",r)};a.addEventListener("load",r);let d=(c=e.dataLayerName)!=null?c:"dataLayer";if(f(window,d).push({event:"gtm.js","gtm.start":new Date().getTime()}),!t)return a;a.async=!e.defer,a.defer=!!(e.defer||e.compatibility),e.nonce&&a.setAttribute("nonce",e.nonce),e.scriptType&&(a.type=e.scriptType);let i=new URLSearchParams({id:t,...e.dataLayerName?{l:e.dataLayerName}:{},...(m=e.queryParams)!=null?m:{}}),l=(p=e.source)!=null?p:"https://www.googletagmanager.com/gtm.js";a.src=`${l}?${i}`;let s=(h=e.parentElement)!=null?h:n.body;if(typeof(s==null?void 0:s.appendChild)!="function")throw new Error("parentElement must be a DOM element");return s.appendChild(a),a}function k(t="https://www.googletagmanager.com/gtm.js"){return Array.from(document.getElementsByTagName("script")).some(e=>e.src.includes(t))}var P=class{constructor(t){y(this,"id");y(this,"options");y(this,"scriptElements",[]);y(this,"isInBrowserContext",()=>typeof window<"u");if(Array.isArray(t.id))for(let e of t.id)b(typeof e=="string"?e:e.id);else b(t.id);this.id=t.id,this.options={enabled:!0,debug:!1,loadScript:!0,defer:!1,compatibility:!1,dataLayerName:"dataLayer",...t},delete this.options.id}enabled(){var t;return(t=this.options.enabled)!=null?t:!0}enable(t=!0,e){if(this.options.enabled=t,this.isInBrowserContext()&&t&&!k(e)&&this.options.loadScript)if(Array.isArray(this.id))this.id.forEach(n=>{let a;typeof n=="string"?a=u(n,{...this.options}):a=u(n.id,{...this.options,queryParams:n.queryParams}),this.scriptElements.push(a)});else{let n=u(this.id,{...this.options});this.scriptElements.push(n)}}debugEnabled(){var t;return(t=this.options.debug)!=null?t:!1}debug(t){this.options.debug=t}dataLayer(){return this.isInBrowserContext()&&this.options.enabled?f(window,this.options.dataLayerName):!1}trackView(t,e,n={}){var r,d;let a=this.isInBrowserContext()&&((r=this.options.enabled)!=null?r:!1);this.options.debug&&console.log(`[GTM-Support${a?"":"(disabled)"}]: Dispatching TrackView`,{screenName:t,path:e}),a&&f(window,this.options.dataLayerName).push({...n,event:(d=this.options.trackViewEventProperty)!=null?d:"content-view","content-name":e,"content-view-name":t})}trackEvent({event:t,category:e=null,action:n=null,label:a=null,value:r=null,noninteraction:d=!1,...i}={}){var s;let l=this.isInBrowserContext()&&((s=this.options.enabled)!=null?s:!1);this.options.debug&&console.log(`[GTM-Support${l?"":"(disabled)"}]: Dispatching event`,{event:t,category:e,action:n,label:a,value:r,...i}),l&&f(window,this.options.dataLayerName).push({event:t!=null?t:"interaction",target:e,action:n,"target-properties":a,value:r,"interaction-type":d,...i})}push(t){var n;let e=this.isInBrowserContext()&&((n=this.options.enabled)!=null?n:!1);this.options.debug&&console.log(`[GTM-Support${e?"":"(disabled)"}]: Dispatching event`,t),e&&f(window,this.options.dataLayerName).push(t)}},o;function N(t,e={id:""}){e={trackOnNextTick:!1,...e},o=new P(e),t.config.globalProperties.$gtm=o,o.isInBrowserContext()&&(e.vueRouter&&x(t,e.vueRouter,e.ignoredViews,e.trackOnNextTick,e.vueRouterAdditionalEventData),o.options.enabled&&o.options.loadScript&&(Array.isArray(e.id)?e.id.forEach(n=>{if(typeof n=="string")u(n,e);else{let a={...e};n.queryParams!=null&&(a.queryParams={...a.queryParams,...n.queryParams}),u(n.id,a)}}):u(e.id,e))),t.provide("gtm",e)}function x(t,e,n=[],a,r=()=>({})){function d(i,l){return i instanceof Error?!!(i.type&l):!1}e.afterEach(async(i,l,s)=>{var h,w,g,v;if(typeof i.name!="string"||Array.isArray(n)&&n.includes(i.name)||typeof n=="function"&&n(i,l))return;let c=i.meta&&typeof i.meta.gtm=="string"&&i.meta.gtm?i.meta.gtm:i.name;d(s,4)?o!=null&&o.debugEnabled()&&console.log(`[VueGtm]: '${c}' not tracked due to navigation aborted`):d(s,8)&&(o==null?void 0:o.debugEnabled())&&console.log(`[VueGtm]: '${c}' not tracked due to navigation cancelled`);let m={...await r(i,l),...(h=i.meta)==null?void 0:h.gtmAdditionalEventData},p=(v=(g=(w=e.options)==null?void 0:w.history)==null?void 0:g.base)!=null?v:"";p.endsWith("/")||(p+="/"),p+=i.fullPath.startsWith("/")?i.fullPath.substring(1):i.fullPath,a?A(()=>{o==null||o.trackView(c,p,m)}):o==null||o.trackView(c,p,m)})}function G(t){return{install:e=>N(e,t)}}var S=$(async({app:t,router:e,store:n})=>{t.use(G({id:"GTM-538F83",enabled:!0,loadScript:!0,vueRouter:e}))});export{S as default};
