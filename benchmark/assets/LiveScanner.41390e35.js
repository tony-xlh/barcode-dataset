import{_ as P,s as j,r,u as F,d as M,v as h,J as I,A as s,E as T,ae as V,L as O,M as q,z as A,N as S,a6 as J,B as G,C as H}from"./index.c9d13e01.js";import{b as K,x as w,D as Q,i as W}from"./DynamsoftButton.fc334862.js";const X=u=>(G("data-v-1661c742"),u=u(),H(),u),Y={class:"q-pa-md",style:{width:"100%"}},Z=X(()=>s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1)),$={class:"row",style:{"padding-bottom":"20px"}},ee=["value"],te={style:{"padding-left":"10px"}},ae={id:"results"},ne=j({__name:"LiveScanner",setup(u){const i=r(""),f=r([]),C=F(),l=r(""),d=r(!1),v=r(),E=r("");let p=!1,c,n,m;M(async()=>{E.value=C.currentRoute.value.params.name;const a=await K(C.currentRoute.value.params.name);f.value=a,i.value=a[0].displayName,U()});const N=async a=>{var t;let e=(t=g(a))==null?void 0:t.settings;if(e){if(i.value==="Dynamsoft"){let o=!1;for(let _=0;_<e.length;_++){const x=e[_];x.name==="template"&&x.value&&(o=!0)}o===!1&&e.push({name:"template",value:"speed"})}console.log(e),await c.setSupportedSettings(e)}},g=a=>{let e;a?e=a:e=i.value;for(const t of f.value)if(t.displayName===e)return t},b=async()=>{if(y(),n){n.isOpen()===!1?(l.value="Starting...",await n.open(!0),d.value=!0,l.value=""):(n.close(!0),d.value=!1);return}d.value=!1},L=async()=>{await B(i.value),R()},U=async()=>{var a;l.value="Initializing Camera...",w.defaultUIElementURL="https://cdn.jsdelivr.net/npm/dynamsoft-camera-enhancer@3.3.4/dist/dce.ui.html",n=await w.createInstance(),n.on("played",L),await n.setUIElement(w.defaultUIElementURL),(a=document.getElementById("enhancerUIContainer"))==null||a.appendChild(n.getUIElement()),document.getElementsByClassName("dce-btn-close")[0].remove(),l.value=""},R=async()=>{y(),m=setInterval(D,200)},y=()=>{clearInterval(m),p=!1},B=async a=>{const e=g(a);if(e){let t=!1;c?c.getEngine()!=e.engine&&(t=!0):t=!0,t&&(l.value="Initializing Barcode Reader...",c=await W.createInstance(e.engine),l.value=""),await N(a)}},D=async()=>{const a=g();if(n&&p===!1&&a){p=!0;try{const e=n.getFrame(),t=await c.detect(e);l.value=t.elapsedTime+"ms",c.getEngine()===a.engine&&z(t),p=!1}catch(e){alert(e)}}},z=a=>{if(a.results.length>0){let e="";for(let t=0;t<a.results.length;t++){const o=a.results[t];e=e+(t+1)+". "+o.barcodeFormat+": "+o.barcodeText,o.confidence&&(e=e+", confidence: "+o.confidence),e=e+`
`}v.value=e}},k=async a=>{console.log(a),m&&n.isOpen()&&(await B(a),y(),R()),v.value=""};return(a,e)=>(h(),I("div",Y,[Z,s("div",$,[T(s("select",{"onUpdate:modelValue":[e[0]||(e[0]=t=>k(t)),e[1]||(e[1]=t=>i.value=t)],style:{"min-width":"200px"}},[(h(!0),I(O,null,q(f.value,t=>(h(),I("option",{value:t.displayName,key:t.displayName},S(t.displayName),9,ee))),128))],512),[[V,i.value]])]),s("div",null,[A(Q,{label:d.value?"Stop Scanning":"Start Scanning",onClick:b},null,8,["label"]),s("span",te,S(l.value),1)]),s("div",ae,[s("pre",null,""+S(v.value)+`
      `,1)]),s("div",null,[s("div",{id:"enhancerUIContainer",style:{width:"100%",height:"500px"},class:J(d.value?"":"hidden")},null,2)])]))}});var oe=P(ne,[["__scopeId","data-v-1661c742"]]);export{oe as default};
