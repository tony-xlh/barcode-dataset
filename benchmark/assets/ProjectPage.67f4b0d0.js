import{e as hl,c as ze,f as bl,g as Sl,h as _t,a as El,Q as ot,b as yl,i as Dl}from"./QIcon.5c14e93f.js";import{c as g,h as d,g as je,n as jl,r as U,w as me,a2 as Hl,a6 as Qt,W as wl,a4 as _l,a as Ot,b as Be,o as Kt,l as Zt,J as Ke,a3 as $l,a7 as Ul,K as Nt,a8 as ft,D as Ql,G as lt,M as Kl,V as el,a9 as $t,aa as tl,ab as Wl,ac as Jl,N as mt,q as Gl,u as Xl,t as qe,v as at,x as z,B as p,R as ie,y as F,S as _e,I as Oe,ad as Yl,O as gt,Q as ll,P as al,U as nl,ae as Zl}from"./index.493419e0.js";import{R as ea,b as ta,Q as Se}from"./QBtn.8f973e85.js";import{Q as Pt,u as la}from"./use-meta.dea2c048.js";import{u as Wt,a as Cl,c as kl,b as xl,f as ol,d as aa,Q as pl,e as na,J as il}from"./jszip.min.407ec745.js";import{Q as ql,a as oa,b as St,c as yt,d as wt,e as ia,f as ua}from"./QSeparator.1c1e03aa.js";import{Q as ra}from"./QMarkupTable.bbb49b9b.js";import{g as sa}from"./scroll.ed56f1fc.js";import{b as Rl,c as Vl,u as ca,a as da}from"./use-form.dd730e96.js";import{Q as Ft,o as Et,q as nt,t as Dt,C as Ee}from"./ClosePopup.ad6f063a.js";import{Q as va}from"./QPage.6b2f488f.js";import{l as te,d as fa,a as ul,D as jt,g as Qe,e as rl,f as ma,r as ga,s as ha,h as sl,i as ba,C as Sa}from"./DynamsoftButton.cf12ac73.js";const ya={...hl,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean};function wa(e,l,a){return a<=l?l:Math.min(a,Math.max(l,e))}function cl(e,l,a){if(a<=l)return l;const c=a-l+1;let f=l+(e-l)%c;return f<l&&(f=c+f),f===0?0:f}const Ut=50,Pl=2*Ut,Fl=Pl*Math.PI,_a=Math.round(Fl*1e3)/1e3;var dl=ze({name:"QCircularProgress",props:{...ya,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:l}){const{proxy:{$q:a}}=je(),c=bl(e),f=g(()=>{const R=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-R}deg)`:`rotate3d(0, 0, 1, ${R-90}deg)`}}),r=g(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),v=g(()=>Pl/(1-e.thickness/2)),u=g(()=>`${v.value/2} ${v.value/2} ${v.value} ${v.value}`),s=g(()=>wa(e.value,e.min,e.max)),q=g(()=>Fl*(1-(s.value-e.min)/(e.max-e.min))),o=g(()=>e.thickness/2*v.value);function S({thickness:R,offset:_,color:A,cls:V,rounded:y}){return d("circle",{class:"q-circular-progress__"+V+(A!==void 0?` text-${A}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":R,"stroke-dasharray":_a,"stroke-dashoffset":_,"stroke-linecap":y,cx:v.value,cy:v.value,r:Ut})}return()=>{const R=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&R.push(d("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Ut-o.value/2,cx:v.value,cy:v.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&R.push(S({cls:"track",thickness:o.value,offset:0,color:e.trackColor})),R.push(S({cls:"circle",thickness:o.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const _=[d("svg",{class:"q-circular-progress__svg",style:f.value,viewBox:u.value,"aria-hidden":"true"},R)];return e.showValue===!0&&_.push(d("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},l.default!==void 0?l.default():[d("div",s.value)])),d("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:c.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:s.value},Sl(l.internal,_))}}}),De=ze({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const a=je(),c=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:c.value},_t(l.default));const f=a.vnode.key,r=(e.props.colsMap!==void 0?e.props.colsMap[f]:null)||e.props.col;if(r===void 0)return;const{row:v}=e.props;return d("td",{class:c.value+r.__tdClass(v),style:r.__tdStyle(v)},_t(l.default))}}}),Ca=ze({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const a=g(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>d("tr",{class:a.value},_t(l.default))}}),ka=ze({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const c=je(),{proxy:{$q:f}}=c,r=v=>{a("click",v)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:r},_t(l.default));let v,u;const s=c.vnode.key;if(s){if(v=e.props.colsMap[s],v===void 0)return}else v=e.props.col;if(v.sortable===!0){const o=v.align==="right"?"unshift":"push";u=El(l.default,[]),u[o](d(ot,{class:v.__iconClass,name:f.iconSet.table.arrowUp}))}else u=_t(l.default);const q={class:v.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:v.headerStyle,onClick:o=>{v.sortable===!0&&e.props.sort(v),r(o)}};return d("th",q,u)}}});function Tl(e,l){return d("div",e,[d("table",{class:"q-table"},l)])}let Tt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Tt=e.scrollLeft>=0,e.remove()}const Re=1e3,xa=["start","center","end","start-force","center-force","end-force"],Ol=Array.prototype.filter,pa=window.getComputedStyle(document.body).overflowAnchor===void 0?jl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Ol.call(a,f=>f.dataset&&f.dataset.qVsAnchor!==void 0).forEach(f=>{delete f.dataset.qVsAnchor});const c=a[l];c&&c.dataset&&(c.dataset.qVsAnchor="")}))};function it(e,l){return e+l}function Ht(e,l,a,c,f,r,v,u){const s=e===window?document.scrollingElement||document.documentElement:e,q=f===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-v-u,scrollMaxSize:0,offsetStart:-v,offsetEnd:-u};if(f===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=s.scrollLeft,o.scrollViewSize+=s.clientWidth),o.scrollMaxSize=s.scrollWidth,r===!0&&(o.scrollStart=(Tt===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=s.scrollTop,o.scrollViewSize+=s.clientHeight),o.scrollMaxSize=s.scrollHeight),a!==null)for(let S=a.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=S[q]);if(c!==null)for(let S=c.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=S[q]);if(l!==e){const S=s.getBoundingClientRect(),R=l.getBoundingClientRect();f===!0?(o.offsetStart+=R.left-S.left,o.offsetEnd-=R.width):(o.offsetStart+=R.top-S.top,o.offsetEnd-=R.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function vl(e,l,a,c){l==="end"&&(l=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(c===!0&&(l=(Tt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):a===!0?(c===!0&&(l=(Tt===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function ht(e,l,a,c){if(a>=c)return 0;const f=l.length,r=Math.floor(a/Re),v=Math.floor((c-1)/Re)+1;let u=e.slice(r,v).reduce(it,0);return a%Re!==0&&(u-=l.slice(r*Re,a).reduce(it,0)),c%Re!==0&&c!==f&&(u-=l.slice(c,v*Re).reduce(it,0)),u}const Bl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Al=Object.keys(Bl),Il={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Bl};function Ll({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:a,virtualScrollItemSizeComputed:c}){const f=je(),{props:r,emit:v,proxy:u}=f,{$q:s}=u;let q,o,S,R=[],_;const A=U(0),V=U(0),y=U({}),D=U(null),Q=U(null),X=U(null),M=U({from:0,to:0}),H=g(()=>r.tableColspan!==void 0?r.tableColspan:100);c===void 0&&(c=g(()=>r.virtualScrollItemSize));const ne=g(()=>c.value+";"+r.virtualScrollHorizontal),ge=g(()=>ne.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);me(ge,()=>{he()}),me(ne,ye);function ye(){we(o,!0)}function Ve(h){we(h===void 0?o:h)}function se(h,P){const L=l();if(L==null||L.nodeType===8)return;const J=Ht(L,a(),D.value,Q.value,r.virtualScrollHorizontal,s.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);S!==J.scrollViewSize&&he(J.scrollViewSize),Pe(L,J,Math.min(e.value-1,Math.max(0,parseInt(h,10)||0)),0,xa.indexOf(P)>-1?P:o>-1&&h>o?"end":"start")}function ue(){const h=l();if(h==null||h.nodeType===8)return;const P=Ht(h,a(),D.value,Q.value,r.virtualScrollHorizontal,s.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),L=e.value-1,J=P.scrollMaxSize-P.offsetStart-P.offsetEnd-V.value;if(q===P.scrollStart)return;if(P.scrollMaxSize<=0){Pe(h,P,0,0);return}S!==P.scrollViewSize&&he(P.scrollViewSize),Ce(M.value.from);const le=Math.floor(P.scrollMaxSize-Math.max(P.scrollViewSize,P.offsetEnd)-Math.min(_[L],P.scrollViewSize/2));if(le>0&&Math.ceil(P.scrollStart)>=le){Pe(h,P,L,P.scrollMaxSize-P.offsetEnd-R.reduce(it,0));return}let j=0,I=P.scrollStart-P.offsetStart,Z=I;if(I<=J&&I+P.scrollViewSize>=A.value)I-=A.value,j=M.value.from,Z=I;else for(let E=0;I>=R[E]&&j<L;E++)I-=R[E],j+=Re;for(;I>0&&j<L;)I-=_[j],I>-P.scrollViewSize?(j++,Z=I):Z=_[j]+I;Pe(h,P,j,Z)}function Pe(h,P,L,J,le){const j=typeof le=="string"&&le.indexOf("-force")>-1,I=j===!0?le.replace("-force",""):le,Z=I!==void 0?I:"start";let E=Math.max(0,L-y.value[Z]),oe=E+y.value.total;oe>e.value&&(oe=e.value,E=Math.max(0,oe-y.value.total)),q=P.scrollStart;const b=E!==M.value.from||oe!==M.value.to;if(b===!1&&I===void 0){Ie(L);return}const{activeElement:m}=document,i=X.value;b===!0&&i!==null&&i!==m&&i.contains(m)===!0&&(i.addEventListener("focusout",Ae),setTimeout(()=>{i!==null&&i.removeEventListener("focusout",Ae)})),pa(i,L-E);const O=I!==void 0?_.slice(E,L).reduce(it,0):0;if(b===!0){const K=oe>=M.value.from&&E<=M.value.to?M.value.to:oe;M.value={from:E,to:K},A.value=ht(R,_,0,E),V.value=ht(R,_,oe,e.value),requestAnimationFrame(()=>{M.value.to!==oe&&q===P.scrollStart&&(M.value={from:M.value.from,to:oe},V.value=ht(R,_,oe,e.value))})}requestAnimationFrame(()=>{if(q!==P.scrollStart)return;b===!0&&Ce(E);const K=_.slice(E,L).reduce(it,0),re=K+P.offsetStart+A.value,ke=re+_[L];let He=re+J;if(I!==void 0){const ut=K-O,ce=P.scrollStart+ut;He=j!==!0&&ce<re&&ke<ce+P.scrollViewSize?ce:I==="end"?ke-P.scrollViewSize:re-(I==="start"?0:Math.round((P.scrollViewSize-_[L])/2))}q=He,vl(h,He,r.virtualScrollHorizontal,s.lang.rtl),Ie(L)})}function Ce(h){const P=X.value;if(P){const L=Ol.call(P.children,E=>E.classList&&E.classList.contains("q-virtual-scroll--skip")===!1),J=L.length,le=r.virtualScrollHorizontal===!0?E=>E.getBoundingClientRect().width:E=>E.offsetHeight;let j=h,I,Z;for(let E=0;E<J;){for(I=le(L[E]),E++;E<J&&L[E].classList.contains("q-virtual-scroll--with-prev")===!0;)I+=le(L[E]),E++;Z=I-_[j],Z!==0&&(_[j]+=Z,R[Math.floor(j/Re)]+=Z),j++}}}function Ae(){X.value!==null&&X.value!==void 0&&X.value.focus()}function we(h,P){const L=1*c.value;(P===!0||Array.isArray(_)===!1)&&(_=[]);const J=_.length;_.length=e.value;for(let j=e.value-1;j>=J;j--)_[j]=L;const le=Math.floor((e.value-1)/Re);R=[];for(let j=0;j<=le;j++){let I=0;const Z=Math.min((j+1)*Re,e.value);for(let E=j*Re;E<Z;E++)I+=_[E];R.push(I)}o=-1,q=void 0,A.value=ht(R,_,0,M.value.from),V.value=ht(R,_,M.value.to,e.value),h>=0?(Ce(M.value.from),Be(()=>{se(h)})):be()}function he(h){if(h===void 0&&typeof window!="undefined"){const I=l();I!=null&&I.nodeType!==8&&(h=Ht(I,a(),D.value,Q.value,r.virtualScrollHorizontal,s.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}S=h;const P=parseFloat(r.virtualScrollSliceRatioBefore)||0,L=parseFloat(r.virtualScrollSliceRatioAfter)||0,J=1+P+L,le=h===void 0||h<=0?1:Math.ceil(h/c.value),j=Math.max(1,le,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/J));y.value={total:Math.ceil(j*J),start:Math.ceil(j*P),center:Math.ceil(j*(.5+P)),end:Math.ceil(j*(1+P)),view:le}}function Fe(h,P){const L=r.virtualScrollHorizontal===!0?"width":"height",J={["--q-virtual-scroll-item-"+L]:c.value+"px"};return[h==="tbody"?d(h,{class:"q-virtual-scroll__padding",key:"before",ref:D},[d("tr",[d("td",{style:{[L]:`${A.value}px`,...J},colspan:H.value})])]):d(h,{class:"q-virtual-scroll__padding",key:"before",ref:D,style:{[L]:`${A.value}px`,...J}}),d(h,{class:"q-virtual-scroll__content",key:"content",ref:X,tabindex:-1},P.flat()),h==="tbody"?d(h,{class:"q-virtual-scroll__padding",key:"after",ref:Q},[d("tr",[d("td",{style:{[L]:`${V.value}px`,...J},colspan:H.value})])]):d(h,{class:"q-virtual-scroll__padding",key:"after",ref:Q,style:{[L]:`${V.value}px`,...J}})]}function Ie(h){o!==h&&(r.onVirtualScroll!==void 0&&v("virtualScroll",{index:h,from:M.value.from,to:M.value.to-1,direction:h<o?"decrease":"increase",ref:u}),o=h)}he();const be=Hl(ue,s.platform.is.ios===!0?120:35);Qt(()=>{he()});let x=!1;return wl(()=>{x=!0}),_l(()=>{if(x!==!0)return;const h=l();q!==void 0&&h!==void 0&&h!==null&&h.nodeType!==8?vl(h,q,r.virtualScrollHorizontal,s.lang.rtl):se(o)}),Ot(()=>{be.cancel()}),Object.assign(u,{scrollTo:se,reset:ye,refresh:Ve}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:he,onVirtualScrollEvt:be,localResetVirtualScroll:we,padVirtualScroll:Fe,scrollTo:se,reset:ye,refresh:Ve}}const qa={list:ql,table:ra},Ra=["list","table","__qtable"];var Va=ze({name:"QVirtualScroll",props:{...Il,type:{type:String,default:"list",validator:e=>Ra.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:a}){let c;const f=U(null),r=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:v,localResetVirtualScroll:u,padVirtualScroll:s,onVirtualScrollEvt:q}=Ll({virtualScrollLength:r,getVirtualScrollTarget:A,getVirtualScrollEl:_}),o=g(()=>{if(r.value===0)return[];const Q=(X,M)=>({index:v.value.from+M,item:X});return e.itemsFn===void 0?e.items.slice(v.value.from,v.value.to).map(Q):e.itemsFn(v.value.from,v.value.to-v.value.from).map(Q)}),S=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),R=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});me(r,()=>{u()}),me(()=>e.scrollTarget,()=>{y(),V()});function _(){return f.value.$el||f.value}function A(){return c}function V(){c=sa(_(),e.scrollTarget),c.addEventListener("scroll",q,Zt.passive)}function y(){c!==void 0&&(c.removeEventListener("scroll",q,Zt.passive),c=void 0)}function D(){let Q=s(e.type==="list"?"div":"tbody",o.value.map(l.default));return l.before!==void 0&&(Q=l.before().concat(Q)),yl(l.after,Q)}return Qt(()=>{u()}),Kt(()=>{V()}),_l(()=>{V()}),wl(()=>{y()}),Ot(()=>{y()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Tl({ref:f,class:"q-table__middle "+S.value},D()):d(qa[e.type],{...a,ref:f,class:[a.class,S.value],...R.value},D)}}}),Pa=ze({name:"QField",inheritAttrs:!1,props:Wt,emits:Cl,setup(){return kl(xl())}});const Fa={xs:8,sm:10,md:14,lg:20,xl:24};var Ta=ze({name:"QChip",props:{...Rl,...hl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:a}){const{proxy:{$q:c}}=je(),f=Vl(e,c),r=bl(e,Fa),v=g(()=>e.selected===!0||e.icon!==void 0),u=g(()=>e.selected===!0?e.iconSelected||c.iconSet.chip.selected:e.icon),s=g(()=>e.iconRemove||c.iconSet.chip.remove),q=g(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),o=g(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(f.value===!0?" q-chip--dark q-dark":"")}),S=g(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},D={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||c.lang.label.remove};return{chip:y,remove:D}});function R(y){y.keyCode===13&&_(y)}function _(y){e.disable||(a("update:selected",!e.selected),a("click",y))}function A(y){(y.keyCode===void 0||y.keyCode===13)&&(Ke(y),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function V(){const y=[];q.value===!0&&y.push(d("div",{class:"q-focus-helper"})),v.value===!0&&y.push(d(ot,{class:"q-chip__icon q-chip__icon--left",name:u.value}));const D=e.label!==void 0?[d("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(d("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Sl(l.default,D))),e.iconRight&&y.push(d(ot,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(d(ot,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:s.value,...S.value.remove,onClick:A,onKeyup:A})),y}return()=>{if(e.modelValue===!1)return;const y={class:o.value,style:r.value};return q.value===!0&&Object.assign(y,S.value.chip,{onClick:_,onKeyup:R}),Dl("div",y,V(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ea,e.ripple]])}}});const fl=e=>["add","add-unique","toggle"].includes(e),Oa=".*+?^${}()|[]\\",Ba=Object.keys(Wt);var Aa=ze({name:"QSelect",inheritAttrs:!1,props:{...Il,...ca,...Wt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:fl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Cl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:a}){const{proxy:c}=je(),{$q:f}=c,r=U(!1),v=U(!1),u=U(-1),s=U(""),q=U(!1),o=U(!1);let S=null,R,_,A,V=null,y,D,Q,X;const M=U(null),H=U(null),ne=U(null),ge=U(null),ye=U(null),Ve=da(e),se=aa(n),ue=g(()=>Array.isArray(e.options)?e.options.length:0),Pe=g(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ce,virtualScrollSliceSizeComputed:Ae,localResetVirtualScroll:we,padVirtualScroll:he,onVirtualScrollEvt:Fe,scrollTo:Ie,setVirtualScrollSize:be}=Ll({virtualScrollLength:ue,getVirtualScrollTarget:Bt,getVirtualScrollEl:qt,virtualScrollItemSizeComputed:Pe}),x=xl(),h=g(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,k=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const w=e.mapOptions===!0&&R!==void 0?R:[],N=k.map(G=>Ne(G,w));return e.modelValue===null&&t===!0?N.filter(G=>G!==null):N}return k}),P=g(()=>{const t={};return Ba.forEach(k=>{const w=e[k];w!==void 0&&(t[k]=w)}),t}),L=g(()=>e.optionsDark===null?x.isDark.value:e.optionsDark),J=g(()=>ol(h.value)),le=g(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||h.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),j=g(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),I=g(()=>ue.value===0),Z=g(()=>h.value.map(t=>ve.value(t)).join(", ")),E=g(()=>e.displayValue!==void 0?e.displayValue:Z.value),oe=g(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),b=g(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||h.value.some(oe.value))),m=g(()=>x.focused.value===!0?e.tabindex:-1),i=g(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${x.targetUid.value}_lb`};return u.value>=0&&(t["aria-activedescendant"]=`${x.targetUid.value}_${u.value}`),t}),O=g(()=>({id:`${x.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),K=g(()=>h.value.map((t,k)=>({index:k,opt:t,html:oe.value(t),selected:!0,removeAtIndex:kt,toggleOption:Le,tabindex:m.value}))),re=g(()=>{if(ue.value===0)return[];const{from:t,to:k}=Ce.value;return e.options.slice(t,k).map((w,N)=>{const G=Me.value(w)===!0,W=t+N,ae={clickable:!0,active:!1,activeClass:ut.value,manualFocus:!0,focused:!1,disable:G,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option",id:`${x.targetUid.value}_${W}`,onClick:()=>{Le(w)}};return G!==!0&&(Je(w)===!0&&(ae.active=!0),u.value===W&&(ae.focused=!0),ae["aria-selected"]=ae.active===!0?"true":"false",f.platform.is.desktop===!0&&(ae.onMousemove=()=>{r.value===!0&&Te(W)})),{index:W,opt:w,html:oe.value(w),label:ve.value(w),selected:ae.active,focused:ae.focused,toggleOption:Le,setOptionIndex:Te,itemProps:ae}})}),ke=g(()=>e.dropdownIcon!==void 0?e.dropdownIcon:f.iconSet.arrow.dropdown),He=g(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ut=g(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ce=g(()=>ct(e.optionValue,"value")),ve=g(()=>ct(e.optionLabel,"label")),Me=g(()=>ct(e.optionDisable,"disable")),We=g(()=>h.value.map(t=>ce.value(t))),Ct=g(()=>{const t={onInput:n,onChange:se,onKeydown:$e,onKeyup:Ge,onKeypress:vt,onFocus:dt,onClick(k){_===!0&&lt(k)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=se,t});me(h,t=>{R=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&x.innerLoading.value!==!0&&(v.value!==!0&&r.value!==!0||J.value!==!0)&&(A!==!0&&tt(),(v.value===!0||r.value===!0)&&B(""))},{immediate:!0}),me(()=>e.fillInput,tt),me(r,zt),me(ue,Nl);function rt(t){return e.emitValue===!0?ce.value(t):t}function st(t){if(t>-1&&t<h.value.length)if(e.multiple===!0){const k=e.modelValue.slice();a("remove",{index:t,value:k.splice(t,1)[0]}),a("update:modelValue",k)}else a("update:modelValue",null)}function kt(t){st(t),x.focus()}function xt(t,k){const w=rt(t);if(e.multiple!==!0){e.fillInput===!0&&T(ve.value(t),!0,!0),a("update:modelValue",w);return}if(h.value.length===0){a("add",{index:0,value:w}),a("update:modelValue",e.multiple===!0?[w]:w);return}if(k===!0&&Je(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const N=e.modelValue.slice();a("add",{index:N.length,value:w}),N.push(w),a("update:modelValue",N)}function Le(t,k){if(x.editable.value!==!0||t===void 0||Me.value(t)===!0)return;const w=ce.value(t);if(e.multiple!==!0){k!==!0&&(T(e.fillInput===!0?ve.value(t):"",!0,!0),Ue()),H.value!==null&&H.value.focus(),(h.value.length===0||ft(ce.value(h.value[0]),w)!==!0)&&a("update:modelValue",e.emitValue===!0?w:t);return}if((_!==!0||q.value===!0)&&x.focus(),dt(),h.value.length===0){const W=e.emitValue===!0?w:t;a("add",{index:0,value:W}),a("update:modelValue",e.multiple===!0?[W]:W);return}const N=e.modelValue.slice(),G=We.value.findIndex(W=>ft(W,w));if(G>-1)a("remove",{index:G,value:N.splice(G,1)[0]});else{if(e.maxValues!==void 0&&N.length>=e.maxValues)return;const W=e.emitValue===!0?w:t;a("add",{index:N.length,value:W}),N.push(W)}a("update:modelValue",N)}function Te(t){if(f.platform.is.desktop!==!0)return;const k=t>-1&&t<ue.value?t:-1;u.value!==k&&(u.value=k)}function xe(t=1,k){if(r.value===!0){let w=u.value;do w=cl(w+t,-1,ue.value-1);while(w!==-1&&w!==u.value&&Me.value(e.options[w])===!0);u.value!==w&&(Te(w),Ie(w),k!==!0&&e.useInput===!0&&e.fillInput===!0&&C(w>=0?ve.value(e.options[w]):y))}}function Ne(t,k){const w=N=>ft(ce.value(N),t);return e.options.find(w)||k.find(w)||t}function ct(t,k){const w=t!==void 0?t:k;return typeof w=="function"?w:N=>N!==null&&typeof N=="object"&&w in N?N[w]:N}function Je(t){const k=ce.value(t);return We.value.find(w=>ft(w,k))!==void 0}function dt(t){e.useInput===!0&&H.value!==null&&(t===void 0||H.value===t.target&&t.target.value===Z.value)&&H.value.select()}function pt(t){Ql(t,27)===!0&&r.value===!0&&(lt(t),Ue(),tt()),a("keyup",t)}function Ge(t){const{value:k}=t.target;if(t.keyCode!==void 0){pt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),tt(),typeof k=="string"&&k.length>0){const w=k.toLocaleLowerCase(),N=W=>{const ae=e.options.find(fe=>W.value(fe).toLocaleLowerCase()===w);return ae===void 0?!1:(h.value.indexOf(ae)===-1?Le(ae):Ue(),!0)},G=W=>{N(ce)!==!0&&(N(ve)===!0||W===!0||B(k,!0,()=>G(!0)))};G()}else x.clearValue(t)}function vt(t){a("keypress",t)}function $e(t){if(a("keydown",t),Kl(t)===!0)return;const k=s.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),w=t.shiftKey!==!0&&e.multiple!==!0&&(u.value>-1||k===!0);if(t.keyCode===27){Nt(t);return}if(t.keyCode===9&&w===!1){Ze();return}if(t.target===void 0||t.target.id!==x.targetUid.value)return;if(t.keyCode===40&&x.innerLoading.value!==!0&&r.value===!1){Ke(t),et();return}if(t.keyCode===8&&e.hideSelected!==!0&&s.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?st(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof s.value!="string"||s.value.length===0)&&(Ke(t),u.value=-1,xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Ae.value!==void 0&&(Ke(t),u.value=Math.max(-1,Math.min(ue.value,u.value+(t.keyCode===33?-1:1)*Ae.value.view)),xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ke(t),xe(t.keyCode===38?-1:1,e.multiple));const N=ue.value;if((Q===void 0||X<Date.now())&&(Q=""),N>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||Q.length>0)){r.value!==!0&&et(t);const G=t.key.toLocaleLowerCase(),W=Q.length===1&&Q[0]===G;X=Date.now()+1500,W===!1&&(Ke(t),Q+=G);const ae=new RegExp("^"+Q.split("").map(Mt=>Oa.indexOf(Mt)>-1?"\\"+Mt:Mt).join(".*"),"i");let fe=u.value;if(W===!0||fe<0||ae.test(ve.value(e.options[fe]))!==!0)do fe=cl(fe+1,-1,N-1);while(fe!==u.value&&(Me.value(e.options[fe])===!0||ae.test(ve.value(e.options[fe]))!==!0));u.value!==fe&&Be(()=>{Te(fe),Ie(fe),fe>=0&&e.useInput===!0&&e.fillInput===!0&&C(ve.value(e.options[fe]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||Q!=="")&&(t.keyCode!==9||w===!1))){if(t.keyCode!==9&&Ke(t),u.value>-1&&u.value<N){Le(e.options[u.value]);return}if(k===!0){const G=(W,ae)=>{if(ae){if(fl(ae)!==!0)return}else ae=e.newValueMode;if(W==null)return;T("",e.multiple!==!0,!0),(ae==="toggle"?Le:xt)(W,ae==="add-unique"),e.multiple!==!0&&(H.value!==null&&H.value.focus(),Ue())};if(e.onNewValue!==void 0?a("newValue",s.value,G):G(s.value),e.multiple!==!0)return}r.value===!0?Ze():x.innerLoading.value!==!0&&et()}}function qt(){return _===!0?ye.value:ne.value!==null&&ne.value.contentEl!==null?ne.value.contentEl:void 0}function Bt(){return qt()}function At(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?K.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?K.value.map((t,k)=>d(Ta,{key:"option-"+k,removable:x.editable.value===!0&&Me.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:m.value,onRemove(){t.removeAtIndex(k)}},()=>d("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ve.value(t.opt)}))):[d("span",{[b.value===!0?"innerHTML":"textContent"]:E.value})]}function Rt(){if(I.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:s.value}):void 0;const t=l.option!==void 0?l.option:w=>d(wt,{key:w.index,...w.itemProps},()=>d(St,()=>d(yt,()=>d("span",{[w.html===!0?"innerHTML":"textContent"]:w.label}))));let k=he("div",re.value.map(t));return l["before-options"]!==void 0&&(k=l["before-options"]().concat(k)),yl(l["after-options"],k)}function It(t,k){const w=k===!0?{...i.value,...x.splitAttrs.attributes.value}:void 0,N={ref:k===!0?H:void 0,key:"i_t",class:le.value,style:e.inputStyle,value:s.value!==void 0?s.value:"",type:"search",...w,id:k===!0?x.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ct.value};return t!==!0&&_===!0&&(Array.isArray(N.class)===!0?N.class=[...N.class,"no-pointer-events"]:N.class+=" no-pointer-events"),d("input",N)}function n(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(C(t.target.value||""),A=!0,y=s.value,x.focused.value!==!0&&(_!==!0||q.value===!0)&&x.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,B(s.value)},e.inputDebounce)))}function C(t){s.value!==t&&(s.value=t,a("inputValue",t))}function T(t,k,w){A=w!==!0,e.useInput===!0&&(C(t),(k===!0||w!==!0)&&(y=t),k!==!0&&B(t))}function B(t,k,w){if(e.onFilter===void 0||k!==!0&&x.focused.value!==!0)return;x.innerLoading.value===!0?a("filterAbort"):(x.innerLoading.value=!0,o.value=!0),t!==""&&e.multiple!==!0&&h.value.length>0&&A!==!0&&t===ve.value(h.value[0])&&(t="");const N=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);V!==null&&clearTimeout(V),V=N,a("filter",t,(G,W)=>{(k===!0||x.focused.value===!0)&&V===N&&(clearTimeout(V),typeof G=="function"&&G(),o.value=!1,Be(()=>{x.innerLoading.value=!1,x.editable.value===!0&&(k===!0?r.value===!0&&Ue():r.value===!0?zt(!0):r.value=!0),typeof W=="function"&&Be(()=>{W(c)}),typeof w=="function"&&Be(()=>{w(c)})}))},()=>{x.focused.value===!0&&V===N&&(clearTimeout(V),x.innerLoading.value=!1,o.value=!1),r.value===!0&&(r.value=!1)})}function $(){return d(oa,{ref:ne,class:j.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&I.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:He.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...O.value,onScrollPassive:Fe,onBeforeShow:Gt,onBeforeHide:ee,onShow:Y},Rt)}function ee(t){Xt(t),Ze()}function Y(){be()}function pe(t){lt(t),H.value!==null&&H.value.focus(),q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function de(t){lt(t),Be(()=>{q.value=!1})}function Xe(){const t=[d(Pa,{class:`col-auto ${x.fieldClass.value}`,...P.value,for:x.targetUid.value,dark:L.value,square:!0,loading:o.value,itemAligned:!1,filled:!0,stackLabel:s.value.length>0,...x.splitAttrs.listeners.value,onFocus:pe,onBlur:de},{...l,rawControl:()=>x.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(d("div",{ref:ye,class:j.value+" scroll",style:e.popupContentStyle,...O.value,onClick:Nt,onScrollPassive:Fe},Rt())),d(Ft,{ref:ge,modelValue:v.value,position:e.useInput===!0?"top":void 0,transitionShow:D,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Gt,onBeforeHide:Ye,onHide:Lt,onShow:Ml},()=>d("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(q.value===!0?" q-select__dialog--focused":"")},t))}function Ye(t){Xt(t),ge.value!==null&&ge.value.__updateRefocusTarget(x.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),x.focused.value=!1}function Lt(t){Ue(),x.focused.value===!1&&a("blur",t),tt()}function Ml(){const t=document.activeElement;(t===null||t.id!==x.targetUid.value)&&H.value!==null&&H.value!==t&&H.value.focus(),be()}function Ze(){v.value!==!0&&(u.value=-1,r.value===!0&&(r.value=!1),x.focused.value===!1&&(V!==null&&(clearTimeout(V),V=null),x.innerLoading.value===!0&&(a("filterAbort"),x.innerLoading.value=!1,o.value=!1)))}function et(t){x.editable.value===!0&&(_===!0?(x.onControlFocusin(t),v.value=!0,Be(()=>{x.focus()})):x.focus(),e.onFilter!==void 0?B(s.value):(I.value!==!0||l["no-option"]!==void 0)&&(r.value=!0))}function Ue(){v.value=!1,Ze()}function tt(){e.useInput===!0&&T(e.multiple!==!0&&e.fillInput===!0&&h.value.length>0&&ve.value(h.value[0])||"",!0,!0)}function zt(t){let k=-1;if(t===!0){if(h.value.length>0){const w=ce.value(h.value[0]);k=e.options.findIndex(N=>ft(ce.value(N),w))}we(k)}Te(k)}function Nl(t,k){r.value===!0&&x.innerLoading.value===!1&&(we(-1,!0),Be(()=>{r.value===!0&&x.innerLoading.value===!1&&(t>k?we():zt(!0))}))}function Jt(){v.value===!1&&ne.value!==null&&ne.value.updatePosition()}function Gt(t){t!==void 0&&lt(t),a("popupShow",t),x.hasPopupOpen=!0,x.onControlFocusin(t)}function Xt(t){t!==void 0&&lt(t),a("popupHide",t),x.hasPopupOpen=!1,x.onControlFocusout(t)}function Yt(){_=f.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||I.value===!1:!0),D=f.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return $l(Yt),Ul(Jt),Yt(),Ot(()=>{S!==null&&clearTimeout(S)}),Object.assign(c,{showPopup:et,hidePopup:Ue,removeAtIndex:st,add:xt,toggleOption:Le,getOptionIndex:()=>u.value,setOptionIndex:Te,moveOptionSelection:xe,filter:B,updateMenuPosition:Jt,updateInputValue:T,isOptionSelected:Je,getEmittingOptionValue:rt,isOptionDisabled:(...t)=>Me.value.apply(null,t)===!0,getOptionValue:(...t)=>ce.value.apply(null,t),getOptionLabel:(...t)=>ve.value.apply(null,t)}),Object.assign(x,{innerValue:h,fieldClass:g(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:M,targetRef:H,hasValue:J,showPopup:et,floatingLabel:g(()=>e.hideSelected!==!0&&J.value===!0||typeof s.value=="number"||s.value.length>0||ol(e.displayValue)),getControlChild:()=>{if(x.editable.value!==!1&&(v.value===!0||I.value!==!0||l["no-option"]!==void 0))return _===!0?Xe():$();x.hasPopupOpen===!0&&(x.hasPopupOpen=!1)},controlEvents:{onFocusin(t){x.onControlFocusin(t)},onFocusout(t){x.onControlFocusout(t,()=>{tt(),Ze()})},onClick(t){if(Nt(t),_!==!0&&r.value===!0){Ze(),H.value!==null&&H.value.focus();return}et(t)}},getControl:t=>{const k=At(),w=t===!0||v.value!==!0||_!==!0;if(e.useInput===!0)k.push(It(t,w));else if(x.editable.value===!0){const G=w===!0?i.value:void 0;k.push(d("input",{ref:w===!0?H:void 0,key:"d_t",class:"q-select__focus-target",id:w===!0?x.targetUid.value:void 0,value:E.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...G,onKeydown:$e,onKeyup:pt,onKeypress:vt})),w===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&k.push(d("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ge}))}if(Ve.value!==void 0&&e.disable!==!0&&We.value.length>0){const G=We.value.map(W=>d("option",{value:W,selected:!0}));k.push(d("select",{class:"hidden",name:Ve.value,multiple:e.multiple},G))}const N=e.useInput===!0||w!==!0?void 0:x.splitAttrs.attributes.value;return d("div",{class:"q-field__native row items-center",...N,...x.splitAttrs.listeners.value},k)},getInnerAppend:()=>e.loading!==!0&&o.value!==!0&&e.hideDropdownIcon!==!0?[d(ot,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:ke.value})]:null}),kl(x)}});let bt=0;const Ia={fullscreen:Boolean,noRouteFullscreenExit:Boolean},La=["update:fullscreen","fullscreen"];function za(){const e=je(),{props:l,emit:a,proxy:c}=e;let f,r,v;const u=U(!1);ta(e)===!0&&me(()=>c.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&o()}),me(()=>l.fullscreen,S=>{u.value!==S&&s()}),me(u,S=>{a("update:fullscreen",S),a("fullscreen",S)});function s(){u.value===!0?o():q()}function q(){u.value!==!0&&(u.value=!0,v=c.$el.parentNode,v.replaceChild(r,c.$el),document.body.appendChild(c.$el),bt++,bt===1&&document.body.classList.add("q-body--fullscreen-mixin"),f={handler:o},el.add(f))}function o(){u.value===!0&&(f!==void 0&&(el.remove(f),f=void 0),v.replaceChild(c.$el,r),u.value=!1,bt=Math.max(0,bt-1),bt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),c.$el.scrollIntoView!==void 0&&setTimeout(()=>{c.$el.scrollIntoView()})))}return Qt(()=>{r=document.createElement("span")}),Kt(()=>{l.fullscreen===!0&&q()}),Ot(o),Object.assign(c,{toggleFullscreen:s,setFullscreen:q,exitFullscreen:o}),{inFullscreen:u,toggleFullscreen:s}}function Ma(e,l){return new Date(e)-new Date(l)}const Na={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ea(e,l,a,c){const f=g(()=>{const{sortBy:u}=l.value;return u&&a.value.find(s=>s.name===u)||null}),r=g(()=>e.sortMethod!==void 0?e.sortMethod:(u,s,q)=>{const o=a.value.find(_=>_.name===s);if(o===void 0||o.field===void 0)return u;const S=q===!0?-1:1,R=typeof o.field=="function"?_=>o.field(_):_=>_[o.field];return u.sort((_,A)=>{let V=R(_),y=R(A);return V==null?-1*S:y==null?1*S:o.sort!==void 0?o.sort(V,y,_,A)*S:$t(V)===!0&&$t(y)===!0?(V-y)*S:tl(V)===!0&&tl(y)===!0?Ma(V,y)*S:typeof V=="boolean"&&typeof y=="boolean"?(V-y)*S:([V,y]=[V,y].map(D=>(D+"").toLocaleString().toLowerCase()),V<y?-1*S:V===y?0:S)})});function v(u){let s=e.columnSortOrder;if(Wl(u)===!0)u.sortOrder&&(s=u.sortOrder),u=u.name;else{const S=a.value.find(R=>R.name===u);S!==void 0&&S.sortOrder&&(s=S.sortOrder)}let{sortBy:q,descending:o}=l.value;q!==u?(q=u,o=s==="da"):e.binaryStateSort===!0?o=!o:o===!0?s==="ad"?q=null:o=!1:s==="ad"?o=!0:q=null,c({sortBy:q,descending:o,page:1})}return{columnToSort:f,computedSortMethod:r,sort:v}}const Da={filter:[String,Object],filterMethod:Function};function ja(e,l){const a=g(()=>e.filterMethod!==void 0?e.filterMethod:(c,f,r,v)=>{const u=f?f.toLowerCase():"";return c.filter(s=>r.some(q=>{const o=v(q,s)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(u)!==-1}))});return me(()=>e.filter,()=>{Be(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function Ha(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function ml(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const $a={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ua(e,l){const{props:a,emit:c}=e,f=U(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length>0?a.rowsPerPageOptions[0]:5},a.pagination)),r=g(()=>{const o=a["onUpdate:pagination"]!==void 0?{...f.value,...a.pagination}:f.value;return ml(o)}),v=g(()=>r.value.rowsNumber!==void 0);function u(o){s({pagination:o,filter:a.filter})}function s(o={}){Be(()=>{c("request",{pagination:o.pagination||r.value,filter:o.filter||a.filter,getCellValue:l})})}function q(o,S){const R=ml({...r.value,...o});if(Ha(r.value,R)===!0){v.value===!0&&S===!0&&u(R);return}if(v.value===!0){u(R);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?c("update:pagination",R):f.value=R}return{innerPagination:f,computedPagination:r,isServerSide:v,requestServerInteraction:s,setPagination:q}}function Qa(e,l,a,c,f,r){const{props:v,emit:u,proxy:{$q:s}}=e,q=g(()=>c.value===!0?a.value.rowsNumber||0:r.value),o=g(()=>{const{page:M,rowsPerPage:H}=a.value;return(M-1)*H}),S=g(()=>{const{page:M,rowsPerPage:H}=a.value;return M*H}),R=g(()=>a.value.page===1),_=g(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/a.value.rowsPerPage))),A=g(()=>S.value===0?!0:a.value.page>=_.value),V=g(()=>(v.rowsPerPageOptions.includes(l.value.rowsPerPage)?v.rowsPerPageOptions:[l.value.rowsPerPage].concat(v.rowsPerPageOptions)).map(H=>({label:H===0?s.lang.table.allRows:""+H,value:H})));me(_,(M,H)=>{if(M===H)return;const ne=a.value.page;M&&!ne?f({page:1}):M<ne&&f({page:M})});function y(){f({page:1})}function D(){const{page:M}=a.value;M>1&&f({page:M-1})}function Q(){const{page:M,rowsPerPage:H}=a.value;S.value>0&&M*H<q.value&&f({page:M+1})}function X(){f({page:_.value})}return v["onUpdate:pagination"]!==void 0&&u("update:pagination",{...a.value}),{firstRowIndex:o,lastRowIndex:S,isFirstPage:R,isLastPage:A,pagesNumber:_,computedRowsPerPageOptions:V,computedRowsNumber:q,firstPage:y,prevPage:D,nextPage:Q,lastPage:X}}const Ka={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Wa=["update:selected","selection"];function Ja(e,l,a,c){const f=g(()=>{const A={};return e.selected.map(c.value).forEach(V=>{A[V]=!0}),A}),r=g(()=>e.selection!=="none"),v=g(()=>e.selection==="single"),u=g(()=>e.selection==="multiple"),s=g(()=>a.value.length>0&&a.value.every(A=>f.value[c.value(A)]===!0)),q=g(()=>s.value!==!0&&a.value.some(A=>f.value[c.value(A)]===!0)),o=g(()=>e.selected.length);function S(A){return f.value[A]===!0}function R(){l("update:selected",[])}function _(A,V,y,D){l("selection",{rows:V,added:y,keys:A,evt:D});const Q=v.value===!0?y===!0?V:[]:y===!0?e.selected.concat(V):e.selected.filter(X=>A.includes(c.value(X))===!1);l("update:selected",Q)}return{hasSelectionMode:r,singleSelection:v,multipleSelection:u,allRowsSelected:s,someRowsSelected:q,rowsSelectedNumber:o,isRowSelected:S,clearSelection:R,updateSelection:_}}function gl(e){return Array.isArray(e)?e.slice():[]}const Ga={expanded:Array},Xa=["update:expanded"];function Ya(e,l){const a=U(gl(e.expanded));me(()=>e.expanded,v=>{a.value=gl(v)});function c(v){return a.value.includes(v)}function f(v){e.expanded!==void 0?l("update:expanded",v):a.value=v}function r(v,u){const s=a.value.slice(),q=s.indexOf(v);u===!0?q===-1&&(s.push(v),f(s)):q!==-1&&(s.splice(q,1),f(s))}return{isRowExpanded:c,setExpanded:f,updateExpanded:r}}const Za={visibleColumns:Array};function en(e,l,a){const c=g(()=>{if(e.columns!==void 0)return e.columns;const u=e.rows[0];return u!==void 0?Object.keys(u).map(s=>({name:s,label:s.toUpperCase(),field:s,align:$t(u[s])?"right":"left",sortable:!0})):[]}),f=g(()=>{const{sortBy:u,descending:s}=l.value;return(e.visibleColumns!==void 0?c.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):c.value).map(o=>{const S=o.align||"right",R=`text-${S}`;return{...o,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:R+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===u?` sorted ${s===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>R+" "+o.classes:_=>R+" "+o.classes(_):()=>R}})}),r=g(()=>{const u={};return f.value.forEach(s=>{u[s.name]=s}),u}),v=g(()=>e.tableColspan!==void 0?e.tableColspan:f.value.length+(a.value===!0?1:0));return{colList:c,computedCols:f,computedColsMap:r,computedColspan:v}}const Vt="q-table__bottom row items-center",zl={};Al.forEach(e=>{zl[e]={}});var tn=ze({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...zl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Rl,...Ia,...Za,...Da,...$a,...Ga,...Ka,...Na},emits:["request","virtualScroll",...La,...Xa,...Wa],setup(e,{slots:l,emit:a}){const c=je(),{proxy:{$q:f}}=c,r=Vl(e,f),{inFullscreen:v,toggleFullscreen:u}=za(),s=g(()=>typeof e.rowKey=="function"?e.rowKey:n=>n[e.rowKey]),q=U(null),o=U(null),S=g(()=>e.grid!==!0&&e.virtualScroll===!0),R=g(()=>" q-table__card"+(r.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),_=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":R.value)+(r.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(v.value===!0?" fullscreen scroll":"")),A=g(()=>_.value+(e.loading===!0?" q-table--loading":""));me(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+_.value,()=>{S.value===!0&&o.value!==null&&o.value.reset()});const{innerPagination:V,computedPagination:y,isServerSide:D,requestServerInteraction:Q,setPagination:X}=Ua(c,xe),{computedFilterMethod:M}=ja(e,X),{isRowExpanded:H,setExpanded:ne,updateExpanded:ge}=Ya(e,a),ye=g(()=>{let n=e.rows;if(D.value===!0||n.length===0)return n;const{sortBy:C,descending:T}=y.value;return e.filter&&(n=M.value(n,e.filter,h.value,xe)),J.value!==null&&(n=le.value(e.rows===n?n.slice():n,C,T)),n}),Ve=g(()=>ye.value.length),se=g(()=>{let n=ye.value;if(D.value===!0)return n;const{rowsPerPage:C}=y.value;return C!==0&&(I.value===0&&e.rows!==n?n.length>Z.value&&(n=n.slice(0,Z.value)):n=n.slice(I.value,Z.value)),n}),{hasSelectionMode:ue,singleSelection:Pe,multipleSelection:Ce,allRowsSelected:Ae,someRowsSelected:we,rowsSelectedNumber:he,isRowSelected:Fe,clearSelection:Ie,updateSelection:be}=Ja(e,a,se,s),{colList:x,computedCols:h,computedColsMap:P,computedColspan:L}=en(e,y,ue),{columnToSort:J,computedSortMethod:le,sort:j}=Ea(e,y,x,X),{firstRowIndex:I,lastRowIndex:Z,isFirstPage:E,isLastPage:oe,pagesNumber:b,computedRowsPerPageOptions:m,computedRowsNumber:i,firstPage:O,prevPage:K,nextPage:re,lastPage:ke}=Qa(c,V,y,D,X,Ve),He=g(()=>se.value.length===0),ut=g(()=>{const n={};return Al.forEach(C=>{n[C]=e[C]}),n.virtualScrollItemSize===void 0&&(n.virtualScrollItemSize=e.dense===!0?28:48),n});function ce(){S.value===!0&&o.value.reset()}function ve(){if(e.grid===!0)return It();const n=e.hideHeader!==!0?dt:null;if(S.value===!0){const T=l["top-row"],B=l["bottom-row"],$={default:ee=>rt(ee.item,l.body,ee.index)};if(T!==void 0){const ee=d("tbody",T({cols:h.value}));$.before=n===null?()=>ee:()=>[n()].concat(ee)}else n!==null&&($.before=n);return B!==void 0&&($.after=()=>d("tbody",B({cols:h.value}))),d(Va,{ref:o,class:e.tableClass,style:e.tableStyle,...ut.value,scrollTarget:e.virtualScrollTarget,items:se.value,type:"__qtable",tableColspan:L.value,onVirtualScroll:We},$)}const C=[st()];return n!==null&&C.unshift(n()),Tl({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},C)}function Me(n,C){if(o.value!==null){o.value.scrollTo(n,C);return}n=parseInt(n,10);const T=q.value.querySelector(`tbody tr:nth-of-type(${n+1})`);if(T!==null){const B=q.value.querySelector(".q-table__middle.scroll"),$=T.offsetTop-e.virtualScrollStickySizeStart,ee=$<B.scrollTop?"decrease":"increase";B.scrollTop=$,a("virtualScroll",{index:n,from:0,to:V.value.rowsPerPage-1,direction:ee})}}function We(n){a("virtualScroll",n)}function Ct(){return[d(pl,{class:"q-table__linear-progress",color:e.color,dark:r.value,indeterminate:!0,trackColor:"transparent"})]}function rt(n,C,T){const B=s.value(n),$=Fe(B);if(C!==void 0)return C(kt({key:B,row:n,pageIndex:T,__trClass:$?"selected":""}));const ee=l["body-cell"],Y=h.value.map(de=>{const Xe=l[`body-cell-${de.name}`],Ye=Xe!==void 0?Xe:ee;return Ye!==void 0?Ye(xt({key:B,row:n,pageIndex:T,col:de})):d("td",{class:de.__tdClass(n),style:de.__tdStyle(n)},xe(de,n))});if(ue.value===!0){const de=l["body-selection"],Xe=de!==void 0?de(Le({key:B,row:n,pageIndex:T})):[d(Pt,{modelValue:$,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(Ye,Lt)=>{be([B],[n],Ye,Lt)}})];Y.unshift(d("td",{class:"q-table--col-auto-width"},Xe))}const pe={key:B,class:{selected:$}};return e.onRowClick!==void 0&&(pe.class["cursor-pointer"]=!0,pe.onClick=de=>{a("RowClick",de,n,T)}),e.onRowDblclick!==void 0&&(pe.class["cursor-pointer"]=!0,pe.onDblclick=de=>{a("RowDblclick",de,n,T)}),e.onRowContextmenu!==void 0&&(pe.class["cursor-pointer"]=!0,pe.onContextmenu=de=>{a("RowContextmenu",de,n,T)}),d("tr",pe,Y)}function st(){const n=l.body,C=l["top-row"],T=l["bottom-row"];let B=se.value.map(($,ee)=>rt($,n,ee));return C!==void 0&&(B=C({cols:h.value}).concat(B)),T!==void 0&&(B=B.concat(T({cols:h.value}))),d("tbody",B)}function kt(n){return Te(n),n.cols=n.cols.map(C=>mt({...C},"value",()=>xe(C,n.row))),n}function xt(n){return Te(n),mt(n,"value",()=>xe(n.col,n.row)),n}function Le(n){return Te(n),n}function Te(n){Object.assign(n,{cols:h.value,colsMap:P.value,sort:j,rowIndex:I.value+n.pageIndex,color:e.color,dark:r.value,dense:e.dense}),ue.value===!0&&mt(n,"selected",()=>Fe(n.key),(C,T)=>{be([n.key],[n.row],C,T)}),mt(n,"expand",()=>H(n.key),C=>{ge(n.key,C)})}function xe(n,C){const T=typeof n.field=="function"?n.field(C):C[n.field];return n.format!==void 0?n.format(T,C):T}const Ne=g(()=>({pagination:y.value,pagesNumber:b.value,isFirstPage:E.value,isLastPage:oe.value,firstPage:O,prevPage:K,nextPage:re,lastPage:ke,inFullscreen:v.value,toggleFullscreen:u}));function ct(){const n=l.top,C=l["top-left"],T=l["top-right"],B=l["top-selection"],$=ue.value===!0&&B!==void 0&&he.value>0,ee="q-table__top relative-position row items-center";if(n!==void 0)return d("div",{class:ee},[n(Ne.value)]);let Y;if($===!0?Y=B(Ne.value).slice():(Y=[],C!==void 0?Y.push(d("div",{class:"q-table__control"},[C(Ne.value)])):e.title&&Y.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),T!==void 0&&(Y.push(d("div",{class:"q-table__separator col"})),Y.push(d("div",{class:"q-table__control"},[T(Ne.value)]))),Y.length!==0)return d("div",{class:ee},Y)}const Je=g(()=>we.value===!0?null:Ae.value);function dt(){const n=pt();return e.loading===!0&&l.loading===void 0&&n.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:L.value},Ct())])),d("thead",n)}function pt(){const n=l.header,C=l["header-cell"];if(n!==void 0)return n(Ge({header:!0})).slice();const T=h.value.map(B=>{const $=l[`header-cell-${B.name}`],ee=$!==void 0?$:C,Y=Ge({col:B});return ee!==void 0?ee(Y):d(ka,{key:B.name,props:Y},()=>B.label)});if(Pe.value===!0&&e.grid!==!0)T.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(Ce.value===!0){const B=l["header-selection"],$=B!==void 0?B(Ge({})):[d(Pt,{color:e.color,modelValue:Je.value,dark:r.value,dense:e.dense,"onUpdate:modelValue":vt})];T.unshift(d("th",{class:"q-table--col-auto-width"},$))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},T)]}function Ge(n){return Object.assign(n,{cols:h.value,sort:j,colsMap:P.value,color:e.color,dark:r.value,dense:e.dense}),Ce.value===!0&&mt(n,"selected",()=>Je.value,vt),n}function vt(n){we.value===!0&&(n=!1),be(se.value.map(s.value),se.value,n)}const $e=g(()=>{const n=[e.iconFirstPage||f.iconSet.table.firstPage,e.iconPrevPage||f.iconSet.table.prevPage,e.iconNextPage||f.iconSet.table.nextPage,e.iconLastPage||f.iconSet.table.lastPage];return f.lang.rtl===!0?n.reverse():n});function qt(){if(e.hideBottom===!0)return;if(He.value===!0){if(e.hideNoData===!0)return;const T=e.loading===!0?e.loadingLabel||f.lang.table.loading:e.filter?e.noResultsLabel||f.lang.table.noResults:e.noDataLabel||f.lang.table.noData,B=l["no-data"],$=B!==void 0?[B({message:T,icon:f.iconSet.table.warning,filter:e.filter})]:[d(ot,{class:"q-table__bottom-nodata-icon",name:f.iconSet.table.warning}),T];return d("div",{class:Vt+" q-table__bottom--nodata"},$)}const n=l.bottom;if(n!==void 0)return d("div",{class:Vt},[n(Ne.value)]);const C=e.hideSelectedBanner!==!0&&ue.value===!0&&he.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||f.lang.table.selectedRecords)(he.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:Vt+" justify-end"},At(C));if(C.length>0)return d("div",{class:Vt},C)}function Bt(n){X({page:1,rowsPerPage:n.value})}function At(n){let C;const{rowsPerPage:T}=y.value,B=e.paginationLabel||f.lang.table.pagination,$=l.pagination,ee=e.rowsPerPageOptions.length>1;if(n.push(d("div",{class:"q-table__separator col"})),ee===!0&&n.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||f.lang.table.recordsPerPage]),d(Aa,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:T,options:m.value,displayValue:T===0?f.lang.table.allRows:T,dark:r.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Bt})])),$!==void 0)C=$(Ne.value);else if(C=[d("span",T!==0?{class:"q-table__bottom-item"}:{},[T?B(I.value+1,Math.min(Z.value,i.value),i.value):B(1,Ve.value,i.value)])],T!==0&&b.value>1){const Y={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(Y.size="sm"),b.value>2&&C.push(d(Se,{key:"pgFirst",...Y,icon:$e.value[0],disable:E.value,onClick:O})),C.push(d(Se,{key:"pgPrev",...Y,icon:$e.value[1],disable:E.value,onClick:K}),d(Se,{key:"pgNext",...Y,icon:$e.value[2],disable:oe.value,onClick:re})),b.value>2&&C.push(d(Se,{key:"pgLast",...Y,icon:$e.value[3],disable:oe.value,onClick:ke}))}return n.push(d("div",{class:"q-table__control"},C)),n}function Rt(){const n=e.gridHeader===!0?[d("table",{class:"q-table"},[dt()])]:e.loading===!0&&l.loading===void 0?Ct():void 0;return d("div",{class:"q-table__middle"},n)}function It(){const n=l.item!==void 0?l.item:C=>{const T=C.cols.map($=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[$.label]),d("div",{class:"q-table__grid-item-value"},[$.value])]));if(ue.value===!0){const $=l["body-selection"],ee=$!==void 0?$(C):[d(Pt,{modelValue:C.selected,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(Y,pe)=>{be([C.key],[C.row],Y,pe)}})];T.unshift(d("div",{class:"q-table__grid-item-row"},ee),d(ia,{dark:r.value}))}const B={class:["q-table__grid-item-card"+R.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(B.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(B.onClick=$=>{a("RowClick",$,C.row,C.pageIndex)}),e.onRowDblclick!==void 0&&(B.onDblclick=$=>{a("RowDblclick",$,C.row,C.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(C.selected===!0?" q-table__grid-item--selected":"")},[d("div",B,T)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},se.value.map((C,T)=>n(kt({key:s.value(C),row:C,pageIndex:T}))))}return Object.assign(c.proxy,{requestServerInteraction:Q,setPagination:X,firstPage:O,prevPage:K,nextPage:re,lastPage:ke,isRowSelected:Fe,clearSelection:Ie,isRowExpanded:H,setExpanded:ne,sort:j,resetVirtualScroll:ce,scrollTo:Me,getCellValue:xe}),Jl(c.proxy,{filteredSortedRows:()=>ye.value,computedRows:()=>se.value,computedRowsNumber:()=>i.value}),()=>{const n=[ct()],C={ref:q,class:A.value};return e.grid===!0?n.push(Rt()):Object.assign(C,{class:[C.class,e.cardClass],style:e.cardStyle}),n.push(ve(),qt()),e.loading===!0&&l.loading!==void 0&&n.push(l.loading()),d("div",C,n)}}});const ln={class:"full"},an={class:"header"},nn={class:"text-h6 fontOswald"},on={class:"flex-container"},un={class:"container"},rn={class:"overview"},sn={class:"statistics"},cn={class:"row"},dn={class:"col-12 col-md statistics-values"},vn=p("div",{class:"statistics-name"},"Total files: ",-1),fn={class:"statistics-value"},mn=p("div",{class:"statistics-name"},"Total barcodes: ",-1),gn={class:"statistics-value"},hn=p("div",{class:"statistics-name"},"Correctly detected files: ",-1),bn={class:"statistics-value"},Sn=p("div",{class:"statistics-name"},"Rate of detected files: ",-1),yn={class:"statistics-value"},wn=p("div",{class:"statistics-name"},"Detected barcodes: ",-1),_n={class:"statistics-value"},Cn=p("div",{class:"statistics-name"},"Misdetected barcodes: ",-1),kn={class:"statistics-value"},xn=p("div",{class:"statistics-name"},"Average time (ms): ",-1),pn={class:"statistics-value"},qn={class:"col-12 col-md statistics-charts"},Rn={class:"row"},Vn={class:"col statistics-chart"},Pn={class:"col statistics-chart"},Fn={class:"decoding"},Tn=p("div",null,[p("label",{style:{"font-size":"16px"}},"Engines:")],-1),On={class:"row",style:{"padding-bottom":"20px"}},Bn=["value"],An={class:"row",style:{"align-items":"center"}},In={key:0,style:{width:"100px"}},Ln={class:"absolute-full flex flex-center"},zn={style:{"margin-top":"2em","margin-bottom":"2em"}},Mn={class:"filename"},Nn={class:"text"},En={class:"text"},Dn={class:"text"},jn={class:"dialogs"},Hn=p("div",{class:"text-h6"},"Add files",-1),$n=p("label",{for:"imageFiles"},"Image files.",-1),Un=p("label",{for:"detectionResultFiles"},"Detection result files.",-1),Qn=p("label",{for:"imageFiles"},"Ground truth files.",-1),Kn=p("div",{class:"text-h6"},"Export",-1),Wn=p("div",{class:"text-h6"},"Settings",-1),Jn={for:"'settings-' + setting.name"},Gn=["id","onUpdate:modelValue"],so=Gl({__name:"ProjectPage",setup(e){const l=[{name:"number",required:!0,label:"No.",align:"left",field:"number"},{name:"name",required:!0,label:"Filename",align:"left",field:"filename",sortable:!0},{name:"detectedText",required:!0,label:"Detected Text",align:"left",field:"detectedText"},{name:"groundTruth",required:!0,label:"Ground Truth",align:"left",field:"groundTruth"},{name:"barcodeFormat",required:!0,label:"Barcode Format",align:"left",field:"barcodeFormat"},{name:"time",required:!0,label:"Time (ms)",align:"left",field:"time"},{name:"correct",required:!0,label:"Correct",align:"left",field:"correct",sortable:!0},{name:"misdetected",required:!0,label:"Misdetected",align:"left",field:"misdetected",sortable:!0}];let a,c;const f=U([]),r=U([]),v=Xl(),u=U(""),s=U(""),q=U(!1),o=U(!1),S=U(!1),R=U([]),_=U(.5),A=U(""),V=U(!1),y=U(!0),D=U({fileNumber:0,correctFilesNumber:0,barcodeNumber:0,accuracy:0,precision:0,averageTime:0});let Q=!1,X=[],M=[],H=[],ne=[];Kt(async()=>{u.value=v.currentRoute.value.params.name;const b=await te.getItem("projects"),m=ul.getEngines();if(r.value=m,m.length>0&&(s.value=m[0]),la({title:"Barcode Reading Benchmark - "+u.value}),b){ne=JSON.parse(b);for(let i=0;i<ne.length;i++)if(ne[i].info.name===u.value){c=ne[i],ge();return}}});const ge=async b=>{if(c){const m=await fa(c,b!=null?b:s.value);D.value=m.metrics,m.rows&&(f.value=m.rows)}},ye=async()=>{if(console.log(s.value),V.value===!1){V.value=!0,Q=!1,await j(),await E();const b=c.info.images.length;_.value=0,A.value="0/"+b;let m=await te.getItem(u.value+":detectionResultFileNamesList");m||(m=[]);for(let i=0;i<b;i++){if(Q){await te.setItem(u.value+":detectionResultFileNamesList",m);return}const O=c.info.images[i];if(y.value&&await te.getItem(u.value+":detectionResult:"+Qe(O)+"-"+s.value+".json"))continue;const K=await te.getItem(u.value+":image:"+O);if(K){let re=await a.detect(K);console.log(re);const ke=Qe(O)+"-"+s.value+".json";m.indexOf(ke)===-1&&m.push(ke),await te.setItem(u.value+":detectionResult:"+Qe(O)+"-"+s.value+".json",JSON.stringify(re))}_.value=parseFloat(((i+1)/b).toFixed(2)),A.value=i+1+"/"+b}await te.setItem(u.value+":detectionResultFileNamesList",m),V.value=!1}else Q=!0,V.value=!1;ge()},Ve=b=>{M=b.target.files},se=b=>{X=b.target.files},ue=b=>{H=b.target.files},Pe=async()=>{if(c){for(let m=0;m<H.length;m++){const i=H[m],O=await rl(i);await te.setItem(u.value+":groundTruth:"+i.name,O)}let b=await te.getItem(u.value+":detectionResultFileNamesList");b||(b=[]);for(let m=0;m<M.length;m++){const i=M[m],O=await rl(i);b.indexOf(i.name)===-1&&b.push(i.name),await te.setItem(u.value+":detectionResult:"+i.name,O)}for(let m=0;m<X.length;m++){const i=X[m],O=await ma(i);await te.setItem(u.value+":image:"+i.name,O),c.info.images.push(i.name)}await te.setItem(u.value+":detectionResultFileNamesList",b),ge(),Ce(),alert("added"),q.value=!1}},Ce=async()=>{let b=[];ne.forEach(m=>{b.push(m)}),await te.setItem("projects",JSON.stringify(b))},Ae=()=>{q.value=!0},we=async()=>{await ga(c),Ce(),ge()},he=async()=>{o.value=!0},Fe=async()=>{for(let b=0;b<c.info.images.length;b++){const m=c.info.images[b],i=await te.getItem(u.value+":image:"+m);if(i){await ha(1e3);const O=sl(i),K=document.createElement("a");K.href=URL.createObjectURL(O),K.download=m,document.body.appendChild(K),K.click(),document.body.removeChild(K)}}},Ie=async()=>{const b=new il;for(let m=0;m<c.info.images.length;m++){const i=c.info.images[m],O=await te.getItem(u.value+":image:"+i);if(O){console.log(i);const K=sl(O);b.file(i,K)}}b.generateAsync({type:"blob"}).then(function(m){const i=document.createElement("a");i.href=URL.createObjectURL(m),i.download=u.value+"-images.zip",document.body.appendChild(i),i.click(),document.body.removeChild(i)})},be=async()=>{const b=new il;for(let i=0;i<c.info.images.length;i++){const O=c.info.images[i],K=Qe(O)+".txt",re=await te.getItem(u.value+":groundTruth:"+Qe(O)+".txt");re&&b.file(K,re)}const m=await te.getItem(u.value+":detectionResultFileNamesList");if(m){for(let i=0;i<m.length;i++){const O=m[i],K=await te.getItem(u.value+":detectionResult:"+O);K&&b.file(O,K)}b.file("detection_result_filenames.json",JSON.stringify(m))}b.file("project_manifest.json",JSON.stringify(c)),await x(b),b.generateAsync({type:"blob"}).then(function(i){const O=document.createElement("a");O.href=URL.createObjectURL(i),O.download=u.value+"-results.zip",document.body.appendChild(O),O.click(),document.body.removeChild(O)})},x=async b=>{for(let m=0;m<r.value.length;m++){const i=r.value[m],O=await te.getItem(u.value+":settings:"+i);O&&b.file(i+"_settings.json",JSON.stringify(O))}},h=b=>{const m="/project/"+encodeURIComponent(u.value)+"/"+encodeURIComponent(b)+"/"+s.value,i=v.resolve(m);window.open(i.href,"_blank")},P=b=>{ge(b)},L=()=>{const b="/project/"+encodeURIComponent(u.value)+"/comparison";v.push(b)},J=()=>{const b="/project/"+encodeURIComponent(u.value)+"/livescanner",m=v.resolve(b);window.open(m.href,"_blank")},le=async()=>{await j();const b=a.getSupportedSettings();b.length>0?(console.log(b),S.value=!0,I(b)):alert("This engine does not have settings.")},j=async()=>{let b=!1;a?a.getEngine()!=s.value&&(b=!0):b=!0,b&&(A.value="Initializing...",a=await ul.createInstance(s.value),A.value="")},I=async b=>{const m=await ba(u.value,s.value,b);R.value=m},Z=async()=>{const b=[];for(let m=0;m<R.value.length;m++){const i=R.value[m],O={};O.name=i.name,O.value=i.value,b.push(O)}await te.setItem(u.value+":settings:"+s.value,b)},E=async()=>{await a.setSupportedSettings(R.value)},oe=async()=>{const b=c.info.images.length;for(let m=0;m<b;m++){const i=c.info.images[m],O=await te.getItem(u.value+":detectionResult:"+Qe(i)+"-"+s.value+".json");if(O){const K=JSON.parse(O),re=Sa(K.results);await te.setItem(u.value+":groundTruth:"+Qe(i)+".txt",JSON.stringify(re))}}ge()};return(b,m)=>(qe(),at(va,null,{default:z(()=>[p("div",ln,[p("div",an,[p("div",nn,ie(u.value),1),p("div",on,[F(jt,{style:{"margin-left":"15px"},secondary:"",label:"Go to Comparison Page",onClick:L})]),F(jt,{outline:"",style:{color:"black","border-color":"black","background-color":"#fff"},label:"Export",onClick:he})]),p("div",un,[p("div",rn,[p("div",sn,[p("div",cn,[p("div",dn,[p("div",null,[vn,p("div",fn,ie(D.value.fileNumber),1)]),p("div",null,[mn,p("div",gn,ie(D.value.barcodeNumber),1)]),p("div",null,[hn,p("div",bn,ie(D.value.correctFilesNumber),1)]),p("div",null,[Sn,p("div",yn,ie(D.value.detectedFilesRate)+"%",1)]),p("div",null,[wn,p("div",_n,ie(parseInt((D.value.accuracy/100*D.value.barcodeNumber).toString())),1)]),p("div",null,[Cn,p("div",kn,ie(parseInt(((1-D.value.precision/100)*D.value.barcodeNumber).toString())),1)]),p("div",null,[xn,p("div",pn,ie(D.value.averageTime),1)])]),p("div",qn,[p("div",Rn,[p("div",Vn,[_e(" Accuracy: "),F(dl,{"show-value":"","font-size":"12px",value:D.value.accuracy,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:z(()=>[_e(ie(D.value.accuracy)+"% ",1)]),_:1},8,["value","thickness"])]),p("div",Pn,[_e(" Precision: "),F(dl,{"show-value":"","font-size":"12px",value:D.value.precision,size:"60px",thickness:.22,color:"orange","track-color":"grey-3",class:"q-ma-md"},{default:z(()=>[_e(ie(D.value.precision)+"% ",1)]),_:1},8,["value","thickness"])])])])])]),p("div",Fn,[Tn,p("div",On,[Oe(p("select",{style:{"min-width":"200px",height:"45px"},"onUpdate:modelValue":[m[0]||(m[0]=i=>P(i)),m[1]||(m[1]=i=>s.value=i)]},[(qe(!0),gt(al,null,ll(r.value,i=>(qe(),gt("option",{value:i,key:i},ie(i),9,Bn))),128))],512),[[Yl,s.value]]),s.value==="Dynamsoft"?(qe(),at(Se,{key:0,style:{height:"45px"},flat:"",round:"",color:"black",icon:"settings",onClick:m[2]||(m[2]=i=>le())})):nl("",!0)]),p("div",An,[F(jt,{label:V.value?"Stop Decoding":"Start Decoding",onClick:ye},null,8,["label"]),F(Pt,{color:"orange",style:{"padding-left":"10px"},"left-label":"",modelValue:y.value,"onUpdate:modelValue":m[3]||(m[3]=i=>y.value=i),label:"Skip Detected"},null,8,["modelValue"])]),V.value?(qe(),gt("div",In,[F(pl,{size:"25px",value:_.value,color:"orange"},{default:z(()=>[p("div",Ln,[F(na,{color:"white","text-color":"black",label:A.value},null,8,["label"])])]),_:1},8,["value"])])):nl("",!0)])]),p("div",zn,[F(tn,{title:"Images",color:"black","table-header-style":"background:#f5f5f5;",rows:f.value,columns:l,"row-key":"name"},{"top-right":z(()=>[F(ua,{unelevated:"",color:"black",label:"Action"},{default:z(()=>[F(ql,null,{default:z(()=>[Oe((qe(),at(wt,{clickable:"",onClick:Ae},{default:z(()=>[F(St,null,{default:z(()=>[F(yt,null,{default:z(()=>[_e("Add local files")]),_:1})]),_:1})]),_:1})),[[Ee]]),Oe((qe(),at(wt,{clickable:"",onClick:we},{default:z(()=>[F(St,null,{default:z(()=>[F(yt,null,{default:z(()=>[_e("Clear")]),_:1})]),_:1})]),_:1})),[[Ee]]),Oe((qe(),at(wt,{clickable:"",onClick:oe},{default:z(()=>[F(St,null,{default:z(()=>[F(yt,null,{default:z(()=>[_e("Convert detected results to ground truth")]),_:1})]),_:1})]),_:1})),[[Ee]]),Oe((qe(),at(wt,{clickable:"",onClick:J},{default:z(()=>[F(St,null,{default:z(()=>[F(yt,null,{default:z(()=>[_e("Go to live scanner")]),_:1})]),_:1})]),_:1})),[[Ee]])]),_:1})]),_:1})]),body:z(i=>[F(Ca,{props:i},{default:z(()=>[F(De,{key:"number",props:i},{default:z(()=>[_e(ie(i.row.number),1)]),_:2},1032,["props"]),F(De,{key:"name",props:i,onClick:O=>h(i.row.filename)},{default:z(()=>[p("div",Mn,ie(i.row.filename),1)]),_:2},1032,["props","onClick"]),F(De,{key:"detectedText",props:i},{default:z(()=>[p("div",Nn,ie(i.row.detectedText),1)]),_:2},1032,["props"]),F(De,{key:"groundTruth",props:i},{default:z(()=>[p("div",En,ie(i.row.groundTruth),1)]),_:2},1032,["props"]),F(De,{key:"barcodeFormat",props:i},{default:z(()=>[p("div",Dn,ie(i.row.barcodeFormat),1)]),_:2},1032,["props"]),F(De,{key:"time",props:i},{default:z(()=>[_e(ie(i.row.time),1)]),_:2},1032,["props"]),F(De,{key:"correct",props:i},{default:z(()=>[_e(ie(i.row.correct),1)]),_:2},1032,["props"]),F(De,{key:"misdetected",props:i},{default:z(()=>[_e(ie(i.row.misdetected),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])])])]),p("div",jn,[F(Ft,{modelValue:q.value,"onUpdate:modelValue":m[7]||(m[7]=i=>q.value=i)},{default:z(()=>[F(Et,null,{default:z(()=>[F(nt,null,{default:z(()=>[Hn]),_:1}),F(nt,{class:"q-pt-none"},{default:z(()=>[p("div",null,[p("input",{type:"file",id:"imageFiles",multiple:"true",onChange:m[4]||(m[4]=i=>{se(i)}),accept:".jpg,.jpeg,.png,.bmp"},null,32),$n]),p("div",null,[p("input",{type:"file",id:"detectionResultFiles",multiple:"true",onChange:m[5]||(m[5]=i=>{Ve(i)}),accept:".json"},null,32),Un]),p("div",null,[p("input",{type:"file",id:"groundTruthFiles",multiple:"true",onChange:m[6]||(m[6]=i=>{ue(i)}),accept:".txt"},null,32),Qn])]),_:1}),F(Dt,{align:"right"},{default:z(()=>[F(Se,{flat:"",color:"primary",label:"Add to project",onClick:Pe}),Oe(F(Se,{flat:"",color:"primary",label:"Close"},null,512),[[Ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),F(Ft,{modelValue:o.value,"onUpdate:modelValue":m[8]||(m[8]=i=>o.value=i)},{default:z(()=>[F(Et,null,{default:z(()=>[F(nt,null,{default:z(()=>[Kn]),_:1}),F(nt,{class:"q-pt-none"},{default:z(()=>[p("div",null,[F(Se,{outline:"",color:"primary",label:"Download images",onClick:Fe})]),p("div",null,[F(Se,{outline:"",color:"primary",label:"Download images in a zip",onClick:Ie})]),p("div",null,[F(Se,{outline:"",color:"primary",label:"Download TextResults.zip",onClick:be})])]),_:1}),F(Dt,{align:"right"},{default:z(()=>[Oe(F(Se,{flat:"",color:"primary",label:"Close"},null,512),[[Ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),F(Ft,{modelValue:S.value,"onUpdate:modelValue":m[10]||(m[10]=i=>S.value=i)},{default:z(()=>[F(Et,null,{default:z(()=>[F(nt,null,{default:z(()=>[Wn]),_:1}),F(nt,{class:"q-pt-none"},{default:z(()=>[(qe(!0),gt(al,null,ll(R.value,i=>(qe(),gt("div",{key:i.name},[p("div",null,[p("label",Jn,ie(i.name+":"),1)]),p("div",null,[Oe(p("textarea",{id:"settings-"+i.name,"onUpdate:modelValue":O=>i.value=O},null,8,Gn),[[Zl,i.value]])])]))),128))]),_:1}),F(Dt,{align:"right"},{default:z(()=>[Oe(F(Se,{flat:"",color:"primary",label:"Save",onClick:m[9]||(m[9]=i=>Z())},null,512),[[Ee]]),Oe(F(Se,{flat:"",color:"primary",label:"Close"},null,512),[[Ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{so as default};
