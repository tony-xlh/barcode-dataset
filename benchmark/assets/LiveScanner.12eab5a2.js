import{_ as z,q as k,r as c,u as N,o as P,t as g,O as _,B as s,I as F,ad as O,P as T,Q as V,y as j,R as h,a5 as q,z as M,A}from"./index.609c439b.js";import{x as y,D as Q,a as w,i as $}from"./DynamsoftButton.bbdbe840.js";const G=u=>(M("data-v-dd67b2e0"),u=u(),A(),u),H={class:"q-pa-md",style:{width:"100%"}},J=G(()=>s("div",null,[s("label",{style:{"font-size":"16px"}},"Engines:")],-1)),K={class:"row",style:{"padding-bottom":"20px"}},W=["value"],X={style:{"padding-left":"10px"}},Y={id:"results"},Z=k({__name:"LiveScanner",setup(u){const l=c(""),S=c([]),x=N(),o=c(""),d=c(!1),v=c(),I=c("");let p=!1,i,n,f;P(async()=>{I.value=x.currentRoute.value.params.name;const e=w.getEngines();S.value=e,l.value=e[0],b()});const B=async()=>{let e=await $(I.value,l.value,i.getSupportedSettings());if(l.value==="Dynamsoft"){let a=!1;for(let t=0;t<e.length;t++){const r=e[t];r.name==="template"&&r.value&&(a=!0)}a===!1&&e.push({name:"template",value:"speed"})}await i.setSupportedSettings(e)},R=async()=>{if(m(),n){n.isOpen()===!1?(o.value="Starting...",await n.open(!0),d.value=!0,o.value=""):(n.close(!0),d.value=!1);return}d.value=!1},C=()=>{E()},b=async()=>{var e;o.value="Initializing Camera...",y.defaultUIElementURL="https://cdn.jsdelivr.net/npm/dynamsoft-camera-enhancer@3.3.4/dist/dce.ui.html",n=await y.createInstance(),n.on("played",C),await n.setUIElement(y.defaultUIElementURL),(e=document.getElementById("enhancerUIContainer"))==null||e.appendChild(n.getUIElement()),document.getElementsByClassName("dce-btn-close")[0].remove(),o.value=""},E=()=>{m(),f=setInterval(U,200)},m=()=>{clearInterval(f),p=!1},U=async()=>{if(n&&p===!1){p=!0;let e=!1;i?i.getEngine()!=l.value&&(e=!0):e=!0,e&&(o.value="Initializing Barcode Reader...",i=await w.createInstance(l.value),await B(),o.value="");const a=n.getFrame(),t=await i.detect(a);o.value=t.elapsedTime+"ms",i.getEngine()===l.value&&L(t),p=!1}},L=e=>{if(e.results.length>0){let a="";for(let t=0;t<e.results.length;t++){const r=e.results[t];a=a+(t+1)+". "+r.barcodeFormat+": "+r.barcodeText,r.confidence&&(a=a+", confidence: "+r.confidence),a=a+`
`}v.value=a}},D=e=>{f&&n.isOpen()&&(m(),E()),v.value=""};return(e,a)=>(g(),_("div",H,[J,s("div",K,[F(s("select",{"onUpdate:modelValue":[a[0]||(a[0]=t=>D()),a[1]||(a[1]=t=>l.value=t)],style:{"min-width":"200px"}},[(g(!0),_(T,null,V(S.value,t=>(g(),_("option",{value:t,key:t},h(t),9,W))),128))],512),[[O,l.value]])]),s("div",null,[j(Q,{label:d.value?"Stop Scanning":"Start Scanning",onClick:R},null,8,["label"]),s("span",X,h(o.value),1)]),s("div",Y,[s("pre",null,""+h(v.value)+`
      `,1)]),s("div",null,[s("div",{id:"enhancerUIContainer",style:{width:"100%",height:"500px"},class:q(d.value?"":"hidden")},null,2)])]))}});var ae=z(Z,[["__scopeId","data-v-dd67b2e0"]]);export{ae as default};
