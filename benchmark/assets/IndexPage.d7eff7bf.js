var Ae=Object.defineProperty;var De=(e,k,y)=>k in e?Ae(e,k,{enumerable:!0,configurable:!0,writable:!0,value:y}):e[k]=y;var ue=(e,k,y)=>(De(e,typeof k!="symbol"?k+"":k,y),y);import{Q as Ne}from"./QPage.5c2d9518.js";import{a as Oe,u as Be,b as Le,c as ze,d as Ue,e as qe,f as Qe,g as He,h as Ze,Q as me,i as ve,j as se,k as ge,C as X}from"./ClosePopup.d61a8784.js";import{u as Ke,a as $e,b as Je,c as We,f as he,d as Ye,Q as Ge,e as Xe,l as we,t as et}from"./projectUtils.709379bc.js";import{r as A,w as H,b as le,M as tt,c as N,a as fe,o as Ie,h as ne,N as at,g as Fe,G as ke,F as ye,E as pe,T as lt,J as nt,_ as ot,q as st,u as it,t as ee,O as ie,y as x,x as L,B as C,P as xe,Q as rt,R as oe,I as te,v as be,S as ae,U as ce,z as ut,A as ct}from"./index.03e9bbd1.js";import{u as dt,a as ft}from"./use-form.2bb670e8.js";import{c as je,h as mt}from"./QIcon.735f4931.js";import{Q as J}from"./QBtn.89919540.js";import{u as vt,v as Me,a as gt,b as ht,c as wt,r as Se,s as kt,d as Ce,p as _e,e as yt}from"./position-engine.e5b7f89b.js";import{g as pt}from"./scroll.01a31c90.js";import{l as Q,D as de,r as xt,B as bt}from"./DynamsoftButton.d94861a0.js";import"./use-dark.895a9066.js";const Pe={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},re={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ee=Object.keys(re);Ee.forEach(e=>{re[e].regex=new RegExp(re[e].pattern)});const Mt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ee.join("")+"])|(.)","g"),Re=/[.*+?^${}()|[\]\\]/g,S=String.fromCharCode(1),St={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Ct(e,k,y,m){let v,w,E,b,_,h;const M=A(null),c=A(V());function K(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}H(()=>e.type+e.autogrow,O),H(()=>e.mask,o=>{if(o!==void 0)q(c.value,!0);else{const n=T(c.value);O(),e.modelValue!==n&&k("update:modelValue",n)}}),H(()=>e.fillMask+e.reverseFillMask,()=>{M.value===!0&&q(c.value,!0)}),H(()=>e.unmaskedValue,()=>{M.value===!0&&q(c.value)});function V(){if(O(),M.value===!0){const o=R(T(e.modelValue));return e.fillMask!==!1?Z(o):o}return e.modelValue}function U(o){if(o<v.length)return v.slice(-o);let n="",u=v;const s=u.indexOf(S);if(s>-1){for(let t=o-u.length;t>0;t--)n+=S;u=u.slice(0,s)+n+u.slice(s)}return u}function O(){if(M.value=e.mask!==void 0&&e.mask.length>0&&K(),M.value===!1){b=void 0,v="",w="";return}const o=Pe[e.mask]===void 0?e.mask:Pe[e.mask],n=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",u=n.replace(Re,"\\$&"),s=[],t=[],a=[];let i=e.reverseFillMask===!0,r="",d="";o.replace(Mt,(p,l,f,B,I)=>{if(B!==void 0){const j=re[B];a.push(j),d=j.negate,i===!0&&(t.push("(?:"+d+"+)?("+j.pattern+"+)?(?:"+d+"+)?("+j.pattern+"+)?"),i=!1),t.push("(?:"+d+"+)?("+j.pattern+")?")}else if(f!==void 0)r="\\"+(f==="\\"?"":f),a.push(f),s.push("([^"+r+"]+)?"+r+"?");else{const j=l!==void 0?l:I;r=j==="\\"?"\\\\\\\\":j.replace(Re,"\\\\$&"),a.push(j),s.push("([^"+r+"]+)?"+r+"?")}});const F=new RegExp("^"+s.join("")+"("+(r===""?".":"[^"+r+"]")+"+)?"+(r===""?"":"["+r+"]*")+"$"),D=t.length-1,g=t.map((p,l)=>l===0&&e.reverseFillMask===!0?new RegExp("^"+u+"*"+p):l===D?new RegExp("^"+p+"("+(d===""?".":d)+"+)?"+(e.reverseFillMask===!0?"$":u+"*")):new RegExp("^"+p));E=a,b=p=>{const l=F.exec(e.reverseFillMask===!0?p:p.slice(0,a.length+1));l!==null&&(p=l.slice(1).join(""));const f=[],B=g.length;for(let I=0,j=p;I<B;I++){const G=g[I].exec(j);if(G===null)break;j=j.slice(G.shift().length),f.push(...G)}return f.length>0?f.join(""):p},v=a.map(p=>typeof p=="string"?p:S).join(""),w=v.split(S).join(n)}function q(o,n,u){const s=m.value,t=s.selectionEnd,a=s.value.length-t,i=T(o);n===!0&&O();const r=R(i),d=e.fillMask!==!1?Z(r):r,F=c.value!==d;s.value!==d&&(s.value=d),F===!0&&(c.value=d),document.activeElement===s&&le(()=>{if(d===w){const g=e.reverseFillMask===!0?w.length:0;s.setSelectionRange(g,g,"forward");return}if(u==="insertFromPaste"&&e.reverseFillMask!==!0){const g=s.selectionEnd;let p=t-1;for(let l=_;l<=p&&l<g;l++)v[l]!==S&&p++;P.right(s,p);return}if(["deleteContentBackward","deleteContentForward"].indexOf(u)>-1){const g=e.reverseFillMask===!0?t===0?d.length>r.length?1:0:Math.max(0,d.length-(d===w?0:Math.min(r.length,a)+1))+1:t;s.setSelectionRange(g,g,"forward");return}if(e.reverseFillMask===!0)if(F===!0){const g=Math.max(0,d.length-(d===w?0:Math.min(r.length,a+1)));g===1&&t===1?s.setSelectionRange(g,g,"forward"):P.rightReverse(s,g)}else{const g=d.length-a;s.setSelectionRange(g,g,"backward")}else if(F===!0){const g=Math.max(0,v.indexOf(S),Math.min(r.length,t)-1);P.right(s,g)}else{const g=t-1;P.right(s,g)}});const D=e.unmaskedValue===!0?T(d):d;String(e.modelValue)!==D&&y(D,!0)}function W(o,n,u){const s=R(T(o.value));n=Math.max(0,v.indexOf(S),Math.min(s.length,n)),_=n,o.setSelectionRange(n,u,"forward")}const P={left(o,n){const u=v.slice(n-1).indexOf(S)===-1;let s=Math.max(0,n-1);for(;s>=0;s--)if(v[s]===S){n=s,u===!0&&n++;break}if(s<0&&v[n]!==void 0&&v[n]!==S)return P.right(o,0);n>=0&&o.setSelectionRange(n,n,"backward")},right(o,n){const u=o.value.length;let s=Math.min(u,n+1);for(;s<=u;s++)if(v[s]===S){n=s;break}else v[s-1]===S&&(n=s);if(s>u&&v[n-1]!==void 0&&v[n-1]!==S)return P.left(o,u);o.setSelectionRange(n,n,"forward")},leftReverse(o,n){const u=U(o.value.length);let s=Math.max(0,n-1);for(;s>=0;s--)if(u[s-1]===S){n=s;break}else if(u[s]===S&&(n=s,s===0))break;if(s<0&&u[n]!==void 0&&u[n]!==S)return P.rightReverse(o,0);n>=0&&o.setSelectionRange(n,n,"backward")},rightReverse(o,n){const u=o.value.length,s=U(u),t=s.slice(0,n+1).indexOf(S)===-1;let a=Math.min(u,n+1);for(;a<=u;a++)if(s[a-1]===S){n=a,n>0&&t===!0&&n--;break}if(a>u&&s[n-1]!==void 0&&s[n-1]!==S)return P.leftReverse(o,u);o.setSelectionRange(n,n,"forward")}};function Y(o){k("click",o),h=void 0}function $(o){if(k("keydown",o),tt(o)===!0)return;const n=m.value,u=n.selectionStart,s=n.selectionEnd;if(o.shiftKey||(h=void 0),o.keyCode===37||o.keyCode===39){o.shiftKey&&h===void 0&&(h=n.selectionDirection==="forward"?u:s);const t=P[(o.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(o.preventDefault(),t(n,h===u?s:u),o.shiftKey){const a=n.selectionStart;n.setSelectionRange(Math.min(h,a),Math.max(h,a),"forward")}}else o.keyCode===8&&e.reverseFillMask!==!0&&u===s?(P.left(n,u),n.setSelectionRange(n.selectionStart,s,"backward")):o.keyCode===46&&e.reverseFillMask===!0&&u===s&&(P.rightReverse(n,s),n.setSelectionRange(u,n.selectionEnd,"forward"))}function R(o){if(o==null||o==="")return"";if(e.reverseFillMask===!0)return z(o);const n=E;let u=0,s="";for(let t=0;t<n.length;t++){const a=o[u],i=n[t];if(typeof i=="string")s+=i,a===i&&u++;else if(a!==void 0&&i.regex.test(a))s+=i.transform!==void 0?i.transform(a):a,u++;else return s}return s}function z(o){const n=E,u=v.indexOf(S);let s=o.length-1,t="";for(let a=n.length-1;a>=0&&s>-1;a--){const i=n[a];let r=o[s];if(typeof i=="string")t=i+t,r===i&&s--;else if(r!==void 0&&i.regex.test(r))do t=(i.transform!==void 0?i.transform(r):r)+t,s--,r=o[s];while(u===a&&r!==void 0&&i.regex.test(r));else return t}return t}function T(o){return typeof o!="string"||b===void 0?typeof o=="number"?b(""+o):o:b(o)}function Z(o){return w.length-o.length<=0?o:e.reverseFillMask===!0&&o.length>0?w.slice(0,-o.length)+o:o+w.slice(o.length)}return{innerValue:c,hasMask:M,moveCursorForPaste:W,updateMaskValue:q,onMaskedKeydown:$,onMaskedClick:Y}}function _t(e,k){function y(){const m=e.modelValue;try{const v="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(m)===m&&("length"in m?Array.from(m):[m]).forEach(w=>{v.items.add(w)}),{files:v.files}}catch{return{files:void 0}}}return k===!0?N(()=>{if(e.type==="file")return y()}):N(y)}var Pt=je({name:"QInput",inheritAttrs:!1,props:{...Ke,...St,...dt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...$e,"paste","change","keydown","click","animationend"],setup(e,{emit:k,attrs:y}){const{proxy:m}=Fe(),{$q:v}=m,w={};let E=NaN,b,_,h=null,M;const c=A(null),K=ft(e),{innerValue:V,hasMask:U,moveCursorForPaste:O,updateMaskValue:q,onMaskedKeydown:W,onMaskedClick:P}=Ct(e,k,r,c),Y=_t(e,!0),$=N(()=>he(V.value)),R=Ye(a),z=Je(),T=N(()=>e.type==="textarea"||e.autogrow===!0),Z=N(()=>T.value===!0||["text","search","url","tel","password"].includes(e.type)),o=N(()=>{const l={...z.splitAttrs.listeners.value,onInput:a,onPaste:t,onChange:F,onBlur:D,onFocus:ke};return l.onCompositionstart=l.onCompositionupdate=l.onCompositionend=R,U.value===!0&&(l.onKeydown=W,l.onClick=P),e.autogrow===!0&&(l.onAnimationend=i),l}),n=N(()=>{const l={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:K.value,...z.splitAttrs.attributes.value,id:z.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return T.value===!1&&(l.type=e.type),e.autogrow===!0&&(l.rows=1),l});H(()=>e.type,()=>{c.value&&(c.value.value=e.modelValue)}),H(()=>e.modelValue,l=>{if(U.value===!0){if(_===!0&&(_=!1,String(l)===E))return;q(l)}else V.value!==l&&(V.value=l,e.type==="number"&&w.hasOwnProperty("value")===!0&&(b===!0?b=!1:delete w.value));e.autogrow===!0&&le(d)}),H(()=>e.autogrow,l=>{l===!0?le(d):c.value!==null&&y.rows>0&&(c.value.style.height="auto")}),H(()=>e.dense,()=>{e.autogrow===!0&&le(d)});function u(){Oe(()=>{const l=document.activeElement;c.value!==null&&c.value!==l&&(l===null||l.id!==z.targetUid.value)&&c.value.focus({preventScroll:!0})})}function s(){c.value!==null&&c.value.select()}function t(l){if(U.value===!0&&e.reverseFillMask!==!0){const f=l.target;O(f,f.selectionStart,f.selectionEnd)}k("paste",l)}function a(l){if(!l||!l.target)return;if(e.type==="file"){k("update:modelValue",l.target.files);return}const f=l.target.value;if(l.target.qComposing===!0){w.value=f;return}if(U.value===!0)q(f,!1,l.inputType);else if(r(f),Z.value===!0&&l.target===document.activeElement){const{selectionStart:B,selectionEnd:I}=l.target;B!==void 0&&I!==void 0&&le(()=>{l.target===document.activeElement&&f.indexOf(l.target.value)===0&&l.target.setSelectionRange(B,I)})}e.autogrow===!0&&d()}function i(l){k("animationend",l),d()}function r(l,f){M=()=>{h=null,e.type!=="number"&&w.hasOwnProperty("value")===!0&&delete w.value,e.modelValue!==l&&E!==l&&(E=l,f===!0&&(_=!0),k("update:modelValue",l),le(()=>{E===l&&(E=NaN)})),M=void 0},e.type==="number"&&(b=!0,w.value=l),e.debounce!==void 0?(h!==null&&clearTimeout(h),w.value=l,h=setTimeout(M,e.debounce)):M()}function d(){requestAnimationFrame(()=>{const l=c.value;if(l!==null){const f=l.parentNode.style,{scrollTop:B}=l,{overflowY:I,maxHeight:j}=v.platform.is.firefox===!0?{}:window.getComputedStyle(l),G=I!==void 0&&I!=="scroll";G===!0&&(l.style.overflowY="hidden"),f.marginBottom=l.scrollHeight-1+"px",l.style.height="1px",l.style.height=l.scrollHeight+"px",G===!0&&(l.style.overflowY=parseInt(j,10)<l.scrollHeight?"auto":"hidden"),f.marginBottom="",l.scrollTop=B}})}function F(l){R(l),h!==null&&(clearTimeout(h),h=null),M!==void 0&&M(),k("change",l.target.value)}function D(l){l!==void 0&&ke(l),h!==null&&(clearTimeout(h),h=null),M!==void 0&&M(),b=!1,_=!1,delete w.value,e.type!=="file"&&setTimeout(()=>{c.value!==null&&(c.value.value=V.value!==void 0?V.value:"")})}function g(){return w.hasOwnProperty("value")===!0?w.value:V.value!==void 0?V.value:""}fe(()=>{D()}),Ie(()=>{e.autogrow===!0&&d()}),Object.assign(z,{innerValue:V,fieldClass:N(()=>`q-${T.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:N(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:c,emitValue:r,hasValue:$,floatingLabel:N(()=>$.value===!0&&(e.type!=="number"||isNaN(V.value)===!1)||he(e.displayValue)),getControl:()=>ne(T.value===!0?"textarea":"input",{ref:c,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...n.value,...o.value,...e.type!=="file"?{value:g()}:Y.value}),getShadowControl:()=>ne("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(T.value===!0?"":" text-no-wrap")},[ne("span",{class:"invisible"},g()),ne("span",e.shadowText)])});const p=We(z);return Object.assign(m,{focus:u,select:s,getNativeElement:()=>c.value}),at(m,"nativeEl",()=>c.value),p}}),Rt=je({name:"QTooltip",inheritAttrs:!1,props:{...vt,...Be,...Le,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Me},self:{type:String,default:"top middle",validator:Me},offset:{type:Array,default:()=>[14,14],validator:gt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ze],setup(e,{slots:k,emit:y,attrs:m}){let v,w;const E=Fe(),{proxy:{$q:b}}=E,_=A(null),h=A(!1),M=N(()=>_e(e.anchor,b.lang.rtl)),c=N(()=>_e(e.self,b.lang.rtl)),K=N(()=>e.persistent!==!0),{registerTick:V,removeTick:U}=Ue(),{registerTimeout:O}=qe(),{transitionProps:q,transitionStyle:W}=Qe(e),{localScrollTarget:P,changeScrollEvent:Y,unconfigureScrollTarget:$}=ht(e,g),{anchorEl:R,canShow:z,anchorEvents:T}=wt({showing:h,configureAnchorEl:D}),{show:Z,hide:o}=He({showing:h,canShow:z,handleShow:t,handleHide:a,hideOnRouteChange:K,processOnMount:!0});Object.assign(T,{delayShow:d,delayHide:F});const{showPortal:n,hidePortal:u,renderPortal:s}=Ze(E,_,l,"tooltip");if(b.platform.is.mobile===!0){const f={anchorEl:R,innerRef:_,onClickOutside(I){return o(I),I.target.classList.contains("q-dialog__backdrop")&&nt(I),!0}},B=N(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);H(B,I=>{(I===!0?yt:Se)(f)}),fe(()=>{Se(f)})}function t(f){n(),V(()=>{w=new MutationObserver(()=>r()),w.observe(_.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),r(),g()}),v===void 0&&(v=H(()=>b.screen.width+"|"+b.screen.height+"|"+e.self+"|"+e.anchor+"|"+b.lang.rtl,r)),O(()=>{n(!0),y("show",f)},e.transitionDuration)}function a(f){U(),u(),i(),O(()=>{u(!0),y("hide",f)},e.transitionDuration)}function i(){w!==void 0&&(w.disconnect(),w=void 0),v!==void 0&&(v(),v=void 0),$(),ye(T,"tooltipTemp")}function r(){const f=_.value;R.value===null||!f||kt({el:f,offset:e.offset,anchorEl:R.value,anchorOrigin:M.value,selfOrigin:c.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function d(f){if(b.platform.is.mobile===!0){Ce(),document.body.classList.add("non-selectable");const B=R.value,I=["touchmove","touchcancel","touchend","click"].map(j=>[B,j,"delayHide","passiveCapture"]);pe(T,"tooltipTemp",I)}O(()=>{Z(f)},e.delay)}function F(f){b.platform.is.mobile===!0&&(ye(T,"tooltipTemp"),Ce(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),O(()=>{o(f)},e.hideDelay)}function D(){if(e.noParentEvent===!0||R.value===null)return;const f=b.platform.is.mobile===!0?[[R.value,"touchstart","delayShow","passive"]]:[[R.value,"mouseenter","delayShow","passive"],[R.value,"mouseleave","delayHide","passive"]];pe(T,"anchor",f)}function g(){if(R.value!==null||e.scrollTarget!==void 0){P.value=pt(R.value,e.scrollTarget);const f=e.noParentEvent===!0?r:o;Y(P.value,f)}}function p(){return h.value===!0?ne("div",{...m,ref:_,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",m.class],style:[m.style,W.value],role:"tooltip"},mt(k.default)):null}function l(){return ne(lt,q.value,p)}return fe(i),Object.assign(E.proxy,{updatePosition:r}),s}});class Te{constructor(k,y){ue(this,"info");ue(this,"isRemote",!1);this.info=k,y&&(this.isRemote=y)}}const Ve=e=>(ut("data-v-2d7763ae"),e=e(),ct(),e),Tt={class:"full"},It={class:"container"},Ft={class:"main"},jt=Ve(()=>C("h2",null,"Barcode Reading Benchmark",-1)),Et={class:"project-name"},Vt={class:"flex-container"},At={class:"buttons"},Dt={class:"dialogs"},Nt=Ve(()=>C("div",{class:"text-h6"},"New project",-1)),Ot={class:"text-h6"},Bt={key:0},Lt={href:"javascript:void();"},zt={class:"absolute-full flex flex-center"},Ut={style:{height:"25px"}},qt=st({__name:"IndexPage",setup(e){const k=A(!1),y=A(""),m=A([]),v=A(!1),w=it(),E=A(0),b=A(""),_=A(!1),h=A(""),M=A(""),c=A(null);let K=-1;Ie(async()=>{const t=await Q.getItem("projects");t&&(m.value=JSON.parse(t)),V()});const V=async()=>{const a=await(await fetch("./dataset/projects.json")).text();if(a)try{const i=JSON.parse(a);console.log(i);const r=m.value;for(let d=0;d<i.length;d++){const F=i[d];let D=!1;for(let g=0;g<m.value.length;g++){const p=m.value[g];if(p.info.name===F){D=!0,p.isRemote=!0;break}}if(D===!1){let g=new Te({name:F,images:[],creationTimestamp:0},!0);r.push(g)}}m.value=r,console.log(r)}catch(i){console.log(i)}},U=t=>new Date(t).toLocaleString(),O=()=>{y.value="",k.value=!0},q=()=>{if(W(y.value))alert("Project name duplicated. Please use another name.");else{const t=new Te({name:y.value,creationTimestamp:Date.now(),images:[]});m.value.push(t),P()}},W=t=>{for(let a=0;a<m.value.length;a++)if(m.value[a].info.name===t)return!0;return!1},P=async()=>{let t=[];m.value.forEach(a=>{t.push(a)}),await Q.setItem("projects",JSON.stringify(t))},Y=async t=>{if(M.value!=""){alert("Please wait for the current operation.");return}let a=m.value[t];if(a.isRemote){const i=await Z(a);i&&(a=i)}await s(a),w.push("/project/"+encodeURIComponent(m.value[t].info.name))},$=async()=>{let t=[];for(let a=0;a<m.value.length;a++){const i=m.value[a];a!=K?t.push(i):(await xt(i),i.isRemote&&(i.info.images=[],t.push(i)))}m.value=t,P()},R=()=>{if(c.value){const t="/project/"+encodeURIComponent(c.value.info.name)+"/settings",a=w.resolve(t);window.open(a.href,"_blank")}},z=async()=>{_.value===!0?c.value&&(await we(c.value),alert("Imported")):alert("Please download the text results first.")},T=async t=>{K=t;let a=m.value[t];if(c.value=a,console.log("selected:"),console.log(c),a.isRemote){const i=await Z(a);i&&(a=i,c.value=a),await Q.getItem(a.info.name+":results.zip")?_.value=!0:_.value=!1;let d=0;for(let F=0;F<a.info.images.length;F++){const D=a.info.images[F];await Q.getItem(a.info.name+":image:"+D)&&(d=d+1)}u(d-1)}console.log(a),console.log(m),v.value=!0},Z=async t=>{if(t.info.images.length===0){const a=t.info.name,r=await(await fetch("./dataset/"+a+"/project_manifest.json")).text();return t=JSON.parse(r),t.isRemote=!0,t}},o=async()=>{var i,r;if(h.value==="Downloading..."){alert("Already downloading.");return}h.value="Downloading...";const t=await fetch("./dataset/"+((i=c.value)==null?void 0:i.info.name)+"/results.zip");h.value="";const a=await t.blob();a.size>0&&(await Q.setItem(((r=c.value)==null?void 0:r.info.name)+":results.zip",a),_.value=!0)},n=async()=>{if(c.value){if(h.value==="Downloading..."){alert("Already downloading.");return}h.value="Downloading...";for(let t=0;t<c.value.info.images.length;t++){if(v.value===!1){h.value="";return}const a=c.value.info.images[t];if(!await Q.getItem(c.value.info.name+":image:"+a)){const d=await(await fetch("./dataset/"+c.value.info.name+"/"+a)).blob();if(d.size>0){const F=await bt(d);await Q.setItem(c.value.info.name+":image:"+a,F)}}u(t)}h.value=""}},u=t=>{c.value&&(E.value=parseFloat(((t+1)/c.value.info.images.length).toFixed(2)),b.value=t+1+"/"+c.value.info.images.length)},s=async t=>{if(console.log(t),t.isRemote){if(!await Q.getItem(t.info.name+":results.zip")){M.value="Downloading remote project text result files...";const d=await(await fetch("./dataset/"+t.info.name+"/results.zip")).blob();d.size>0&&await Q.setItem(t.info.name+":results.zip",d)}if(!await et(t)){M.value="Importing remote project...",await we(t);let r=[];m.value.forEach(d=>{d.info.name===t.info.name?r.push(t):r.push(d)}),await Q.setItem("projects",JSON.stringify(r))}M.value=""}};return(t,a)=>(ee(),ie(xe,null,[x(Ne,null,{default:L(()=>[C("div",Tt,[C("div",It,[C("div",Ft,[jt,(ee(!0),ie(xe,null,rt(m.value,(i,r)=>(ee(),ie("div",{class:"project-list-item",key:i.info.name},[C("div",Et,oe(i.info.name),1),C("div",Vt,oe(i.isRemote&&i.info.images.length===0?"remote project":U(i.info.creationTimestamp)),1),C("div",At,[x(de,{label:"Open",onClick:d=>Y(r)},null,8,["onClick"]),x(de,{style:{"margin-left":"5px",color:"black","border-color":"black","background-color":"#fff"},label:"Manage",onClick:d=>T(r)},null,8,["onClick"])])]))),128))]),C("div",null,[C("div",null,[x(de,{outline:"",label:"New Project",onClick:O})]),C("div",null,oe(M.value),1)])])])]),_:1}),C("div",Dt,[x(me,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=i=>k.value=i)},{default:L(()=>[x(ve,null,{default:L(()=>[x(se,null,{default:L(()=>[Nt]),_:1}),x(se,null,{default:L(()=>[x(Pt,{outlined:"",modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=i=>y.value=i),label:"Project Name"},null,8,["modelValue"])]),_:1}),x(ge,{align:"right"},{default:L(()=>[te(x(J,{flat:"",label:"Cancel",color:"primary"},null,512),[[X]]),te(x(J,{flat:"",label:"Okay",color:"primary",onClick:q},null,512),[[X]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(me,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=i=>v.value=i)},{default:L(()=>[x(ve,{style:{"min-width":"300px"}},{default:L(()=>{var i;return[x(se,null,{default:L(()=>{var r;return[C("div",Ot,"Project: "+oe((r=c.value)==null?void 0:r.info.name),1)]}),_:1}),(i=c.value)!=null&&i.isRemote?(ee(),be(se,{key:0},{default:L(()=>[C("div",null,[ae(" Text results"),_.value?(ee(),ie("span",Bt," (downloaded)")):ce("",!0),ae(": "),C("div",null,[x(J,{outline:"",color:"primary",label:"Download",onClick:o})])]),C("div",null,[ae(" Images "),C("a",Lt,[ae(" (help) "),x(Rt,{style:{"font-size":"14px"}},{default:L(()=>[ae(" required if you need to checkout the images or rerun the decoding ")]),_:1})]),ae(": "),x(Ge,{size:"25px",value:E.value,color:"blue"},{default:L(()=>[C("div",zt,[x(Xe,{color:"white","text-color":"black",label:b.value},null,8,["label"])])]),_:1},8,["value"]),x(J,{outline:"",color:"primary",label:"Download",onClick:n})]),C("div",Ut,[C("span",null,oe(h.value),1)])]),_:1})):ce("",!0),x(ge,{align:"right"},{default:L(()=>{var r;return[te(x(J,{flat:"",color:"primary",label:"Settings",onClick:R},null,512),[[X]]),(r=c.value)!=null&&r.isRemote?te((ee(),be(J,{key:0,flat:"",color:"primary",label:"Import results",onClick:z},null,512)),[[X]]):ce("",!0),te(x(J,{flat:"",color:"primary",label:"Delete",onClick:$},null,512),[[X]]),te(x(J,{flat:"",color:"primary",label:"Close"},null,512),[[X]])]}),_:1})]}),_:1})]),_:1},8,["modelValue"])])],64))}});var aa=ot(qt,[["__scopeId","data-v-2d7763ae"]]);export{aa as default};
