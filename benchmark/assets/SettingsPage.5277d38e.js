import{Q as X,b as V,c as B,a as R,d as Y}from"./QSeparator.bdce1bcf.js";import{Q as f}from"./QBtn.b1ca35f6.js";import{Q as Z}from"./QPage.d6723a47.js";import{Q as ee,i as te,j as P,k as ae,C as z}from"./ClosePopup.f5dbd6f3.js";import{_ as se,q as oe,r as v,u as ne,o as le,t as r,O as c,y as t,x as l,P as g,B as i,R as x,S as ie,Q as b,I as m,ad as $,ah as J,U as M,z as ue,A as de}from"./index.7a0cf8c5.js";import{i as w,b as re,D as j,m as ce,n as pe,l as fe}from"./DynamsoftButton.7a9edb77.js";import"./QIcon.f5f0471c.js";import"./use-dark.ecbc65be.js";import"./scroll.fe70ef14.js";const I=S=>(ue("data-v-1915b9c0"),S=S(),de(),S),ve={class:"full"},me={class:"header"},_e={class:"text-h6 fontOswald"},ge={class:"container"},Se=I(()=>i("label",null,"Engine: ",-1)),ye=["onUpdate:modelValue"],he=["value"],Ce=I(()=>i("label",null,"Display Name: ",-1)),ke=["onUpdate:modelValue"],xe={class:"text-grey-8 q-gutter-xs"},be=I(()=>i("div",{class:"text-h6"},"Settings",-1)),we={for:"'settings-' + setting.name"},Qe={key:0},Ve=["id","onUpdate:modelValue"],Ie={key:1},Oe=["onUpdate:modelValue"],De=["value"],Ne=oe({__name:"SettingsPage",setup(S){const y=v(""),O=ne(),u=v([]),h=v([]),Q=v(!1),_=v([]),D=v({});let C=-1;le(async()=>{y.value=O.currentRoute.value.params.name,h.value=w.getEngines(),console.log(y.value);const s=await re(O.currentRoute.value.params.name);u.value=s});const q=()=>{const s=u.value,n={engine:h.value[0],displayName:h.value[0],settings:[]};s.push(n),u.value=s},A=s=>{ce(u.value,s)},L=s=>{pe(u.value,s)},E=s=>{const n=u.value;n.splice(s,1),u.value=n},F=async()=>{const s=JSON.parse(JSON.stringify(u.value));await fe.setItem(y.value+":settings",s),alert("Saved")},T=()=>{C!=-1&&(u.value[C].settings=JSON.parse(JSON.stringify(_.value)))},G=async(s,n)=>{var U;C=s,_.value;const e=w.getSupportedSettings(n),o=w.getDefaultSettings(n),a=u.value[C].settings,N=[];for(let d=a.length-1;d>=0;d--){const k=a[d];let p=!1;for(const W of e)if(k.name===W.name){p=!0;break}p===!1&&a.splice(d,1)}for(const d of e){let k=!1;d.type==="select"&&N.push(d.name);for(const p of a)if(p.name===d.name){k=!0;break}if(!k){const p=(U=o[d.name])!=null?U:"";a.push({name:d.name,value:p,type:d.type})}}_.value=a,K(N,n),Q.value=!0},H=s=>D.value[s],K=async(s,n)=>{const e={};for(const o of s){const a=await w.getSettingOptions(n,o,_.value);e[o]=a}D.value=e};return(s,n)=>(r(),c(g,null,[t(Z,null,{default:l(()=>[i("div",ve,[i("div",me,[i("div",_e,x(y.value),1)]),i("div",ge,[t(X,{bordered:"",class:"rounded-borders"},{default:l(()=>[t(V,{header:""},{default:l(()=>[ie("Barcode Reader Configuration")]),_:1}),(r(!0),c(g,null,b(u.value,(e,o)=>(r(),c("div",{key:o},[t(B,null,{default:l(()=>[t(R,{top:""},{default:l(()=>[t(V,null,{default:l(()=>[Se,m(i("select",{"onUpdate:modelValue":a=>e.engine=a},[(r(!0),c(g,null,b(h.value,a=>(r(),c("option",{key:"config-"+a,value:a},x(a),9,he))),128))],8,ye),[[$,e.engine]])]),_:2},1024),t(V,{lines:"1"},{default:l(()=>[Ce,m(i("input",{type:"text","onUpdate:modelValue":a=>e.displayName=a},null,8,ke),[[J,e.displayName]])]),_:2},1024)]),_:2},1024),t(R,{top:"",side:""},{default:l(()=>[i("div",xe,[t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"arrow_upward",onClick:a=>A(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"arrow_downward",onClick:a=>L(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:a=>E(o)},null,8,["onClick"]),t(f,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"settings",onClick:a=>G(o,e.engine)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),t(Y,{spaced:""})]))),128)),t(B,null,{default:l(()=>[t(j,{label:"Add Configuration",onClick:q}),t(j,{style:{"margin-left":"10px"},label:"Save",onClick:F})]),_:1})]),_:1})])])]),_:1}),t(ee,{modelValue:Q.value,"onUpdate:modelValue":n[1]||(n[1]=e=>Q.value=e)},{default:l(()=>[t(te,null,{default:l(()=>[t(P,null,{default:l(()=>[be]),_:1}),t(P,{class:"q-pt-none"},{default:l(()=>[(r(!0),c(g,null,b(_.value,e=>(r(),c("div",{key:e.name},[i("div",null,[i("label",we,x(e.name+":"),1)]),e.type==="string"?(r(),c("div",Qe,[m(i("textarea",{id:"settings-"+e.name,"onUpdate:modelValue":o=>e.value=o},null,8,Ve),[[J,e.value]])])):M("",!0),e.type==="select"?(r(),c("div",Ie,[m(i("select",{"onUpdate:modelValue":o=>e.value=o},[(r(!0),c(g,null,b(H(e.name),o=>(r(),c("option",{key:"engine-"+o,value:o},x(o),9,De))),128))],8,Oe),[[$,e.value]])])):M("",!0)]))),128))]),_:1}),t(ae,{align:"right"},{default:l(()=>[m(t(f,{flat:"",color:"primary",label:"Save",onClick:n[0]||(n[0]=e=>T())},null,512),[[z]]),m(t(f,{flat:"",color:"primary",label:"Close"},null,512),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var qe=se(Ne,[["__scopeId","data-v-1915b9c0"]]);export{qe as default};
